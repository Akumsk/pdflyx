{"asctime": "2024-11-30 03:32:07", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:07", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:07", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:07", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:07", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 0, 32, 6, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2682, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193749), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A45870E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:07", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x00000207415DE0E0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:08", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:08", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660422481801', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 0, 32, 7, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2683, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x00000207414B2140>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x00000207414F1C10>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x00000207414F1C10>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:10", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:43", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:43", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:43", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:43", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:43", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 0, 32, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2685, supergroup_chat_created=False, text='\u041a\u0430\u043a\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430'), update_id=881193751), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A45870E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:43", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000020741450C70>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:43", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='5e41eccc-6548-42a4-899e-9fadaa522869' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:44", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='5e41eccc-6548-42a4-899e-9fadaa522869'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:44", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='How to assess the BIM maturity level of your company?', additional_kwargs={}, response_metadata={}), AIMessage(content=\"How to assess the BIM maturity level of your company?\\n-----------\\nAssessing the BIM maturity level of your company involves evaluating how well your organization integrates and utilizes BIM processes and technologies in its projects. Here are some steps to guide you through the assessment:\\n\\n1. <b>Evaluate Current Practices</b>: Look at how BIM is currently used in your projects. This includes assessing the extent of BIM adoption across different departments and projects, and understanding how BIM data is managed and shared.\\n\\n2. <b>Use a BIM Maturity Mod... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[27435, 16248, 16742, 44946, 14476, 9542, 34613, 35875, 16742, 56449, 5372, 62731, 14257, 5173, 3114, 9542, 4655, 29619, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:32:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '38', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_b3ddce0174bb2ebf13463fe24f7a224d', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=dE8ryrGTXDecvlId7o.tHS8V7R.0ybDsKTFQAMLL7hQ-1732926764-1.0.1.1-1bqR5iC4s3qyi2Ugq5tPgHkP4cwBkrpqT_tt_401GL4_zZojcwHDiK1.5CsgeImVsfRiRxCVIlK4s... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b3ddce0174bb2ebf13463fe24f7a224d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[27435, 16248, 16742, 44946, 14476, 9542, 34613, 35875, 16742, 56449, 5372, 62731, 14257, 5173, 3114, 9542, 4655, 29619, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:32:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '67', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_c62600a0d63f3eacb79181aa5babb727', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6bdf5cb00b5a6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c62600a0d63f3eacb79181aa5babb727", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[717, 33006, 20, 13, 24, 13, 17, 53677, 1506, 14476, 9542, 1506, 29619, 6856, 18154, 25756, 20346, 2156, 89348, 720, 20, 13, 24, 13, 17, 13, 16, 28599, 87008, 17165, 11562, 50436, 7094, 3865, 5173, 3114, 9542, 16742, 29619, 1506, 18154, 25756, 20346, 2156, 89348, 7740, 18868, 5372, 50807, 40842, 5591, 16331, 6856, 11, 21022, 50945, 59138, 45093, 11122, 19188, 9239, 4655, 720, 5591, 5173, 3114, 9542, 1506, 10693, 18154, 25756, 20346, 2156, 89348, 5927, 11562, 37277, 1506, 10693, 12561, 29256, 44155, 13433, 11047, 20346, 10124, 7740, 81842, 67745, 38098, 79370, 98695, 44786, 46088, 6856, 720, 7094, 48181, 12648, 62731, 25756, 7753, 6578, 8341, 41873, 59921, 7486, 4655, 5524, 12561, 16494, 5372, 9882, 10298, 77738, 49284, 100046, 90457, 67745, 25756, 7753, 6578, 8341, 38822, 6856, 13, 720, 20, 13, 24, 13, 17, 13... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:32:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '142', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998532', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_7c28ae2a9d41da7d64a855289f3234f1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6bdf94ce3b5a6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7c28ae2a9d41da7d64a855289f3234f1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 5037, 33006, 21, 13, 19, 13, 19, 23227, 3114, 9542, 4655, 28114, 15298, 39103, 23311, 12415, 19175, 89159, 1482, 14257, 4898, 80230, 35667, 18482, 13373, 35875, 16742, 18600, 1506, 20812, 9239, 1506, 11047, 7975, 14476, 1840, 7058, 39988, 19175, 14391, 7975, 50506, 220, 508, 11562, 6578, 11, 5524, 6856, 6578, 86610, 36497, 96034, 7753, 10693, 68742, 5524, 6578, 50436, 44786, 5173, 3114, 9542, 5927, 7094, 17461, 55617, 94538, 34943, 18868, 9239, 1482, 12648, 720, 8164, 13337, 7975, 13433, 13, 720, 21, 13, 19, 13, 20, 23784, 35667, 7753, 36352, 40842, 4898, 35682, 6856, 63233, 14391, 16331, 15088, 18154, 21477, 2297, 13337, 1532, 93129, 73181, 41291, 41873, 49899, 18264, 18154, 13373, 1840, 7058, 10124, 17461, 12426, 21708, 20879, 6578, 8341, 53671, 592... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:32:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '135', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999147', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_b4ecc3da770b47e94306079788b2d72c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6bdfd4ef9b5a6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b4ecc3da770b47e94306079788b2d72c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[5538, 33006, 13433, 2233, 13433, 2297, 1506, 72060, 7975, 40251, 50819, 23934, 96573, 7753, 1840, 16331, 6856, 13373, 7952, 2233, 33742, 23297, 39988, 81376, 47805, 1532, 320, 2156, 19619, 2233, 81448, 11, 23934, 18034, 7486, 7753, 4655, 11, 720, 63873, 33742, 23297, 13999, 6735, 20346, 17394, 56857, 44786, 5173, 3114, 9542, 11, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 6856, 705, 86995, 50693, 3865, 50819, 14257, 77911, 20812, 1482, 720, 49899, 6856, 35387, 3865, 10693, 20219, 1506, 14476, 9542, 39900, 35875, 61390, 11, 14257, 4898, 80230, 90705, 22885, 18154, 5927, 2156, 47067, 2156, 21708, 18868, 9239, 17766, 1532, 14257, 1830, 67124, 3114, 9542, 44100, 11, 21022, 37405, 720, 14525, 91216, 47273, 44946, 14476, 9542, 39988, 21923, 12426, 28089, 17165, 482, 18154, 22918, 1532, 5927, 2156, 47067, 2156, 21... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:32:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '81', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998322', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_d83e1e9b90b1f31819d837ece29c136c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6be00b8e0b5a6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d83e1e9b90b1f31819d837ece29c136c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[1591, 33006, 20976, 2297, 47805, 27717, 5173, 3114, 9542, 39900, 64933, 1506, 40842, 6850, 16248, 3114, 1532, 28089, 32062, 34148, 7820, 7753, 24697, 81301, 4898, 34148, 5173, 3114, 9542, 36352, 56449, 13999, 48835, 8341, 4929, 720, 1830, 7975, 14476, 19479, 3865, 19175, 69844, 50506, 220, 21, 11562, 6578, 11, 47353, 14391, 16331, 17165, 40842, 90211, 12648, 6578, 29619, 12507, 78876, 8164, 7975, 21956, 79686, 5524, 55617, 34493, 12507, 69844, 50506, 220, 3101, 720, 6578, 6578, 11, 7740, 19175, 69844, 50506, 220, 605, 11562, 6578, 37405, 55617, 34493, 1532, 14391, 7975, 50506, 220, 3101, 11562, 6578, 13, 720, 21, 13, 21, 13, 17, 13, 18, 35448, 2297, 47805, 27717, 5173, 3114, 9542, 39900, 64933, 1506, 56449, 13999, 7820, 2233, 67124, 18264, 21204, 7820, 90211, 2156, 72952, 29619, 3865, 69471, 14082, 4898, 508... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:32:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998665', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '16ms', 'x-request-id': 'req_a8eefca607c3613bb962763d51a134d6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6be076bf0b5a6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a8eefca607c3613bb962763d51a134d6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 03:32:48. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n12 \\n \\n5.9.2 \u0417\u0430\u0449\u0438\u0442\u0430 \u043f\u043e\u043b\u043e\u0432 \u043f\u043e \u0433\u0440\u0443\u043d\u0442\u0443 \\n5.9.2.1 \u0421\u0442\u044b\u043a\u0438 \u043c\u0435\u0436\u0434\u0443 \u043f\u043b\u0438\u0442\u043e\u0439 \u043f\u043e\u043b\u0430 \u043f\u043e \u0433\u0440\u0443\u043d\u0442\u0443 \u0438 \u0441\u0442\u0435\u043d\u0430\u043c\u0438 \u043f\u043e\u0434\u0432\u0430\u043b\u043e\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0432\u0441\u0435 \u0437\u0430\u0437\u043e\u0440\u044b \\n\u0432 \u043f\u043b\u0438\u0442\u0430\u0445 \u043f\u043e \u0433\u0440\u0443\u043d\u0442\u0443 \u0432 \u043c\u0435\u0441\u0442\u0430\u0445 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430 \u0442\u0440\u0443\u0431 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \\n\u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0433\u0435\u0440\u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:32:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '3445', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793129', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '515ms', 'x-request-id': 'req_89dbfa888a407fa0d12780bd1e69f136', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=PyDjUGDMU0.v2Jl2qfg8H9adLEoU0U9yeQDTWB4yCgs-1732926772-1.0.1.1-aqf9KWRRncEp4xoyVjU5e.iZGeG6gHOmm00iVxEPWxFn_bIX8_VOdoTWDWmq10f.W2nt.L7wUaVDJJZTJBzc0A; path=/; expires=Sat, 30-Nov-24 01:02:52 GMT; domain=.api.o... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_89dbfa888a407fa0d12780bd1e69f136", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:52", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8596398224273091, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:52", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:52", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430\\n\\nLLM Response: \u0417\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430, \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0435\u0441\u043b\u0438 \u0440\u0435\u0447\u044c \u0438\u0434\u0435\u0442 \u043e \u043f\u043b\u0438\u0442\u0435 \u043f\u043e\u043b\u0430 \u043f\u043e \u0433\u0440\u0443\u043d\u0442\u0443, \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432:\\n\\n1. **\u0413\u0435\u0440\u043c\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0442\u044b\u043a\u043e\u0432**: \u0421\u0442\u044b\u043a\u0438 \u043c\u0435\u0436\u0434\u0443 \u043f\u043b\u0438\u0442\u043e\u0439 \u043f\u043e\u043b\u0430 \u0438 \u0441\u0442\u0435\u043d\u0430\u043c\u0438 \u043f\u043e\u0434\u0432\u0430\u043b\u043e\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0437\u0430\u0437\u043e\u0440\u044b \u0432\u043e\u043a\u0440\u0443\u0433 \u0442\u0440\u0443\u0431\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043e\u0432 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0435\u0440\u043c\u0435\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043d\u0435\u0442\u0432\u0435\u0440\u0434\u0435\u044e\u0449\u0438\u0445 \u0433\u0435\u0440\u043c\u0435\u0442\u0438\u043a... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:32:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '979', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799398', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '45ms', 'x-request-id': 'req_76ac78a6ea89974c1ca62d9c6a3dd4dd', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6be26ec215e9e-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_76ac78a6ea89974c1ca62d9c6a3dd4dd", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u0445, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u0434\u043b\u044f \u0433\u0435\u0440\u043c\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0442\u044b\u043a\u043e\u0432 \u043f\u043b\u0438\u0442 \u043f\u043e\u043b\u0430.', '\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430?', '\u041a\u0430\u043a\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u043c\u0435\u0442\u043e\u0434\u044b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0433\u0438\u0434\u0440\u0430\u0432\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0437\u0430\u0442\u0432\u043e\u0440\u043e\u0432 \u0432 \u043f\u043b\u0438\u0442\u0430\u0445 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0433\u0430\u0437\u043e\u0432?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0417\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430, \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0435\u0441\u043b\u0438 \u0440\u0435\u0447\u044c \u0438\u0434\u0435\u0442 \u043e \u043f\u043b\u0438\u0442\u0435 \u043f\u043e\u043b\u0430 \u043f\u043e \u0433\u0440\u0443\u043d\u0442\u0443, \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432:\\n\\n1. <b>\u0413\u0435\u0440\u043c\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0442\u044b\u043a\u043e\u0432</b>: \u0421\u0442\u044b\u043a\u0438 \u043c\u0435\u0436\u0434\u0443 \u043f\u043b\u0438\u0442\u043e\u0439 \u043f\u043e\u043b\u0430 \u0438 \u0441\u0442\u0435\u043d\u0430\u043c\u0438 \u043f\u043e\u0434\u0432\u0430\u043b\u043e\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0437\u0430\u0437\u043e\u0440\u044b \u0432\u043e\u043a\u0440\u0443\u0433 \u0442\u0440\u0443\u0431\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043e\u0432 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0435\u0440\u043c\u0435\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043d\u0435\u0442\u0432\u0435\u0440\u0434\u0435\u044e\u0449\u0438\u0445 \u0433\u0435\u0440\u043c\u0435\u0442\u0438\u043a\u043e\u0432.\\n\\n2. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0418\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434 \u0431\u0435\u0442\u043e\u043d\u043d\u043e\u0439 \u043f\u043b\u0438\u0442\u043e\u0439 \u043f\u043e\u043b\u0430 \u0434\u043b\u044f \u0437\u0430\u0449\u0438\u0442\u044b \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0415\u0441\u043b\u0438 \u043d\u0430 \u0431\u0435\u0442\u043e\u043d\u043d\u043e\u0439 \u043f\u043b\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435 \u043f\u043e\u043b\u0430, \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0432\u0435\u0440\u0445 \u0431\u0435\u0442\u043e\u043d\u043d\u043e\u0439 \u043f\u043b\u0438\u0442\u044b. \u041f\u0440\u0438 \u044d\u0442\u043e\u043c \u0441\u0442\u044b\u043a\u0438 \u043f\u0430\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0433\u0435\u0440\u043c\u0435\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b, \u0435\u0441\u043b\u0438 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0432\u0435\u0440\u0445 \u043f\u043b\u0438\u0442\u044b.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u0430\u0432\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u0442\u0432\u043e\u0440\u044b</b>: \u0414\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0433\u0430\u0437\u043e\u0432 \u043e\u0442\u0432\u0435\u0440\u0441\u0442\u0438\u044f \u0434\u043b\u044f \u0441\u0442\u043e\u043a\u0430 \u0432\u043e\u0434\u044b \u0432 \u043f\u043b\u0438\u0442\u0430\u0445 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u044b \u0433\u0438\u0434\u0440\u0430\u0432\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0437\u0430\u0442\u0432\u043e\u0440\u0430\u043c\u0438.\\n\\n\u042d\u0442\u0438 \u043c\u0435\u0440\u044b \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u0437\u0430\u0449\u0438\u0442\u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438 \u0438 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0433\u0430\u0437\u043e\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u043c\u043e\u0433\u0430\u044e\u0442 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0434\u043e\u043b\u0433\u043e\u0432... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='5e41eccc-6548-42a4-899e-9fadaa522869'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:32:54", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659046489312', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 0, 32, 54, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=19, offset=123, type=<MessageEntityType.BOLD>), MessageEntity(length=13, offset=334, type=<MessageEntityType.BOLD>), MessageEntity(length=22, offset=657, type=<MessageEntityType.BOLD>), MessageEntity(length=11, offset=973, type=<MessageEntityType.BOT_COMMAND>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=Fa... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x0000020741467350>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='27b31dc5-02be-421a-b73b-0648627419fb' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='27b31dc5-02be-421a-b73b-0648627419fb'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430?'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0417\u0430\u0449\u0438\u0442\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0443 \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430, \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0435\u0441\u043b\u0438 \u0440\u0435\u0447\u044c \u0438\u0434\u0435\u0442 \u043e \u043f\u043b\u0438\u0442\u0435 \u043f\u043e\u043b\u0430 \u043f\u043e \u0433\u0440\u0443\u043d\u0442\u0443, \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432:\\n\\n1. <b>\u0413\u0435\u0440\u043c\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0442\u044b\u043a\u043e\u0432</b>: \u0421\u0442\u044b\u043a\u0438 \u043c\u0435\u0436\u0434\u0443 \u043f\u043b\u0438\u0442\u043e\u0439 \u043f\u043e\u043b\u0430 \u0438 \u0441\u0442\u0435\u043d\u0430\u043c\u0438 \u043f\u043e\u0434\u0432\u0430\u043b\u043e\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0437\u0430\u0437\u043e\u0440\u044b \u0432\u043e\u043a\u0440\u0443\u0433 \u0442\u0440\u0443\u0431\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043e\u0432 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0435\u0440\u043c\u0435\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043d\u0435\u0442\u0432\u0435\u0440\u0434\u0435\u044e\u0449\u0438\u0445 \u0433\u0435\u0440\u043c\u0435\u0442\u0438\u043a\u043e\u0432.\\n\\n2. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0418\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0434 \u0431\u0435\u0442\u043e\u043d\u043d\u043e\u0439 \u043f\u043b\u0438\u0442\u043e\u0439 \u043f\u043e\u043b\u0430 \u0434\u043b\u044f \u0437\u0430\u0449\u0438\u0442\u044b \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0415\u0441\u043b\u0438 \u043d\u0430 \u0431\u0435\u0442\u043e\u043d\u043d\u043e\u0439 \u043f\u043b\u0438\u0442\u0435 \u0443\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435 \u043f\u043e\u043b\u0430, \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0432\u0435\u0440\u0445... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741510680>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 40842, 31101, 4329, 14476, 44938, 25756, 48262, 2233, 1482, 41873, 96485, 15458, 17766, 34613, 96573, 7753, 1840, 16331, 20440, 5173, 3114, 9542, 4655, 29619, 1506, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:34:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '128', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999968', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_057777b801ca85149d8365def72a342a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c00f5fa7e78f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_057777b801ca85149d8365def72a342a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:11", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741510680>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 40842, 31101, 4329, 14476, 44938, 25756, 48262, 2233, 1482, 41873, 96485, 15458, 17766, 34613, 96573, 7753, 1840, 16331, 20440, 5173, 3114, 9542, 4655, 29619, 1506, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:34:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '63', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999968', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_63bde12076d59a9df959491652c10258', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c0131c28e78f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_63bde12076d59a9df959491652c10258", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741510680>, 'json_data': {'input': [[74598, 96256, 1506, 220, 7994, 23934, 220, 14815, 33006, 49899, 17766, 67124, 2233, 17766, 1840, 10589, 32062, 85864, 13, 23784, 12561, 13337, 28089, 94962, 90226, 1506, 1532, 93129, 73181, 12561, 16494, 5372, 94975, 12561, 35111, 5372, 34613, 7952, 2233, 5372, 38657, 13, 720, 868, 13, 1032, 23784, 330, 10693, 7975, 9706, 44786, 1, 55617, 94538, 10693, 18034, 35297, 7094, 24697, 19190, 39988, 5173, 3114, 9542, 4655, 11, 21022, 50945, 59138, 13373, 14257, 6148, 84350, 53671, 22918, 1532, 5524, 29256, 2233, 4329, 17394, 18999, 34943, 330, 6735, 5372, 16742, 720, 5591, 25756, 20346, 2156, 51627, 1, 46177, 13373, 20346, 17394, 39988, 18868, 5372, 16742, 34943, 9239, 56999, 18999, 19175, 89159, 1482, 14257, 52037, 18226, 11320, 5591, 18482, 84714, 1532, 15458, 39127, 44065, 720, 15752, 48262, 2233, 1482, 12426, 8... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:34:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '103', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998826', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_e806c552176d3dba3b0ec7ee587c2f68', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c0156efde78f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e806c552176d3dba3b0ec7ee587c2f68", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741510680>, 'json_data': {'input': [[38214, 48262, 2233, 1482, 41873, 96485, 15458, 12182, 23934, 5173, 61498, 38438, 44786, 18600, 3865, 3114, 17766, 44786, 96573, 7753, 1840, 16331, 6856, 93129, 73181, 14257, 6735, 22911, 28089, 18482, 93129, 72119, 16494, 1840, 198, 33793, 23630, 14082, 50807, 25, 69471, 3114, 1532, 28089, 14332, 10298, 7820, 2233, 12507, 15088, 46177, 13373, 10693, 3114, 37277, 6856, 11, 37405, 4898, 3114, 1532, 28089, 14332, 10298, 18600, 3865, 3114, 17766, 6856, 29619, 81448, 12648, 64880, 198, 4898, 3114, 1532, 4329, 64880, 7820, 25756, 20346, 2156, 1830, 6856, 7486, 2156, 72952, 81376, 47805, 91459, 46177, 37405, 4898, 3114, 1532, 28089, 14332, 10298, 18600, 3865, 3114, 17766, 6856, 5524, 29619, 81448, 12648, 6578, 48446, 1532, 33742, 4655, 6578, 198, 2297, 39865, 10298, 7820, 25756, 20346, 2156, 1830, 6856, 7486, 2156,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:34:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '78', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998889', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_dda8ce73300e0b72d7247865d6eb866f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c0192c01e78f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dda8ce73300e0b72d7247865d6eb866f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741510680>, 'json_data': {'input': [[2970, 33006, 5591, 2297, 47295, 7820, 13373, 20346, 17394, 2156, 72952, 5927, 35387, 3865, 10693, 3865, 13, 51418, 67124, 39865, 41873, 96485, 15458, 17766, 44065, 5173, 3114, 9542, 4655, 46177, 96573, 4655, 5524, 6850, 16248, 3114, 1532, 5372, 12648, 6578, 35875, 1482, 10298, 720, 19916, 17461, 15752, 1840, 46177, 29619, 1840, 68506, 23311, 61498, 6856, 16742, 5173, 61498, 17165, 11562, 14837, 38521, 72060, 7975, 40251, 29893, 50945, 59138, 55813, 1840, 18154, 13373, 20346, 17394, 39988, 720, 9136, 1506, 14476, 27055, 18868, 79686, 20879, 5927, 35387, 3865, 10693, 29256, 2233, 17766, 1840, 10589, 39280, 320, 2297, 6578, 13, 220, 24, 13, 18, 13, 17, 570, 720, 24, 13, 17, 13, 17, 13, 18, 59842, 1830, 67124, 56892, 14257, 6148, 84350, 90877, 13373, 20346, 17394, 39988, 18868, 79686, 5927, 11562, 37277, 1506, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:34:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '78', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999006', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_ab7e6afe7aa74076853250f1cf3f4817', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c01b9f2ae78f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ab7e6afe7aa74076853250f1cf3f4817", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741510680>, 'json_data': {'input': [[74598, 96256, 1506, 220, 9079, 23934, 220, 14815, 33006, 975, 13, 19, 13, 605, 23227, 9706, 50223, 3865, 5927, 25756, 20346, 2156, 1830, 6856, 34148, 21477, 67186, 36352, 320, 1830, 35682, 60009, 12182, 8, 12561, 13337, 28089, 1482, 19916, 1840, 53628, 22911, 15458, 17766, 39900, 96573, 7753, 1840, 97065, 720, 41036, 13404, 73181, 81376, 86630, 14009, 29893, 84714, 23630, 14082, 50807, 11, 7740, 2297, 52520, 1506, 90457, 16494, 1840, 21923, 89554, 6856, 27717, 5927, 11047, 35682, 12426, 50506, 5173, 61613, 13337, 7740, 45916, 9706, 6856, 23934, 720, 6578, 8131, 7753, 1840, 97065, 30889, 47680, 9542, 44100, 13, 720, 975, 13, 19, 13, 806, 67891, 1840, 53628, 22911, 15458, 17766, 44065, 45916, 16742, 94071, 96573, 7753, 1840, 97065, 30889, 47680, 18999, 12561, 13337, 28089, 1482, 19916, 1840, 53628, 22911, 1545... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:34:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '143', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998703', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_97b4137494fac49659837feec2f73884', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c01f9b4ee78f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_97b4137494fac49659837feec2f73884", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 03:34:14. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 121 \u0438\u0437 239 \\n \\n\u0432\u043e\u0434\u043e\u043d\u0435\u043f\u0440\u043e\u043d\u0438\u0446\u0430\u0435\u043c\u043e\u0441\u0442\u0438. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u043f\u0440\u0438\u0441\u0442\u0435\u043d\u043d\u044b\u0439 \u0434\u0440\u0435\u043d\u0430\u0436. \\n15.13 \u0412 \"\u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0445\" \u0448\u0432\u0430\u0445 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043d\u043e\u0439 \u043f\u043b\u0438\u0442\u044b, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u043a\u0435 \u0435\u0435 \u0441\u043e\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u0441\u043e \"\u0441\u0442\u0435\u043d\u043e\u0439 \\n\u0432 \u0433\u0440\u0443\u043d\u0442\u0435\" \u0438\u043b\u0438 \u043d\u0430\u0440\u0443\u0436\u043d... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:34:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '5153', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793423', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '493ms', 'x-request-id': 'req_ab77c063762584376671ed03592645f8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c023b9b6ee10-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ab77c063762584376671ed03592645f8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:20", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8668836704465603, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:20", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:20", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430?\\n\\nLLM Response: \u0412\u044b\u0431\u043e\u0440 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438, \u0442\u0438\u043f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438 \u0431\u044e\u0434\u0436\u0435\u0442. \u0412\u043e\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. **\u0422\u0438\u043f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438**:\\n   - \u0415\u0441\u043b\u0438 \u043f\u043b\u0438\u0442\u0430 \u043f\u043e\u043b\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:34:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1702', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799025', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '73ms', 'x-request-id': 'req_6b057b5a16e1e34598294a5700886389', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c0470f2cee10-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6b057b5a16e1e34598294a5700886389", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:22", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0438\u043f\u0430\u0445 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0438 \u0438\u0445 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430\u0445, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043d\u044f\u0442\u044c, \u043a\u0430\u043a\u0438\u0435 \u0438\u0437 \u043d\u0438\u0445 \u043b\u0443\u0447\u0448\u0435 \u043f\u043e\u0434\u043e\u0439\u0434\u0443\u0442 \u0434\u043b\u044f \u0432\u0430\u0448\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0438\u0435 \u0445\u0438\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u0430 \u043c\u043e\u0433\u0443\u0442 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e, \u0438 \u043a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c\u044e?', '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442 \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u0438\u0445 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0438 \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:22", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0412\u044b\u0431\u043e\u0440 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438, \u0442\u0438\u043f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438 \u0431\u044e\u0434\u0436\u0435\u0442. \u0412\u043e\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u0422\u0438\u043f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438</b>:\\n\u2022 \u0415\u0441\u043b\u0438 \u043f\u043b\u0438\u0442\u0430 \u043f\u043e\u043b\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u0438, \u0441\u0442\u043e\u0438\u0442 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c\u044e \u043a \u0432\u043e\u0434\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e\u043b\u0438\u043c\u0435\u0440\u043d\u044b\u0435 \u0438\u043b\u0438 \u0431\u0438\u0442\u0443\u043c\u043d\u044b\u0435 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u044b.\\n\u2022 \u0414\u043b\u044f \u043f\u043e\u0434\u0437\u0435\u043c\u043d\u044b\u0445 \u0447\u0430\u0441\u0442\u0435\u0439 \u0437\u0434\u0430\u043d\u0438\u0439, \u0433\u0434\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u0441 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u043c\u0438 \u0432\u043e\u0434\u0430\u043c\u0438, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e\u0442\u0441\u044f \u0440\u0443\u043b\u043e\u043d\u043d\u044b\u0435 \u0438\u043b\u0438 \u0436\u0438\u0434\u043a\u0438\u0435 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n\\n2. <b>\u041f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u0438 \u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c \u043a \u043c\u0435\u0445\u0430\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f\u043c</b>:\\n\u2022 \u0412 \u043c\u0435\u0441\u0442\u0430\u0445 \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439 \u0438\u043b\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u043c\u0438 \u043c\u0435\u0445\u0430\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f\u043c\u0438, \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043e\u0442\u0434\u0430\u0432\u0430\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0447\u043d\u044b\u043c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c, \u0442\u0430\u043a\u0438\u043c \u043a\u0430\u043a \u0431\u0438\u0442\u0443\u043c\u043d\u043e-\u043f\u043e\u043b\u0438\u043c\u0435\u0440\u043d\u044b\u0435 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u044b.\\n\\n3. <b>\u0423\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u0445\u0438\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\u043c</b>:\\n\u2022 \u0415\u0441\u043b\u0438 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u0441 \u0430\u0433\u0440\u0435\u0441\u0441\u0438\u0432\u043d\u044b\u043c\u0438 \u0445\u0438\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0432\u0435\u0449\u0435\u0441\u0442\u0432\u0430\u043c\u0438, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u0441\u043e\u043e\u0442\u0432\u0435\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:22", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:22", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='27b31dc5-02be-421a-b73b-0648627419fb'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:22", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:23", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:34:23", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:30", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:30", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 0, 35, 29, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2688, supergroup_chat_created=False, text='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443'), update_id=881193753), <telegram.ext._callbackcontext.CallbackContext object at 0x0000020741A609F0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000020741982A70>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:30", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='47c388ef-8bae-41dc-98ca-ce38ed209713' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='47c388ef-8bae-41dc-98ca-ce38ed209713'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430?\\n-----------\\n\u0412\u044b\u0431\u043e\u0440 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u043f\u043b\u0438\u0442\u044b \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438, \u0442\u0438\u043f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438 \u0431\u044e\u0434\u0436\u0435\u0442. \u0412\u043e\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u0422\u0438\u043f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438</b>:\\n\u2022 \u0415\u0441\u043b\u0438 \u043f\u043b\u0438\u0442\u0430 \u043f\u043e\u043b\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u0438, \u0441\u0442\u043e\u0438\u0442 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c\u044e \u043a \u0432\u043e\u0434\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e\u043b\u0438\u043c\u0435\u0440\u043d\u044b\u0435 \u0438\u043b\u0438 \u0431\u0438\u0442\u0443\u043c\u043d\u044b\u0435 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u044b.\\n\u2022 \u0414\u043b\u044f \u043f\u043e\u0434\u0437\u0435\u043c\u043d\u044b\u0445 \u0447\u0430\u0441\u0442\u0435\u0439 \u0437\u0434\u0430\u043d\u0438\u0439, \u0433\u0434\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u0441 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FC5E0>, 'json_data': {'input': [[19871, 4898, 54570, 35875, 1482, 33742, 25756, 20346, 2156, 1830, 6856, 17165, 6850, 7486, 23630, 18264, 13373, 18868, 5372, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:35:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '44', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_074b6cd4c49927902ce9bbd288b6b5e2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c204cb19efcf-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_074b6cd4c49927902ce9bbd288b6b5e2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FC220>, 'json_data': {'input': [[19871, 4898, 54570, 35875, 1482, 33742, 25756, 20346, 2156, 1830, 6856, 17165, 6850, 7486, 23630, 18264, 13373, 18868, 5372, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:35:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '108', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_870f0f73ea3a11bba8cefc1e994e7a28', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c2070c98efcf-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_870f0f73ea3a11bba8cefc1e994e7a28", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FC220>, 'json_data': {'input': [[845, 33006, 720, 1506, 482, 6850, 41873, 12561, 22885, 14525, 320, 10124, 16331, 17165, 8, 78876, 8164, 7975, 21956, 5372, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 26, 14391, 482, 6850, 41873, 12561, 22885, 14525, 320, 10124, 16331, 17165, 8, 13373, 720, 3865, 24803, 79862, 25756, 20346, 2156, 44613, 46177, 6850, 1840, 59138, 720, 34604, 13810, 35297, 15088, 220, 21, 13, 18, 482, 35448, 8164, 78746, 27717, 12561, 14837, 17766, 6856, 320, 10124, 16331, 15088, 8, 28114, 15298, 39103, 23311, 4329, 5524, 53280, 12394, 4898, 16742, 5927, 18034, 35297, 7094, 24697, 19190, 77495, 720, 6735, 5372, 3865, 33006, 34604, 13810, 35297, 15088, 220, 21, 13, 19, 482, 35448, 8164, 78746, 27717, 12561, 14837, 17766, 6856, 320, 10124, 16331, 15088, 8, 28114, 15298, 39103, 23311, 4329, 13373, 46339, 92... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:35:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '112', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999848', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_a6b091c39246e604c9386ab24b70e1e0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c209ae37efcf-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a6b091c39246e604c9386ab24b70e1e0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FC220>, 'json_data': {'input': [[717, 33006, 20, 13, 24, 13, 17, 53677, 1506, 14476, 9542, 1506, 29619, 6856, 18154, 25756, 20346, 2156, 89348, 720, 20, 13, 24, 13, 17, 13, 16, 28599, 87008, 17165, 11562, 50436, 7094, 3865, 5173, 3114, 9542, 16742, 29619, 1506, 18154, 25756, 20346, 2156, 89348, 7740, 18868, 5372, 50807, 40842, 5591, 16331, 6856, 11, 21022, 50945, 59138, 45093, 11122, 19188, 9239, 4655, 720, 5591, 5173, 3114, 9542, 1506, 10693, 18154, 25756, 20346, 2156, 89348, 5927, 11562, 37277, 1506, 10693, 12561, 29256, 44155, 13433, 11047, 20346, 10124, 7740, 81842, 67745, 38098, 79370, 98695, 44786, 46088, 6856, 720, 7094, 48181, 12648, 62731, 25756, 7753, 6578, 8341, 41873, 59921, 7486, 4655, 5524, 12561, 16494, 5372, 9882, 10298, 77738, 49284, 100046, 90457, 67745, 25756, 7753, 6578, 8341, 38822, 6856, 13, 720, 20, 13, 24, 13, 17, 13... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:35:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '108', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998532', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_e8eda8043926a84ec798f0379175df14', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c20bef62efcf-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e8eda8043926a84ec798f0379175df14", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FC220>, 'json_data': {'input': [[21, 53677, 1506, 14476, 9542, 34613, 35875, 16742, 18600, 3865, 3114, 17766, 39988, 7820, 24803, 11320, 23934, 45916, 8341, 3114, 22885, 720, 15752, 28086, 40231, 2355, 720, 15, 11, 2397, 49526, 720, 22, 36479, 78746, 8164, 34082, 25756, 11320, 40251, 34613, 7820, 2233, 18437, 34613, 2355, 720, 15, 11, 22, 49526, 720, 23, 36479, 78746, 8164, 34082, 5524, 1840, 11320, 4898, 8131, 34613, 2355, 720, 15, 11, 21, 49526, 720, 24, 80798, 67222, 6856, 13433, 37405, 2233, 9706, 12648, 6578, 7820, 24697, 2156, 10298, 14391, 12394, 4655, 6578, 2355, 720, 15, 11, 1774, 49526, 720, 605, 35448, 4898, 2233, 18437, 13433, 5524, 1840, 11320, 4898, 8131, 44858, 11047, 10298, 13999, 12, 2297, 7753, 36497, 2355, 720, 15, 11, 22, 49526, 720, 806, 35448, 4898, 2233, 18437, 13433, 23934, 5591, 37277, 90877, 36497, 14391, 12394, 36... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:35:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '128', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999665', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_f8baae77b43f52e45f1619f3197aa8e3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c20e78d0efcf-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f8baae77b43f52e45f1619f3197aa8e3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FC220>, 'json_data': {'input': [[1114, 33006, 720, 34604, 13810, 35297, 15088, 220, 21, 13, 20, 482, 35448, 8164, 78746, 27717, 14391, 16331, 15088, 28114, 15298, 39103, 23311, 4329, 13373, 46339, 9239, 77495, 7952, 23630, 36352, 11, 14257, 82941, 5372, 77495, 13373, 14257, 6735, 49907, 720, 19916, 35297, 7094, 24697, 19190, 39988, 18868, 79686, 720, 21, 13, 17, 13, 23, 13, 18, 81529, 39244, 4655, 7952, 7753, 33742, 4329, 2156, 39900, 7820, 17721, 13433, 2297, 1506, 28114, 15298, 39103, 23311, 12415, 11, 46339, 1840, 22911, 90457, 50306, 21204, 13373, 14391, 8341, 17766, 46177, 720, 4898, 80230, 36352, 11, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 23934, 15752, 13337, 6856, 14009, 29893, 23934, 21923, 67186, 28241, 10693, 21022, 2156, 1830, 13810, 67124, 23311, 4898, 50807, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 6856, 13, 720, 250... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:35:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '130', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999527', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_fdd8e6b681b659e8d0a2eb3d33891f05', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c214cc4defcf-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fdd8e6b681b659e8d0a2eb3d33891f05", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 03:35:34. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n16 \\n \\n \\n\u0430 - \u043d\u0438\u0437 \u043f\u0440\u043e\u0433\u043e\u043d\u0430 (\u0431\u0430\u043b\u043a\u0438) \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d \u043d\u0430\u0434 \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u0433\u0440\u0443\u043d\u0442\u0430; \u0431 - \u043d\u0438\u0437 \u043f\u0440\u043e\u0433\u043e\u043d\u0430 (\u0431\u0430\u043b\u043a\u0438) \u043d\u0430 \\n\u0443\u0440\u043e\u0432\u043d\u0435 \u0433\u0440\u0443\u043d\u0442\u0430 \u0438\u043b\u0438 \u043d\u0438\u0436\u0435 \\n\u0420\u0438\u0441\u0443\u043d\u043e\u043a 6.3 - \u041e\u043f\u0438\u0440\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u043e\u043d\u043e\u0432 (\u0431\u0430\u043b\u043e\u043a) \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f \u0441 \u0437\u0430\u0434\u0435\u043b\u043a\u043e\u0439 \u0432 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043d\u0443\u044e \\n\u0441\u0442\u0435\u043d\u0443 \\n \\n\u0420\u0438\u0441\u0443... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:35:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '3147', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '795094', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '367ms', 'x-request-id': 'req_26edc62321117e6dd22a8251fec8dce5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c2178ee0efcb-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_26edc62321117e6dd22a8251fec8dce5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:37", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8537683431088234, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:37", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:37", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443\\n\\nLLM Response: \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438, \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0441\u0442\u0435\u043d\u044b \u0438 \u0442\u0438\u043f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0439 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:\\n\\n1. **\u041e\u0434\u0438\u043d \u0441\u043b\u043e\u0439**: \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u0441\u0442\u0435\u043d, \u0435\u0441\u043b\u0438 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0432 \u0445\u043e\u0440\u043e\u0448\u0435\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 00:35:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '666', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799374', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '46ms', 'x-request-id': 'req_ca89ca706663f229a59fc3bc4b41cbfe', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea6c22dea5fefcb-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ca89ca706663f229a59fc3bc4b41cbfe", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:38", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0438\u043f\u0430\u0445 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u0438 \u0438\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0435\u0439.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0441\u0442\u0435\u043d\u044b \u043f\u0435\u0440\u0435\u0434 \u043d\u0430\u043d\u0435\u0441\u0435\u043d\u0438\u0435\u043c \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438.', '\u041a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0443 \u043d\u0430 \u0441\u0442\u0435\u043d\u044b \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0435\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438, \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0441\u0442\u0435\u043d\u044b \u0438 \u0442\u0438\u043f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0439 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:\\n\\n1. <b>\u041e\u0434\u0438\u043d \u0441\u043b\u043e\u0439</b>: \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u0441\u0442\u0435\u043d, \u0435\u0441\u043b\u0438 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0432 \u0445\u043e\u0440\u043e\u0448\u0435\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0430.\\n\\n2. <b>\u0414\u0432\u0430 \u0441\u043b\u043e\u044f</b>: \u0415\u0441\u043b\u0438 \u0441\u0442\u0435\u043d\u0430 \u0438\u043c\u0435\u0435\u0442 \u043f\u043e\u0440\u0438\u0441\u0442\u0443\u044e \u0438\u043b\u0438 \u0441\u0438\u043b\u044c\u043d\u043e \u0432\u043f\u0438\u0442\u044b\u0432\u0430\u044e\u0449\u0443\u044e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c, \u0438\u043b\u0438 \u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u0430\u0434\u0433\u0435\u0437\u0438\u044e \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043d\u0430\u043d\u0435\u0441\u0435\u043d\u0438\u044f \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f, \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430\u043d\u0435\u0441\u0435\u043d\u0438\u0435 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0441\u043b\u043e\u044f.\\n\\n3. <b>\u0421\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>: \u0412 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u0438 \u0438\u043b\u0438 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0433\u0438\u043f\u0441\u043e\u043a\u0430\u0440\u0442\u043e\u043d\u0430 \u0438\u043b\u0438 \u043d\u043e\u0432\u044b\u0445 \u043e\u0448\u0442\u0443\u043a\u0430\u0442\u0443\u0440\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0435\u0439) \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u043d\u0430\u043d\u0435\u0441\u0435\u043d\u0438\u044e \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0434\u043b\u044f \u043b\u0443\u0447\u0448\u0435\u0439 \u0437\u0430\u0449\u0438\u0442\u044b \u0438 \u0430\u0434\u0433\u0435\u0437\u0438\u0438.\\n\\n\u041f\u0435\u0440\u0435\u0434 \u043d\u0430\u043d\u0435\u0441\u0435\u043d\u0438\u0435\u043c \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u0441\u0442\u043e\u0438\u0442 \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u043c\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u043d\u0438 \u043c\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:38", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:39", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='47c388ef-8bae-41dc-98ca-ce38ed209713'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:39", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:39", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 03:35:39", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 04:10:54", "name": "telegram.ext.Application", "levelname": "ERROR", "message": "No error handlers are registered, logging exception.", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 647, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4421, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 617, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 351, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 646, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-5081"}
{"asctime": "2024-11-30 04:10:55", "name": "telegram.ext.Application", "levelname": "ERROR", "message": "No error handlers are registered, logging exception.", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 647, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4421, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 617, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 351, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 646, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-5084"}
{"asctime": "2024-11-30 06:22:46", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 06:22:46", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 06:22:46", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 3, 22, 45, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2690, supergroup_chat_created=False, text='/start'), update_id=881193754), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4B646E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 06:22:46", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000020741323810>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 06:22:46", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 06:22:46", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 06:22:46", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:08", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:09", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:09", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:09", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/status'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:09", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: status with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 5, 22, 7, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=7, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2692, supergroup_chat_created=False, text='/status'), update_id=881193755), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4586F90>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:09", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: status with result: <coroutine object BotHandlers.status at 0x000002074132A110>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:12", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 7 of document '\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 446.1325800.2019 .pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:13", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 86 of document '\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0421\u041f 20.13330.2016.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:13", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 1 of document '\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:18", "name": "handlers", "levelname": "INFO", "message": "Provided status to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 08:22:18", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:14:06", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:14:06", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:14:06", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 14, 5, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2694, supergroup_chat_created=False, text='/start'), update_id=881193756), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4A720B0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:14:06", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x00000207413235B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:14:06", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:14:06", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:14:06", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:11", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: \u0415\u0432\u0433\u0435\u043d\u0438\u0439 \u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "DEBUG", "message": "Initialized language for user_id=317522179: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=317522179, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', type=<ChatType.PRIVATE>, username='profyuristy'), date=datetime.datetime(2024, 11, 30, 7, 32, 10, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, is_bot=False, is_premium=True, language_code='ru', last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', username='profyuristy'), group_chat_created=False, message_id=2696, supergroup_chat_created=False, text='/start'), update_id=881193757), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4A72CF0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x00000207413235B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:12", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=317522179, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:30", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:30", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:30", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=317522179, message='/language'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: language with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', type=<ChatType.PRIVATE>, username='profyuristy'), date=datetime.datetime(2024, 11, 30, 7, 32, 29, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=9, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, is_bot=False, is_premium=True, language_code='ru', last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', username='profyuristy'), group_chat_created=False, message_id=2698, supergroup_chat_created=False, text='/language'), update_id=881193758), <telegram.ext._callbackcontext.CallbackContext object at 0x0000020741A61860>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: language with result: <coroutine object BotHandlers.language at 0x00000207419CB010>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:31", "name": "handlers", "levelname": "INFO", "message": "Prompted language selection for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:31", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=317522179, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:32", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:33", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:33", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:33", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=317522179, message='set_language:Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:33", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(callback_query=CallbackQuery(chat_instance='4705628935501639390', data='set_language:Russian', from_user=User(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, is_bot=False, is_premium=True, language_code='ru', last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', username='profyuristy'), id='1363747378067222074', message=Message(channel_chat_created=False, chat=Chat(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', type=<ChatType.PRIVATE>, username='profyuristy'), date=datetime.datetime(2024, 11, 30, 7, 32, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2699, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:33", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x0000020741464D50>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:33", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'Russian' for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:33", "name": "handlers", "levelname": "INFO", "message": "User_id=317522179 set language to 'Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:33", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=317522179, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:44", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=317522179, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', type=<ChatType.PRIVATE>, username='profyuristy'), date=datetime.datetime(2024, 11, 30, 7, 32, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, is_bot=False, is_premium=True, language_code='ru', last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', username='profyuristy'), group_chat_created=False, message_id=2701, supergroup_chat_created=False, text='/start'), update_id=881193760), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4586F90>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x00000207413235B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:44", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:45", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:45", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=317522179, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:59", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:59", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:59", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:59", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=317522179, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:59", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', type=<ChatType.PRIVATE>, username='profyuristy'), date=datetime.datetime(2024, 11, 30, 7, 32, 58, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, is_bot=False, is_premium=True, language_code='ru', last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', username='profyuristy'), group_chat_created=False, message_id=2703, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193761), <telegram.ext._callbackcontext.CallbackContext object at 0x0000020741A60D00>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:32:59", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x00000207419E55A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:00", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:00", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=317522179, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=317522179, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(callback_query=CallbackQuery(chat_instance='4705628935501639390', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, is_bot=False, is_premium=True, language_code='ru', last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', username='profyuristy'), id='1363747375359043181', message=Message(channel_chat_created=False, chat=Chat(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', type=<ChatType.PRIVATE>, username='profyuristy'), date=datetime.datetime(2024, 11, 30, 7, 32, 59, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2704, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_d... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x00000207414B2400>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x00000207A4B46390>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x00000207A4B46390>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:05", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:05", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:05", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:05", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=317522179, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=317522179, message='\u043e \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0430\u043a\u0442\u0430\u0445'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', type=<ChatType.PRIVATE>, username='profyuristy'), date=datetime.datetime(2024, 11, 30, 7, 33, 29, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, is_bot=False, is_premium=True, language_code='ru', last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', username='profyuristy'), group_chat_created=False, message_id=2706, supergroup_chat_created=False, text='\u043e \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0430\u043a\u0442\u0430\u0445'), update_id=881193763), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4B646E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x00000207A4A9E110>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='30c40aa0-d56f-4907-9c66-8f36e590452c' for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='30c40aa0-d56f-4907-9c66-8f36e590452c'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207A4B46390>, '\u043e \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0430\u043a\u0442\u0430\u0445'), kwargs: {'chat_history': [HumanMessage(content='\u043e \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0430\u043a\u0442\u0430\u0445', additional_kwargs={}, response_metadata={})]}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FCC20>, 'json_data': {'input': [[1482, 6850, 32330, 8131, 28089, 44786, 86430, 44613, 10693]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Sat, 30 Nov 2024 07:33:31 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '207'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999991'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_95a932035495c119773b7b54a94e294c'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=oRouWhbAmnrni2IznOf0WihQ437aGe0bwsPLBYF4TpY-1732952011-1.0.1.1-MNloMWCpBNuvhcuxIQuihmZmJzgTY8MT9aDyt... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_95a932035495c119773b7b54a94e294c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:31", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[1482, 6850, 32330, 8131, 28089, 44786, 86430, 44613, 10693]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:33:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '122', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999991', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ebab9fad66abc8a9e16551d1ac2d48af', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea92655d801b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ebab9fad66abc8a9e16551d1ac2d48af", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FCC20>, 'json_data': {'input': [[2156, 32330, 8131, 28089, 44786, 73226, 6856, 63233, 86430, 1830, 6856, 7740, 41291, 30656, 39988, 7952, 92533, 54686, 3343]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:33:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '108', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_58a198acd564bb1957853171fe5804c7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea92659caf3b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_58a198acd564bb1957853171fe5804c7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[17, 13, 35889, 32330, 8131, 28089, 12648, 6578, 73226, 6856, 4655, 6578, 86430, 94866, 5524, 64569, 34694, 30656, 1506, 49520, 23630, 2297, 44938, 66144, 16742, 67891, 13404, 7753, 54686, 720, 8164, 7753, 56857, 52429, 97991, 95570, 7740, 320, 1840, 11320, 8, 54204, 18154, 7820, 19619, 9542, 39127, 2156, 72952, 18600, 10298, 17766, 89348, 21923, 14476, 47295, 48835, 86630, 1506, 5927, 720, 6578, 2156, 14837, 15088, 5591, 17721, 23311, 2233, 94962, 7952, 12507, 1532, 11, 18034, 19479, 7486, 2297, 1840, 20346, 10298, 63233, 44946, 5524, 64322, 5524, 44075, 20812, 18034, 17766, 40590, 7820, 19619, 9542, 39127, 39900, 720, 50681, 17766, 44613, 11, 100147, 38153, 63233, 5524, 57719, 59921, 7486, 7740, 2297, 31101, 4329, 23934, 98968, 92091, 39900, 100147, 1506, 5927, 9136, 13999, 2297, 1506, 720, 14525, 7820, 196... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:33:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '66', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999026', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_b11dc09cf3e56aa5aaa6d5f3c88e7c3b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9265d6daab5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b11dc09cf3e56aa5aaa6d5f3c88e7c3b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[19916, 13404, 7753, 39127, 12648, 64880, 59313, 17766, 50807, 11, 7740, 12648, 64880, 6850, 32330, 8131, 28089, 12648, 64880, 73226, 6856, 4655, 64880, 86430, 1830, 50807, 49520, 23630, 2297, 44938, 66144, 16742, 720, 55258, 13404, 7753, 54686, 11, 59313, 17766, 50807, 7740, 7740, 12648, 64880, 6850, 32330, 8131, 28089, 12648, 64880, 73226, 6856, 4655, 64880, 86430, 1830, 50807, 5524, 64569, 34694, 30656, 6856, 720, 34604, 23630, 2297, 44938, 66144, 16742, 67891, 13404, 7753, 54686, 13, 720, 23, 13, 23784, 720, 41036, 29471, 1506, 1532, 720, 2156, 23297, 1482, 13337, 48074, 20812, 40231, 720, 2156, 32330, 720, 17394, 1840, 11320, 14476, 39900, 720, 9136, 16248, 17766, 9706, 60990, 94071, 11, 720, 2297, 75346, 1506, 14476, 67745, 21204, 5927, 18034, 13404, 7753, 39127, 44786, 59313, 74828, 10693, 7740, 7740, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:33:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '58', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999322', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_a67763edda399225956a8f0249b923b8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea92660b883b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a67763edda399225956a8f0249b923b8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[20, 8, 14257, 52037, 18226, 11320, 5591, 68271, 91146, 98073, 15088, 40842, 15752, 13337, 6856, 17165, 7740, 14257, 1830, 49284, 17394, 7094, 18999, 18600, 25698, 1840, 74828, 29118, 44786, 720, 8164, 2233, 69954, 6578, 7820, 19619, 9542, 39127, 39900, 18600, 10298, 17766, 44613, 21923, 14476, 47295, 48835, 86630, 1506, 5927, 11562, 2156, 14837, 15088, 5591, 17721, 23311, 2233, 44786, 7952, 12507, 1506, 10693, 11, 720, 1506, 50945, 59138, 86995, 50693, 6856, 39280, 7820, 49103, 16494, 94508, 24697, 26, 720, 21, 8, 14257, 52037, 18226, 11320, 94538, 70129, 21204, 91146, 98073, 15088, 57925, 25262, 18226, 62776, 59195, 10589, 12507, 11, 13373, 85756, 38153, 22885, 720, 13337, 95565, 1830, 720, 33793, 1532, 15458, 39127, 34613, 720, 2297, 64322, 720, 7, 42047, 50506, 482, 720, 5591, 80230, 81856, 10589, 720, 33... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:33:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '134', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999079', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_019be47a730a734dff454cf8b3325e58', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea92663fbbab5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_019be47a730a734dff454cf8b3325e58", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:33:34. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u043f\u0440\u0430\u0432\u043e\u0432\u044b\u0445 \u0430\u043a\u0442\u043e\u0432 \u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438\".\\n\\n2. \u041d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c \u043f\u0440\u0430\u0432\u043e\u0432\u044b\u043c \u0430\u043a\u0442\u043e\u043c \u0441\u0443\u0431\u044a\u0435\u043a\u0442\u0430 \u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u043e\u0439 \u0424\u0435\u0434\u0435\u0440\u0430\u0446\u0438\u0438 \\n\u043f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0443\u0441\u043b\u0443\u0433 \u0438 (\u0438\u043b\u0438) \u0440\u0430\u0431\u043e\u0442 \u043f\u043e \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0440\u0435\u043c\u043e\u043d\u0442\u0443 \u043e\u0431\u0449\u0435\u0433\u043e \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \\n\u043c\u043d\u043e\u0433\u043e\u043a\u0432\u0430\u0440\u0442\u0438\u0440\u043d\u043e\u043c \u0434\u043e\u043c\u0435,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Sat, 30 Nov 2024 07:33:36 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '2381'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '797151'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '213ms'), ('x-request-id', 'req_7bfe30f8ea51bec75105b39126ad07ed'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=B3cDkm_1FWElB7NL7nfLkh_aX7.xI5T1gqce.GKbDp4-1732952016-1.0.1.1-S3XzoLCN4k21FwY3CImwWnDZOyCGlO2MxNZmTIWeOLUXq7MRp2CtMYk1ZooVoX7mszrt2hMMRKZGZS7seAvkww; path=/; expires=Sat, 30... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7bfe30f8ea51bec75105b39126ad07ed", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:37", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.9020254015947865, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:37", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:37", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043e \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0430\u043a\u0442\u0430\u0445\\n\\nLLM Response: \u041d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u043e\u0432\u044b\u0435 \u0430\u043a\u0442\u044b \u2014 \u044d\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0433\u043e\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c\u0438 \u043e\u0440\u0433\u0430\u043d\u0430\u043c\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u0444\u0435\u0440\u044b \u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0436\u0438\u0437\u043d\u0438. \u041e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0437\u0430\u043a\u043e\u043d\u044b, \u043a\u043e\u0434\u0435\u043a\u0441\u044b, \u043f\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0438\u043c\u0435\u044e\u0449\u0438\u0435 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0441\u0438\u043b\u0443.\\n\\n\u0412 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0436\u0438\u043b\u0438\u0449\u043d\u043e\u0433\u043e \u0437\u0430\u043a\u043e\u043d\u043e\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u0432 \u0420\u043e\u0441\u0441\u0438\u0438, \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u043e\u0432\u044b\u0435 \u0430\u043a\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e\u0440\u044f\u0434... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:33:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '635', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799479', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '39ms', 'x-request-id': 'req_bc07a391f330c020bd38ec5578dd4db0', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea926791ab4ee32-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bc07a391f330c020bd38ec5578dd4db0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:38", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\"How to find specific normative legal acts related to housing legislation in Russia?\"', '\"Learn more about the process of developing and approving regional capital repair programs.\"', '\"How to determine which repair works are funded by the capital repair fund in multi-apartment buildings?\"']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u043e\u0432\u044b\u0435 \u0430\u043a\u0442\u044b \u2014 \u044d\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0433\u043e\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c\u0438 \u043e\u0440\u0433\u0430\u043d\u0430\u043c\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u0444\u0435\u0440\u044b \u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0436\u0438\u0437\u043d\u0438. \u041e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0437\u0430\u043a\u043e\u043d\u044b, \u043a\u043e\u0434\u0435\u043a\u0441\u044b, \u043f\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0438\u043c\u0435\u044e\u0449\u0438\u0435 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0441\u0438\u043b\u0443.\\n\\n\u0412 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0436\u0438\u043b\u0438\u0449\u043d\u043e\u0433\u043e \u0437\u0430\u043a\u043e\u043d\u043e\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u0432 \u0420\u043e\u0441\u0441\u0438\u0438, \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u043e\u0432\u044b\u0435 \u0430\u043a\u0442\u044b \u043c\u043e\u0433\u0443\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0435\u043c\u043e\u043d\u0442\u0430 \u043e\u0431\u0449\u0435\u0433\u043e \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0432 \u043c\u043d\u043e\u0433\u043e\u043a\u0432\u0430\u0440\u0442\u0438\u0440\u043d\u044b\u0445 \u0434\u043e\u043c\u0430\u0445, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0440\u0430\u0431\u043e\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0437\u0430 \u0441\u0447\u0435\u0442 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0444\u043e\u043d\u0434\u0430 \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0435\u043c\u043e\u043d\u0442\u0430. \u0422\u0430\u043a\u0436\u0435 \u043e\u043d\u0438 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u044e\u0442 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438 \u0438 \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c \u043a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0435\u043c\u043e\u043d\u0442\u0430 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0430\u0441\u043f\u0435\u043a\u0442\u044b, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u043c\u043d\u043e\u0433\u043e\u043a\u0432\u0430\u0440\u0442\u0438\u0440\u043d\u044b\u043c\u0438 \u0434\u043e\u043c\u0430\u043c\u0438.\\n\\n\u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043e \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0430\u043a\u0442\u0430\u0445, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u0442\u043e\u0447\u043d\u0438\u0442\u0435, \u0438 \u044f \u043f\u043e\u0441\u0442\u0430\u0440\u0430\u044e\u0441\u044c \u043f\u043e\u043c\u043e\u0447\u044c.\\n\\n------------------\\nReferences (/references):\\n\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f_\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430_\u0421\u041f_48_13330_2011.pdf, pages: 21\\n\u0416\u0438\u043b\u0438\u0449\u043d\u044b\u0439 \u043a\u043e\u0434\u0435\u043a\u0441 \u0420\u0424.pdf, pages: 8, 286, 288\\n', {... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:38", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:38", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='30c40aa0-d56f-4907-9c66-8f36e590452c'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:38", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:39", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:33:39", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=317522179, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:15", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:16", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:16", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:16", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:16", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 44, 14, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2708, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193764), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4A72270>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x00000207419E4DC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:17", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658039035189', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 44, 16, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2709, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x00000207414B2400>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x00000207414F1C10>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:18", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x00000207414F1C10>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:19", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:19", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:19", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:19", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430 \u043d\u0430\u0434 \u043f\u0440\u043e\u0451\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 44, 51, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2711, supergroup_chat_created=False, text='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430 \u043d\u0430\u0434 \u043f\u0440\u043e\u0451\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435'), update_id=881193766), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4587930>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000020741981F30>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='ec689083-3e5a-4d88-8ef9-13fa60dfe0c0' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='ec689083-3e5a-4d88-8ef9-13fa60dfe0c0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430 \u043d\u0430\u0434 \u043f\u0440\u043e\u0451\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430 \u043d\u0430\u0434 \u043f\u0440\u043e\u0451\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438, \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0441\u0442\u0435\u043d\u044b \u0438 \u0442\u0438\u043f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0439 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:\\n\\n1. <b>\u041e\u0434\u0438\u043d \u0441\u043b\u043e\u0439</b>: \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u0434\u043b\u044f \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u0441\u0442\u0435\u043d, \u0435\u0441\u043b\u0438 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0432 \u0445\u043e\u0440\u043e\u0448\u0435\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0430.\\n\\n2. <b>\u0414\u0432\u0430 \u0441\u043b\u043e\u044f</b>: \u0415\u0441\u043b\u0438 \u0441\u0442\u0435\u043d\u0430 \u0438\u043c\u0435\u0435\u0442 \u043f\u043e\u0440\u0438\u0441\u0442\u0443\u044e \u0438\u043b\u0438 \u0441\u0438\u043b\u044c\u043d\u043e \u0432\u043f\u0438\u0442\u044b\u0432\u0430\u044e\u0449\u0443\u044e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c, \u0438\u043b\u0438 \u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u0430\u0434\u0433\u0435\u0437\u0438\u044e \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043d\u0430\u043d\u0435\u0441\u0435\u043d\u0438\u044f \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE160>, 'json_data': {'input': [[27435, 16248, 6850, 19188, 35667, 68271, 14391, 8341, 17766, 44858, 55617, 89348, 13433, 6850, 23680, 41291, 45122, 6578, 12507, 72664, 14525, 5927, 7820, 78746, 8164, 34082, 39988, 18868, 5372, 1532]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:44:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '43', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999970', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_1ca05df8c5f80d7933a6342a988cda14', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=yfteXFDK2gQ2ej_rcPBDUK.pcu5yyNAbnDLagbJs_aQ-1732952692-1.0.1.1-GSVUx1Td2rXDwwGXj4i9HAgBQUcGvMDQ4rj1c4O1eisBnnTTMIkei_RCkr5XnvYhM6BN.8npGnGIR... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1ca05df8c5f80d7933a6342a988cda14", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE660>, 'json_data': {'input': [[27435, 16248, 6850, 19188, 35667, 68271, 14391, 8341, 17766, 44858, 55617, 89348, 13433, 6850, 23680, 41291, 45122, 6578, 12507, 72664, 14525, 5927, 7820, 78746, 8164, 34082, 39988, 18868, 5372, 1532]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:44:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '62', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999969', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ffac9e2b864ad3002078699b6b91e388', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea936f92a1aefdd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ffac9e2b864ad3002078699b6b91e388", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE660>, 'json_data': {'input': [[2156, 18226, 23297, 39988, 18034, 18437, 23680, 39988, 93099, 4655, 5524, 81376, 47805, 14332, 10298, 720, 41873, 58317, 12394, 32985, 14082, 8341, 74828, 49526, 33006, 5996, 720, 25687, 2355, 720, 5996, 720, 1830, 2233, 98285, 41036, 16742, 39988, 18868, 79686, 18154, 48446, 23680, 53671, 23934, 720, 4898, 7753, 24697, 9136, 9542, 14082, 8341, 74828, 49526, 33006, 5996, 720, 10750, 23, 2355, 720, 5996, 720, 1830, 2233, 98285, 41036, 16742, 39988, 18868, 79686, 18154, 11562, 17766, 7975, 9542, 2156, 72952, 720, 17394, 12394, 32985, 14082, 8341, 17766, 3865, 49526, 33006, 5996, 720, 23411, 2355, 720, 5996, 720, 5591, 31101, 44786, 7952, 49284, 21708, 49526, 33006, 5996, 720, 1227, 2355, 720, 5996, 720, 8164, 15088, 39103, 23311, 12415, 320, 2297, 6856, 6578, 86610, 5372, 44786, 8, 49526, 33006, 5996, 720, 178... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:44:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '92', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999712', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_8c6a1fd7f2e7c1ba0b628ba0d04726eb', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea936fb8c7fefdd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8c6a1fd7f2e7c1ba0b628ba0d04726eb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE660>, 'json_data': {'input': [[845, 33006, 720, 1506, 482, 6850, 41873, 12561, 22885, 14525, 320, 10124, 16331, 17165, 8, 78876, 8164, 7975, 21956, 5372, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 26, 14391, 482, 6850, 41873, 12561, 22885, 14525, 320, 10124, 16331, 17165, 8, 13373, 720, 3865, 24803, 79862, 25756, 20346, 2156, 44613, 46177, 6850, 1840, 59138, 720, 34604, 13810, 35297, 15088, 220, 21, 13, 18, 482, 35448, 8164, 78746, 27717, 12561, 14837, 17766, 6856, 320, 10124, 16331, 15088, 8, 28114, 15298, 39103, 23311, 4329, 5524, 53280, 12394, 4898, 16742, 5927, 18034, 35297, 7094, 24697, 19190, 77495, 720, 6735, 5372, 3865, 33006, 34604, 13810, 35297, 15088, 220, 21, 13, 19, 482, 35448, 8164, 78746, 27717, 12561, 14837, 17766, 6856, 320, 10124, 16331, 15088, 8, 28114, 15298, 39103, 23311, 4329, 13373, 46339, 92... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:44:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '89', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999848', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_73be5147760a987c13813dd28f053bc7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea936fdae71efdd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_73be5147760a987c13813dd28f053bc7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE660>, 'json_data': {'input': [[2287, 33006, 720, 34604, 13810, 35297, 15088, 220, 605, 13, 17, 482, 59842, 68462, 13433, 18034, 60488, 3865, 13433, 40842, 7820, 24697, 5372, 12648, 6578, 20879, 11320, 5591, 12507, 33006, 34604, 13810, 35297, 15088, 220, 605, 13, 18, 482, 67891, 60488, 67187, 40842, 7952, 2233, 5372, 38657, 12648, 64880, 20879, 49284, 6735, 40231, 64880, 7820, 24697, 5372, 39988, 21923, 67222, 6856, 17165, 33006, 34604, 13810, 35297, 15088, 220, 605, 13, 19, 482, 67891, 60488, 67187, 6850, 23680, 72664, 17766, 12648, 6578, 320, 7094, 49284, 12648, 6578, 8, 41291, 10298, 12507]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:44:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '69', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999909', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_50b6df93470768f8a089706ff9978c1a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9370149caefdd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_50b6df93470768f8a089706ff9978c1a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE660>, 'json_data': {'input': [[20807, 18226, 23297, 44858, 18034, 18437, 23680, 44858, 93099, 1506, 5524, 720, 23630, 47805, 14332, 10298, 23934, 720, 4898, 7753, 24697, 9136, 9542, 14082, 8341, 74828, 2355, 720, 16, 2355, 720, 13679, 21, 2355, 720, 18, 11, 845, 2355, 720, 7699, 23, 2355, 720, 845, 345, 24, 2355, 720, 5996, 720, 15, 11, 5925, 198, 18, 49526, 720, 17735, 2355, 720, 5996, 720, 9591, 2355, 720, 17, 11, 18, 2355, 720, 20807, 18226, 23297, 44858, 18034, 18437, 23680, 44858, 93099, 1506, 5524, 720, 23630, 47805, 14332, 10298, 23934, 58317, 12394, 32985, 14082, 8341, 74828, 2355, 720, 16, 49526, 720, 19944, 2355, 720, 18, 11, 1958, 2355, 720, 10828, 2355, 720, 17, 11, 23, 2355, 720, 5996, 720, 15, 11, 5925, 198, 18, 49526, 720, 17014, 2355, 720, 5996, 720, 6083, 2355, 720, 16, 11, 19, 2355, 720, 35095, 2233, 98285, 41036, 16742,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:44:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '81', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999588', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_5e43c2974a437e88da5f68e71b4b883e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93704ecc1efdd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5e43c2974a437e88da5f68e71b4b883e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:44:55. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u043d\u0430\u0432\u0435\u0441\u043d\u043e\u0439 \u0444\u0430\u0441\u0430\u0434\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0441 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435\u043c \\n\u0438\u0437 \u0436\u0435\u043b\u0435\u0437\u043e\u0431\u0435\u0442\u043e\u043d\u0430 \\n  \\n \\n \\n   \\n \\n944  \\n \\n   \\n \\n\u0442\u0440\u0435\u0445\u0441\u043b\u043e\u0439\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u044b \u043f\u043e \u043a\u043b\u0430\u0434\u043a\u0435 \u0438\u0437 \\n\u043a\u0435\u0440\u0430\u043c\u0437\u0438\u0442\u043e\u0431\u0435\u0442\u043e\u043d\u0430 \\n  \\n \\n \\n   \\n \\n1838  \\n \\n   \\n \\n\u0442\u0440\u0435\u0445\u0441\u043b\u043e\u0439\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u044b \u043f\u043e \u043c\u043e\u043d\u043e\u043b\u0438\u0442\u043d\u043e\u043c\u0443 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:44:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1010', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '796447', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '266ms', 'x-request-id': 'req_c6b4ff17cce2a075abb7ad702ce91155', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=qFN4mf9lTWbag6P9Lrpwx_OrC9st2G6u8u_PGHdfifY-1732952696-1.0.1.1-DCamWYxQ6_ZsbZOB7cadKrKzRVS4Vm5d8YaxA8Q6ZzfpM.ky91iBSvKgOLN4V8ZlxviPX11kfx7LhkVNo.rkdQ; path=/; expires=Sat, 30-Nov-24 08:14:56 GMT; domain=.api.o... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c6b4ff17cce2a075abb7ad702ce91155", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.858348138421731, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430 \u043d\u0430\u0434 \u043f\u0440\u043e\u0451\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435\\n\\nLLM Response: \u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043d\u0430\u0434 \u043f\u0440\u043e\u0435\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u043e\u0439. \u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043e\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0432\u044b\u0448\u0435 \u043e\u043a\u043e\u043d\u043d\u043e\u0433\u043e \u0438\u043b\u0438 \u0434\u0432\u0435\u0440\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043c\u0430 \u0438 \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u0435\u0433\u043e \u043e\u0431\u0440\u0443\u0448\u0435\u043d\u0438\u0435.\\n\\nSuggestions:\", 'role': 'user'}], 'model': 'gpt-4o', 'n': 1, 'stream': False, 'temperature': 0.7}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:44:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '153', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799726', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_fac4c8d1a88ab3800dd437643b2a77b5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93710396befe3-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fac4c8d1a88ab3800dd437643b2a77b5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043d\u0430\u0434 \u043f\u0440\u043e\u0435\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u043e\u0439. \u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043e\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0432\u044b\u0448\u0435 \u043e\u043a\u043e\u043d\u043d\u043e\u0433\u043e \u0438\u043b\u0438 \u0434\u0432\u0435\u0440\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043c\u0430 \u0438 \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u0435\u0433\u043e \u043e\u0431\u0440\u0443\u0448\u0435\u043d\u0438\u0435.\\n\\n------------------\\nReferences (/references):\\n\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf, pages: 97, 110\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 15, 65\\n', {'\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf', '\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf'}, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:57", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='ec689083-3e5a-4d88-8ef9-13fa60dfe0c0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:58", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:44:58", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 45, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2713, supergroup_chat_created=False, text='\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442'), update_id=881193767), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4587310>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000020741983A60>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='0b9d0227-5458-4e3a-928d-a7e62359d9c1' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='0b9d0227-5458-4e3a-928d-a7e62359d9c1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442'), kwargs: {'chat_history': [HumanMessage(content='\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430 \u043d\u0430\u0434 \u043f\u0440\u043e\u0451\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043d\u0430\u0434 \u043f\u0440\u043e\u0435\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u043e\u0439. \u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043e\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0432\u044b\u0448\u0435 \u043e\u043a\u043e\u043d\u043d\u043e\u0433\u043e \u0438\u043b\u0438 \u0434\u0432\u0435\u0440\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043c\u0430 \u0438 \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u0435\u0433\u043e \u043e\u0431\u0440\u0443\u0448\u0435\u043d\u0438\u0435.\\n\\n------------------\\nReferences (/references):\\n\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf, pages: 97, 110\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 15, 65', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441\u0442\u0435\u043d\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0435\u0432 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c \u043d\u0430 \u0441... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565B20>, 'json_data': {'input': [[31274, 9136, 17756, 47295, 8379, 14525, 92175, 1482, 9542]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '170', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999991', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6139fc54f499b13d62660351afc7e349', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea937d059509185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6139fc54f499b13d62660351afc7e349", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565B20>, 'json_data': {'input': [[31274, 9136, 17756, 47295, 8379, 14525, 92175, 1482, 9542]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '67', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999991', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_462e083100d45cbd109a2f88bd669b63', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea937d7bd929185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_462e083100d45cbd109a2f88bd669b63", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565B20>, 'json_data': {'input': [[35095, 98285, 23446, 6148, 23297, 17165, 12415, 18600, 83586, 37773, 43896, 13, 56191, 13, 1301, 100, 7753, 67124, 90877, 1506, 720, 27435, 9239, 2233, 30656, 9239, 43896, 13, 37255, 13, 36479, 9239, 7975, 33742, 1506, 720, 27435, 12507, 8164, 89052, 58060, 44858, 64362, 6735, 13433, 60376, 13, 37255, 13, 36479, 17766, 7094, 22911, 12426, 6856, 16742, 198, 19871, 7094, 7486, 1482, 5927, 6850, 38722, 9239, 220, 1544, 13, 2304, 13, 2366, 15, 13, 23227, 9706, 30765, 7486, 1482, 5927, 5173, 56857, 18482, 220, 972, 13, 2705, 13, 2366, 15, 13, 67891, 32330, 8131, 220, 1399, 9, 5833, 14697, 61565, 17721, 2156, 9542, 3865, 22911, 57855, 31203, 16331, 627, 41682, 12394, 13, 5173, 56857, 13, 26539, 13, 220, 20, 11, 2970, 13, 59842, 6148, 12898, 41873, 7094, 13, 26539, 13, 220, 20, 11, 2304, 627, 17279, 9706, 15752, 13... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '117', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999720', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_e1e0418afd1d70c14abf997497b2858c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea937dc38229185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e1e0418afd1d70c14abf997497b2858c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565B20>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 2355, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 2355, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 720, 19871, 23784, 35448, 39903, 220, 23227, 49520, 57855, 23784, 43896, 1301, 249, 5996, 33006, 33006, 720, 19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 33006, 33006, 33006, 33006, 33006, 33006, 33006, 31274, 20807, 140, 244, 5619... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '39', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999784', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_66846c709e8fa73272017a21ed8e0e55', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea937de996d9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_66846c709e8fa73272017a21ed8e0e55", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565B20>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 720, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 2355, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 720, 19871, 16604, 20976, 25079, 23227, 34604, 37255, 16604, 31274, 65014, 2355, 33006, 33006, 49526, 33006, 19871, 17279, 220, 220, 17824, 13, 9413, 18216, 15, 13, 2366, 16, 33006, 33006, 33006, 33006, 31274, 20807, 140, 244, 56191, 20807, 56191, 34604,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '89', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999790', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_3d91fb5f521f676b48642922f90538c1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea937e49c299185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3d91fb5f521f676b48642922f90538c1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565B20>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 720, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 720, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 198, 19871, 23784, 35448, 39903, 220, 23227, 49520, 57855, 23784, 43896, 1301, 249, 198, 19871, 17279, 220, 508, 13, 9423, 966, 13, 679, 21, 198, 20807, 37255, 38214, 34604, 41682, 36551, 27435, 31274, 43896, 23784, 20976, 36551, 25079, 56191, 140, 247, 19871, 3... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '46', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999809', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_0f2039148191dc53350cdd862b7bdb8e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea937e6ed039185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0f2039148191dc53350cdd862b7bdb8e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:45:32. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0418.\u0415. \u0427\u0435\u0440\u0435\u043f\u043a\u043e\u0432\u0430 \\n\u041a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440 \u0418.\u0410. \u041a\u043e\u0440\u043e\u043b\u0435\u0432\u0430 \\n\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0442\u043a\u0430 \u0415.\u0410. \u041a\u043e\u043d\u0434\u0440\u0430\u0448\u043e\u0432\u043e\u0439\\n\u0421\u0434\u0430\u043d\u043e \u0432 \u043d\u0430\u0431\u043e\u0440 27.05.2020. \u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043e \u0432 \u043f\u0435\u0447\u0430\u0442\u044c 18.06.2020. \u0424\u043e\u0440\u043c\u0430\u0442 60*84%. \u0413\u0430\u0440\u043d\u0438\u0442\u0443\u0440\u0430 \u0410\u0440\u0438\u0430\u043b.\\n\u0423\u0435\u043b. \u043f\u0435\u0447. \u043b. 5,58. \u0423\u0447.-... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1981', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '797053', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '221ms', 'x-request-id': 'req_eba35568bc37c4bf72e74a372b4b6055', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea937ec8fc09185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_eba35568bc37c4bf72e74a372b4b6055", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:34", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8039652903825989, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:34", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:34", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442\\n\\nLLM Response: \u041c\u043e\u0436\u0435\u0442\u0435 \u0443\u0442\u043e\u0447\u043d\u0438\u0442\u044c, \u043e \u043a\u0430\u043a\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438\u043b\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0438\u0434\u0435\u0442 \u0440\u0435\u0447\u044c? \u042d\u0442\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043c\u043d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0442\u043e\u0447\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e.\\n\\nSuggestions:\", 'role': 'user'}], 'model': 'gpt-4o', 'n': 1, 'stream': False, 'temperature': 0.7}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '224', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799793', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_96ccee436a35d1cb72efd06d955ca885', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea937fb3f469185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_96ccee436a35d1cb72efd06d955ca885", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:35", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:35", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041c\u043e\u0436\u0435\u0442\u0435 \u0443\u0442\u043e\u0447\u043d\u0438\u0442\u044c, \u043e \u043a\u0430\u043a\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438\u043b\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0438\u0434\u0435\u0442 \u0440\u0435\u0447\u044c? \u042d\u0442\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043c\u043d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0442\u043e\u0447\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e.\\n\\n------------------\\nReferences (/references):\\n\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421\u041f 1.13130.2020.pdf, pages: 48\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 446.1325800.2019 .pdf, pages: 0\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u044d\u043a\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 502.1325800.2021.pdf, pages: 0\\n\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0421\u041f 20.13330.2016.pdf, pages: 0\\n', {'\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0421\u041f 20.13330.2016.pdf', '\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u044d\u043a\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 502.1325800.2021.pdf', '\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 446.1325800.2019 .pdf', '\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421\u041f 1.13130.2020.pdf'}, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:35", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:35", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='0b9d0227-5458-4e3a-928d-a7e62359d9c1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:36", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:36", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:50", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:50", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0418\u0437 \u0447\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 45, 49, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2715, supergroup_chat_created=False, text='\u0418\u0437 \u0447\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430'), update_id=881193768), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4587E70>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000020741A9C130>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='ff27775b-349b-4afc-8250-a00f9f0d9f41' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='ff27775b-349b-4afc-8250-a00f9f0d9f41'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u0418\u0437 \u0447\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u0418\u0437 \u0447\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041c\u043e\u0436\u0435\u0442\u0435 \u0443\u0442\u043e\u0447\u043d\u0438\u0442\u044c, \u043e \u043a\u0430\u043a\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438\u043b\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 \u0438\u0434\u0435\u0442 \u0440\u0435\u0447\u044c? \u042d\u0442\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043c\u043d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0442\u043e\u0447\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e.\\n\\n------------------\\nReferences (/references):\\n\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421\u041f 1.13130.2020.pdf, pages: 48\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 446.1325800.2019 .pdf, pages: 0\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u044d\u043a\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 502.1325800.2021.pdf, pages: 0\\n\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0421\u041f 20.13330.2016.pdf, pages: 0', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430 \u043d\u0430\u0434 \u043f\u0440\u043e\u0451\u043c\u043e\u043c \u043e\u043a\u043d\u0430 \u0432 \u043a\u0438\u0440\u043f\u0438\u0447\u043d\u043e\u0439 \u0441\u0442\u0435\u043d\u0435', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[31274, 9136, 17756, 47295, 92175, 1482, 9542, 71901, 4655, 6148, 13433]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '53', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999988', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_271b1e0fe9b3023e0e808d5b0850eeea', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea938627bf89185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_271b1e0fe9b3023e0e808d5b0850eeea", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[31274, 9136, 17756, 47295, 92175, 1482, 9542, 71901, 4655, 6148, 13433]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '123', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999989', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_bef28d3d4c4240e34b6afcf419c61420', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93867ff239185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bef28d3d4c4240e34b6afcf419c61420", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[19871, 17279, 220, 1682, 13, 9423, 966, 13, 679, 16, 33006, 18, 720, 256, 84699, 12426, 16742, 1389, 18154, 6735, 61390, 2156, 48150, 46177, 17756, 84350, 1482, 96034, 37773, 4329, 90457, 50506, 21204, 18868, 15298, 27717, 58317, 48262, 4898, 25262, 21708, 18154, 96034, 7753, 10693, 68742, 720, 8164, 7975, 1506, 13, 33006, 35095, 72805, 1506, 220, 16, 720, 39091, 98285, 14332, 6148, 23297, 17165, 1532, 720, 5591, 35387, 77628, 40231, 720, 1733, 43896, 2156, 1830, 5372, 2297, 28089, 61379, 11562, 98285, 14332, 6148, 23297, 17165, 10693, 5927, 35387, 77628, 44938, 720, 5591, 92691, 69463, 2355, 9136, 31281, 56008, 44858, 5996, 9136, 31281, 56008, 2156, 198, 36497, 720, 220, 14257, 64134, 5372, 44858, 720, 256, 35875, 38722, 36497, 720, 25079, 5591, 1840, 17394, 17618, 5173, 47067, 1532, 31101, 6856, 13373, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '53', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999204', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_cb90a311067f2cbb829bd496996cddc5', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9386cd9c79185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cb90a311067f2cbb829bd496996cddc5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[20976, 2297, 47805, 39988, 11562, 8341, 16331, 3114, 5524, 5173, 29256, 7753, 56857, 12648, 6578, 720, 12426, 5591, 12507, 26, 720, 2297, 5591, 17721, 39988, 720, 12426, 6856, 720, 7094, 5591, 61613, 9239, 17766, 23446, 12415, 720, 2297, 720, 8164, 81726, 12648, 6578, 720, 8164, 7753, 1532, 31101, 12507, 7820, 81376, 47805, 2156, 72952, 11562, 8341, 16331, 3114, 3865, 720, 19, 2355, 33006, 20976, 2297, 47805, 39988, 720, 6578, 8341, 16331, 3114, 720, 22911, 6735, 4329, 2156, 38521, 63233, 720, 8164, 61390, 2297, 6856, 14391, 16331, 15088, 7740, 46088, 6856, 18034, 7753, 6578, 720, 5591, 10124, 11320, 9136, 1840, 720, 7094, 1840, 1506, 19916, 11001, 111, 6578, 720, 1840, 720, 2233, 50693, 7753, 11, 720, 8164, 2233, 28089, 17721, 5372, 44786, 14257, 15752, 3114, 6856, 4655, 64880, 55617, 5591, 50807, 720, 20, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '76', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999657', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_bbada81f175eb6611b3b7d572bed6cd1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93871dd619185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bbada81f175eb6611b3b7d572bed6cd1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 13078, 33006, 65014, 13, 17, 13, 777, 72244, 5927, 18034, 7753, 69463, 10693, 14257, 9136, 12394, 12561, 16494, 4655, 4898, 39280, 64362, 10693, 2156, 47295, 18154, 4329, 2297, 1506, 7820, 46339, 9239, 2156, 72952, 78876, 4898, 23630, 3865, 720, 79862, 48835, 1532, 8341, 67425, 8131, 38438, 39988, 58317, 37277, 4898, 85864, 23934, 5173, 3114, 23630, 4898, 85864, 18034, 7753, 6578, 4655, 320, 68506, 39244, 4655, 64362, 10693, 2156, 47295, 18154, 4329, 2297, 1506, 720, 79862, 92175, 4655, 90877, 7486, 4655, 58317, 37277, 4898, 16494, 1840, 6850, 16248, 80230, 4898, 50807, 81842, 5524, 81842, 12507, 46177, 5524, 46339, 9239, 12648, 6578, 78876, 4898, 23630, 12507, 705, 59346, 720, 5591, 21599, 23311, 10693, 14257, 9136, 31443, 10693, 57297, 78876, 51745,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '96', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999848', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_c6e875763808632ba8449815cd39d02f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93877b9159185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c6e875763808632ba8449815cd39d02f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[74598, 96256, 1506, 220, 8929, 23934, 220, 14815, 33006, 7, 8164, 13, 220, 845, 13, 20, 13, 1691, 5927, 18600, 13404, 13, 43896, 9136, 38972, 18999, 452, 220, 18, 11, 14257, 1830, 5591, 13, 23227, 31203, 52674, 12507, 45458, 19479, 51745, 61390, 49520, 23630, 2297, 47273, 20879, 220, 845, 13, 717, 13, 2366, 16, 452, 220, 25741, 14, 8164, 2233, 8, 720, 845, 13, 20, 13, 1313, 39903, 1840, 24697, 8341, 2233, 7820, 65489, 3114, 63233, 25756, 20346, 2156, 25657, 10589, 10298, 19190, 44786, 46088, 6856, 46177, 100147, 4655, 18868, 9239, 17766, 12561, 4329, 6578, 1482, 95570, 17461, 44786, 720, 15752, 20346, 2156, 25657, 10589, 10298, 19190, 44786, 46088, 6856, 5927, 74020, 1532, 26539, 24697, 12394, 21708, 46339, 44075, 44100, 70129, 5927, 55617, 56515, 19916, 1506, 10693, 12561, 4329, 6578, 4655, 6578, 56729, 125... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:45:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '93', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998827', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_8e7a96c06bed1b4f56bb8e97f2c846ea', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9387e6ccf9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8e7a96c06bed1b4f56bb8e97f2c846ea", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:45:56. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 29.13330.2011 \\n \\n3 \\n   \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u2013 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0435 \u0438\u043b\u0438 \u0447\u0430\u0441\u0442\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0435\u0435\u0441\u044f \u0441\u0442\u0435\u043a\u0430\u043d\u0438\u0435 \u0436\u0438\u0434\u043a\u043e\u0441\u0442\u0435\u0439 \u043f\u043e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043b\u0430. \\n \\n\u0422\u0430\u0431\u043b\u0438\u0446\u0430 1 \\n\u041c\u0435\u0445\u0430\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \\n\u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \\n                  \u0418\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u0445\u0430\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:45:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6290', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '795788', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '315ms', 'x-request-id': 'req_08e16aedd6d212b93f1224cc1445e24d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea938811cf42dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_08e16aedd6d212b93f1224cc1445e24d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:03", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8208660981982497, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:03", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:03", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0418\u0437 \u0447\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430\\n\\nLLM Response: \u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. **\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b**: \u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u044b \u0438\u0437 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a:\\n   - \u0411\u0435\u0442\u043e\u043d (\u0436\u0435\u043b\u0435\u0437\u043e\u0431\u0435\u0442\u043e\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438)\\n   - \u0421\u0442\u0430\u043b\u044c\\n   - \u041a\u0438\u0440\u043f\u0438\u0447\\n   - \u0414\u0435\u0440\u0435\u0432\u043e\\n\\n2. **\u0410\u0440\u043c\u0430\u0442\u0443\u0440\u0430**: \u0412 \u0436\u0435\u043b\u0435\u0437\u043e\u0431\u0435\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '915', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799420', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '43ms', 'x-request-id': 'req_47e6aa2b72a02a2ca50885f9f2776d25', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea938af3b7d2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_47e6aa2b72a02a2ca50885f9f2776d25", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:04", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0438\u043f\u0430\u0445 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u0435\u043a \u0438 \u0438\u0445 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0438.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438.', '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:04", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. <b>\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b</b>: \u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u044b \u0438\u0437 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a:\\n\u2022 \u0411\u0435\u0442\u043e\u043d (\u0436\u0435\u043b\u0435\u0437\u043e\u0431\u0435\u0442\u043e\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438)\\n\u2022 \u0421\u0442\u0430\u043b\u044c\\n\u2022 \u041a\u0438\u0440\u043f\u0438\u0447\\n\u2022 \u0414\u0435\u0440\u0435\u0432\u043e\\n\\n2. <b>\u0410\u0440\u043c\u0430\u0442\u0443\u0440\u0430</b>: \u0412 \u0436\u0435\u043b\u0435\u0437\u043e\u0431\u0435\u0442\u043e\u043d\u043d\u044b\u0445 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0430 \u0434\u043b\u044f \u0443\u0441\u0438\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0438 \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438.\\n\\n3. <b>\u0418\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b</b>: \u0412 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0441\u043b\u043e\u0438, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u0438 \u0438 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e.\\n\\n4. <b>\u0417\u0430\u0449\u0438\u0442\u043d\u044b\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f</b>: \u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u0438 \u0438 \u0437\u0430\u0449\u0438\u0442\u044b \u043e\u0442 \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0432\u043b\u0430\u0433\u0430 \u0438\u043b\u0438 \u043a\u043e\u0440\u0440\u043e\u0437\u0438\u044f, \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u044b \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u0437\u0430\u0449\u0438\u0442\u043d\u044b\u043c\u0438 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f\u043c\u0438.\\n\\n\u0412\u044b\u0431\u043e\u0440 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c, \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438.\\n\\n... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:04", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:04", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='ff27775b-349b-4afc-8250-a00f9f0d9f41'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:04", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:05", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:05", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:22", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:22", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_2', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660102792075', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 46, 4, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=8, offset=158, type=<MessageEntityType.BOLD>), MessageEntity(length=8, offset=302, type=<MessageEntityType.BOLD>), MessageEntity(length=22, offset=427, type=<MessageEntityType.BOLD>), MessageEntity(length=17, offset=580, type=<MessageEntityType.BOLD>), MessageEntity(length=11, offset=936, type=<MessageEntityType.BOT_COMMAND>)), from_user=User(first_name='Pdflyx', id=7836... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x00000207414675B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='4bce1530-0c93-4db5-a096-39a41623b8ca' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='4bce1530-0c93-4db5-a096-39a41623b8ca'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0418\u0437 \u0447\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. <b>\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b</b>: \u041f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u044b \u0438\u0437 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a:\\n\u2022 \u0411\u0435\u0442\u043e\u043d (\u0436\u0435\u043b\u0435\u0437\u043e\u0431\u0435\u0442\u043e\u043d\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438)\\n\u2022 \u0421\u0442\u0430\u043b\u044c\\n\u2022 \u041a\u0438\u0440\u043f\u0438\u0447\\n\u2022 \u0414\u0435\u0440\u0435\u0432\u043e\\n\\n2. <b>\u0410\u0440\u043c\u0430\u0442\u0443\u0440\u0430</b>: \u0412 \u0436\u0435\u043b\u0435\u0437\u043e\u0431\u0435\u0442\u043e\u043d\u043d\u044b\u0445 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0430 \u0434\u043b\u044f \u0443\u0441\u0438\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0438 \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438.\\n\\n3. <b>\u0418\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b</b>: \u0412 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FD1C0>, 'json_data': {'input': [[27435, 16248, 18600, 29500, 91353, 18482, 6850, 34493, 67024, 36352, 11, 38153, 34148, 56449, 14525, 21477, 7094, 58669, 28089, 18482, 71901, 4655, 6148, 13433, 11, 5927, 93323, 13810, 16494, 85864, 20879, 22918, 45122, 6850, 19188, 31281, 18999, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '142', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999961', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_835bc562b4b90478a67022440e05fa29', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9392dcab49185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_835bc562b4b90478a67022440e05fa29", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:24", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FD6C0>, 'json_data': {'input': [[27435, 16248, 18600, 29500, 91353, 18482, 6850, 34493, 67024, 36352, 11, 38153, 34148, 56449, 14525, 21477, 7094, 58669, 28089, 18482, 71901, 4655, 6148, 13433, 11, 5927, 93323, 13810, 16494, 85864, 20879, 22918, 45122, 6850, 19188, 31281, 18999, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '108', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999961', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_df42d5c2f97df9988bb94f244b8179e0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93933cdda9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_df42d5c2f97df9988bb94f244b8179e0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FD6C0>, 'json_data': {'input': [[1506, 8, 482, 37405, 37405, 82941, 84198, 5524, 23630, 44075, 13337, 38438, 5372, 39988, 6850, 34493, 67024, 17165, 7820, 5524, 17394, 8131, 72952, 18154, 4329, 2297, 3865, 26, 14391, 8, 482, 59346, 58317, 1532, 11, 7820, 18600, 84350, 4329, 2156, 38521, 72952, 18154, 4329, 2297, 3865, 33006, 34604, 13810, 35297, 15088, 220, 23, 482, 28599, 10693, 10298, 1506, 14257, 6148, 84350, 13433, 14391, 16331, 17165, 11, 14257, 4898, 2233, 67124, 61498, 39988, 5173, 29256, 7753, 56857, 12648, 64880, 18600, 50693, 38808, 1840, 58317, 37277, 4898, 85864, 2355, 23, 13, 20, 13, 19, 39903, 14009, 14391, 16331, 15088, 18154, 220, 23, 13, 20, 13, 18, 37405, 720, 28, 15, 88515, 68506, 19916, 19916, 1840, 15458, 19190, 720, 5591, 54261, 3865, 3114, 1532, 320, 5932, 8, 93129, 73181, 46339, 44075, 44100, 29893, 18154, 720, 1830,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '143', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_dd7e861a1ca78bc1a59d33d40667dd68', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93939998f9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dd7e861a1ca78bc1a59d33d40667dd68", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FD6C0>, 'json_data': {'input': [[16604, 48262, 6850, 34493, 67024, 17165, 2355, 17279, 61390, 2297, 11, 7820, 38153, 72952, 720, 8164, 31203, 82941, 51412, 6850, 34493, 67024, 13433, 720, 27435, 1482, 68506, 19916, 19916, 1840, 15458, 19190, 720, 8164, 31203, 20879, 2297, 38521, 20812, 47273, 59313, 2233, 67124, 3114, 62491, 720, 2297, 17394, 8131, 22885, 18154, 4329, 2297, 1506, 7740, 37405, 88612, 10693, 33006, 5996, 5996, 19, 198, 1591, 2355, 1591, 31658, 1041, 2355, 19871, 23630, 44075, 13337, 38438, 5372, 44858, 720, 14525, 38098, 10589, 1532, 38098, 2297, 7975, 1840, 2355, 34604, 84350, 4329, 2156, 38521, 35723, 2355, 720, 19871, 17394, 8131, 35723, 2355, 33006, 33006, 33006, 34604, 18226, 2156, 50619, 13999, 720, 2233, 18437, 8164, 92582, 5372, 44858, 2355, 34604, 84350, 4329, 2156, 38521, 35723, 2355, 720, 54745, 16494, 56857, 27717... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '64', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999644', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_813a56e912234f1d806c67683fa730dc', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9393d7cc09185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_813a56e912234f1d806c67683fa730dc", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FD6C0>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 14087, 33006, 16, 25, 605, 8, 18154, 4329, 2297, 50807, 5524, 78876, 6735, 61390, 23446, 10298, 11562, 50436, 7094, 3865, 14257, 9136, 3114, 50807, 30392, 29256, 6856, 17165, 14391, 7975, 50506, 220, 15, 11, 20, 12561, 7975, 8341, 1506, 46177, 30392, 1482, 7058, 8164, 6856, 17165, 44946, 11047, 31203, 14257, 9136, 31443, 93129, 73181, 69556, 94975, 18154, 54261, 3865, 3114, 1532, 720, 4898, 2233, 198, 2156, 198, 8164, 2233, 198, 60474, 198, 34604, 198, 34604, 198, 78086, 111, 198, 12216, 320, 65014, 13, 1691, 8, 33006, 15752, 100046, 49520, 4898, 2233, 1389, 7820, 2233, 9542, 81301, 13433, 4329, 6850, 34493, 67024, 13433, 20440, 5524, 17394, 8131, 22885, 13373, 53419, 39988, 29619, 6856, 19479, 1532, 18034, 7753, 6578, 4655, 14257, 6148, 84350, 13433,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '58', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999058', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_dc1d5e1e3c58210808b5cd7cd9453ac5', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9394308869185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dc1d5e1e3c58210808b5cd7cd9453ac5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FD6C0>, 'json_data': {'input': [[19871, 17279, 220, 508, 13, 9423, 966, 13, 679, 21, 198, 24, 13, 868, 1301, 100, 13810, 39865, 7820, 35682, 6856, 11, 14257, 91353, 90705, 44867, 5927, 78876, 64322, 1506, 10693, 12561, 38438, 68742, 7740, 14257, 6735, 16742, 6148, 28089, 85864, 37405, 46339, 92582, 84198, 64362, 23311, 5879, 198, 13433, 29118, 44786, 7740, 25756, 9239, 41873, 97341, 39127, 44786, 6850, 34493, 67024, 15088, 20879, 11562, 25262, 6856, 63233, 7820, 35682, 6856, 13373, 74254, 3865, 10693, 46177, 86995, 98285, 46410, 20346, 2297, 1506, 10693, 5927, 12561, 7975, 8341, 1532, 11, 37405, 53419, 13999, 5879, 198, 5591, 50681, 5372, 94962, 39479, 6578, 86610, 84198, 5927, 12561, 7975, 8341, 1532, 52770, 40842, 5591, 23297, 44786, 11, 50945, 7740, 11562, 25262, 6856, 63233, 7820, 35682, 6856, 11, 21022, 50945, 59138, 37405, 81757, 3379... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '168', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998442', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_7147e9c4348c7a8f8751c907d06a95dd', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea939452a749185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7147e9c4348c7a8f8751c907d06a95dd", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:46:28. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0430) - \u043f\u0440\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043a \u0441\u0436\u0430\u0442\u043e\u043c\u0443 \u043f\u043e\u044f\u0441\u0443; \u0431) - \u0442\u043e \u0436\u0435, \u043a \u0440\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u043e\u043c\u0443 \u043f\u043e\u044f\u0441\u0443 \\n \\n\u0420\u0438\u0441\u0443\u043d\u043e\u043a 8 - \u0421\u0445\u0435\u043c\u0430 \u0443\u0447\u0430\u0441\u0442\u043a\u0430 \u0431\u0430\u043b\u043a\u0438, \u0443\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043d\u043e\u0439 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u044b\u043c\u0438 \u0440\u0435\u0431\u0440\u0430\u043c\u0438 \u0436\u0435\u0441\u0442\u043a\u043e\u0441\u0442\u0438  \\n8.5.4 \u0414\u043b\u044f \u0431\u0430\u043b\u043e\u043a \u043f\u043e 8.5.3 \u043f\u0440\u0438 \\n=0 \u043a\u043e\u044d\u0444\u0444... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '5281', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '795424', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '343ms', 'x-request-id': 'req_d64dc4855c5e28f6bcd7959a20bee0f8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9394bad312dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d64dc4855c5e28f6bcd7959a20bee0f8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:34", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8437238626470493, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:34", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:34", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.\\n\\nLLM Response: \u0420\u0430\u0441\u0447\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b, \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0435 \u0448\u0430\u0433\u0438 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430:\\n\\n1. **\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438**:\\n   - \u0412\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u0435 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 (\u0432\u0435\u0441 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1391', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799087', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '68ms', 'x-request-id': 'req_2a402acbc1c61999f08800274e7ceb7c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9396f39262dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2a402acbc1c61999f08800274e7ceb7c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:35", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u043c\u0435\u0442\u043e\u0434\u0430\u0445 \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0441\u043d\u0435\u0433\u043e\u0432\u0430\u044f \u0438 \u0432\u0435\u0442\u0440\u043e\u0432\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u0438 \u043a\u0430\u043a \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u044b \u043d\u0430\u0434\u0435\u0436\u043d\u043e\u0441\u0442\u0438 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438 \u043f\u0440\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0430 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0443.', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u043d\u043e\u0433\u043e \u0430\u043d\u0430\u043b\u0438\u0437\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0438\u0437\u0433\u0438\u0431\u0430\u044e\u0449\u0438\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432 \u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u044b\u0445 \u0441\u0438\u043b \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0445.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:35", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0420\u0430\u0441\u0447\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b, \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0435 \u0448\u0430\u0433\u0438 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430:\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438</b>:\\n\u2022 \u0412\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u0435 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 (\u0432\u0435\u0441 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u043a\u0438\u0440\u043f\u0438\u0447\u0438, \u0431\u0435\u0442\u043e\u043d \u0438 \u0442.\u0434.).\\n\u2022 \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 (\u0441\u043d\u0435\u0433\u043e\u0432\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430, \u0432\u0435\u0442\u0440\u043e\u0432\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430, \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438).\\n\\n2. <b>\u0421\u0431\u043e\u0440 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a</b>:\\n\u2022 \u0421\u0443\u043c\u043c\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435 \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0443. \u042d\u0442\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u044f \u0432\u0435\u0441 \u0441\u0442\u0435\u043d\u044b \u043d\u0430\u0434 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u043e\u0439 \u0438 \u043b\u044e\u0431\u044b\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f \u0438\u043b\u0438 \u043a\u0440\u044b\u0448\u0438.\\n\\n3. <b>\u041a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u044b \u043d\u0430\u0434\u0435\u0436\u043d\u043e\u0441\u0442\u0438</b>:\\n\u2022 \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u0435 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u044b \u043d\u0430\u0434\u0435\u0436\u043d\u043e\u0441\u0442\u0438, \u0447\u0442\u043e\u0431\u044b \u0443\u0447\u0435\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f \u0432 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u0445 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0441\u043d\u0435\u0433\u0430, \u0432\u0435\u0442\u0440\u0430 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a).\\n\\n4. <b>\u0420\u0430\u0441\u0447\u0435\u0442 \u0438\u0437\u0433\u0438\u0431\u0430\u044e\u0449\u0438\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432 \u0438 \u0441\u0438\u043b</b>:\\n\u2022 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043c\u0435\u0442\u043e\u0434\u044b \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u043d\u043e\u0433\u043e \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0434\u043b\u044f \u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:35", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:36", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='4bce1530-0c93-4db5-a096-39a41623b8ca'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:36", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:36", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:36", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:51", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0410\u043d\u0434\u0440\u0435\u0439'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 46, 51, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2718, supergroup_chat_created=False, text='\u041c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0410\u043d\u0434\u0440\u0435\u0439'), update_id=881193770), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4587070>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000020741983A60>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='c191a5e0-6e4b-4afb-ba40-c720270959e1' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='c191a5e0-6e4b-4afb-ba40-c720270959e1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0410\u043d\u0434\u0440\u0435\u0439'), kwargs: {'chat_history': [HumanMessage(content='\u041c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0410\u043d\u0434\u0440\u0435\u0439', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.\\n-----------\\n\u0420\u0430\u0441\u0447\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b, \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0435 \u0448\u0430\u0433\u0438 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430:\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438</b>:\\n\u2022 \u0412\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u0435 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 (\u0432\u0435\u0441 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u043a\u0438\u0440\u043f\u0438\u0447\u0438, \u0431\u0435\u0442\u043e\u043d \u0438 \u0442.\u0434.).\\n\u2022 \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 (\u0441\u043d\u0435\u0433\u043e\u0432\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430, \u0432\u0435\u0442\u0440\u043e\u0432\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430, \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438).\\n\\n2. <b>\u0421\u0431\u043e\u0440 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a</b>:\\n\u2022 \u0421\u0443\u043c\u043c\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435 \u0432\u0435\u0440\u0442\u0438\u043a... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565B20>, 'json_data': {'input': [[39091, 5372, 4329, 11122, 6856, 38521, 57855, 2156, 63873, 21708]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '68', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999989', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_8d60bef1e5332300921c8f163aa8a65f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea939df4bf3c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8d60bef1e5332300921c8f163aa8a65f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[39091, 5372, 4329, 11122, 6856, 38521, 57855, 2156, 63873, 21708]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '41', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999990', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6634f572273028ade4d7651e334113f6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea939e47e1dc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6634f572273028ade4d7651e334113f6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 720, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 720, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 33006, 19871, 23784, 35448, 39903, 256, 23227, 49520, 57855, 23784, 43896, 1301, 249, 7714, 28599, 17279, 220, 21851, 13, 9413, 18216, 15, 13, 2366, 18, 33006, 33006, 33006, 33006, 720, 19871, 56191, 35095, 31274, 28599, 16604, 86491, 36551, 31274, 33006,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '118', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999835', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_d6586f341b132e129fe62f8a2fd5f9ca', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea939e9d80ac02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d6586f341b132e129fe62f8a2fd5f9ca", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 720, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 2355, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 720, 19871, 16604, 20976, 25079, 23227, 34604, 37255, 16604, 31274, 65014, 2355, 33006, 33006, 49526, 33006, 19871, 17279, 220, 220, 17824, 13, 9413, 18216, 15, 13, 2366, 16, 33006, 33006, 33006, 33006, 31274, 20807, 140, 244, 56191, 20807, 56191, 34604,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '78', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999790', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_c04283b157f23bc40f657ded36fa10a8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea939eeda04c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c04283b157f23bc40f657ded36fa10a8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 2355, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 2355, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 720, 19871, 23784, 35448, 39903, 220, 23227, 49520, 57855, 23784, 43896, 1301, 249, 5996, 33006, 33006, 720, 19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 33006, 33006, 33006, 33006, 33006, 33006, 33006, 31274, 20807, 140, 244, 5619... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '159', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999784', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_5e79b1edfd2f8e95a1285fa2bba50a10', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea939f48c29c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5e79b1edfd2f8e95a1285fa2bba50a10", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 720, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 720, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 33006, 19871, 23784, 35448, 39903, 256, 23227, 49520, 57855, 23784, 43896, 1301, 249, 27157, 28599, 17279, 220, 19633, 13, 9413, 18216, 15, 13, 2366, 17, 33006, 33006, 33006, 33006, 36551, 25079, 37255, 20807, 31274, 86491, 43896, 36551, 36479, 65014, 561... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '92', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999815', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_99475914350210857df21b46ccffc2fb', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea939fa2eeec02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_99475914350210857df21b46ccffc2fb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:46:57. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u041c\u0418\u041d\u0418\u0421\u0422\u0415\u0420\u0421\u0422\u0412\u041e \u0421\u0422\u0420\u041e\u0418\u0422\u0415\u041b\u042c\u0421\u0422\u0412\u0410 \\n\u0418 \u0416\u0418\u041b\u0418\u0429\u041d\u041e-\u041a\u041e\u041c\u041c\u0423\u041d\u0410\u041b\u042c\u041d\u041e\u0413\u041e \u0425\u041e\u0417\u042f\u0419\u0421\u0422\u0412\u0410 \\n\u0420\u041e\u0421\u0421\u0418\u0419\u0421\u041a\u041e\u0419 \u0424\u0415\u0414\u0415\u0420\u0410\u0426\u0418\u0418 \\n \\n \\n \\n\u0421 \u0412 \u041e \u0414   \u041f \u0420 \u0410 \u0412 \u0418 \u041b                               \u0421\u041f 519.1325800.2023 \\n \\n \\n \\n \\n \\n \\n \\n \\n\u0421\u0415\u0422\u0418 \u0421\u0412\u042f\u0417\u0418 \\n \\n\u041f\u0440\u0430\u0432\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:57 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '639', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '797551', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '183ms', 'x-request-id': 'req_1b0017a18cb6cc9827eeb9502936105f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea939fee8792df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1b0017a18cb6cc9827eeb9502936105f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.794916079815728, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "llm_service", "levelname": "DEBUG", "message": "Similarity threshold not met. Returning answer without references.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0410\u043d\u0434\u0440\u0435\u0439\\n\\nLLM Response: \u041f\u0440\u0438\u044f\u0442\u043d\u043e \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f, \u0410\u043d\u0434\u0440\u0435\u0439! \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0435\u0449\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0438\u043b\u0438 \u043d\u0443\u0436\u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u0441 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e\u043c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u0430\u0439\u0442\u0435 \u0437\u043d\u0430\u0442\u044c.\\n\\nSuggestions:\", 'role': 'user'}], 'model': 'gpt-4o', 'n': 1, 'stream': False, 'temperature': 0.7}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:46:57 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '239', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799784', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '16ms', 'x-request-id': 'req_eb50aa74c9f237596bf5ffac687dcf53', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a052c862df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_eb50aa74c9f237596bf5ffac687dcf53", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041f\u0440\u0438\u044f\u0442\u043d\u043e \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f, \u0410\u043d\u0434\u0440\u0435\u0439! \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0435\u0449\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0438\u043b\u0438 \u043d\u0443\u0436\u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u0441 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e\u043c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u0430\u0439\u0442\u0435 \u0437\u043d\u0430\u0442\u044c.', None, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:58", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='c191a5e0-6e4b-4afb-ba40-c720270959e1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:59", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:46:59", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 47, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2720, supergroup_chat_created=False, text='\u041a\u0430\u043a \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442'), update_id=881193771), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4586F20>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x00000207A450CC70>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='b0d873e2-1f6d-44bb-8252-88f07ca9e6ac' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='b0d873e2-1f6d-44bb-8252-88f07ca9e6ac'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0410\u043d\u0434\u0440\u0435\u0439', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041f\u0440\u0438\u044f\u0442\u043d\u043e \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f, \u0410\u043d\u0434\u0440\u0435\u0439! \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0435\u0449\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0438\u043b\u0438 \u043d\u0443\u0436\u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u0441 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e\u043c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u0430\u0439\u0442\u0435 \u0437\u043d\u0430\u0442\u044c.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.\\n-----------\\n\u0420\u0430\u0441\u0447\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b, \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0435 \u0448\u0430\u0433\u0438 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0442\u0430\u043a... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[27435, 16248, 69844, 4329, 11122, 6856, 38521]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:47:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '107', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_2a509c3addac83939b093b262106eee2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a54bcae9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2a509c3addac83939b093b262106eee2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[27435, 16248, 69844, 4329, 11122, 6856, 38521]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:47:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '48', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6ee55305e8d600ceb555e57cd2a5d35d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a573de39185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6ee55305e8d600ceb555e57cd2a5d35d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[35095, 98285, 23446, 6148, 23297, 17165, 12415, 18600, 83586, 37773, 43896, 13, 56191, 13, 1301, 100, 7753, 67124, 90877, 1506, 720, 27435, 9239, 2233, 30656, 9239, 43896, 13, 37255, 13, 36479, 9239, 7975, 33742, 1506, 720, 27435, 12507, 8164, 89052, 58060, 44858, 64362, 6735, 13433, 60376, 13, 37255, 13, 36479, 17766, 7094, 22911, 12426, 6856, 16742, 198, 19871, 7094, 7486, 1482, 5927, 6850, 38722, 9239, 220, 1544, 13, 2304, 13, 2366, 15, 13, 23227, 9706, 30765, 7486, 1482, 5927, 5173, 56857, 18482, 220, 972, 13, 2705, 13, 2366, 15, 13, 67891, 32330, 8131, 220, 1399, 9, 5833, 14697, 61565, 17721, 2156, 9542, 3865, 22911, 57855, 31203, 16331, 627, 41682, 12394, 13, 5173, 56857, 13, 26539, 13, 220, 20, 11, 2970, 13, 59842, 6148, 12898, 41873, 7094, 13, 26539, 13, 220, 20, 11, 2304, 627, 17279, 9706, 15752, 13... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:47:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '42', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999719', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_bc4bd93367670619cd1eb15bf20726a2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a596ee99185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bc4bd93367670619cd1eb15bf20726a2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[35095, 98285, 23446, 6148, 23297, 17165, 12415, 18600, 83586, 37773, 23784, 13, 20807, 13, 23227, 20346, 2297, 16248, 6856, 1506, 720, 27435, 9239, 2233, 30656, 9239, 1301, 249, 13, 28599, 13, 1301, 100, 7753, 13999, 44155, 6856, 1506, 720, 27435, 12507, 8164, 89052, 58060, 44858, 64362, 6735, 13433, 1301, 249, 13, 37255, 13, 36479, 65489, 6856, 16742, 198, 19871, 7094, 7486, 1482, 5927, 6850, 38722, 9239, 220, 717, 13, 2839, 13, 679, 23, 13, 720, 17279, 9706, 30765, 7486, 1482, 5927, 5173, 56857, 18482, 220, 868, 13, 2839, 13, 679, 23, 13, 720, 55258, 32330, 8131, 220, 1399, 1822, 25496, 14, 23, 13, 720, 38214, 17721, 2156, 9542, 3865, 22911, 57855, 31203, 16331, 13, 720, 41682, 12394, 13, 5173, 56857, 13, 26539, 13, 220, 23, 11, 5833, 489, 5927, 4898, 8164, 13, 220, 22, 11, 5925, 13, 720, 35095, 1840, 1100... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:47:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '164', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999747', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_cbce90f8824aae74d605897d6cef9ab9', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a5eca7b9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cbce90f8824aae74d605897d6cef9ab9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 2355, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 2355, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 720, 19871, 23784, 35448, 39903, 220, 23227, 49520, 57855, 23784, 43896, 1301, 249, 5996, 33006, 33006, 720, 19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 33006, 33006, 33006, 33006, 33006, 33006, 33006, 31274, 20807, 140, 244, 5619... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:47:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '65', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999784', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_d4eea456819f78bf23d98b79844ab8a0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a615ba19185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d4eea456819f78bf23d98b79844ab8a0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 720, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 2355, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 720, 19871, 16604, 20976, 25079, 23227, 34604, 37255, 16604, 31274, 65014, 2355, 33006, 33006, 49526, 33006, 19871, 17279, 220, 220, 17824, 13, 9413, 18216, 15, 13, 2366, 16, 33006, 33006, 33006, 33006, 31274, 20807, 140, 244, 56191, 20807, 56191, 34604,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:47:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '110', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999790', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_ab3459d04a97397fce9e41dcbe1dd1c1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a65de7c9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ab3459d04a97397fce9e41dcbe1dd1c1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:47:14. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0418.\u0415. \u0427\u0435\u0440\u0435\u043f\u043a\u043e\u0432\u0430 \\n\u041a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440 \u0418.\u0410. \u041a\u043e\u0440\u043e\u043b\u0435\u0432\u0430 \\n\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0442\u043a\u0430 \u0415.\u0410. \u041a\u043e\u043d\u0434\u0440\u0430\u0448\u043e\u0432\u043e\u0439\\n\u0421\u0434\u0430\u043d\u043e \u0432 \u043d\u0430\u0431\u043e\u0440 27.05.2020. \u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043e \u0432 \u043f\u0435\u0447\u0430\u0442\u044c 18.06.2020. \u0424\u043e\u0440\u043c\u0430\u0442 60*84%. \u0413\u0430\u0440\u043d\u0438\u0442\u0443\u0440\u0430 \u0410\u0440\u0438\u0430\u043b.\\n\u0423\u0435\u043b. \u043f\u0435\u0447. \u043b. 5,58. \u0423\u0447.-... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:47:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '532', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '797494', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '187ms', 'x-request-id': 'req_931abbe8d4b30cf624e5ab429d4e5db8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a6b7c552df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_931abbe8d4b30cf624e5ab429d4e5db8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:15", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.7788807876189312, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:15", "name": "llm_service", "levelname": "DEBUG", "message": "Similarity threshold not met. Returning answer without references.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:15", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442\\n\\nLLM Response: \u0412\u044b \u043d\u0430\u0437\u0432\u0430\u043b\u0438 \u0441\u0435\u0431\u044f \u0410\u043d\u0434\u0440\u0435\u0435\u043c. \u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u043c\u043e\u0449\u044c \u0438\u043b\u0438 \u0435\u0441\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b, \u0434\u0430\u0439\u0442\u0435 \u0437\u043d\u0430\u0442\u044c!\\n\\nSuggestions:\", 'role': 'user'}], 'model': 'gpt-4o', 'n': 1, 'stream': False, 'temperature': 0.7}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:47:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '486', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799801', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_10b0203e4ae7691d82b644c91cadf743', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93a742ac12df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_10b0203e4ae7691d82b644c91cadf743", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:16", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0412\u044b \u043d\u0430\u0437\u0432\u0430\u043b\u0438 \u0441\u0435\u0431\u044f \u0410\u043d\u0434\u0440\u0435\u0435\u043c. \u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u043c\u043e\u0449\u044c \u0438\u043b\u0438 \u0435\u0441\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b, \u0434\u0430\u0439\u0442\u0435 \u0437\u043d\u0430\u0442\u044c!', None, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:16", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:16", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='b0d873e2-1f6d-44bb-8252-88f07ca9e6ac'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:17", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:47:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 48, 57, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2722, supergroup_chat_created=False, text='\u041d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442'), update_id=881193772), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4A73D90>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x00000207A4A9F880>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='0d406203-692b-4534-8876-c4d48485f1ee' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='0d406203-692b-4534-8876-c4d48485f1ee'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442'), kwargs: {'chat_history': [HumanMessage(content='\u041d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0412\u044b \u043d\u0430\u0437\u0432\u0430\u043b\u0438 \u0441\u0435\u0431\u044f \u0410\u043d\u0434\u0440\u0435\u0435\u043c. \u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u043e\u043c\u043e\u0449\u044c \u0438\u043b\u0438 \u0435\u0441\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b, \u0434\u0430\u0439\u0442\u0435 \u0437\u043d\u0430\u0442\u044c!', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442 \u0410\u043d\u0434\u0440\u0435\u0439', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041f\u0440\u0438\u044f\u0442\u043d\u043e \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f, \u0410\u043d\u0434\u0440\u0435\u0439! \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0435\u0449\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0438\u043b\u0438 \u043d\u0443\u0436\u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u0441 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e\u043c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u0430\u0439\u0442\u0435 \u0437\u043d\u0430\u0442\u044c.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0451 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.', additional_kwargs={}, response_metadata={}), AIMessage(content='... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE480>, 'json_data': {'input': [[20807, 18437, 4898, 54570, 77083, 13999, 72590, 3114, 64569, 14009, 29893, 18034, 35297, 7094, 24697, 19190]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:59", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:48:58 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '58', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999984', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_e9fec7339fdaa4d3363c32ac1fa2f0a6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93cf45dad2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:59", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e9fec7339fdaa4d3363c32ac1fa2f0a6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:59", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:59", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE2A0>, 'json_data': {'input': [[20807, 18437, 4898, 54570, 77083, 13999, 72590, 3114, 64569, 14009, 29893, 18034, 35297, 7094, 24697, 19190]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:48:59", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:48:59 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '145', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999983', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_dcdc95cd398ebe9200b30e68c5cd8dc4', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93cf978562df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dcdc95cd398ebe9200b30e68c5cd8dc4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE2A0>, 'json_data': {'input': [[74598, 96256, 1506, 220, 2287, 23934, 220, 14815, 33006, 806, 13, 2983, 23227, 31203, 86291, 36750, 84198, 18034, 35297, 7094, 24697, 19190, 6856, 7740, 40842, 9136, 10298, 44786, 34943, 9239, 56999, 62491, 19175, 89159, 1482, 78085, 2233, 7975, 59921, 18482, 720, 15752, 3114, 64569, 19479, 3865, 7740, 10693, 11122, 16331, 21956, 18999, 11, 100147, 4655, 7740, 78876, 8164, 7975, 21956, 17618, 5927, 5173, 3114, 7486, 1532, 11, 14257, 77911, 20812, 1482, 20879, 49284, 6735, 44938, 7740, 6850, 1840, 12426, 11, 99396, 17618, 720, 15752, 48262, 2233, 1482, 41873, 96485, 57186, 7740, 7820, 50223, 52744, 12561, 16494, 5372, 5372, 44786, 96573, 7753, 1840, 16331, 6856, 7740, 38098, 79370, 15458, 12415, 13, 35889, 1506, 14257, 77911, 20812, 1482, 320, 8164, 9706, 15752, 13337, 6856, 36352, 8, 720, 23630, 47805, 39280... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:48:59 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '104', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998987', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_b4860208bb0ca8df970202176af1a740', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93cff1b702df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b4860208bb0ca8df970202176af1a740", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE2A0>, 'json_data': {'input': [[22, 33006, 20, 13, 17, 23227, 9706, 15752, 13337, 6856, 13433, 5173, 39865, 14476, 23680, 17165, 720, 20, 13, 17, 13, 16, 28599, 5173, 39865, 14476, 23680, 17165, 40842, 44946, 77911, 36352, 7952, 12507, 1506, 56449, 12648, 62731, 58491, 79686, 5173, 3114, 9706, 9239, 9706, 34613, 35875, 16742, 720, 8164, 38438, 5591, 4655, 7740, 18600, 84350, 56008, 61379, 11, 5927, 52520, 36497, 67969, 23446, 11, 5173, 23446, 7740, 7952, 2233, 33742, 23297, 44065, 20879, 31101, 4655, 11, 21022, 50945, 59138, 11562, 44155, 9239, 13, 720, 20, 13, 17, 13, 17, 35889, 1506, 14257, 6148, 84350, 13433, 10693, 11, 44946, 11001, 114, 5372, 44786, 11562, 3865, 28086, 4929, 4329, 64880, 320, 5591, 4655, 20346, 10124, 17165, 11, 12561, 23630, 15298, 1840, 7740, 12561, 25390, 61813, 1532, 67969, 6148, 33742, 17165, 720, 8164, 2156, 217... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '89', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998519', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_c6547f1a60759b4a51ef6f5b66a23e67', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93d018cab2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c6547f1a60759b4a51ef6f5b66a23e67", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE2A0>, 'json_data': {'input': [[74598, 96256, 1506, 220, 1227, 23934, 220, 14815, 33006, 8164, 15088, 39103, 23311, 1532, 320, 5591, 11047, 12507, 41176, 3114, 1532, 23934, 41291, 19916, 1840, 11320, 24803, 28241, 10693, 11562, 10298, 10124, 35682, 11, 55617, 1830, 29471, 44786, 7740, 81842, 67745, 96573, 7753, 1840, 16331, 6856, 570, 720, 806, 13, 2148, 53677, 18437, 4655, 8164, 36352, 5173, 19188, 3865, 10693, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 7952, 6856, 9706, 18264, 57297, 20879, 6578, 8341, 15088, 11, 25756, 17721, 7486, 23311, 20346, 90457, 67745, 6850, 23680, 50436, 34613, 20879, 49899, 720, 8164, 6856, 7753, 10693, 13999, 6735, 44786, 5927, 9706, 13, 23784, 11122, 16494, 23446, 10693, 97991, 6856, 40231, 10693, 25756, 20346, 2156, 1830, 20440, 11122, 18437, 4655, 8164, 17165, 5173, 19188, 3865, 10693, 56449, 5372, 62731... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '136', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998856', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_87bb72f0904f79de90d54a12ab0d6c23', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93d03fde52df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_87bb72f0904f79de90d54a12ab0d6c23", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE2A0>, 'json_data': {'input': [[74598, 96256, 1506, 220, 2397, 23934, 220, 14815, 33006, 10124, 8, 64362, 10693, 8379, 15752, 11001, 114, 7094, 62491, 7820, 13337, 3114, 6856, 7486, 6856, 19175, 89159, 1482, 78876, 8164, 7975, 34493, 18482, 19175, 69844, 50506, 17756, 10298, 13373, 220, 15, 11, 22, 11562, 6850, 23680, 25190, 109, 38438, 16494, 720, 3865, 24803, 2156, 10298, 5927, 9706, 4655, 5524, 14257, 64322, 12507, 21477, 2297, 13337, 4655, 5927, 7975, 12648, 7740, 6850, 34493, 74828, 46177, 13373, 220, 15, 11, 18, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 26539, 13404, 25262, 18226, 1506, 13, 53677, 1506, 25190, 109, 38438, 44938, 720, 3865, 24803, 52429, 5927, 9706, 4655, 320, 3114, 13404, 25262, 18226, 1506, 8, 5927, 23227, 17279, 34604, 93129, 73181, 12561, 19479, 16494, 18482, 13373, 28089, 4655, 2297, 30480, 12415, 86291, 791... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '216', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998697', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_40942ab9afb8dd2eff15e769ec80a485', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93d08e8862df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_40942ab9afb8dd2eff15e769ec80a485", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:49:02. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 66 \u0438\u0437 239 \\n \\n11.42 \u041f\u0440\u0438 \u0432\u043e\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u0438 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u0432 \u0438 \u043f\u043e\u0434\u0437\u0435\u043c\u043d\u044b\u0445 \u0441\u043e\u043e\u0440\u0443\u0436\u0435\u043d\u0438\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \\n\u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u0438\u0445 \u0437\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u0438 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432 \u043f\u043b\u0430\u043d\u0435, \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0440\u0441\u0442\u0438\u0439 \u0438 \u043d\u0438\u0448, \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \\n\u0433\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '3550', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793345', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '499ms', 'x-request-id': 'req_75f705540b390819eb23f6bbaa24b637', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93d109a232dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_75f705540b390819eb23f6bbaa24b637", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:07", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8656445064729893, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:07", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:07", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0437\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434 \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0437\u0434\u0430\u043d\u0438\u044f. \u0412\u043e\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438:\\n\\n1. <b>\u0422\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430</b>: \u041d\u0430 \u043f\u043b\u043e\u0442\u043d\u044b\u0445 \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0445 \u0433\u0440\u0443\u043d\u0442\u0430\u0445 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e, \u0442\u043e\u0433\u0434\u0430 \u043a\u0430\u043a \u043d\u0430 \u0441\u043b\u0430\u0431\u044b\u0445 \u0433\u0440\u0443\u043d\u0442\u0430\u0445 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u0433\u043b\u0443\u0431\u043e\u043a\u043e\u0435 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:08 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1360', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799223', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '58ms', 'x-request-id': 'req_87765bd5af4f6604ef5bafc825568bc8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93d2e1ab72dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_87765bd5af4f6604ef5bafc825568bc8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:09", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0438\u043f\u0430\u0445 \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u0438\u0445 \u0432\u043b\u0438\u044f\u043d\u0438\u0438 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0437\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u0430.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.', '\u041a\u0430\u043a \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e-\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0437\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u0430.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:09", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0437\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434 \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0437\u0434\u0430\u043d\u0438\u044f. \u0412\u043e\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438:\\n\\n1. <b>\u0422\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430</b>: \u041d\u0430 \u043f\u043b\u043e\u0442\u043d\u044b\u0445 \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0445 \u0433\u0440\u0443\u043d\u0442\u0430\u0445 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e, \u0442\u043e\u0433\u0434\u0430 \u043a\u0430\u043a \u043d\u0430 \u0441\u043b\u0430\u0431\u044b\u0445 \u0433\u0440\u0443\u043d\u0442\u0430\u0445 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u0433\u043b\u0443\u0431\u043e\u043a\u043e\u0435 \u0437\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u043d\u0435\u0441\u0443\u0449\u0435\u0439 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438.\\n\\n2. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0412 \u0440\u0430\u0439\u043e\u043d\u0430\u0445 \u0441 \u0441\u0435\u0437\u043e\u043d\u043d\u044b\u043c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435\u043c \u0433\u0440\u0443\u043d\u0442\u0430 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0437\u0430\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043f\u043e\u0434\u044a\u0435\u043c\u0430 \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438.\\n\\n3. <b>\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434</b>: \u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c \u0432\u044b\u0448\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434 \u0438\u043b\u0438 \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043c\u0435\u0440\u044b \u0437\u0430\u0449\u0438\u0442\u044b \u043e\u0442 \u0438\u0445 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f.\\n\\n4. <b>\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0430 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442</b>: \u0411\u043e\u043b\u0435\u0435 \u043c\u0430\u0441\u0441\u0438\u0432\u043d\u044b\u0435 \u0441\u043e\u043e\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0431\u043e\u043b\u0435\u0435 \u0433\u043b\u0443\u0431\u043e\u043a\u0438\u0445 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e\u0433\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438.\\n\\n5. <b>\u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430</b>: \u0421\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043c\u0435\u0441\u0442\u043d\u044b\u0445 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:09", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:09", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='0d406203-692b-4534-8876-c4d48485f1ee'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:09", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:10", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:10", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:33", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:33", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:33", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:33", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:33", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659226356359', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 49, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=10, offset=194, type=<MessageEntityType.BOLD>), MessageEntity(length=19, offset=393, type=<MessageEntityType.BOLD>), MessageEntity(length=21, offset=573, type=<MessageEntityType.BOLD>), MessageEntity(length=21, offset=707, type=<MessageEntityType.BOLD>), MessageEntity(length=28, offset=837, type=<MessageEntityType.BOLD>), MessageEntity(length=11, offset=1348, type=<Messa... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:33", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x00000207414675B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:34", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:34", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='28a9ae8c-a64b-4e01-b814-93f04dbac559' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:34", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='28a9ae8c-a64b-4e01-b814-93f04dbac559'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:34", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:34", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0437\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434 \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0437\u0434\u0430\u043d\u0438\u044f. \u0412\u043e\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438:\\n\\n1. <b>\u0422\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430</b>: \u041d\u0430 \u043f\u043b\u043e\u0442\u043d\u044b\u0445 \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0445 \u0433\u0440\u0443\u043d\u0442\u0430\u0445 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e, \u0442\u043e\u0433\u0434\u0430 \u043a\u0430\u043a \u043d\u0430 \u0441\u043b\u0430\u0431\u044b\u0445 \u0433\u0440\u0443\u043d\u0442\u0430\u0445 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u0433\u043b\u0443\u0431\u043e\u043a\u043e\u0435 \u0437\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u043d\u0435\u0441\u0443\u0449\u0435\u0439 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438.\\n\\n2. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0412 \u0440\u0430\u0439\u043e\u043d\u0430\u0445 \u0441 \u0441\u0435\u0437\u043e\u043d\u043d\u044b\u043c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435\u043c \u0433\u0440\u0443\u043d\u0442\u0430 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0437\u0430\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FE7A0>, 'json_data': {'input': [[27435, 16248, 46339, 92582, 18264, 14257, 24803, 52429, 12561, 50619, 9136, 39280, 25756, 20346, 2156, 44613, 5927, 38098, 4898, 2233, 8341, 39988, 11562, 37277, 68742, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '68', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_120f6c0701cf99b7ef7d8f55d0171c03', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93dd829fb6d0c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_120f6c0701cf99b7ef7d8f55d0171c03", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FCA40>, 'json_data': {'input': [[27435, 16248, 46339, 92582, 18264, 14257, 24803, 52429, 12561, 50619, 9136, 39280, 25756, 20346, 2156, 44613, 5927, 38098, 4898, 2233, 8341, 39988, 11562, 37277, 68742, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '69', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_99ff6ec0c68c86e128e325102efccd3b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93dda3bb96d0c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_99ff6ec0c68c86e128e325102efccd3b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FCA40>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 777, 33006, 19871, 38438, 8341, 27717, 39479, 91216, 44786, 56729, 6856, 5173, 49855, 96485, 8341, 14257, 38972, 4929, 12426, 18264, 19175, 9706, 2156, 20219, 31281, 61379, 720, 19479, 58060, 8164, 2233, 8341, 54686, 99300, 6856, 54204, 7740, 96034, 4655, 2297, 18264, 7740, 10693, 67425, 6856, 7753, 61379, 13, 720, 20, 13, 22, 13, 18, 39903, 14009, 21923, 23297, 8164, 56857, 18999, 67425, 6856, 7753, 68742, 7740, 82702, 68742, 98051, 8164, 2233, 8341, 54686, 99300, 6856, 720, 19479, 17394, 5372, 7753, 13999, 12, 15752, 1532, 1482, 19916, 41873, 81301, 17165, 10693, 7740, 2297, 41036, 13404, 6856, 14332, 12415, 62315, 9706, 90297, 67445, 31203, 6148, 23297, 17165, 1532, 23934, 64134, 18999, 11, 720, 4898, 36594, 51736, 72060, 7975, 40251, 7012... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '58', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999111', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_14a749229dca365bed4655420a00cf42', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93ddd7e216d0c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_14a749229dca365bed4655420a00cf42", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FCA40>, 'json_data': {'input': [[74598, 96256, 1506, 220, 3487, 23934, 220, 14815, 33006, 9239, 15752, 14332, 9136, 30436, 21708, 13373, 45658, 1506, 11001, 118, 58060, 44786, 14257, 6148, 84350, 13433, 10693, 93129, 73181, 14257, 52037, 18226, 11320, 5591, 18482, 96034, 7753, 10693, 13999, 6735, 44065, 7740, 25756, 3114, 64569, 19479, 44065, 11562, 17721, 17165, 720, 7094, 14009, 62315, 13404, 18999, 6850, 38722, 37906, 7094, 62491, 44946, 7952, 1532, 57719, 56860, 64880, 13373, 57319, 8164, 1840, 7740, 40842, 55523, 31443, 90457, 67745, 22918, 1532, 25756, 20346, 2156, 1830, 6856, 37405, 2233, 9706, 39900, 720, 41036, 21956, 18999, 11, 21022, 50945, 59138, 14257, 25657, 6148, 2156, 18999, 18034, 16248, 23311, 6148, 23297, 17165, 10693, 48440, 10298, 6856, 54204, 13, 720, 23, 13, 845, 23227, 31203, 99396, 84198, 11122, 10298, 14009, 44786,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '357', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998776', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_6c9008cf6769ec0fe95b578dec50ae1f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93ddfdfb56d0c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6c9008cf6769ec0fe95b578dec50ae1f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FCA40>, 'json_data': {'input': [[74598, 96256, 1506, 220, 10866, 23934, 220, 14815, 33006, 1840, 25756, 3114, 64569, 19479, 44786, 11562, 17721, 15088, 720, 2233, 77384, 24697, 46339, 4655, 1830, 44786, 54204, 720, 15752, 8, 5173, 3114, 13337, 61379, 7740, 720, 5591, 3114, 38657, 61379, 25756, 20346, 2156, 44613, 5927, 720, 8164, 92582, 1506, 10693, 11122, 1482, 12648, 720, 49907, 3114, 13337, 2156, 18999, 720, 25079, 48181, 12648, 62731, 19175, 6850, 1840, 59138, 720, 8164, 2233, 1482, 30656, 44786, 40650, 62491, 720, 35095, 1482, 58317, 1532, 11, 53419, 19479, 5173, 41056, 1830, 13373, 220, 2636, 11562, 17, 720, 8164, 39865, 14476, 23680, 1840, 5524, 46339, 92582, 9882, 10298, 19175, 720, 2233, 50436, 1532, 17756, 10298, 90211, 32985, 220, 16, 482, 220, 17, 11562, 18154, 720, 15752, 3114, 64569, 19479, 1532, 5927, 57925, 12394, 1506, 1069... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '83', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999168', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_2b9185c8280e8529096f6224a67efc8c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93de3bb006d0c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2b9185c8280e8529096f6224a67efc8c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207419FCA40>, 'json_data': {'input': [[74598, 96256, 1506, 220, 1958, 23934, 220, 14815, 33006, 720, 12, 20440, 25756, 28086, 44938, 44786, 25756, 20346, 2156, 1830, 6856, 87172, 497, 720, 15, 11, 20, 26, 720, 12, 5173, 23297, 6148, 7486, 1482, 12, 15752, 28086, 44938, 44786, 87172, 4095, 720, 15, 11, 22, 26, 720, 12, 5173, 23297, 90877, 7820, 20346, 8164, 44786, 7740, 5524, 44075, 2156, 21708, 7820, 20346, 8164, 68742, 82472, 4095, 497, 720, 16, 11, 15, 26, 720, 12, 14391, 7975, 50506, 11562, 12394, 17165, 10693, 5173, 23297, 90877, 87172, 29249, 720, 16, 11, 20, 13, 33006, 41682, 52674, 28241, 1532, 88612, 11562, 14837, 38521, 62731, 96034, 4655, 12426, 79686, 18154, 97991, 6856, 40231, 6578, 92457, 29256, 18437, 39900, 41291, 41873, 49899, 94071, 54204, 13, 720, 17279, 31203, 14257, 77911, 20812, 1532, 13373, 57319, 8164, 21708, 13373, 11047, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '131', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998998', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_b9688d0338a4245221464f7ef803a986', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93de5dcba6d0c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b9688d0338a4245221464f7ef803a986", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:49:37. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n19 \\n \\n\u0421\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u0435 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0443\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u043d\u0435\u043e\u0434\u043d\u043e\u0437\u043d\u0430\u0447\u043d\u043e\u0441\u0442\u044c \\n\u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0446\u0438\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0440\u0430\u0431\u043e\u0442 \u0438 \u043f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0438\u0445 \u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u043d\u043e\u0441\u0442\u044c. \\n5.7.3 \u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u043d\u043e\u0441\u0442\u0438 \u0438 \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0438\u043d\u0442\u0435\u0440... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '4736', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794187', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '435ms', 'x-request-id': 'req_2dd475b95700287ed76d7f283dd3f49d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93de8f8ceefab-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2dd475b95700287ed76d7f283dd3f49d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:42", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8634706712693802, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:42", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:42", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.\\n\\nLLM Response: \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438:\\n\\n1. **\u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430**: \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u0442\u0440\u0430\u043d \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u043e\u0432. \u042d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u043c\u043d\u043e\u0433\u043e\u043b\u0435\u0442\u043d\u0438\u0445 \u043d\u0430\u0431\u043b\u044e\u0434\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:49:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '967', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799203', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '59ms', 'x-request-id': 'req_3cff2a169fb9dd9a1c99f972450400ee', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea93e093fcdefab-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3cff2a169fb9dd9a1c99f972450400ee", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:44", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f.', '\u041a\u0430\u043a \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u044d\u043c\u043f\u0438\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0444\u043e\u0440\u043c\u0443\u043b.', '\u041a\u0430\u043a\u0438\u0435 \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0443\u0447\u0430\u0441\u0442\u043a\u0435.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438:\\n\\n1. <b>\u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430</b>: \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u0442\u0440\u0430\u043d \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u043e\u0432. \u042d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u043c\u043d\u043e\u0433\u043e\u043b\u0435\u0442\u043d\u0438\u0445 \u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u044f\u0445 \u0438 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.\\n\\n2. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</b>: \u0410\u043d\u0430\u043b\u0438\u0437 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0441\u0440\u0435\u0434\u043d\u044f\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0432 \u0437\u0438\u043c\u043d\u0438\u0435 \u043c\u0435\u0441\u044f\u0446\u044b \u0438 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0445\u043e\u043b\u043e\u0434\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430, \u043c\u043e\u0436\u0435\u0442 \u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f. \u041d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u044d\u0442\u043e\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u0443\u044e \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u044d\u043c\u043f\u0438\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0444\u043e\u0440\u043c\u0443\u043b.\\n\\n3. <b>\u0413\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f</b>: \u041f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u0439 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u043a\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0431\u0443\u0440\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u0437\u043e\u043d\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0434\u0430\u0442\u044c \u0442\u043e\u0447\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430. \u0422\u0430\u043a\u0438\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u043e \u043f\u0440\u043e\u0432\u043e\u0434\u044f\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0435 \u043a \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0443.\\... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:44", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:44", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='28a9ae8c-a64b-4e01-b814-93f04dbac559'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:44", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:45", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:49:45", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 51, 8, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2725, supergroup_chat_created=False, text='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c'), update_id=881193774), <telegram.ext._callbackcontext.CallbackContext object at 0x0000020741A60F30>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x00000207A450C220>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='75d41115-6294-47c7-af4d-07fc64bd7d20' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='75d41115-6294-47c7-af4d-07fc64bd7d20'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.\\n-----------\\n\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438:\\n\\n1. <b>\u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430</b>: \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u0442\u0440\u0430\u043d \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u043e\u0432. \u042d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u043c\u043d\u043e\u0433\u043e\u043b\u0435\u0442\u043d\u0438\u0445 \u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u044f\u0445 \u0438 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438.\\n\\n2. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</b>: \u0410\u043d\u0430\u043b\u0438\u0437 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0441\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741567920>, 'json_data': {'input': [[27435, 16248, 6850, 19188, 35667, 68271, 9015, 239, 6578, 4898, 97747, 5927, 38153, 16742, 45658, 35682, 97334, 5927, 87878, 7740, 40842, 1506, 45122, 1830, 21204, 5927, 7952, 12507]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '52', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999972', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_7e29d2e7384d73a7d9b2fc4909cd29c5', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94027fbb3e77e-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7e29d2e7384d73a7d9b2fc4909cd29c5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[27435, 16248, 6850, 19188, 35667, 68271, 9015, 239, 6578, 4898, 97747, 5927, 38153, 16742, 45658, 35682, 97334, 5927, 87878, 7740, 40842, 1506, 45122, 1830, 21204, 5927, 7952, 12507]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '64', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999972', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_7e6bf01cdf2f3f9b005238c8b155a97b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9402a486ce77e-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7e6bf01cdf2f3f9b005238c8b155a97b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[717, 13, 320, 73919, 1506, 35592, 5927, 36750, 51412, 482, 67891, 13404, 7753, 39127, 34613, 59313, 17766, 20879, 220, 2371, 13, 2705, 13, 679, 16, 97990, 220, 4513, 12, 55258, 36551, 26, 14257, 1830, 81659, 1840, 31443, 720, 2297, 64292, 3865, 482, 67891, 13404, 7753, 39127, 34613, 59313, 17766, 20879, 220, 1691, 13, 2589, 13, 679, 19, 97990, 220, 3192, 12, 55258, 36551, 8, 720, 17, 13, 39903, 14837, 6856, 9239, 4655, 720, 15752, 9239, 4329, 6148, 47295, 720, 49899, 23630, 2156, 38722, 17394, 18999, 11, 720, 10693, 7975, 9706, 39900, 720, 49899, 23630, 2156, 38722, 17394, 18999, 11, 720, 49899, 1482, 13337, 36750, 18999, 11, 21599, 3114, 30656, 42057, 2156, 38722, 17394, 18999, 11, 25756, 19188, 23630, 2156, 38722, 17394, 18999, 320, 5591, 11047, 12507, 41176, 3114, 1532, 18154, 68374, 17165, 720, 10124, 46... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '144', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999045', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_05960f9d57ae28ad28b9f7e42395e0b2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9402c4c6be77e-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_05960f9d57ae28ad28b9f7e42395e0b2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[1490, 33006, 720, 34604, 13810, 35297, 15088, 220, 1032, 13, 19, 482, 36479, 2233, 67124, 56892, 5927, 35387, 3865, 10693, 6856, 9706, 6856, 33006, 34604, 13810, 35297, 15088, 220, 1032, 13, 20, 12, 34604, 19188, 6578, 86610, 17618, 20879, 49284, 6735, 40231, 20440, 12561, 29256, 44155, 13433, 11047, 20346, 10124, 7740, 21599, 3114, 30656, 2233, 29256, 24803, 9706, 17165, 5927, 14391, 16331, 13433, 10693, 720, 8164, 7753, 15298, 39103, 23311, 4329, 720, 1032, 13, 19, 13, 17, 59842, 6578, 35667, 39127, 23446, 17165, 7740, 5927, 28241, 7820, 2233, 67124, 90297, 21204, 7820, 18868, 16742, 4898, 24697, 19175, 2297, 43293, 67745, 18868, 5372, 11, 52770, 68214, 7486, 1482, 13373, 720, 2233, 13810, 41056, 1532, 220, 1032, 13, 21, 13, 28599, 1830, 16742, 17165, 5524, 21477, 2233, 32985, 50807, 46177, 20879, 49284, 6... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '43', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999712', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_454965798765fe747207c6f9e6623e48', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9402eb928e77e-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_454965798765fe747207c6f9e6623e48", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[6086, 33006, 720, 34604, 13810, 35297, 15088, 220, 1032, 13, 23, 482, 80584, 15088, 80230, 13433, 7820, 7486, 72331, 30436, 17766, 44786, 11047, 20346, 10124, 5927, 7820, 17721, 13433, 2297, 1532, 7952, 12507, 1506, 720, 1032, 13, 20, 81529, 3114, 30656, 2233, 29256, 24803, 9706, 17165, 720, 1032, 13, 20, 13, 16, 81529, 3114, 30656, 2233, 29256, 24803, 9706, 17165, 93129, 73181, 14257, 6735, 22911, 28089, 18482, 5173, 38521, 10298, 12561, 29256, 44155, 13433, 7820, 38722, 12394, 21708, 320, 8164, 24803, 9706, 6856, 5927, 720, 9136, 1506, 14476, 9542, 39988, 21923, 7975, 38438, 53671, 8, 90211, 32985, 5173, 61613, 13337, 4655, 46177, 30889, 47680, 5372, 44065, 14257, 1830, 67124, 3114, 9542, 12394, 10298, 12561, 25262, 35682, 94071, 5927, 2156, 38521, 31203, 720, 6735, 5372, 7740, 28114, 15298, 39103, 23311, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '124', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999769', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_d4846d05670f77be38c6f63a49e121c6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea940308c64e77e-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d4846d05670f77be38c6f63a49e121c6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[74598, 96256, 1506, 220, 12652, 23934, 220, 14815, 33006, 33006, 16, 482, 11047, 20346, 10124, 1506, 20440, 40842, 50223, 1840, 18600, 1506, 20812, 9239, 1506, 26, 220, 17, 482, 11047, 20346, 10124, 1506, 20440, 78085, 2233, 96485, 21477, 31101, 1506, 720, 22911, 20812, 9239, 1506, 26, 220, 18, 482, 69471, 5591, 38657, 69775, 11, 30889, 47680, 5372, 44858, 14391, 8341, 17766, 12507, 26, 220, 19, 482, 21022, 2233, 6578, 8131, 56515, 34613, 720, 13433, 2233, 13433, 2297, 26, 220, 20, 482, 21923, 7975, 38438, 13433, 23934, 12561, 38438, 39900, 5524, 19479, 1830, 8341, 81301, 4898, 22885, 96573, 7753, 1840, 97065, 26, 720, 21, 482, 29619, 97747, 21923, 7975, 38438, 17165, 26, 220, 22, 482, 6850, 34493, 2156, 8341, 32062, 35723, 18600, 1506, 20812, 9239, 26, 720, 23, 482, 41291, 30656, 44858, 20879, 6578, 8341, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '72', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999802', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_ac50ddf8bbb7d901eda006cb0304e15a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9403339b5e77e-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ac50ddf8bbb7d901eda006cb0304e15a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:51:11. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n12. (\u0427\u0430\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u0430 - \u0424\u0435\u0434\u0435\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u043a\u043e\u043d \u043e\u0442 04.06.2011 \u2116 123-\u0424\u0417; \u0443\u0442\u0440\u0430\u0442\u0438\u043b\u0430 \\n\u0441\u0438\u043b\u0443 - \u0424\u0435\u0434\u0435\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u043a\u043e\u043d \u043e\u0442 21.07.2014 \u2116 255-\u0424\u0417) \\n2. \u0414\u043e\u0433\u043e\u0432\u043e\u0440\u044b \\n\u0433\u043e\u0440\u044f\u0447\u0435\u0433\u043e \\n\u0432\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u044f, \\n\u0445\u043e\u043b\u043e\u0434\u043d\u043e\u0433\u043e \\n\u0432\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u044f, \\n\u0432\u043e\u0434\u043e\u043e\u0442\u0432\u0435\u0434\u0435\u043d\u0438\u044f, \u044d\u043b\u0435\u043a\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1542', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '796623', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '253ms', 'x-request-id': 'req_1d70de9cf090b9d33b1d21797eb58ee8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94035f94e3568-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1d70de9cf090b9d33b1d21797eb58ee8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:13", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8234644300211212, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:13", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:13", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c\\n\\nLLM Response: \u0401\u043c\u043a\u043e\u0441\u0442\u044c, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043e\u043d\u0430 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c, \u043e\u0431\u044b\u0447\u043d\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f <b>\u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u044b\u043c \u0431\u0430\u043a\u043e\u043c</b> \u0438\u043b\u0438 <b>\u0440\u0435\u0437\u0435\u0440\u0432\u0443\u0430\u0440\u043e\u043c \u0434\u043b\u044f \u0432\u043e\u0434\u044b</b>. \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0432\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u044f \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0436\u0435 <b>\u0433\u0438\u0434\u0440\u043e\u0430\u043a\u043a\u0443\u043c\u0443\u043b\u044f\u0442\u043e\u0440</b> \u0438\u043b\u0438 <b>\u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043d\u0430\u043a\u043e\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0435\u0437\u0435\u0440\u0432\u0443\u0430\u0440\u043e\u0432</b>, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '185', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799663', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '25ms', 'x-request-id': 'req_066944ed13b763983ad918427174a977', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94042083f3568-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_066944ed13b763983ad918427174a977", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:14", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0401\u043c\u043a\u043e\u0441\u0442\u044c, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043e\u043d\u0430 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c, \u043e\u0431\u044b\u0447\u043d\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f <b>\u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u044b\u043c \u0431\u0430\u043a\u043e\u043c</b> \u0438\u043b\u0438 <b>\u0440\u0435\u0437\u0435\u0440\u0432\u0443\u0430\u0440\u043e\u043c \u0434\u043b\u044f \u0432\u043e\u0434\u044b</b>. \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0432\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u044f \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0436\u0435 <b>\u0433\u0438\u0434\u0440\u043e\u0430\u043a\u043a\u0443\u043c\u0443\u043b\u044f\u0442\u043e\u0440</b> \u0438\u043b\u0438 <b>\u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043d\u0430\u043a\u043e\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0435\u0437\u0435\u0440\u0432\u0443\u0430\u0440\u043e\u0432</b>, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u043e\u0434\u044b \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0432\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u044f.\\n\\n------------------\\nReferences (/references):\\n\u0416\u0438\u043b\u0438\u0449\u043d\u044b\u0439 \u043a\u043e\u0434\u0435\u043a\u0441 \u0420\u0424.pdf, pages: 281\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 79, 81\\n\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf, pages: 208\\n', {'\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf', '\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf', '\u0416\u0438\u043b\u0438\u0449\u043d\u044b\u0439 \u043a\u043e\u0434\u0435\u043a\u0441 \u0420\u0424.pdf'}, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:14", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:14", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='75d41115-6294-47c7-af4d-07fc64bd7d20'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:14", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:14", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 51, 48, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2727, supergroup_chat_created=False, text='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430'), update_id=881193775), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207414AF8C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000020741A7C310>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='09caf36b-fd84-4396-b5e9-41aa8d206376' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='09caf36b-fd84-4396-b5e9-41aa8d206376'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0401\u043c\u043a\u043e\u0441\u0442\u044c, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0432\u043e\u0434\u0430 \u0438 \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043e\u043d\u0430 \u043f\u043e\u0434\u0430\u0451\u0442\u0441\u044f \u0432 \u0434\u043e\u043c, \u043e\u0431\u044b\u0447\u043d\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f <b>\u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u044b\u043c \u0431\u0430\u043a\u043e\u043c</b> \u0438\u043b\u0438 <b>\u0440\u0435\u0437\u0435\u0440\u0432\u0443\u0430\u0440\u043e\u043c \u0434\u043b\u044f \u0432\u043e\u0434\u044b</b>. \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0432\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u044f \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0442\u0430\u043a\u0436\u0435 <b>\u0433\u0438\u0434\u0440\u043e\u0430\u043a\u043a\u0443\u043c\u0443\u043b\u044f\u0442\u043e\u0440</b> \u0438\u043b\u0438 <b>\u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043d\u0430\u043a\u043e\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0435\u0437\u0435\u0440\u0432\u0443\u0430\u0440\u043e\u0432</b>, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u043e\u0434\u044b \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0432\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u044f.\\n\\n------------------\\nReferences (/references):\\n\u0416\u0438\u043b\u0438\u0449\u043d\u044b\u0439 \u043a\u043e\u0434\u0435\u043a\u0441 \u0420\u0424.pdf, pages: 281\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 79, 81\\n\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf, pages: 208', additional_kwar... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000207415659E0>, 'json_data': {'input': [[27435, 16248, 18600, 29500, 91353, 18482, 9015, 239, 6578, 4898, 97747, 5927, 9706, 17766, 19619, 9239, 39900, 14391, 16248, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '98', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_c664552e9aa13d50c3b3395ac7cd997a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94120fe002df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c664552e9aa13d50c3b3395ac7cd997a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:50", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741567920>, 'json_data': {'input': [[27435, 16248, 18600, 29500, 91353, 18482, 9015, 239, 6578, 4898, 97747, 5927, 9706, 17766, 19619, 9239, 39900, 14391, 16248, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '102', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_21d5fa632af3a4102db898675ae2b1aa', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94128091e2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_21d5fa632af3a4102db898675ae2b1aa", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741567920>, 'json_data': {'input': [[12, 88515, 68506, 19916, 19916, 1840, 15458, 19190, 30889, 18437, 1506, 5927, 6578, 37277, 16494, 85864, 14391, 16248, 1506, 11, 12561, 19479, 16494, 32062, 35723, 25, 220, 16, 11, 17, 12, 16, 11, 18, 482, 37405, 89327, 14332, 1840, 198, 14525, 2297, 23630, 44786, 720, 3865, 68462, 15088, 11, 720, 67186, 1506, 90457, 67745, 720, 5591, 720, 8164, 6856, 37773, 13999, 12, 4898, 81659, 90877, 50681, 5372, 94962, 720, 2233, 50436, 16494, 1532, 26, 720, 16, 11, 16, 720, 12, 720, 8164, 31203, 198, 8164, 2233, 1482, 41873, 49899, 56008, 68742, 13373, 2297, 23630, 44786, 14257, 68462, 15088, 69844, 50506, 11562, 94178, 92091, 39900, 17756, 18437, 6856, 22885, 78876, 31101, 1506, 5927, 9706, 4655, 26, 20440, 198, 16248, 36352, 6578, 3865, 14009, 37773, 6856, 11047, 67124, 3114, 13337, 4655, 426, 28, 16, 627, 975, 13, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '151', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998564', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_d48cd2a079300cc2f38c5e7918ca7782', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9412cab172df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d48cd2a079300cc2f38c5e7918ca7782", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741567920>, 'json_data': {'input': [[975, 13, 21, 720, 25079, 14009, 720, 49899, 17766, 19619, 9239, 44786, 720, 10124, 16248, 6856, 720, 1840, 720, 10124, 16248, 6856, 12, 16248, 36352, 6578, 3865, 14009, 37773, 6856, 720, 7, 10124, 32985, 2156, 19619, 9239, 44786, 8, 720, 41036, 13404, 73181, 198, 8164, 44075, 44155, 6578, 8131, 2233, 28089, 18482, 11047, 20346, 10124, 29256, 24803, 9706, 4655, 512, 12, 40842, 1506, 90457, 44938, 11, 20440, 40842, 50223, 1840, 5927, 9706, 4655, 5927, 14391, 16248, 5524, 5173, 29256, 81726, 90877, 4655, 64880, 48446, 19619, 7486, 50807, 13, 23227, 7753, 13404, 89666, 4655, 6578, 5173, 29256, 81726, 90877, 4655, 6578, 198, 4898, 3114, 19619, 7486, 12507, 93129, 73181, 14257, 52037, 18226, 11320, 5591, 18482, 30889, 9239, 34613, 5927, 19190, 67602, 46177, 53280, 5591, 1840, 17394, 36352, 280, 12, 20879, 49899, 4... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '105', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998728', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_3780761651adbb791369490a5087b753', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94131ad172df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3780761651adbb791369490a5087b753", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741567920>, 'json_data': {'input': [[13, 5351, 320, 1627, 340, 975, 13, 717, 36479, 1482, 68506, 19916, 19916, 1840, 15458, 19190, 17756, 18437, 6856, 16742, 6850, 7753, 18226, 2156, 50619, 68742, 11047, 67124, 3114, 29256, 13337, 2233, 50693, 62776, 720, 93099, 16742, 25756, 9239, 4329, 6148, 47295, 198, 49899, 23630, 2156, 38722, 17394, 18999, 5927, 28114, 1840, 9706, 720, 11, 17756, 320, 2297, 38521, 17165, 11, 5524, 38972, 1506, 705, 11562, 94178, 92091, 39900, 81803, 2233, 50693, 62776, 46339, 44075, 44100, 70129, 18154, 198, 57719, 3865, 3114, 1532, 198, 13, 19829, 320, 1544, 340, 975, 13, 1032, 36479, 1482, 68506, 19916, 19916, 1840, 15458, 19190, 17756, 18437, 6856, 16742, 6850, 7753, 18226, 2156, 50619, 68742, 40842, 50223, 1840, 11047, 67124, 3114, 13337, 4655, 20440, 37405, 15752, 13337, 6856, 62776, 25756, 9239, 4329, 6148, 21708, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '139', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999080', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_58f8d7063e2e074a9ceb55654de0af34', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94136df3c2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_58f8d7063e2e074a9ceb55654de0af34", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741567920>, 'json_data': {'input': [[18, 220, 19, 482, 20879, 51548, 34082, 35034, 1506, 5927, 9706, 4655, 11, 40842, 18226, 32062, 16742, 81803, 2233, 50693, 9542, 44100, 6578, 37405, 96034, 37773, 94962, 89327, 14332, 1840, 12561, 12507, 35667, 39988, 5927, 9706, 4655, 280, 605, 220, 975, 482, 92457, 96034, 37773, 39900, 89327, 39280, 280, 508, 220, 966, 482, 20440, 18868, 7486, 15458, 12415, 14257, 83072, 15752, 6148, 18999, 5927, 9706, 4655, 627, 34604, 18437, 31101, 5927, 9706, 4655, 13373, 5524, 14082, 20812, 5372, 44065, 77083, 7094, 4655, 18868, 7486, 57186, 93129, 73181, 14257, 25657, 6148, 40251, 29893, 78876, 64322, 50807, 627, 24, 13, 22, 28599, 1830, 7486, 57186, 5927, 9706, 29256, 9706, 15752, 13337, 6856, 17165, 56449, 12648, 18600, 29500, 91353, 35667, 98781, 13373, 25190, 110, 2156, 50619, 77495, 54204, 3865, 5927, 11047, 56857... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '388', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998667', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_3589fec865e97ca71236411f847ee576', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9413bd9622df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3589fec865e97ca71236411f847ee576", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:51:54. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n- \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0430\u0441\u0430 \u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0431\u0430\u043a\u0430, \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c\u044b\u0439: 1,2-1,3 - \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438\\n\u043d\u0430\u0441\u043e\u0441\u043d\u044b\u0445 \\n\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a, \\n\u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0438\u0445 \\n\u0432 \\n\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e-\u043a\u0440\u0430\u0442\u043a\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u043c \\n\u0440\u0435\u0436\u0438\u043c\u0435; \\n1,1 \\n- \\n\u043f\u0440\u0438\\n\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043d\u0430\u0441\u043e\u0441\u043d\u044b\u0445 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a \u043c\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:51:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:51:59 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '4713', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793325', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '500ms', 'x-request-id': 'req_4612742493bc5458575abc478c423fbd', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94142884c9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4612742493bc5458575abc478c423fbd", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8743487809339768, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: unexpected '{' in field name", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 308, in generate_suggestions\n    ).format(n=n)\n      ^^^^^^^^^^^\nValueError: unexpected '{' in field name", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0420\u0430\u0441\u0447\u0435\u0442 \u0451\u043c\u043a\u043e\u0441\u0442\u0438 \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u0438 \u0432 \u0432\u043e\u0434\u0435 \u0438 \u0440\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b \u043d\u0430\u0441\u043e\u0441\u043d\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u0440\u0430\u0441\u0447\u0435\u0442\u0443:\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u0430 \u0432\u043e\u0434\u044b</b>: \u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u0440\u0430\u0441\u0445\u043e\u0434 \u0432\u043e\u0434\u044b, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u0441\u0435\u0431\u044f \u0431\u044b\u0442\u043e\u0432\u044b\u0435, \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u044b\u0435 \u043d\u0443\u0436\u0434\u044b.\\n\\n2. <b>\u041a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0430\u0441\u0430</b>: \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u0435 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0430\u0441\u0430 \u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0431\u0430\u043a\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u043e\u043d \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 1,1 \u0434\u043b\u044f \u043d\u0430\u0441\u043e\u0441\u043d\u044b\u0445 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a \u0441 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c\u044e \u043c\u0435\u043d\u0435\u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0447\u0430\u0441\u043e\u0432\u043e\u0433\u043e \u0440\u0430\u0441\u0445\u043e\u0434\u0430 \u0438 1,2-1,3 \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a, \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0438\u0445 \u0432 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e-\u043a\u0440\u0430\u0442\u043a\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435.\\n\\n3. <b>\u0420\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c</b>: \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043d\u0430\u0441\u043e\u0441\u043d\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0440\u0430\u0432\u043d\u0430 \u0438\u043b\u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u0440\u0430\u0441\u0445\u043e\u0434, \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c \u0435\u043c\u043a\u043e\u0441\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u043e \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u0444\u043e\u0440\u043c\u0443\u043b\u0435, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0449\u0435\u0439 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u043d\u0430\u0441\u043e\u0441\u043d\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0432 \u0447\u0430\u0441.\\n\\n4. <b>\u041f\u043e\u043b\u043d\u0430\u044f \u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c</b>: \u041f\u043e\u043b\u043d\u0443\u044e \u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0431\u0430\u043a\u0430 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441 \u0443\u0447\u0435\u0442\u043e\u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:00", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='09caf36b-fd84-4396-b5e9-41aa8d206376'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:01", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:52:01", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:19", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0448\u0442\u0443\u043a\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 53, 19, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2729, supergroup_chat_created=False, text='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0448\u0442\u0443\u043a\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430'), update_id=881193776), <telegram.ext._callbackcontext.CallbackContext object at 0x00000207A4586E40>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x00000207A450C9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='95868218-73eb-4b43-b400-e2f9f53afd3d' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='95868218-73eb-4b43-b400-e2f9f53afd3d'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0448\u0442\u0443\u043a\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0448\u0442\u0443\u043a\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0420\u0430\u0441\u0447\u0435\u0442 \u0451\u043c\u043a\u043e\u0441\u0442\u0438 \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u0438 \u0432 \u0432\u043e\u0434\u0435 \u0438 \u0440\u0435\u0436\u0438\u043c \u0440\u0430\u0431\u043e\u0442\u044b \u043d\u0430\u0441\u043e\u0441\u043d\u043e\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u0440\u0430\u0441\u0447\u0435\u0442\u0443:\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u0430 \u0432\u043e\u0434\u044b</b>: \u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u0440\u0430\u0441\u0445\u043e\u0434 \u0432\u043e\u0434\u044b, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u0441\u0435\u0431\u044f \u0431\u044b\u0442\u043e\u0432\u044b\u0435, \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0438 \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u044b\u0435 \u043d\u0443\u0436\u0434\u044b.\\n\\n2. <b>\u041a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0430\u0441\u0430</b>: \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u0435 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0437\u0430\u043f\u0430\u0441\u0430 \u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0431\u0430\u043a\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u043e\u043d \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 1,1 \u0434\u043b\u044f \u043d\u0430\u0441\u043e\u0441\u043d\u044b\u0445 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a \u0441 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c\u044e \u043c\u0435\u043d\u0435\u0435 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0447\u0430\u0441\u043e\u0432\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565B20>, 'json_data': {'input': [[27435, 16248, 6850, 19188, 35667, 1506, 70129, 21204, 55617, 89348, 17165, 38153, 51736, 40842, 7094, 58669, 28089, 1506, 70129, 21022, 2233, 6578, 8131, 3865, 20346, 37405, 44946, 11320, 5591, 53671, 14391, 8341, 74828]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:53:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '102', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999967', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_bad6104dc40aac56b3c576da8a54fcbe', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94359ba1c9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bad6104dc40aac56b3c576da8a54fcbe", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:21", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[27435, 16248, 6850, 19188, 35667, 1506, 70129, 21204, 55617, 89348, 17165, 38153, 51736, 40842, 7094, 58669, 28089, 1506, 70129, 21022, 2233, 6578, 8131, 3865, 20346, 37405, 44946, 11320, 5591, 53671, 14391, 8341, 74828]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:53:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '344', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999967', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_f93bcbdd02eeea1b6b17daae69986072', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9435f0d539185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f93bcbdd02eeea1b6b17daae69986072", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[74598, 96256, 1506, 220, 8848, 23934, 220, 14815, 33006, 33006, 16, 482, 11047, 20346, 10124, 4655, 20440, 40842, 50223, 1840, 18600, 1506, 20812, 9239, 1506, 7740, 46339, 2233, 94520, 6856, 17165, 26, 720, 17, 482, 69471, 5591, 38657, 69775, 11, 30889, 47680, 5372, 44858, 14391, 8341, 17766, 12507, 26, 220, 18, 482, 21022, 2233, 6578, 8131, 56515, 34613, 7820, 17721, 13433, 2297, 26, 720, 19, 482, 48446, 19619, 7486, 4655, 26, 220, 20, 482, 6850, 34493, 2156, 8341, 32062, 35723, 18600, 1506, 20812, 9239, 33006, 34604, 13810, 35297, 15088, 49520, 13, 17, 482, 35448, 8164, 2233, 94520, 6856, 13433, 18868, 5591, 7975, 1506, 45916, 1506, 1840, 320, 8164, 2233, 81448, 4655, 8, 33006, 33006, 33006, 17279, 31203, 82941, 17618, 28599, 33006, 35095, 34604, 56191, 61432, 20976, 16604, 37255, 20807, 31274, 86491, 3647... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:53:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '72', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999808', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_bc56d7d477587c123691b7c3df9cd7e2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9436599189185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bc56d7d477587c123691b7c3df9cd7e2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[74598, 96256, 1506, 220, 12652, 23934, 220, 14815, 33006, 33006, 16, 482, 11047, 20346, 10124, 1506, 20440, 40842, 50223, 1840, 18600, 1506, 20812, 9239, 1506, 26, 220, 17, 482, 11047, 20346, 10124, 1506, 20440, 78085, 2233, 96485, 21477, 31101, 1506, 720, 22911, 20812, 9239, 1506, 26, 220, 18, 482, 69471, 5591, 38657, 69775, 11, 30889, 47680, 5372, 44858, 14391, 8341, 17766, 12507, 26, 220, 19, 482, 21022, 2233, 6578, 8131, 56515, 34613, 720, 13433, 2233, 13433, 2297, 26, 220, 20, 482, 21923, 7975, 38438, 13433, 23934, 12561, 38438, 39900, 5524, 19479, 1830, 8341, 81301, 4898, 22885, 96573, 7753, 1840, 97065, 26, 720, 21, 482, 29619, 97747, 21923, 7975, 38438, 17165, 26, 220, 22, 482, 6850, 34493, 2156, 8341, 32062, 35723, 18600, 1506, 20812, 9239, 26, 720, 23, 482, 41291, 30656, 44858, 20879, 6578, 8341, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:53:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '66', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999802', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_ed8f20b2baed7c71dcdf8e66994d9757', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9436b2bf39185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ed8f20b2baed7c71dcdf8e66994d9757", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[74598, 96256, 1506, 220, 6028, 23934, 220, 14815, 33006, 34493, 2233, 25698, 8131, 6856, 25756, 2233, 21708, 19916, 7753, 39900, 11, 14257, 7094, 17721, 39900, 11, 18600, 36594, 39900, 11, 7820, 6856, 12426, 6856, 22885, 46177, 55617, 2156, 15298, 6856, 22885, 64933, 1506, 11, 5173, 49855, 96485, 90457, 67745, 720, 8164, 12507, 16494, 1482, 14391, 56515, 18999, 69471, 5591, 38657, 1840, 12648, 62315, 9706, 18264, 14257, 68462, 36352, 21022, 2233, 6578, 59921, 28241, 10693, 7820, 17721, 13433, 2297, 6856, 7740, 14391, 8341, 17766, 59921, 27717, 11, 21022, 50945, 59138, 720, 41873, 5591, 3114, 56857, 17618, 21923, 2297, 23680, 44786, 11047, 20346, 10124, 13, 720, 17279, 31203, 20879, 2297, 38521, 20812, 47273, 40842, 9136, 10298, 44786, 5927, 9706, 5927, 57925, 12394, 1506, 10693, 25756, 3114, 64569, 1840, 126... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:53:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998606', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '16ms', 'x-request-id': 'req_a3f9008b45502b94a6b433a5a66336a0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94370bf219185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a3f9008b45502b94a6b433a5a66336a0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000020741565620>, 'json_data': {'input': [[74598, 96256, 1506, 220, 5958, 23934, 220, 14815, 33006, 717, 13, 17, 13, 605, 23784, 39233, 44100, 10693, 57925, 13337, 5591, 52866, 18999, 40842, 34694, 10298, 1506, 7740, 5524, 6578, 86610, 18999, 5927, 5173, 3114, 7486, 1532, 21022, 2233, 6578, 8131, 56515, 39900, 7820, 17721, 13433, 2297, 1506, 720, 67187, 80230, 90705, 16742, 14391, 8341, 17766, 39988, 5524, 6578, 23297, 89052, 7740, 5927, 41291, 10589, 94520, 1532, 23934, 5591, 3114, 56857, 18999, 14391, 8341, 17766, 7975, 9542, 39988, 46177, 21923, 2297, 23680, 39988, 11047, 20346, 10124, 4655, 11, 720, 13433, 2233, 13433, 2297, 19175, 89159, 1482, 59313, 2233, 67124, 18264, 5927, 41291, 30656, 94962, 29619, 21956, 84198, 13, 28599, 1830, 2233, 29256, 6856, 13433, 7820, 17721, 13433, 2297, 1506, 56449, 14525, 21923, 23297, 8164, 56857, 28089, 18482, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:53:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '79', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998564', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_e0a263ca2d166291ba55d895b93ff3bd', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9437328899185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e0a263ca2d166291ba55d895b93ff3bd", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-30, 10:53:25. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 210 \u0438\u0437 239 \\n \\n \\n \\n1 - \u0442\u0440\u0443\u0431\u044b \u0434\u043b\u044f \u043f\u043e\u0434\u0430\u0447\u0438 \u0440\u0430\u0441\u0442\u0432\u043e\u0440\u0430 \u0438 \u043e\u043f\u0440\u0435\u0441\u0441\u043e\u0432\u043a\u0438; \\n2 - \u0441\u043a\u0432\u0430\u0436\u0438\u043d\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0430\u044f \u0431\u0435\u0442\u043e\u043d\u043e\u043c; 3 - \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u043d\u044b\u0439 \u043a\u0430\u0440\u043a\u0430\u0441; \\n4 - \u043a\u043b\u0430\u043f\u0430\u043d\u044b; 5 - \u043d\u0430\u0433\u043d\u0435\u0442\u0430\u0435\u043c\u044b\u0439 \u0440\u0430\u0441\u0442\u0432\u043e\u0440 \\n \\n\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u0420.2 - \u041e\u043f\u0440\u0435\u0441\u0441\u043e\u0432\u043a\u0430 \u0441\u0442\u0432\u043e\u043b\u0430 \u0441\u0432\u0430\u0438 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:53:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1103', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794395', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '420ms', 'x-request-id': 'req_43d905d4789845bf12f9d88aea8045c8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea943793e652df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_43d905d4789845bf12f9d88aea8045c8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:27", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8457774945519979, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:27", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:27", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0448\u0442\u0443\u043a\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430\\n\\nLLM Response: \u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430, \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f <b>\u0444\u0438\u043a\u0441\u0430\u0442\u043e\u0440\u0430\u043c\u0438 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u044b</b>. \u041e\u043d\u0438 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u044b \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0437\u0430\u0449\u0438\u0442\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0431\u0435\u0442\u043e\u043d\u0430 \u0438 \u0443\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u044b \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u043c \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043b\u0438\u0432\u043a\u0438.\\n\\nSuggestions:\", 'role': 'user'}], 'model': 'gpt-4o', 'n': 1, 'stream': False, 't... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:53:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '201', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799719', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '21ms', 'x-request-id': 'req_6b29ade0ec4a328f7f74ef06cdfaeab8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea943876dd12df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6b29ade0ec4a328f7f74ef06cdfaeab8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:28", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:28", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430, \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f <b>\u0444\u0438\u043a\u0441\u0430\u0442\u043e\u0440\u0430\u043c\u0438 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u044b</b>. \u041e\u043d\u0438 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u044b \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0437\u0430\u0449\u0438\u0442\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0431\u0435\u0442\u043e\u043d\u0430 \u0438 \u0443\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u044b \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u043c \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043b\u0438\u0432\u043a\u0438.\\n\\n------------------\\nReferences (/references):\\n\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf, pages: 70, 72, 208, 209\\n', {'\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf'}, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:28", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:28", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='95868218-73eb-4b43-b400-e2f9f53afd3d'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:28", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:53:29", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0438 \u0441\u043e\u0441\u0442\u043e\u044f\u0442?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002073FE87BF0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 54, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2731, supergroup_chat_created=False, text='\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0438 \u0441\u043e\u0441\u0442\u043e\u044f\u0442?'), update_id=881193777), <telegram.ext._callbackcontext.CallbackContext object at 0x0000020741A60590>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000020741A9D990>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='60b0859f-4b4c-4706-b626-f7346026d1b7' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='60b0859f-4b4c-4706-b626-f7346026d1b7'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000207414F1C10>, '\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0438 \u0441\u043e\u0441\u0442\u043e\u044f\u0442?'), kwargs: {'chat_history': [HumanMessage(content='\u0418\u0437 \u0447\u0435\u0433\u043e \u043e\u043d\u0438 \u0441\u043e\u0441\u0442\u043e\u044f\u0442?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0448\u0442\u0443\u043a\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u0443 \u043f\u0440\u0438 \u0437\u0430\u043b\u0438\u0432\u043a\u0435 \u0431\u0435\u0442\u043e\u043d\u0430, \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f <b>\u0444\u0438\u043a\u0441\u0430\u0442\u043e\u0440\u0430\u043c\u0438 \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u044b</b>. \u041e\u043d\u0438 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u044b \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0437\u0430\u0449\u0438\u0442\u043d\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0431\u0435\u0442\u043e\u043d\u0430 \u0438 \u0443\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f \u0430\u0440\u043c\u0430\u0442\u0443\u0440\u044b \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u043c \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043b\u0438\u0432\u043a\u0438.\\n\\n------------------\\nReferences (/references):\\n\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf, pages: 70, 72, 208, 209', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0451\u043c\u043a\u043e\u0441\u0442\u044c \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0420\u0430\u0441\u0447\u0435\u0442 \u0451\u043c\u043a\u043e\u0441\u0442\u0438 \u0432\u043e\u0434\u043e\u043d\u0430\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0431\u0430\u043a\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u0438 \u0432... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[31274, 9136, 17756, 47295, 8379, 23446, 92175, 61390, 1830, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:54:01 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '78', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999989', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_4c69cfd7ff5c1764345c01e48e3ff1d8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9445d89fe2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4c69cfd7ff5c1764345c01e48e3ff1d8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:02", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[31274, 9136, 17756, 47295, 8379, 23446, 92175, 61390, 1830, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:54:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999990', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_0446724498b0929c52c34169c059f5e6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea944625cfe2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0446724498b0929c52c34169c059f5e6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 2355, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 2355, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 720, 19871, 23784, 35448, 39903, 220, 23227, 49520, 57855, 23784, 43896, 1301, 249, 5996, 33006, 33006, 720, 19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 33006, 33006, 33006, 33006, 33006, 33006, 33006, 31274, 20807, 140, 244, 5619... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:54:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '146', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999784', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_423a66e01d0a03f69644bfe3ca47ce8b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94464be862dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_423a66e01d0a03f69644bfe3ca47ce8b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 49520, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 23227, 20976, 39903, 56191, 65014, 37255, 39091, 720, 38214, 34604, 37255, 140, 244, 25079, 37255, 20807, 19871, 27435, 20976, 140, 247, 35448, 61432, 20976, 34604, 20976, 20807, 140, 104, 11, 1301, 100, 34604, 56191, 36551, 16604, 140, 104, 73919, 37255, 140, 247, 20807, 140, 104, 39091, 28599, 31274, 35095, 41682, 37255, 93899, 31274, 86491, 39091, 720, 31274, 1301, 249, 31274, 27435, 16604, 31274, 25079, 37255, 93899, 31274, 31274, 23227, 20976, 19871, 65014, 56191, 25079, 19871, 35095, 16604, 31274, 140, 247, 28599, 35095, 31274, 140, 98, 31274, 140, 247, 20807, 140, 104, 140, 98, 6457... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:54:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '111', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999754', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_e1d851f2f2931eff657269f454782d23', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea94469bb252dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e1d851f2f2931eff657269f454782d23", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[39091, 31274, 20807, 31274, 19871, 35095, 56191, 34604, 19871, 35095, 16604, 20976, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 37255, 720, 31274, 1301, 244, 31274, 65014, 31274, 140, 102, 20807, 20976, 12, 27435, 20976, 39091, 39091, 41682, 20807, 37255, 65014, 140, 105, 20807, 20976, 38214, 20976, 1301, 98, 20976, 36551, 86491, 140, 247, 19871, 35095, 16604, 37255, 2355, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 33006, 720, 19871, 16604, 20976, 25079, 23227, 34604, 37255, 16604, 31274, 65014, 2355, 33006, 33006, 49526, 33006, 19871, 17279, 220, 220, 17824, 13, 9413, 18216, 15, 13, 2366, 16, 33006, 33006, 33006, 33006, 31274, 20807, 140, 244, 56191, 20807, 56191, 34604,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Sat, 30 Nov 2024 07:54:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '127', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999790', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_261fcd274ba596389f59d4eff1cea6d6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea9446f9ec12dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_261fcd274ba596389f59d4eff1cea6d6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002073FD64C20>, 'json_data': {'input': [[38214, 81726, 1506, 220, 17, 13, 80798, 34694, 30656, 4655, 58317, 1840, 11320, 14476, 44786, 73226, 13, 2355, 140, 244, 1840, 11320, 14476, 34613, 18034, 17766, 7094, 49526, 74598, 18482, 4329, 220, 868, 13, 80798, 34694, 30656, 4655, 58317, 1840, 11320, 14476, 44786, 73226, 49526, 16, 13, 80798, 34694, 30656, 50807, 58317, 1840, 11320, 14476, 44786, 73226, 46410, 5591, 14009, 70129, 21204, 58317, 64292, 51736, 76401, 86610, 18999, 13, 720, 17, 13, 1301, 244, 64292, 4655, 6578, 76401, 86610, 9882, 10298, 37405, 9136, 14525, 50819, 23934, 7975, 59921, 7486, 48150, 76401, 86610, 17618, 11, 38153, 44867, 720, 4329, 5591, 14009, 50819, 6850, 13404, 5591, 1840, 17394, 16494, 4655, 6578, 48835, 86630, 12507, 7740, 37405, 15752, 9706, 13999, 20440, 18154, 6735, 61390, 2156, 39900, 12561, 21956, 28089, 39280, 720, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 10:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:14", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-30 13:46:17", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-30 13:46:18", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-30 13:46:18", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-30 13:46:20", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:20", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:20", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:21", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:21", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:21", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:21", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:21", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:21", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:22", "name": "decorators", "levelname": "WARNING", "message": "Documents not indexed for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:22", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:22", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:22", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:22", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/status'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:22", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: status with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 7, 55, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=7, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2732, supergroup_chat_created=False, text='/status'), update_id=881193778), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B03596D9B0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:22", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: status with result: <coroutine object BotHandlers.status at 0x000001B0357E9FC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "handlers", "levelname": "INFO", "message": "Provided status to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 8, 5, 11, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2733, supergroup_chat_created=False, text='/start'), update_id=881193779), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B03596D9B0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x000001B0357E35B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:23", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/clear_context'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: clear_context with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 8, 27, 39, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=14, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2734, supergroup_chat_created=False, text='/clear_context'), update_id=881193780), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B03596D9B0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: clear_context with result: <coroutine object BotHandlers.clear_context at 0x000001B03462FA00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 initiated /clear_context command.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'folder_path' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'vector_store_loaded' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'valid_files_in_folder' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'context_source' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'file_id_map' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'conversation_id' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "DEBUG", "message": "Cleared vector_store for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "DEBUG", "message": "Cleared folder path in database for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "handlers", "levelname": "INFO", "message": "Context cleared for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:24", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:25", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: \u0415\u0432\u0433\u0435\u043d\u0438\u0439 \u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "decorators", "levelname": "WARNING", "message": "Documents not indexed for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:26", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:27", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:27", "name": "decorators", "levelname": "WARNING", "message": "Documents not indexed for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:27", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:27", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:27", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:27", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=317522179, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', type=<ChatType.PRIVATE>, username='profyuristy'), date=datetime.datetime(2024, 11, 30, 8, 44, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='\u0415\u0432\u0433\u0435\u043d\u0438\u0439', id=317522179, is_bot=False, is_premium=True, language_code='ru', last_name='\u041d\u0438\u043a\u0438\u0442\u0438\u043d \u041f\u0440\u043e\u0444\u042e\u0440\u0438\u0441\u0442\u044b', username='profyuristy'), group_chat_created=False, message_id=2737, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193786), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B03596F310>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:27", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001B0357FFAC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:28", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:28", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=317522179, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:28", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:28", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:28", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=317522179: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:29", "name": "decorators", "levelname": "WARNING", "message": "Documents not indexed for user_id=317522179", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:29", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=487183257", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:29", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=487183257", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:29", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=487183257", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 487183257", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: ntlstldev", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "decorators", "levelname": "DEBUG", "message": "Initialized language for user_id=487183257: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "decorators", "levelname": "ERROR", "message": "Error ensuring documents are indexed for user_id 487183257: 'ru'", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 254, in wrapper\n    system_response = text.ContextErrors.documents_not_indexed(language=language)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\text.py\", line 1029, in documents_not_indexed\n    return messages[language]\n           ~~~~~~~~^^^^^^^^^^\nKeyError: 'ru'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "telegram.ext.Application", "levelname": "ERROR", "message": "No error handlers are registered, logging exception.", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 254, in wrapper\n    system_response = text.ContextErrors.documents_not_indexed(language=language)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\text.py\", line 1029, in documents_not_indexed\n    return messages[language]\n           ~~~~~~~~^^^^^^^^^^\nKeyError: 'ru'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_application.py\", line 1319, in process_update\n    await coroutine\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_handlers\\basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 179, in wrapper\n    return await func(self, update, context, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 238, in wrapper\n    return await func(self, update, context, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 266, in wrapper\n    system_response = text.Responses.generic_error(language=context.user_data.get(\"language\", \"English\"))\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\text.py\", line 738, in generic_error\n    return messages[language]\n           ~~~~~~~~^^^^^^^^^^\nKeyError: 'ru'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=487183257", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=487183257", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=487183257: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "decorators", "levelname": "ERROR", "message": "Error ensuring documents are indexed for user_id 487183257: 'ru'", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 254, in wrapper\n    system_response = text.ContextErrors.documents_not_indexed(language=language)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\text.py\", line 1029, in documents_not_indexed\n    return messages[language]\n           ~~~~~~~~^^^^^^^^^^\nKeyError: 'ru'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "telegram.ext.Application", "levelname": "ERROR", "message": "No error handlers are registered, logging exception.", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 254, in wrapper\n    system_response = text.ContextErrors.documents_not_indexed(language=language)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\text.py\", line 1029, in documents_not_indexed\n    return messages[language]\n           ~~~~~~~~^^^^^^^^^^\nKeyError: 'ru'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_application.py\", line 1319, in process_update\n    await coroutine\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_handlers\\basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 179, in wrapper\n    return await func(self, update, context, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 238, in wrapper\n    return await func(self, update, context, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 266, in wrapper\n    system_response = text.Responses.generic_error(language=context.user_data.get(\"language\", \"English\"))\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\text.py\", line 738, in generic_error\n    return messages[language]\n           ~~~~~~~~^^^^^^^^^^\nKeyError: 'ru'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 10, 45, 31, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2741, supergroup_chat_created=False, text='/start'), update_id=881193790), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B03596F4D0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x000001B0357E35B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:46:31", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:05", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:05", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:05", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:05", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:05", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 10, 48, 4, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2751, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193791), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B035B0ABA0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001B035905360>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:06", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:06", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659133817546', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 30, 10, 48, 5, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2752, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001B0359705C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001B0359B1940>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001B0359B1940>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 13:48:08", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:42", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Irina Ku", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "decorators", "levelname": "DEBUG", "message": "Initialized language for user_id=360763238: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=360763238, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 1, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), group_chat_created=False, message_id=2754, supergroup_chat_created=False, text='/start'), update_id=881193793), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B03596E200>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x000001B0357E35B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:43", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:44", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:01:44", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:02:55", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:02:55", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=360763238, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:02:55", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 2, 54, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), group_chat_created=False, message_id=2756, supergroup_chat_created=False, text='/start'), update_id=881193794), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B037074DE0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:02:55", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x000001B0357E3810>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:02:55", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:02:56", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:02:56", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:42", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:42", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:42", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:42", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=360763238, message='/language'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:42", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: language with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 5, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=9, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), group_chat_created=False, message_id=2758, supergroup_chat_created=False, text='/language'), update_id=881193795), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B037074A60>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:42", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: language with result: <coroutine object BotHandlers.language at 0x000001B0359A88C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:43", "name": "handlers", "levelname": "INFO", "message": "Prompted language selection for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:43", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:45", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:45", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:45", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:45", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=360763238, message='set_language:Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(callback_query=CallbackQuery(chat_instance='-3027535126916280000', data='set_language:Russian', from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), id='1549466311314617605', message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 5, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2759, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), (InlineKeyboardButton(callback_data='set_language:Indo... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x000001B035927CD0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:46", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'Russian' for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:46", "name": "handlers", "levelname": "INFO", "message": "User_id=360763238 set language to 'Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:05:46", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:05", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:05", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:05", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:05", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=360763238, message='set_language:English'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:05", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(callback_query=CallbackQuery(chat_instance='-3027535126916280000', data='set_language:English', from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), id='1549466309574761112', message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 5, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2759, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), (InlineKeyboardButton(callback_data='set_language:Indo... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x000001B0359270F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:06", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'English' for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:06", "name": "handlers", "levelname": "INFO", "message": "User_id=360763238 set language to 'English'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:06", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:07", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:07", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:07", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: English", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:07", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=360763238, message='set_language:English'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:07", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(callback_query=CallbackQuery(chat_instance='-3027535126916280000', data='set_language:English', from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), id='1549466312385098606', message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 5, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2759, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), (InlineKeyboardButton(callback_data='set_language:Indo... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:07", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x000001B035926770>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:07", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'English' for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:08", "name": "handlers", "levelname": "INFO", "message": "User_id=360763238 set language to 'English'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:08", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:16", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:16", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:16", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: English", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:16", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=360763238, message='set_language:Indonesian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:16", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(callback_query=CallbackQuery(chat_instance='-3027535126916280000', data='set_language:Indonesian', from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), id='1549466310917484111', message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 5, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2759, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), (InlineKeyboardButton(callback_data='set_language:I... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x000001B035927A70>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:17", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'Indonesian' for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:17", "name": "handlers", "levelname": "INFO", "message": "User_id=360763238 set language to 'Indonesian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:26", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:26", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:26", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: Indonesian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:26", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=360763238, message='/language'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:26", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: language with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 6, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=9, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), group_chat_created=False, message_id=2764, supergroup_chat_created=False, text='/language'), update_id=881193800), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B035B0A4A0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:26", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: language with result: <coroutine object BotHandlers.language at 0x000001B0359A88C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:27", "name": "handlers", "levelname": "INFO", "message": "Prompted language selection for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:27", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:29", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:30", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: Indonesian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:30", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=360763238, message='set_language:Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(callback_query=CallbackQuery(chat_instance='-3027535126916280000', data='set_language:Russian', from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), id='1549466310896827965', message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 6, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2765, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), (InlineKeyboardButton(callback_data='set_language:Indo... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x000001B035924E80>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:30", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'Russian' for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:30", "name": "handlers", "levelname": "INFO", "message": "User_id=360763238 set language to 'Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:06:30", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:13", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:13", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:13", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:13", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=360763238, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:13", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 7, 12, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), group_chat_created=False, message_id=2767, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193802), <telegram.ext._callbackcontext.CallbackContext object at 0x000001B037076430>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:13", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001B035B66E60>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:14", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:14", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:16", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:16", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:16", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=360763238: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:16", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=360763238, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:16", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001B0102EF530>, Update(callback_query=CallbackQuery(chat_instance='-3027535126916280000', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Irina', id=360763238, is_bot=False, language_code='ru', last_name='Ku', username='Irina_2808'), id='1549466312615455482', message=Message(channel_chat_created=False, chat=Chat(first_name='Irina', id=360763238, last_name='Ku', type=<ChatType.PRIVATE>, username='Irina_2808'), date=datetime.datetime(2024, 11, 30, 11, 7, 13, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2768, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indo... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001B035971220>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001B0A7289C40>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001B0A7289C40>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=360763238", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-30 14:07:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=360763238, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
