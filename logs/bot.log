{"asctime": "2024-11-29 09:10:57", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:10:58", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:10:59", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:10:59", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:11:00", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 7957491500", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: ZYUEV plas", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Initialized language for user_id=7957491500: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=7957491500, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='ZYUEV plas', id=7957491500, type=<ChatType.PRIVATE>, username='ZYUEV'), date=datetime.datetime(2024, 11, 28, 18, 20, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='ZYUEV plas', id=7957491500, is_bot=False, language_code='ru', username='ZYUEV'), group_chat_created=False, message_id=2534, supergroup_chat_created=False, text='/start'), update_id=881193657), <telegram.ext._callbackcontext.CallbackContext object at 0x0000018B12102F90>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000018B11F73810>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=7957491500", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:02", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=7957491500", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:02", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=7957491500, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:55", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 11, 55, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2536, supergroup_chat_created=False, text='/start'), update_id=881193658), <telegram.ext._callbackcontext.CallbackContext object at 0x0000018B121037E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000018B11F736E0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:58", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:58", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 12, 1, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2538, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193659), <telegram.ext._callbackcontext.CallbackContext object at 0x0000018B121015C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000018B11F879A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659032932607', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 12, 1, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2539, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000018B10DBB8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000018B12141370>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000018B12141370>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 13, 22, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2541, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193661), <telegram.ext._callbackcontext.CallbackContext object at 0x0000018B121015C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000018B120CDF20>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='fd748cf4-b296-4e25-8c47-ef8c5322e0c8' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='fd748cf4-b296-4e25-8c47-ef8c5322e0c8'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000018B12141370>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='Tell me the joke about Indonesian construction', additional_kwargs={}, response_metadata={}), AIMessage(content=\"I'm sorry, but I don't know a specific joke about Indonesian construction. If you have any other questions or need assistance, feel free to ask!\\n\\n------------------\\nReferences:\\nRISBT-FINAL-APRESIASI-REV-Bedah-Buku-Jimmy-Yuwana-pdf.pdf, pages: 2, 495, 591, 595\", additional_kwargs={}, response_metadata={}), HumanMessage(content='Do you like  my name?', additional_kwargs={}, response_metadata={}), AIMessage(content=\"As an AI, I don't have personal preferences or feelings, but I'm happy to assist you, Findus! It's a un... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B121C6CA0>, 'json_data': {'input': [[4898, 16248, 16742, 18868, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:13:24 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '39'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_d360df73e224d7ed011d5148b96d72b5'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=fR5d1N8Og7_.f9nGoIE44Orr2LdvXnLY4mpn8c3B.Gs-1732860804-1.0.1.1-.ax315bJvYH.nM14PUGGE2Yc4O2bosjDoa7_zf... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d360df73e224d7ed011d5148b96d72b5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[4898, 16248, 16742, 18868, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '33', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_f0a2c61a4e94946cb74a8f2a6ffcdde6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0739acb55b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f0a2c61a4e94946cb74a8f2a6ffcdde6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '123', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_6eb69f963f64c1673830285b5facf976', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0739e7f58b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6eb69f963f64c1673830285b5facf976", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '88', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_d1095a72572fd320573cbfc86b62b354', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea073a26af4b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d1095a72572fd320573cbfc86b62b354", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '140', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998365', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_794156e54b97c00913bf8e70dd3adcc6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea073a60ee8b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_794156e54b97c00913bf8e70dd3adcc6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[7094, 14009, 11047, 98285, 2156, 7975, 14837, 81301, 17165, 10693, 77083, 7094, 570, 33006, 605, 13, 23, 720, 60627, 4898, 2233, 90705, 51736, 720, 8164, 2233, 1482, 10298, 4655, 720, 1840, 11320, 720, 15088, 14525, 720, 8164, 2233, 1482, 41873, 49899, 20812, 5372, 44786, 720, 8164, 12507, 86610, 62491, 11, 720, 8164, 44075, 2156, 19188, 31281, 5372, 44065, 20440, 22918, 6735, 35034, 5372, 39900, 12561, 9542, 74351, 5927, 35387, 3865, 10693, 1506, 5927, 11047, 67124, 3114, 35723, 28114, 1840, 9706, 25756, 87878, 11, 93129, 73181, 720, 89554, 6578, 86610, 18482, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 20879, 29619, 1506, 46177, 25190, 109, 38438, 21708, 5173, 39865, 14476, 23680, 17165, 57297, 6850, 41873, 1506, 41291, 10298, 1506, 11, 21022, 20440, 720, 8164, 2233,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '123', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998495', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_962a57aa10625dbd91dfc4deca4b3771', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea073a8b9f4b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_962a57aa10625dbd91dfc4deca4b3771", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:13:27. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n84 \\n \\n\u0430) \u0438\u0437\u0432\u0435\u0449\u0430\u0442\u0435\u043b\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u043e\u043b\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430 (\u0432\u043a\u043b\u044e\u0447\u0430\u044f \\n\u043f\u043e\u0434\u0432\u0430\u043b\u044b), \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e\u0441\u044f \u043d\u0430 900 \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 \u043c\u043c \u0432\u044b\u0448\u0435 \u0438\u043b\u0438 \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u0441\u043c\u0435\u0436\u043d\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430; \\n\u0431) \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043e\u0442 \u043b\u044e\u0431\u043e\u0433\u043e \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u043d\u0430 \u044d\u0442\u0430\u0436\u0435 \u0434... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:13:32 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '4734'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793891'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '458ms'), ('x-request-id', 'req_fe6642a18c723723b8e9f4c57475936f'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=2tXxJRbSKYUt7sMXXisIUT5lKHWb59rTqHrXo7BnmEU-1732860812-1.0.1.1-KNEeJKdQSFMGf9kFlr3ZQaeEj8YQaOWquKR80kbTPmh3vdSNyp4KCQk8XhGSvWJxv5sBZajaWQpolEAKPt9I4g; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fe6642a18c723723b8e9f4c57475936f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8543789145294048, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and response, determine whether additional suggestions would help the user continue the conversation effectively. If yes, provide up to 3 follow-up questions or topics that the user can clarify or explore further. If no further suggestions are needed, respond with 'No suggestions needed.'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0443 \u043c\u0435\u043d\u044f \u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043e\u0441\u0442\u0430\u0432\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u0432\u044b\u0431\u043e\u0440 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0436\u0435\u043b\u0430\u0435\u043c\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043e\u043c \u0438\u043b\u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u043e\u0440\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430.\\n\\nSuggestions:\", 'role': 'user'}], 'model': 'gpt-4o', 'n': 1, 'stream': Fals... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1041', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799684', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '23ms', 'x-request-id': 'req_6c0a0709db134153dbd7b8967308eb42', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea073cd79194ac5-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6c0a0709db134153dbd7b8967308eb42", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: object of type 'LLMResult' has no len()", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 319, in generate_suggestions\n    if suggestions_response and len(suggestions_response) > 0:\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: object of type 'LLMResult' has no len()", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0443 \u043c\u0435\u043d\u044f \u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043e\u0441\u0442\u0430\u0432\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u0432\u044b\u0431\u043e\u0440 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0436\u0435\u043b\u0430\u0435\u043c\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043e\u043c \u0438\u043b\u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u043e\u0440\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430.\\n\\n------------------\\nReferences:\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 76, 83\\n\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421\u041f 1.13130.2020.pdf, pages: 20\\n\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044f \u0438 \u043a\u043e\u043d\u0434\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430_\u0421\u041f 60.13330.2020.pdf, pages: 63\\n', {'\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421\u041f 1.13130.2020.pdf', '\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf', '\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044f \u0438 \u043a\u043e\u043d\u0434\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430_\u0421\u041f 60.13330.2020.pdf'}, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='fd748cf4-b296-4e25-8c47-ef8c5322e0c8'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:35", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:05", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:25:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:25:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:25:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:25:10", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000028964A8B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 25, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2543, supergroup_chat_created=False, text='/start'), update_id=881193662), <telegram.ext._callbackcontext.CallbackContext object at 0x000002890A0CB150>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000028909F73480>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000028964A8B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 25, 14, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2545, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193663), <telegram.ext._callbackcontext.CallbackContext object at 0x000002890A0CB380>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000028909F8B520>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:15", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:15", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000028964A8B7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661891825317', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 25, 14, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2546, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000028908DBB8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000002890A2658E0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000002890A2658E0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000028964A8B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 25, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2548, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193665), <telegram.ext._callbackcontext.CallbackContext object at 0x000002890A0CB5B0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000002890A0F20C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='b8aac589-def2-4c0a-bb52-94e80e436193' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='b8aac589-def2-4c0a-bb52-94e80e436193'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000002890A2658E0>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0443 \u043c\u0435\u043d\u044f \u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043e\u0441\u0442\u0430\u0432\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u0432\u044b\u0431\u043e\u0440 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0436\u0435\u043b\u0430\u0435\u043c\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043e\u043c \u0438\u043b\u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u043e\u0440\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430.\\n\\n------------------\\nReferences:\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 76, 83\\n\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002890A253EC0>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:25:46 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '72'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_5d769863c186de0c9f8c75dd8d1346c7'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=LN6_pOYdd6A9YWaGKPwzpknm55f_acbRaONctClqKIs-1732861546-1.0.1.1-VOKBRFk95AEh.pXQznH7krzu.5QlstEGd7Se0i... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5d769863c186de0c9f8c75dd8d1346c7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000289089B4CC0>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '60', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_23058c4b567333b2e2cf048000b81fac', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085bbfaff2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_23058c4b567333b2e2cf048000b81fac", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000289089B4CC0>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '113', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_64b3b01e6f8e131a78075c9130cb9021', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085c1ef812df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_64b3b01e6f8e131a78075c9130cb9021", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000289089B4CC0>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '152', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_9cefce41fb5bef33d5d1be5dbd5f5b50', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085c80b7c2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9cefce41fb5bef33d5d1be5dbd5f5b50", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002890A28AFC0>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '193', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_9a3f743d9f39a867a1d60e15e58a4515', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085cd1f642df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9a3f743d9f39a867a1d60e15e58a4515", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002890A28AFC0>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '85', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998365', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_45f3f1ec7d433fe75391e37d75ade9ac', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085d04a062df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_45f3f1ec7d433fe75391e37d75ade9ac", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:25:52. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:26:00 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '6622'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793625'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '478ms'), ('x-request-id', 'req_7ffcec8068edce8cb53cecdb34b536b8'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=e_oM5GZtJfmhsHMzOHWoJwqs5eAMYvU8u0mfHMy1uEE-1732861560-1.0.1.1-aZtmqms1Wy7Qe_giO_l0luBiGj6vJpByEDPLhbFztYd5rlln6NcZWu1hZC37onKqn4Intk.cOHP1bkPxtih8yQ; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7ffcec8068edce8cb53cecdb34b536b8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: Invalid input type <class 'langchain_core.messages.human.HumanMessage'>. Must be a PromptValue, str, or list of BaseMessages.", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 314, in generate_suggestions\n    suggestions_response = self.llm.generate([message])\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 643, in generate\n    raise e\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 633, in generate\n    self._generate_with_cache(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 851, in _generate_with_cache\n    result = self._generate(\n             ^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 692, in _generate\n    payload = self._get_request_payload(messages, stop=stop, **kwargs)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 717, in _get_request_payload\n    messages = self._convert_input(input_).to_messages()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 273, in _convert_input\n    raise ValueError(msg)\nValueError: Invalid input type <class 'langchain_core.messages.human.HumanMessage'>. Must be a PromptValue, str, or list of BaseMessages.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0438 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439. \u041e\u0434\u043d\u0430\u043a\u043e, \u0442\u0438\u043f\u0438\u0447\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e\u043b\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e\u043b\u0430.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u042d\u0442\u043e \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0417\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e\u043b\u0430 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n5. <b>\u0427\u0438\u0441\u0442\u043e\u0432\u043e\u0439 \u0431\u0435\u0442\u043e\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 (\u0441\u0442\u044f\u0436\u043a\u0430)</b>: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u0438 \u0440\u043e\u0432\u043d\u0443\u044e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f.\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u041c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u0441\u0435\u0431\u044f \u043f\u043b\u0438\u0442\u043a\u0443, \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c \u0438\u043b\u0438 \u043f\u0430\u0440\u043a\u0435\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f.\\n\\n\u042d\u0442\u0438 \u0441\u043b\u043e\u0438 \u043c\u043e\u0433\u0443\u0442 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439, \u0442\u0438\u043f\u0430 \u0433\u0440\u0443\u043d\u0442\u0430 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:01", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='b8aac589-def2-4c0a-bb52-94e80e436193'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:01", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:33", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:30:34", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:30:34", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:30:35", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:30:37", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:37", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:37", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/status'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: status with args: (<handlers.BotHandlers object at 0x000001AF735FB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 30, 37, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=7, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2550, supergroup_chat_created=False, text='/status'), update_id=881193666), <telegram.ext._callbackcontext.CallbackContext object at 0x000001AF18D5ADD0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: status with result: <coroutine object BotHandlers.status at 0x000001AF18C0A110>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:39", "name": "handlers", "levelname": "INFO", "message": "Provided status to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:39", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:42", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001AF735FB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 30, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2552, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193667), <telegram.ext._callbackcontext.CallbackContext object at 0x000001AF18D5B460>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001AF18C1B520>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001AF735FB7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660290209692', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 30, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2553, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001AF17A4B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001AF18F25AF0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001AF18F25AF0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:46", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:00", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:00", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001AF735FB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 31, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2555, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193669), <telegram.ext._callbackcontext.CallbackContext object at 0x000001AF18D5B620>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001AF18D820C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='c3ac41b8-43ec-44bd-80bb-86c83c9cbd17' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='c3ac41b8-43ec-44bd-80bb-86c83c9cbd17'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001AF18F25AF0>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0438 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439. \u041e\u0434\u043d\u0430\u043a\u043e, \u0442\u0438\u043f\u0438\u0447\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e\u043b\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e\u043b\u0430.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u042d\u0442\u043e \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0417\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e\u043b\u0430 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF18F13B00>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:31:02 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '164'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_bb443690405d0ac742c3faf00acc5eac'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=lkBdznxCMKE9OXRC4NGncpT5fv3pLP7QwPPpVbrfRlM-1732861862-1.0.1.1-S1QiozGKayZCLtmHEqVWnOtms0.Exjqitde4E... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bb443690405d0ac742c3faf00acc5eac", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF17654D60>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '43', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_1f27b8301254fa54366608141f06043f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d6fb8e42df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1f27b8301254fa54366608141f06043f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF17654D60>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '175', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_0673927bcf68b5003fa84c94c205b910', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d765dbd2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0673927bcf68b5003fa84c94c205b910", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF17654D60>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '172', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_ecd96f931341d7182b9e89c8c1609a63', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d791fe22df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ecd96f931341d7182b9e89c8c1609a63", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF18F4F7E0>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '165', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_e8dff8e83ca35a398e6326629de47e83', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d7f8c262df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e8dff8e83ca35a398e6326629de47e83", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF18F4F7E0>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '163', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998365', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_987eff21c44cc69ddc3e6e6194418f0d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d82ae182df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_987eff21c44cc69ddc3e6e6194418f0d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:31:06. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:31:40 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '32725'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793075'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '519ms'), ('x-request-id', 'req_886af9dc0592d2fa9e0ec613bd8dd15f'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=rJbTW3ep9kET4eWtwRbR1Oz8YiTrijpnv9WJUUaZj3A-1732861900-1.0.1.1-_ua5yLPkKCBvi9Q.5jdF3V1SP.4ad2ULTPY_AwdElBLG_buin0oQ8hqCQlcuWMDXmJKyfss9UNhIJ_5Hd2q5_A; path=/; expires=Fri, 2... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_886af9dc0592d2fa9e0ec613bd8dd15f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and response, determine whether additional suggestions would help the user continue the conversation effectively. If yes, provide up to 3 follow-up questions or topics that the user can clarify or explore further. If no further suggestions are needed, respond with 'No suggestions needed.'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430:\\n\\n1. **\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442**: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043b\u043e\u0438 \u043f\u043e\u043b\u0430.\\n2. **\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430**: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. **\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f**: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1812', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799379', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '46ms', 'x-request-id': 'req_fa05efd57167e820189fe7f6ed7359c7', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08e5f8afa2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fa05efd57167e820189fe7f6ed7359c7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\"\u041a\u0430\u043a\u0438\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u043b\u0430?\"', '\"\u041a\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f \u0432\u044b \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0438\u0442\u0430\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u0441\u0432\u043e\u0435\u043c \u0434\u043e\u043c\u0435 \u0438 \u043f\u043e\u0447\u0435\u043c\u0443?\"', '\"\u0415\u0441\u0442\u044c \u043b\u0438 \u0443 \u0432\u0430\u0448\u0435\u0433\u043e \u0434\u043e\u043c\u0430 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430?\"']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043b\u043e\u0438 \u043f\u043e\u043b\u0430.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n5. <b>\u0410\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u044f\u0436\u043a\u0430</b>: \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f. \u0410\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u0441\u0435\u0442\u043a\u043e\u0439 \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438.\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0438 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043b\u0438\u0442\u043a\u0430, \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043f\u0430\u0440\u043a\u0435\u0442 \u0438\u043b\u0438 \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c.\\n\\n\u042d\u0442\u0430 \u0441\u0445\u0435\u043c\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='c3ac41b8-43ec-44bd-80bb-86c83c9cbd17'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:44", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:06", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:34:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:34:08", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:34:08", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:34:26", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:26", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:26", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000023F2BF0B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 34, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2557, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193670), <telegram.ext._callbackcontext.CallbackContext object at 0x0000023F51560FA0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000023F513EB9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000023F2BF0B7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658013570100', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 34, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2558, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000023F511EB8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000023F515A2600>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000023F515A2600>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000023F2BF0B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 34, 38, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2560, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193672), <telegram.ext._callbackcontext.CallbackContext object at 0x0000023F51561630>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000023F5152DD80>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='aec4fea4-b471-4c82-bd84-4ee071fab277' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='aec4fea4-b471-4c82-bd84-4ee071fab277'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000023F515A2600>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043b\u043e\u0438 \u043f\u043e\u043b\u0430.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>:... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F515DF560>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:34:40 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '82'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_6bc1f23fa9322624d9751732f06bb2eb'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=sh.d2.GIN.4zgi_2A2TXb9ex2VoscymjRrPo02lUIHU-1732862080-1.0.1.1-L1XShK3UGlRUDAAUMOyb3Opz_fBxbdqk3Y_qKh... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6bc1f23fa9322624d9751732f06bb2eb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '161', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_2d858be8aecce6746828317cc965e383', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092c499522dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2d858be8aecce6746828317cc965e383", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '166', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_3bbffd6c24aa4d6302f848cdf1b1df79', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092cbfeaf2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3bbffd6c24aa4d6302f848cdf1b1df79", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '144', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_2f2f91c623d0cd15a4deedb2d6fd416a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092d2abab2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2f2f91c623d0cd15a4deedb2d6fd416a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '81', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_336ca193690b437bd125526570811fa9', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092d8e8a42dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_336ca193690b437bd125526570811fa9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998364', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_e9c2a9941706320b5ef578633a2af9a8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092dfbe052dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e9c2a9941706320b5ef578633a2af9a8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:34:45. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:34:53 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '6565'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792545'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '559ms'), ('x-request-id', 'req_81163ecbd040ca2f25b41ba62eb3b13f'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=TLba3myOhUwH5olXCnI4b.mAVzSZcSwGvS1J3nr4X_I-1732862093-1.0.1.1-fJGlPOUVYx8NVDC1zh9ew15b2MmnMsgvQudEX1zpTAhULlMP51wnPY2ZZUbZc5XeczFS0HqKMhtmaLsFaJ9yog; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_81163ecbd040ca2f25b41ba62eb3b13f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and response, determine whether additional suggestions would help the user continue the conversation effectively. If yes, provide up to 3 follow-up questions or topics that the user can clarify or explore further. If no further suggestions are needed, respond with 'No suggestions needed.'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432:\\n\\n1. **\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442**: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n2. **\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430**: \u042d\u0442\u043e\u0442 \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. **\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f**: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438 \u0438\u0437 \u0433\u0440\u0443\u043d\u0442\u0430.\\n4. **\u0422\u0435\u043f\u043b\u043e\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2086', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799400', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '45ms', 'x-request-id': 'req_f5cdffaab385d40ab2d215598ce9be43', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0931459372dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f5cdffaab385d40ab2d215598ce9be43", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u041a\u0430\u043a\u0438\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u044b \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430, \u0438 \u043a\u0430\u043a \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430?', '\u041a\u0430\u043a\u043e\u0435 \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435 \u0432\u044b \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u0442\u0435, \u0438 \u0435\u0441\u0442\u044c \u043b\u0438 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u043f\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c \u0438\u043b\u0438 \u0441\u0442\u0438\u043b\u044e?', '\u041f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442\u0435 \u043b\u0438 \u0432\u044b \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0443 \u043f\u043e\u043b\u0430, \u0438\u043b\u0438 \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442\u0435\u0441\u044c \u043d\u0430\u043d\u0438\u043c\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u043e\u0432?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u042d\u0442\u043e\u0442 \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438 \u0438\u0437 \u0433\u0440\u0443\u043d\u0442\u0430.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n5. <b>\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u044f\u0436\u043a\u0430</b>: \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u0438 \u0440\u043e\u0432\u043d\u0443\u044e \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f. \u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0430\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438.\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043b\u0438\u0442\u043a\u0430, \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043f\u0430\u0440\u043a\u0435\u0442 \u0438\u043b\u0438 \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c.\\n\\n\u042d\u0442\u0438 \u0441\u043b\u043e\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:57", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='aec4fea4-b471-4c82-bd84-4ee071fab277'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:57", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:50:35", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:50:36", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:50:37", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:50:37", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:51:32", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:32", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:32", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:34", "name": "decorators", "levelname": "WARNING", "message": "Documents not indexed for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001E89F6527B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 51, 35, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2564, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193674), <telegram.ext._callbackcontext.CallbackContext object at 0x000001E8C4B81630>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001E8C4A0F9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:37", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001E89F6527B0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658269182318', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 51, 36, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2565, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001E8C383B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001E8C4B6FE00>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001E8C4B6FE00>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001E89F6527B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 51, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2567, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193676), <telegram.ext._callbackcontext.CallbackContext object at 0x000001E8C4B81630>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001E8C4A077F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='0871604c-6138-481d-a6b3-6887880cbcae' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='0871604c-6138-481d-a6b3-6887880cbcae'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001E8C4B6FE00>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content=\"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u042d\u0442\u043e\u0442 \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438 \u0438\u0437 \u0433\u0440\u0443\u043d\u0442\u0430.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C4C03A60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:51:45 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '122'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_102dd302e4a2dc595e56fbbf6f2c1ba7'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=z8zSkaugf3gy0sS.TNkDKDkuR2V2_DiLqRwlJ.SPqME-1732863105-1.0.1.1-Gd7NA8JK8OcDBGkn0auSNtgJEKx4UrHKVQdgO... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_102dd302e4a2dc595e56fbbf6f2c1ba7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '70', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_9116a68532e4e6872df3ce55b5d07771', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abc8b8a12dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9116a68532e4e6872df3ce55b5d07771", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '118', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_bd8568dfd46800d47590431c8c8a5a9d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abcaea002dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bd8568dfd46800d47590431c8c8a5a9d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '75', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_1a3dcb0c39c9a380164eec325e7a463b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abd12efe2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1a3dcb0c39c9a380164eec325e7a463b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '261', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998944', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_9c7f301d264e7d556782d58c1f66d2b1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abd7bc8d2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9c7f301d264e7d556782d58c1f66d2b1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '79', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_5794eeb9158dcc7d27e4c32fb087bba3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abdbefb62dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5794eeb9158dcc7d27e4c32fb087bba3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:51:49. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:51:56 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '6221'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793025'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '523ms'), ('x-request-id', 'req_583b5d275ca44460ed19870fa65b8b7d'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=EBXFXyDd1szb.2T4XEHfqLCf4ySR8RhBXT6EPeMoR7o-1732863116-1.0.1.1-NEfzputZ0FziZGDn1ks6Y7cz4CTZjwP5DPNIwMEkZdD8hjqtxBJaeiw4T2iyAP7wa8bb3ndOs7TLrE6j1bHXew; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_583b5d275ca44460ed19870fa65b8b7d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and response, determine whether additional suggestions would help the user continue the conversation effectively. If yes, provide up to 3 follow-up questions or topics that the user can clarify or explore further. If no further suggestions are needed, respond with 'No suggestions needed.'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n   \\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:58 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1212', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799445', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '41ms', 'x-request-id': 'req_f4222166e20ed675fae71134c59c64f4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0ac0f2e592dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f4222166e20ed675fae71134c59c64f4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u041a\u0430\u043a\u043e\u0432\u044b \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431?', '\u041a\u0430\u043a\u0438\u0435 \u0442\u0438\u043f\u044b \u0433\u0440\u0443\u043d\u0442\u0430 \u0443 \u0432\u0430\u0441 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u043a\u0435 \u0438 \u043a\u0430\u043a \u044d\u0442\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0442\u0440\u0443\u0431?', '\u0412\u044b \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442\u0435 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u043b\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u043e\u0432?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0441\u0443\u0440\u043e\u0432\u044b\u043c\u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0412\u0430\u0436\u043d\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431 \u0434\u043b\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434. \u041e\u0431\u044b\u0447\u043d\u043e \u0443\u043a\u043b\u043e\u043d \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u043c\u0435\u0441\u0442\u043d\u044b\u043c\u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u043d\u043e\u0440\u043c\u0430\u043c\u0438 \u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430\u043c\u0438 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.\\n\\n------------------\\nRe... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='0871604c-6138-481d-a6b3-6887880cbcae'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:59", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:59", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:20", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:29:21", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:29:21", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:29:21", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:29:25", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:26", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:26", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000002DFBD5227B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 29, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2569, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193677), <telegram.ext._callbackcontext.CallbackContext object at 0x000002DFE2A3B000>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000002DFE28F79A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:28", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000002DFBD5227B0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658846927998', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 29, 27, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2570, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000002DFE26FB8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000002DFE2B1DD00>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000002DFE2B1DD00>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:38", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002DFBD5227B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 29, 38, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2572, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193679), <telegram.ext._callbackcontext.CallbackContext object at 0x000002DFE2A3B000>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000002DFE28FB7F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='167912a8-0850-4c68-9d47-a291278b74f8' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='167912a8-0850-4c68-9d47-a291278b74f8'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000002DFE2B1DD00>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u044d... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE2A49620>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:29:39 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '42'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_6a239fed01a28a696a1cb8db20b92897'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=XmWJXGLu15aDBJre7Pmm_aFM2rq2XJVm.7t.jwNPG4o-1732868979-1.0.1.1-HuCOayvqLwc1YSw5r0dE2dCKjm4xj7tuoanqwS... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6a239fed01a28a696a1cb8db20b92897", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '127', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_cf49deb270149d91422f5ec645244e29', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b32febee780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cf49deb270149d91422f5ec645244e29", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '79', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_43bdb08a8c082459bd7b6b8a7bbb2d25', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b36bec9e780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_43bdb08a8c082459bd7b6b8a7bbb2d25", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '171', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_a465b54754b2d2f9a658183a05d2437f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b3a5ebbe780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a465b54754b2d2f9a658183a05d2437f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '76', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998943', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_4a28fa217ca154a796a1a6f198c891c8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b3e686ee780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4a28fa217ca154a796a1a6f198c891c8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_0a109b3440738e46bb8412b6de3741a9', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b426baae780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0a109b3440738e46bb8412b6de3741a9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:29:43. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:29:46 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '3392'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792805'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '539ms'), ('x-request-id', 'req_2838043e986acd8bdd9073fdf1a8fea4'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=bV8qRObfRQEc_sBbNNlHmPa31h_zYoBsvf_hYBRM5I4-1732868986-1.0.1.1-kWyYrypV5tditf4CsZJlXD6CPm04IJZW.7_mx_7M2sPWhGotqvT6.GjJ4PJ4LuDvg3Br8uuXmMSVg505Z9t.3g; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2838043e986acd8bdd9073fdf1a8fea4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. **\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f**: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1025', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799405', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '44ms', 'x-request-id': 'req_dd754f81b6c02146e54fd939e22c10ba', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b5fdcc3be76-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dd754f81b6c02146e54fd939e22c10ba", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435?', '\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u043c\u0435\u0441\u0442\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431.', '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0434\u043b\u044f \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435 \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0432\u0430\u0440\u044c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e, \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0441\u0443\u0440\u043e\u0432\u044b\u043c\u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 \u044d\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0430.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0412\u0430\u0436\u043d\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431 \u0434\u043b\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434. \u041e\u0431\u044b\u0447\u043d\u043e \u0443\u043a\u043b\u043e\u043d \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430\u043c \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.\\n\\n-----------... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='167912a8-0850-4c68-9d47-a291278b74f8'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:50", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:50", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:32:11", "name": "telegram.ext.Application", "levelname": "ERROR", "message": "No error handlers are registered, logging exception.", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_application.py\", line 1319, in process_update\n    await coroutine\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_handlers\\basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: BotHandlers.handle_inline_buttons() missing 1 required positional argument: 'context'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:06", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:35:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:35:08", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:35:08", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:35:15", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:15", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:15", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 14, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2574, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193681), <telegram.ext._callbackcontext.CallbackContext object at 0x000001EE73AEB1C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001EE739AB9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:17", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:18", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660528924932', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 17, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2575, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001EE727D78A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001EE73BC8320>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001EE73BC8320>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2577, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193683), <telegram.ext._callbackcontext.CallbackContext object at 0x000001EE73AEB1C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001EE739A79A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='0c4732c1-9bc4-442c-9f7d-bc2b2e8a7777' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='0c4732c1-9bc4-442c-9f7d-bc2b2e8a7777'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001EE73BC8320>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435 \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0432\u0430\u0440\u044c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE73BEF4C0>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:35:31 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '40'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_e7481d0fb8d323e41977761344b85a9d'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=02ZuYkx376.3dPta0Ei8hYueCFOFKxvlJT4mdYZIDhw-1732869331-1.0.1.1-8Yk14uBVOD8mPEQkTJq0jdC3_2nGTJgo.1mRay... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e7481d0fb8d323e41977761344b85a9d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '103', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_b6abe383bca0236363ec6b2026afb89f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143c86c07ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b6abe383bca0236363ec6b2026afb89f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_929b0f0695806a9fcb6d297f2496c628', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143cbcb54ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_929b0f0695806a9fcb6d297f2496c628", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '178', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_5a17349bc88c348d261ee08a2d85a59a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143cf3aa3ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5a17349bc88c348d261ee08a2d85a59a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '150', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998943', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_a1e32120e180f2a265a80004a750acf4', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143d30b87ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a1e32120e180f2a265a80004a750acf4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '152', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_96469328fc84889b363d4d47bde7fc6e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143d5a941ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_96469328fc84889b363d4d47bde7fc6e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:35:34. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:35:38 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '4377'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792853'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '536ms'), ('x-request-id', 'req_2c65c0203b300f48afe2986d87c3a428'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=MPS8.NILNe9S7sPGYRrLuycr5EE2_QZFEShg44R9i8w-1732869338-1.0.1.1-5BcSjYS3CPj05NdCIzhVBcQH1qQS9g7GfhXjsPmhZE4p9OJVy.atK4kWn3gmL2mDy7cAPvBiVfQ0AzFm3dNJZw; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2c65c0203b300f48afe2986d87c3a428", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. **\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f**: \u041a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1263', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799422', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '43ms', 'x-request-id': 'req_09336f5344f236742100986528838e7e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143f9d8deee2f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_09336f5344f236742100986528838e7e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431.', '\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d \u0434\u043b\u044f \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043a\u0430.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u041a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u0412 \u0441\u0440\u0435\u0434\u043d\u0435\u043c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u0412 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u044d\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0430.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431. \u041e\u0431\u044b\u0447\u043d\u043e \u0443\u043a\u043b\u043e\u043d \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430\u043c.\\n\\n------------------\\nReferences:\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='0c4732c1-9bc4-442c-9f7d-bc2b2e8a7777'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_2', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661233670610', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=19, offset=211, type=<MessageEntityType.BOLD>), MessageEntity(length=19, offset=411, type=<MessageEntityType.BOLD>), MessageEntity(length=10, offset=593, type=<MessageEntityType.BOLD>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2578, reply_markup=InlineKeyboardMarkup(inline_keyboard=((In... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001EE73BBC9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:55", "name": "decorators", "levelname": "ERROR", "message": "Exception in handler function handle_inline_buttons: Attribute `text` of class `Message` can't be set!", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 77, in wrapper\n    result = await func(self, update, context, *args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\handlers.py\", line 615, in handle_inline_buttons\n    fake_message.text = suggestion\n    ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_telegramobject.py\", line 159, in __setattr__\n    raise AttributeError(\nAttributeError: Attribute `text` of class `Message` can't be set!", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:55", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:32", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:32", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='get_file:file_0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: send_file with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='get_file:file_0', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659746484715', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=19, offset=211, type=<MessageEntityType.BOLD>), MessageEntity(length=19, offset=411, type=<MessageEntityType.BOLD>), MessageEntity(length=10, offset=593, type=<MessageEntityType.BOLD>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2578, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: send_file with result: <coroutine object BotHandlers.send_file at 0x000001EE73AE1BC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "handlers", "levelname": "DEBUG", "message": "Initiated async task to send file '\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f_\u0421\u041f 30.13330.2020.pdf' to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:35", "name": "handlers", "levelname": "INFO", "message": "File '\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f_\u0421\u041f 30.13330.2020.pdf' sent successfully to user_id=244732168.", "taskName": "Task-86"}
{"asctime": "2024-11-29 11:42:47", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:42:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:42:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:42:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:42:56", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:56", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:56", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001FACC6D05F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 42, 55, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2581, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193686), <telegram.ext._callbackcontext.CallbackContext object at 0x000001FAF1C7F070>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001FAF1B0F9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:58", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:58", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001FACC6D05F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659192146091', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 42, 57, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2582, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001FAF093B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001FAF1C6DA30>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001FAF1C6DA30>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:13", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001FACC6D05F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 43, 13, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2584, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193688), <telegram.ext._callbackcontext.CallbackContext object at 0x000001FAF1C7F070>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001FAF21527A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='1a493237-f3f3-4302-bf5d-50294efe4460' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='1a493237-f3f3-4302-bf5d-50294efe4460'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FAF1C6DA30>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u041a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u0412 \u0441\u0440\u0435\u0434\u043d\u0435\u043c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF1D03560>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:43:15 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '124'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_e77850e851e9b3e77854a7c5e5d601ff'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=.gJBFHwxuujeC8LxAeAbGQwr_KAf4HiK7gE1Xw3pSkE-1732869795-1.0.1.1-RQQPOM6JMugyEfFVInIltkLJ_FbYdCXkxaRJ9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e77850e851e9b3e77854a7c5e5d601ff", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '69', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_01a3b322f30d9eb02c7cb9fe47c468e7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f1c2abac02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_01a3b322f30d9eb02c7cb9fe47c468e7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_a6c517e3bd0452f325116cd11f747978', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f215e0fc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a6c517e3bd0452f325116cd11f747978", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '93', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_5d6b8eeae04aafa2db95762cee445e2b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f281a12c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5d6b8eeae04aafa2db95762cee445e2b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '70', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_575b25af65950de9e5c99b982672bf61', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f2ece2ac02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_575b25af65950de9e5c99b982672bf61", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '145', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998364', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_04a12ae63ca65112cf24f1464c20a150', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f311f98c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_04a12ae63ca65112cf24f1464c20a150", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:43:19. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:43:24 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '3880'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '791828'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '612ms'), ('x-request-id', 'req_bee1fa259bb19d4a08e70fe768c67fb6'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=9qBDUssBo9HbJnLoe.o5ObAp_0EXyp6zKHJY3YoYfFg-1732869804-1.0.1.1-f95T1ufrj_kZHpG36zT4aupmdatL4TjpaZYUa62y.xjoBWRdCo3KZxQwjekrbQF9Ai3zBiwUPRfF4Eo_4yx45w; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bee1fa259bb19d4a08e70fe768c67fb6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. **\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442**: \u042d\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432.\\n\\n2. **\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430**: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0441\u043b\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 10-... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '278', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799405', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '44ms', 'x-request-id': 'req_b40ac6d6147538d56395738ea232ce9f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f556f112df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b40ac6d6147538d56395738ea232ce9f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0441\u043b\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 10-15 \u0441\u043c.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0435\u043c\u0431\u0440\u0430\u043d\u0430 \u0438\u043b\u0438 \u043f\u043b\u0435\u043d\u043a\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e\u043b\u0430.\\n\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c \u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u043b.\\n\\n5. <b>\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u044f\u0436\u043a\u0430</b>: \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u0438 \u0440\u043e\u0432\u043d\u0443\u044e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f. \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439, \u043e\u0431\u044b\u0447\u043d\u043e 5-10 \u0441\u043c.\\n\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043b\u0438\u0442\u043a\u0430, \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043f\u0430\u0440\u043a\u0435\u0442 \u0438\u043b\u0438 \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f.\\n\\n\u042d\u0442\u0438 \u0441\u043b\u043e\u0438 \u043c\u043e\u0433\u0443\u0442 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='1a493237-f3f3-4302-bf5d-50294efe4460'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:26", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:26", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:24", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:44:26", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:44:26", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:44:26", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:44:27", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:27", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:27", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x00000240638005F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 44, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2586, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193689), <telegram.ext._callbackcontext.CallbackContext object at 0x0000024008DB3000>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000024065C30CA0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:29", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x00000240638005F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658514875286', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 44, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2587, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000024007A6B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000024008DF1130>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000024008DF1130>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x00000240638005F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 44, 39, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2589, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193691), <telegram.ext._callbackcontext.CallbackContext object at 0x0000024008DB3000>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000024008C377F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='1c2a3737-574d-4628-98a0-6ce539d8e5a4' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='1c2a3737-574d-4628-98a0-6ce539d8e5a4'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000024008DF1130>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0441\u043b\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 10-15 \u0441\u043c.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0435\u043c\u0431\u0440\u0430\u043d\u0430 \u0438\u043b\u0438 \u043f\u043b\u0435\u043d\u043a\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e\u043b\u0430.\\n\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024008E077E0>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:44:41 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '127'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_4bb9f4029f6939e8187933bddfbf830b'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=L6Laxhj_RNCroo8by.DUob5z1DE3Kpx0sLvcl53YXOc-1732869881-1.0.1.1-PHLoRf2FznbH62tnLqVqUJNA8Mdf4T0K7ve9V... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4bb9f4029f6939e8187933bddfbf830b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '42', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_2ff7d14e6e30c8f9c872903b751872d2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea151362eb82df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2ff7d14e6e30c8f9c872903b751872d2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '153', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_faec9217bcea02d539bf47a77a570bf1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1513c8adf2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_faec9217bcea02d539bf47a77a570bf1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '134', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_b61a56066c9d9dbce3e8e6490dcf5fb3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15141ae7a2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b61a56066c9d9dbce3e8e6490dcf5fb3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '87', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_dbbd2bfa7bda7c228cd517d982fa67c8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15148abe52df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dbbd2bfa7bda7c228cd517d982fa67c8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '159', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998365', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_78f216b0053a2a91165ac8a44b304bf3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1514f89452df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_78f216b0053a2a91165ac8a44b304bf3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:44:46. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:44:51 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '3540'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792017'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '598ms'), ('x-request-id', 'req_7bf4bb69c85753aa24524a53918cb40b'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=nWm2GSB8E9IyEgL07iX00fq9fC3ifLZUnQb.GJH5Kuc-1732869891-1.0.1.1-G_aFcgcZrwUUICjCHnmUQ2XwvelaGSOaC3uO_eoi1Lr7lgmE7sHf_giN1i1pRxYew6fKdMUr687bcqCxMtqj9A; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7bf4bb69c85753aa24524a53918cb40b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '282', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799375', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '46ms', 'x-request-id': 'req_280722e0985573f67b057b2e5e60a807', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea151754c679185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_280722e0985573f67b057b2e5e60a807", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u0421\u043b\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 10-15 \u0441\u043c \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u044f.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438.\\n\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n\\n5. <b>\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u044f\u0436\u043a\u0430</b>: \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u0440\u043e\u0432\u043d\u0443\u044e \u0438 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f. \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0441\u0442\u044f\u0436\u043a\u0438 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 5-10 \u0441\u043c.\\n\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043f\u0430\u0440\u043a\u0435\u0442, \u043f\u043b\u0438\u0442\u043a\u0430 \u0438\u043b\u0438 \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439 \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f.\\n\\n\u041a\u0430\u0436\u0434\u044b\u0439 \u0438\u0437 \u044d\u0442\u0438\u0445 \u0441\u043b\u043e\u0435\u0432 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0441\u0432\u043e\u044e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='1c2a3737-574d-4628-98a0-6ce539d8e5a4'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:53", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:53", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x00000240638005F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 45, 27, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2591, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193692), <telegram.ext._callbackcontext.CallbackContext object at 0x00000240A13B31C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000024008C377F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='868e127e-d243-48b8-9b18-6906eb84ed14' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='868e127e-d243-48b8-9b18-6906eb84ed14'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000024008DF1130>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u0421\u043b\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 10-15 \u0441\u043c \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u044f.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438.\\n\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007658360>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '74', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_82cd4bd69e6f0db0c7d40c35b37edd0c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea152568e4b9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_82cd4bd69e6f0db0c7d40c35b37edd0c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '116', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_31b0b5534c5551c57a454e57bff0b33d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1525aea6f9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_31b0b5534c5551c57a454e57bff0b33d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '114', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_3ea94598eff618608ba71bf93685c397', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1525fcee09185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3ea94598eff618608ba71bf93685c397", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '114', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_52417ae9d0a65f2cfc7b63497fa690e6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1526248cf9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_52417ae9d0a65f2cfc7b63497fa690e6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '155', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998943', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_4a796a075ede2797231c8232447a2991', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15264aaec9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4a796a075ede2797231c8232447a2991", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '117', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_17894e8aac46729c42b3900a0518de40', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1526b4fd39185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_17894e8aac46729c42b3900a0518de40", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:45:32. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2980', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793100', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '517ms', 'x-request-id': 'req_8dc0272b5c3edb2d32fe714b80ff716e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea152721aaec02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8dc0272b5c3edb2d32fe714b80ff716e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. **\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f**: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. **\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430*... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1405', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799460', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '40ms', 'x-request-id': 'req_d1ee3db9e8f797164dc52881d1f4f20c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15287c931c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d1ee3db9e8f797164dc52881d1f4f20c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431.', '\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d \u0434\u043b\u044f \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u0412 \u0441\u0440\u0435\u0434\u043d\u0435\u043c, \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u0432 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u044d\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0430.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0432 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435 \u043b\u0443\u0447\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u0430\u043c\u0438.\\n\\n------------------\\nReferences:\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 446.1325800.2019 .pdf, pages: 69, 71\\n\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='868e127e-d243-48b8-9b18-6906eb84ed14'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:38", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:38", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:39", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:46:40", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:46:41", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:46:41", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:46:50", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:46:51", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:46:51", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:46:52", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:46:52", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:52", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:53", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 46, 47, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2593, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193693), <telegram.ext._callbackcontext.CallbackContext object at 0x000001FA97A73230>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001FA978FF9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:54", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:55", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660471638096', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 46, 53, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2594, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001FA9672B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:56", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 47, 1, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2596, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193695), <telegram.ext._callbackcontext.CallbackContext object at 0x000001FA97A73230>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001FA97B8D6C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='48a2d569-5602-4a79-a898-d2f8282f9a60' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='48a2d569-5602-4a79-a898-d2f8282f9a60'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u0412 \u0441\u0440\u0435\u0434\u043d\u0435\u043c, \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u0432 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u044d\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0430.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA97AE3740>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:47:02 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '118'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_090bb8b5e3a9a2b3c52995a531abafd7'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=veFuTSeYjkoESuDqfc.oScAqlSWL3tuYtsKXQ5Znpf8-1732870022-1.0.1.1-HEuCiUVJoRGwibZ1rMrp_H2cJuDwAgRLViwGz... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_090bb8b5e3a9a2b3c52995a531abafd7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334D60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '126', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_3e2c5a3c8065185c084c51a38f3c295f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea154aa8cabbe6a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3e2c5a3c8065185c084c51a38f3c295f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '137', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_8ac82c984555267f37bf8b5f79f4a21c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea154acff03be6a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8ac82c984555267f37bf8b5f79f4a21c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334D60>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '98', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_ab5484ddc39422d91cc5ffe106176cce', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea154b0db70be6a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ab5484ddc39422d91cc5ffe106176cce", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '78', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998944', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_7263fbba338e575b756493bb60f8b9c2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea154b32da9be6a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7263fbba338e575b756493bb60f8b9c2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334D60>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '143', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_5a0e4d6efe777500719656b7537f0e73', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea154b5afbdbe6a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5a0e4d6efe777500719656b7537f0e73", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:47:05. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:47:07 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '1826'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793155'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '513ms'), ('x-request-id', 'req_abedf7dda715fc52a5ffab75eaa59050'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=sMihB_RTM2oBZUhehWUM9R7FCx2gZmsndpAQF1scKps-1732870027-1.0.1.1-bPaT8sh4KNzcw3y8YFl33ubmjLld6mJ3hLAqPhhilFghwoaeCsVOC0cMQM9ndW7RZsQ.GPvQrimDpsmCzZ86bQ; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_abedf7dda715fc52a5ffab75eaa59050", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:07", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:07", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:07", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. **\u0420\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f**: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0433\u0435\u043e\u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f.\\n\\n2. ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1449', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799458', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '40ms', 'x-request-id': 'req_3be767da26c3da0f0967cd1e4c56fc22', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea154c89a02ea77-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3be767da26c3da0f0967cd1e4c56fc22", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:09", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0430\u0439\u043e\u043d\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430.', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.', '\u041f\u043e\u043f\u0440\u043e\u0441\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044e \u0443 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u0443\u043a\u043b\u043e\u043d\u0443 \u0438 \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0442\u0440\u0443\u0431.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:09", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. <b>\u0420\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0433\u0435\u043e\u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u0412 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0441\u0443\u0440\u043e\u0432\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u044d\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0430.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0432 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435 \u043b\u0443\u0447\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u0430\u043c\u0438.\\n\\n------------------\\nReferences:\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 446.1325800.2019 .pdf, pages: 69, 71\\n\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:09", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:09", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='48a2d569-5602-4a79-a898-d2f8282f9a60'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:09", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:09", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:10", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:10", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:22", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:22", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_0', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658143652864', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 47, 10, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=34, offset=74, type=<MessageEntityType.BOLD>), MessageEntity(length=19, offset=306, type=<MessageEntityType.BOLD>), MessageEntity(length=10, offset=466, type=<MessageEntityType.BOLD>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2597, reply_markup=InlineKeyboardMarkup(inline_keyboard=((Inl... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001FA97A33480>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0430\u0439\u043e\u043d\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='69eeb987-c8e5-4599-9b3a-399f172bab67' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='69eeb987-c8e5-4599-9b3a-399f172bab67'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0430\u0439\u043e\u043d\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430.'), kwargs: {'chat_history': [HumanMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0430\u0439\u043e\u043d\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. <b>\u0420\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0433\u0435\u043e\u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u0412 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0441\u0443\u0440... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FB2142FB00>, 'json_data': {'input': [[41682, 9136, 2156, 19039, 51627, 8379, 18600, 25698, 1840, 74828, 29118, 44786, 90189, 6578, 8131, 81301, 17165, 10693, 97991, 6856, 40231, 10693, 5927, 98117, 10298, 25190, 117, 17766, 1532, 11, 82250, 46339, 92582, 18264, 14257, 24803, 52429, 12561, 50619, 9136, 39280, 25756, 20346, 2156, 44613, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '46', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999953', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_02e4aaf72dd3aa67092d051d433b723c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1552c8ce96cfd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_02e4aaf72dd3aa67092d051d433b723c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[41682, 9136, 2156, 19039, 51627, 8379, 18600, 25698, 1840, 74828, 29118, 44786, 90189, 6578, 8131, 81301, 17165, 10693, 97991, 6856, 40231, 10693, 5927, 98117, 10298, 25190, 117, 17766, 1532, 11, 82250, 46339, 92582, 18264, 14257, 24803, 52429, 12561, 50619, 9136, 39280, 25756, 20346, 2156, 44613, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '67', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999953', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_502ea8d9062877f3a6507b52ae516b1f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1552ecf066cfd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_502ea8d9062877f3a6507b52ae516b1f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[10693, 1506, 11001, 118, 58060, 44786, 20440, 6850, 67745, 7820, 2233, 9542, 81301, 17165, 10693, 82702, 15298, 90189, 6578, 8131, 81301, 17165, 10693, 5927, 35387, 77628, 44938, 4390, 17279, 31203, 5173, 3114, 14332, 24803, 14332, 1840, 94508, 4655, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 5524, 29256, 25262, 18226, 14009, 29893, 7740, 67969, 2233, 15298, 67589, 18482, 25756, 2233, 14332, 6148, 44065, 198, 3865, 41036, 6856, 40231, 11, 7740, 10693, 91667, 6856, 60990, 61379, 7740, 17756, 84350, 13337, 3865, 96034, 37773, 90875, 85864, 71239, 61642, 20346, 10298, 63233, 90189, 6578, 8131, 81301, 17165, 10693, 198, 19916, 16248, 37773, 6856, 81757, 33793, 3114, 3865, 8131, 54686, 5524, 14257, 64322, 12507, 53376, 8379, 18034, 16248, 23311, 6148, 23297, 17165, 10693, 11562, 8341, 1532, 17766, 38722, 37906... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '89', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998914', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_cbcb3608b15fafcaec31685d33a104a6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15530d88e6cfd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cbcb3608b15fafcaec31685d33a104a6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[74598, 96256, 1506, 220, 4468, 23934, 220, 14815, 33006, 12, 29619, 2156, 13337, 4655, 20879, 44613, 28089, 39280, 11047, 12394, 1506, 7740, 81376, 47805, 39280, 13373, 57319, 8164, 21708, 26, 720, 12, 20879, 2297, 38521, 20812, 40231, 12561, 23630, 39865, 15298, 7740, 26539, 19479, 9136, 26539, 4929, 40590, 26, 720, 12, 5927, 23630, 68462, 62776, 41291, 30656, 44786, 18034, 41873, 38822, 1482, 12, 6578, 98285, 14332, 6148, 23297, 17165, 10693, 45658, 1506, 11001, 118, 58060, 35111, 38822, 25756, 20346, 2156, 44613, 13, 720, 27435, 13, 914, 23784, 11122, 74828, 10693, 78876, 8164, 2233, 25262, 35682, 18999, 5927, 56857, 39988, 11562, 7753, 9136, 3114, 13337, 4655, 84714, 23630, 14082, 25756, 48262, 2233, 12507, 98285, 14332, 9136, 54686, 91398, 12561, 16494, 5372, 94975, 720, 7094, 14009, 39479, 67186, 17165... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '156', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998953', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_9a45ed053570b99ea6584b73d270cc8b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155343b7f6cfd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9a45ed053570b99ea6584b73d270cc8b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[34604, 13810, 35297, 15088, 57855, 13, 16, 482, 28599, 10693, 10298, 8131, 81301, 13433, 4329, 7820, 17721, 44613, 90189, 6578, 8131, 81301, 4898, 22885, 25190, 117, 17766, 59921, 39280, 20440, 30392, 1482, 56008, 94071, 320, 2233, 15298, 12507, 5372, 7094, 3865, 10298, 36497, 340, 37945, 34604, 13810, 35297, 15088, 57855, 13, 16, 9, 482, 28599, 10693, 10298, 8131, 81301, 13433, 4329, 7820, 17721, 44613, 90189, 6578, 8131, 81301, 4898, 22885, 25190, 117, 17766, 59921, 39280, 49520, 23297, 8164, 64569, 11320, 17165, 36479, 39103, 6578, 20440, 30392, 1482, 56008, 94071, 33006, 11187, 34604, 13810, 35297, 15088, 57855, 13, 17, 482, 28599, 10693, 10298, 8131, 81301, 13433, 4329, 7820, 17721, 44613, 25190, 117, 17766, 59921, 39280, 5524, 33742, 7753, 39988, 30392, 1482, 56008, 13999, 12, 4898, 11320, 6578, 8131, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '63', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999816', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_ab4a615708dba9b59960289f58311044', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155373ea06cfd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ab4a615708dba9b59960289f58311044", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[19871, 17279, 220, 17824, 13, 9413, 18216, 15, 13, 2366, 16, 33006, 975, 720, 20, 13, 20, 13, 17, 23784, 6850, 50693, 3114, 34493, 29256, 31203, 90297, 34613, 28114, 1840, 9706, 25756, 87878, 13373, 5524, 3865, 60009, 11562, 14837, 38521, 72060, 7975, 40251, 29893, 21204, 93129, 72119, 50306, 74020, 4655, 720, 67186, 25, 720, 12, 17756, 84350, 34082, 48150, 18600, 15298, 14837, 13999, 2297, 15458, 24803, 38438, 48150, 21923, 41036, 13404, 6856, 27717, 25190, 117, 74828, 23934, 4655, 66144, 14332, 12415, 20440, 14257, 25657, 6148, 2156, 18999, 720, 2233, 18437, 8164, 7975, 21956, 18999, 5173, 39865, 14476, 23680, 15088, 7740, 82702, 15298, 5173, 15088, 12507, 8164, 17766, 19190, 44786, 7740, 2297, 41036, 13404, 6856, 14332, 12415, 5524, 14257, 64322, 12507, 21477, 2297, 13337, 4655, 5524, 2156, 50436, 39900, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '89', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998960', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_ad36154d19ca3425a2d85afe7066633c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1553998ac6cfd-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ad36154d19ca3425a2d85afe7066633c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:47:26. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u044b\u0445 \u0434\u043b\u044f \u043d\u0438\u0445 \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0442\u043e\u0447\u0435\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439).\\n\u041f\u0440\u0438 \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0438 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0430\u043d\u0438\u0447\u043d\u044b\u0435\\n\u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0438\u0445 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438 \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u043e\u0441\u0442\u0438 \u043c\u043e\u0434\u0435\u043b\u0438\u0440\u0443\u0435\u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1597', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794510', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '411ms', 'x-request-id': 'req_335e5e87dfa4855712ceba73f24c848f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1553c5afdea83-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_335e5e87dfa4855712ceba73f24c848f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:28", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8373682638153793, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:28", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:28", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0430\u0439\u043e\u043d\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430.\\n\\nLLM Response: \u042f \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0430\u0439\u043e\u043d\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u0442\u0443 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u043e\u0431\u0440\u0430\u0442\u0438\u0432\u0448\u0438\u0441\u044c \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c, \u0433\u0434\u0435 \u0447\u0430\u0441\u0442\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1089', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799597', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '30ms', 'x-request-id': 'req_26ab0e49ae4a2dc4e3b51daeb038bf13', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15548efd7ea83-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_26ab0e49ae4a2dc4e3b51daeb038bf13", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:29", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043d\u0430\u0439\u0442\u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430.', '\u041a\u0430\u043a \u0441\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u0441 \u043c\u0435\u0441\u0442\u043d\u044b\u043c\u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0438 \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f\u043c\u0438 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0438 \u0433\u0440\u0443\u043d\u0442\u0430?', '\u041a\u0430\u043a \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:29", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u042f \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0430\u0439\u043e\u043d\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u0442\u0443 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u043e\u0431\u0440\u0430\u0442\u0438\u0432\u0448\u0438\u0441\u044c \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c, \u0433\u0434\u0435 \u0447\u0430\u0441\u0442\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u043e\u0432. \u0422\u0430\u043a\u0436\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u0441 \u043c\u0435\u0441\u0442\u043d\u044b\u043c\u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0438 \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438.\\n\\n------------------\\nReferences:\\n\u0418\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435_\u0438_\u043e\u0442\u0434\u0435\u043b\u043e\u0447\u043d\u044b\u0435_\u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f_\u0421\u041f_71_13330_2017.pdf, pages: 54\\n\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf, pages: 196\\n\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u043e\u0433\u0438_\u0421\u041f 78.13330.2012.pdf, pages: 49\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u044d\u043a\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 502.1325800.2021.pdf, pages: 19\\n', {'\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf', '\u0418\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435_\u0438_\u043e\u0442\u0434\u0435\u043b\u043e\u0447\u043d\u044b\u0435_\u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f_\u0421\u041f_71_13330_2017.pdf', '\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u044d\u043a\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 502.1325800.2021.pdf', '\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u043e\u0433\u0438_\u0421\u041f 78.13330.2012.pdf'}, ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043d\u0430\u0439\u0442\u0438 \u043c\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:29", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:30", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='69eeb987-c8e5-4599-9b3a-399f172bab67'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:30", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:30", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:30", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:30", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:51", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:51", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:51", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:51", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_2', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660349828244', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 47, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2598, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='get_file:file_0', text='\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf'),), (InlineKeyboardButton(callback_data='get_file:file_1', text='\u0418\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435_\u0438_\u043e\u0442\u0434\u0435\u043b\u043e\u0447\u043d\u044b\u0435_\u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f_\u0421\u041f_71_13330_2017.pdf'),), (... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001FA97A32510>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:52", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:52", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='37083518-1e47-4e60-9057-13ee586ca35b' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:52", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='37083518-1e47-4e60-9057-13ee586ca35b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:52", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u041a\u0430\u043a \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445?'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0430\u0439\u043e\u043d\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u042f \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0430\u0439\u043e\u043d\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u0442\u0443 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u043e\u0431\u0440\u0430\u0442\u0438\u0432\u0448\u0438\u0441\u044c \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c, \u0433\u0434\u0435 \u0447\u0430\u0441\u0442\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u043e\u0432. \u0422\u0430\u043a\u0436\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u0441 \u043c\u0435\u0441\u0442\u043d\u044b\u043c\u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0438 \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0440\u0435\u043a\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FB2142F7E0>, 'json_data': {'input': [[27435, 16248, 98051, 8164, 2233, 8341, 59921, 18482, 67181, 8379, 25756, 3114, 64569, 19479, 1532, 12561, 50619, 9136, 39280, 25756, 20346, 2156, 44613, 5927, 30392, 1482, 56008, 44786, 41291, 30656, 1506, 10693, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999967', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_fc413da53044cb3402516a0309917edb', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155f179946d10-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fc413da53044cb3402516a0309917edb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:55", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96142660>, 'json_data': {'input': [[27435, 16248, 98051, 8164, 2233, 8341, 59921, 18482, 67181, 8379, 25756, 3114, 64569, 19479, 1532, 12561, 50619, 9136, 39280, 25756, 20346, 2156, 44613, 5927, 30392, 1482, 56008, 44786, 41291, 30656, 1506, 10693, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '114', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999967', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_64fde09ce7bbf40a46b798aefc538fcc', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155f38b4f6d10-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_64fde09ce7bbf40a46b798aefc538fcc", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96142660>, 'json_data': {'input': [[74598, 96256, 1506, 220, 3487, 23934, 220, 14815, 33006, 9239, 15752, 14332, 9136, 30436, 21708, 13373, 45658, 1506, 11001, 118, 58060, 44786, 14257, 6148, 84350, 13433, 10693, 93129, 73181, 14257, 52037, 18226, 11320, 5591, 18482, 96034, 7753, 10693, 13999, 6735, 44065, 7740, 25756, 3114, 64569, 19479, 44065, 11562, 17721, 17165, 720, 7094, 14009, 62315, 13404, 18999, 6850, 38722, 37906, 7094, 62491, 44946, 7952, 1532, 57719, 56860, 64880, 13373, 57319, 8164, 1840, 7740, 40842, 55523, 31443, 90457, 67745, 22918, 1532, 25756, 20346, 2156, 1830, 6856, 37405, 2233, 9706, 39900, 720, 41036, 21956, 18999, 11, 21022, 50945, 59138, 14257, 25657, 6148, 2156, 18999, 18034, 16248, 23311, 6148, 23297, 17165, 10693, 48440, 10298, 6856, 54204, 13, 720, 23, 13, 845, 23227, 31203, 99396, 84198, 11122, 10298, 14009, 44786,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '133', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998776', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_25853e3672f5c289e7e75280ac8b92e7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155f5dcf06d10-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_25853e3672f5c289e7e75280ac8b92e7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96142660>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 2491, 33006, 19871, 17279, 220, 1313, 13, 9423, 966, 13, 679, 21, 320, 8164, 41056, 1830, 220, 20, 13, 21, 13, 3174, 570, 23227, 31203, 14391, 56515, 84198, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 720, 7094, 14009, 21923, 23630, 47805, 39280, 77573, 17766, 6856, 17165, 11122, 7094, 14332, 12415, 7740, 34943, 9239, 56999, 62491, 5524, 39479, 91216, 39988, 55617, 78746, 19479, 16742, 720, 19916, 35297, 7094, 24697, 88831, 25756, 3114, 64569, 69775, 69471, 5591, 38657, 19479, 18154, 35714, 21708, 5173, 39865, 14476, 23680, 53671, 56449, 14525, 34943, 13337, 48074, 20812, 6856, 18482, 720, 6578, 94178, 92091, 13999, 14257, 68462, 61498, 39988, 13, 720, 17279, 31203, 20879, 229... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '92', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999268', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_37beaf2c664170e3b05ea542e4131d3a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155f84f106d10-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_37beaf2c664170e3b05ea542e4131d3a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96142660>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 2397, 33006, 35095, 21022, 14391, 26539, 7740, 39233, 21022, 220, 220, 22, 13, 19, 1389, 49520, 19188, 6578, 86610, 17618, 7740, 25756, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 13373, 720, 29471, 84350, 13433, 10693, 86995, 29500, 26539, 19479, 21708, 44786, 34943, 9239, 56999, 62491, 2355, 19871, 1482, 9239, 56999, 18999, 720, 34604, 19188, 6578, 86610, 17618, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 720, 66144, 5591, 38657, 19479, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 720, 34604, 18437, 6735, 61390, 23446... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '135', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999256', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_ba2ea2bf51593d442bc9a65300ced78d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155fa88ee6d10-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ba2ea2bf51593d442bc9a65300ced78d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96142660>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 8874, 720, 13810, 8164, 28647, 3865, 10298, 63233, 71239, 12394, 21708, 11, 68214, 35667, 1506, 70129, 21204, 88005, 6148, 38822, 12507, 5927, 53280, 14332, 1840, 13, 720, 17279, 31203, 99396, 84198, 84714, 1532, 15458, 39127, 44786, 7740, 2297, 41036, 13404, 6856, 14332, 12415, 45658, 1506, 11001, 118, 58060, 35111, 38822, 25756, 20346, 2156, 1830, 6856, 37405, 720, 2156, 19188, 31281, 84198, 25756, 3114, 64569, 1840, 12648, 11, 51548, 34082, 35034, 1506, 7740, 78876, 8164, 7975, 21956, 18999, 69471, 5591, 38657, 19479, 93129, 73181, 14257, 91353, 35667, 18482, 720, 89554, 64134, 4655, 78876, 64322, 39988, 71239, 61642, 5927, 5173, 3114, 7486, 1532, 7740, 18154, 25756, 3114, 64569, 19479, 1532, 13, 49520, 19188, 64134, 4655, 78876, 64322, 39... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:47:57 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999086', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_a44ed65c4f180f5101c8525c5fba8694', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155fcfae66d10-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a44ed65c4f180f5101c8525c5fba8694", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:47:57. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 56 \u0438\u0437 239 \\n \\n\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0435\u0439 \u043d\u0430 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u044b\u0445 \u0443\u0447\u0430\u0441\u0442\u043a\u0430\u0445 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u043d\u044b\u0435 \u0438 \u0433\u043b\u0443\u0431\u0438\u043d\u043d\u044b\u0435 \u043c\u0430\u0440\u043a\u0438 \\n\u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0439 \u0437\u0430 \u0434\u0435\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f\u043c\u0438 \u043d\u0430\u0441\u044b\u043f\u0438 \u0438 \u043f\u043e\u0434\u0441\u0442\u0438\u043b\u0430\u044e\u0449\u0438\u0445 \u0435\u0435 \u0433\u0440\u0443\u043d\u0442\u043e\u0432 \u043f\u0440\u0438\u0440\u043e\u0434\u043d\u043e\u0433\u043e \\n\u0441\u043b\u043e\u0436\u0435\u043d\u0438\u044f,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:47:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '4322', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794443', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '416ms', 'x-request-id': 'req_1475717f2df295ac6e0bd812c2dc4cbb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea155ffb8f2effc-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1475717f2df295ac6e0bd812c2dc4cbb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:02", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8651226794308903, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:02", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:02", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445?\\n\\nLLM Response: \u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043f\u043e\u0434\u0437\u0435\u043c\u043d\u044b\u0445 \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u0439, \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u0432 \u0437\u0434\u0430\u043d\u0438\u0439 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u0434\u0432\u0435\u0440\u0436\u0435\u043d\u044b \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044e \u043d\u0438\u0437\u043a\u0438\u0445 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440. \u0412\u043e\u0442 \u043a\u0430\u043a \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f:\\n... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '963', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799216', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '58ms', 'x-request-id': 'req_54f302fab7c36db8691c18323af4db7b', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1561d8a31effc-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_54f302fab7c36db8691c18323af4db7b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:03", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430.', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430.', '\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u0432 \u0438 \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u0439 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:03", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043f\u043e\u0434\u0437\u0435\u043c\u043d\u044b\u0445 \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u0439, \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u0432 \u0437\u0434\u0430\u043d\u0438\u0439 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u0434\u0432\u0435\u0440\u0436\u0435\u043d\u044b \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044e \u043d\u0438\u0437\u043a\u0438\u0445 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440. \u0412\u043e\u0442 \u043a\u0430\u043a \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f:\\n\\n1. <b>\u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0412\u0441\u0435 \u043f\u043e\u0434\u0437\u0435\u043c\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0439, \u0432\u044b\u0437\u0432\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435\u043c \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\u043c \u0432\u043e\u0434\u044b \u0432 \u0433\u0440\u0443\u043d\u0442\u0435.\\n\\n2. <b>\u0420\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b</b>: \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0440\u0435\u0433\u0438\u043e\u043d\u0430. \u0412 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f. \u042d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u0440\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438.\\n\\n3. <b>\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b \u0437\u0434\u0430\u043d\u0438\u0439</b>: \u041f\u0440\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0435 \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u0432 \u0432\u0430\u0436\u043d\u043e, \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u043b\u043e\u0441\u044c \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f, \u0447\u0442\u043e \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043f\u043e\u0434\u044a\u0435\u043c \u0438 \u043e\u043f\u0443\u0441\u043a\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0438\u0437-\u0437\u0430 \u0441\u0435\u0437\u043e\u043d\u043d\u044b\u0445 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0432 \u0433\u0440\u0443\u043d\u0442\u0435.\\n\\n4. <b>\u041a\u043e\u043c\u043c\u0443... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:03", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:03", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='37083518-1e47-4e60-9057-13ee586ca35b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:03", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:03", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:04", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:04", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:28", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_0', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658055032561', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 48, 4, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=20, offset=298, type=<MessageEntityType.BOLD>), MessageEntity(length=18, offset=482, type=<MessageEntityType.BOLD>), MessageEntity(length=17, offset=721, type=<MessageEntityType.BOLD>), MessageEntity(length=30, offset=912, type=<MessageEntityType.BOLD>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, mes... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001FA97A30E80>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='325f0ce7-57c5-4633-b332-bddcccf833e0' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='325f0ce7-57c5-4633-b332-bddcccf833e0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430.'), kwargs: {'chat_history': [HumanMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043f\u043e\u0434\u0437\u0435\u043c\u043d\u044b\u0445 \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0446\u0438\u0439, \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u0432 \u0437\u0434\u0430\u043d\u0438\u0439 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u0434\u0432\u0435\u0440\u0436\u0435\u043d\u044b \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044e \u043d\u0438\u0437\u043a\u0438\u0445 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440. \u0412\u043e\u0442 \u043a\u0430\u043a \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f:\\n\\n1. <b>\u0417\u0430\u0449\u0438\u0442\u0430 \u043e\u0442 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0412\u0441\u0435 \u043f\u043e\u0434\u0437\u0435\u043c\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0439, \u0432\u044b\u0437\u0432\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435\u043c \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\u043c \u0432\u043e\u0434\u044b \u0432 \u0433\u0440\u0443\u043d\u0442\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[41682, 9136, 2156, 19039, 51627, 11, 52770, 46339, 92582, 18264, 25756, 3114, 64569, 19479, 3865, 12561, 50619, 9136, 39280, 25756, 20346, 2156, 44613, 20440, 98117, 47295, 18600, 25698, 1840, 74828, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '76', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999968', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_fdccc9fd0d23b063b527da069371cd85', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea156c8f9cd2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fdccc9fd0d23b063b527da069371cd85", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[41682, 9136, 2156, 19039, 51627, 11, 52770, 46339, 92582, 18264, 25756, 3114, 64569, 19479, 3865, 12561, 50619, 9136, 39280, 25756, 20346, 2156, 44613, 20440, 98117, 47295, 18600, 25698, 1840, 74828, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '132', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999968', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6693c67bb305d36197cc929b87723f68', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea156cf7fa22df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6693c67bb305d36197cc929b87723f68", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[74598, 96256, 1506, 220, 3487, 23934, 220, 14815, 33006, 9239, 15752, 14332, 9136, 30436, 21708, 13373, 45658, 1506, 11001, 118, 58060, 44786, 14257, 6148, 84350, 13433, 10693, 93129, 73181, 14257, 52037, 18226, 11320, 5591, 18482, 96034, 7753, 10693, 13999, 6735, 44065, 7740, 25756, 3114, 64569, 19479, 44065, 11562, 17721, 17165, 720, 7094, 14009, 62315, 13404, 18999, 6850, 38722, 37906, 7094, 62491, 44946, 7952, 1532, 57719, 56860, 64880, 13373, 57319, 8164, 1840, 7740, 40842, 55523, 31443, 90457, 67745, 22918, 1532, 25756, 20346, 2156, 1830, 6856, 37405, 2233, 9706, 39900, 720, 41036, 21956, 18999, 11, 21022, 50945, 59138, 14257, 25657, 6148, 2156, 18999, 18034, 16248, 23311, 6148, 23297, 17165, 10693, 48440, 10298, 6856, 54204, 13, 720, 23, 13, 845, 23227, 31203, 99396, 84198, 11122, 10298, 14009, 44786,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '151', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998776', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_ef2de3714dcb0560c5fd4326381e30f4', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea156d43b7f2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ef2de3714dcb0560c5fd4326381e30f4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[74598, 96256, 1506, 220, 9690, 23934, 220, 14815, 33006, 10124, 8, 5927, 41291, 10589, 94520, 1532, 57925, 5591, 17721, 56008, 39900, 11122, 24697, 50223, 28089, 39280, 19175, 89159, 1482, 62315, 9706, 18264, 93099, 8131, 81301, 17165, 1532, 720, 2156, 38722, 37906, 7094, 18999, 44946, 81376, 23680, 4898, 16742, 96034, 7753, 10693, 13999, 6735, 44786, 7740, 25756, 3114, 64569, 19479, 44786, 11562, 17721, 15088, 57297, 18868, 38722, 1840, 11320, 9136, 54686, 12561, 23630, 23680, 17165, 11, 21022, 50945, 59138, 44946, 720, 2233, 18437, 31101, 12507, 5927, 9706, 4655, 26, 6850, 28089, 61642, 24803, 27717, 11562, 17721, 15088, 19175, 89159, 1482, 62315, 9706, 18264, 19175, 69844, 50506, 53419, 39900, 39479, 1506, 5927, 220, 20, 482, 220, 22, 5524, 38521, 16016, 720, 7, 8164, 7753, 56857, 13810, 56892, 330, 10124... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '71', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998741', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_e7a024f388cadffe29619934d3978d30', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea156da5f732df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e7a024f388cadffe29619934d3978d30", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[74598, 96256, 1506, 220, 4468, 23934, 220, 14815, 33006, 12, 29619, 2156, 13337, 4655, 20879, 44613, 28089, 39280, 11047, 12394, 1506, 7740, 81376, 47805, 39280, 13373, 57319, 8164, 21708, 26, 720, 12, 20879, 2297, 38521, 20812, 40231, 12561, 23630, 39865, 15298, 7740, 26539, 19479, 9136, 26539, 4929, 40590, 26, 720, 12, 5927, 23630, 68462, 62776, 41291, 30656, 44786, 18034, 41873, 38822, 1482, 12, 6578, 98285, 14332, 6148, 23297, 17165, 10693, 45658, 1506, 11001, 118, 58060, 35111, 38822, 25756, 20346, 2156, 44613, 13, 720, 27435, 13, 914, 23784, 11122, 74828, 10693, 78876, 8164, 2233, 25262, 35682, 18999, 5927, 56857, 39988, 11562, 7753, 9136, 3114, 13337, 4655, 84714, 23630, 14082, 25756, 48262, 2233, 12507, 98285, 14332, 9136, 54686, 91398, 12561, 16494, 5372, 94975, 720, 7094, 14009, 39479, 67186, 17165... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '137', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998953', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_2eb3b889a473583f10f8a3ad9a56018f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea156dc48cb2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2eb3b889a473583f10f8a3ad9a56018f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[74598, 96256, 1506, 220, 10866, 23934, 220, 14815, 33006, 1840, 25756, 3114, 64569, 19479, 44786, 11562, 17721, 15088, 720, 2233, 77384, 24697, 46339, 4655, 1830, 44786, 54204, 720, 15752, 8, 5173, 3114, 13337, 61379, 7740, 720, 5591, 3114, 38657, 61379, 25756, 20346, 2156, 44613, 5927, 720, 8164, 92582, 1506, 10693, 11122, 1482, 12648, 720, 49907, 3114, 13337, 2156, 18999, 720, 25079, 48181, 12648, 62731, 19175, 6850, 1840, 59138, 720, 8164, 2233, 1482, 30656, 44786, 40650, 62491, 720, 35095, 1482, 58317, 1532, 11, 53419, 19479, 5173, 41056, 1830, 13373, 220, 2636, 11562, 17, 720, 8164, 39865, 14476, 23680, 1840, 5524, 46339, 92582, 9882, 10298, 19175, 720, 2233, 50436, 1532, 17756, 10298, 90211, 32985, 220, 16, 482, 220, 17, 11562, 18154, 720, 15752, 3114, 64569, 19479, 1532, 5927, 57925, 12394, 1506, 1069... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '65', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999167', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_d612724b3ab2891bb2d17f88b14cb0bb', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea156e15c862df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d612724b3ab2891bb2d17f88b14cb0bb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:48:34. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 56 \u0438\u0437 239 \\n \\n\u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0435\u0439 \u043d\u0430 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u044b\u0445 \u0443\u0447\u0430\u0441\u0442\u043a\u0430\u0445 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u043d\u044b\u0435 \u0438 \u0433\u043b\u0443\u0431\u0438\u043d\u043d\u044b\u0435 \u043c\u0430\u0440\u043a\u0438 \\n\u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0439 \u0437\u0430 \u0434\u0435\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f\u043c\u0438 \u043d\u0430\u0441\u044b\u043f\u0438 \u0438 \u043f\u043e\u0434\u0441\u0442\u0438\u043b\u0430\u044e\u0449\u0438\u0445 \u0435\u0435 \u0433\u0440\u0443\u043d\u0442\u043e\u0432 \u043f\u0440\u0438\u0440\u043e\u0434\u043d\u043e\u0433\u043e \\n\u0441\u043b\u043e\u0436\u0435\u043d\u0438\u044f,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '5075', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793563', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '482ms', 'x-request-id': 'req_7a9ced59df98c8871c41c0c8370aef8e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea156e70f432dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7a9ced59df98c8871c41c0c8370aef8e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8542792213082364, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\nLLM Response: \u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c\u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u0430\u043c\u0438:\\n\\n1. <b>\u041c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430</b>: \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c, \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435. \u0412 \u043d\u0438\u0445 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:48:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '251', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799325', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '50ms', 'x-request-id': 'req_9abf6e8f2fd00554529b634d1b21610f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1570e09dc2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9abf6e8f2fd00554529b634d1b21610f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c\u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u0430\u043c\u0438:\\n\\n1. <b>\u041c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430</b>: \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c, \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435. \u0412 \u043d\u0438\u0445 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0437\u043e\u043d.\\n\\n2. <b>\u0413\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f</b>: \u0421\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u043c\u0435\u0441\u0442\u043d\u044b\u043c\u0438 \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0438\u043b\u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0441\u043b\u0443\u0436\u0431\u0430\u043c\u0438. \u041e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f.\\n\\n3. <b>\u041e\u043f\u044b\u0442 \u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0430</b>: \u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u043e\u043f\u044b\u0442 \u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0443 \u043c\u0435\u0441\u0442\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0438\u043c\u0435\u0442\u044c \u044d\u043c\u043f\u0438\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432.\\n\\n4. <b>\u041e\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0441\u0443\u0440\u0441\u044b \u0438 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043e\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0441\u0443\u0440\u0441\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0441\u0440\u0435\u0434\u043d\u0435\u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='325f0ce7-57c5-4633-b332-bddcccf833e0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:41", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:42", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:48:42", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 50, 36, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2601, supergroup_chat_created=False, text='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'), update_id=881193699), <telegram.ext._callbackcontext.CallbackContext object at 0x000001FA97A73770>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001FA97A1D990>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='61e740ce-bfac-4303-8f39-394f49babac9' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='61e740ce-bfac-4303-8f39-394f49babac9'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c\u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u0430\u043c\u0438:\\n\\n1. <b>\u041c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430</b>: \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c, \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435. \u0412 \u043d\u0438\u0445 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u0435 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0437\u043e\u043d.\\n\\n2. <b>\u0413\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f</b>: \u0421\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u043c\u0435\u0441\u0442\u043d\u044b\u043c\u0438 \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0438\u043b\u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0441\u043b\u0443\u0436\u0431\u0430\u043c\u0438. \u041e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u0438\u0441\u0441... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96318360>, 'json_data': {'input': [[4898, 16248, 36497, 11047, 7975, 14476, 69775, 14257, 1830, 67124, 3114, 9542, 44100, 18868, 5372, 56449, 14525, 62731, 5927, 11562, 23630, 90877, 66144, 16742, 21923, 31443, 55523]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:50:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '74', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_462daeeff7f4f46dc09af4944b010230', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea159e78d309185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_462daeeff7f4f46dc09af4944b010230", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:38", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140680>, 'json_data': {'input': [[4898, 16248, 36497, 11047, 7975, 14476, 69775, 14257, 1830, 67124, 3114, 9542, 44100, 18868, 5372, 56449, 14525, 62731, 5927, 11562, 23630, 90877, 66144, 16742, 21923, 31443, 55523]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:50:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '76', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_2604fde886a0b5dcf0fe7c419a9e004c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea159ee5a2f9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2604fde886a0b5dcf0fe7c419a9e004c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[2297, 89327, 14332, 10298, 78876, 64322, 6856, 11047, 10298, 8164, 7753, 8131, 56515, 44786, 29619, 21708, 2355, 20807, 13, 16, 35448, 94722, 38098, 79370, 57186, 11, 63229, 35682, 39988, 20440, 78876, 64322, 1506, 49526, 74598, 51412, 5524, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 18034, 18437, 23680, 39988, 93099, 16742, 5524, 11047, 17766, 4898, 16494, 55617, 1830, 67187, 8131, 56515, 12648, 6578, 35875, 1482, 10298, 13, 720, 55258, 18437, 23680, 44858, 93099, 1506, 11562, 17766, 23311, 20346, 50819, 13373, 18868, 5372, 3865, 11122, 7094, 39280, 11, 99396, 5372, 39900, 5524, 7820, 17721, 13433, 2297, 12507, 23934, 11562, 17766, 7975, 9542, 39900, 720, 17394, 12394, 32985, 14082, 8341, 74828, 13, 35889, 17721, 56999, 44065, 18868, 79686, 72060, 7975, 40251, 70129, 21204, 23934, 7820, 78746, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:50:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '72', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999521', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_d494891286ca35c860e2b165b843adab', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea159f0cbfd9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d494891286ca35c860e2b165b843adab", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 10895, 33006, 1840, 11320, 8379, 15458, 2156, 90877, 7486, 39988, 18868, 48355, 8, 11047, 7975, 14476, 19479, 16742, 220, 16, 12, 220, 16, 11, 20, 11562, 6578, 11, 98851, 59313, 2233, 67124, 14009, 70129, 7820, 19175, 2297, 43293, 21708, 720, 6148, 1506, 55523, 18868, 79686, 7952, 12182, 10124, 44100, 64880, 11, 78876, 8164, 7975, 21956, 5372, 12648, 64880, 5524, 55617, 34493, 12507, 19175, 14391, 7975, 50506, 220, 3101, 11562, 6578, 26, 720, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 44065, 5173, 3114, 9542, 4655, 14257, 52037, 18226, 11320, 94538, 70129, 5927, 8164, 3114, 13337, 77495, 81842, 7820, 81842, 3865, 13, 23784, 90226, 1506, 1532, 720, 23297, 11320, 11562, 50436, 7094, 3865, 6850, 16494, 1840, 21923, 89554, 34148, 1830, 21204, 11122, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:50:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '139', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999150', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_cc3d27c2c30fa26e8e1f55830e24b072', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea159f31def9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cc3d27c2c30fa26e8e1f55830e24b072", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 720, 966, 720, 12, 55617, 1830, 67187, 8131, 56515, 36352, 6850, 19188, 10298, 39988, 17756, 1506, 55523, 7820, 78746, 8164, 34082, 44786, 18868, 5372, 26, 720, 12, 11122, 8131, 78746, 36352, 39233, 10298, 19190, 12648, 6578, 18600, 1506, 20812, 9239, 12507, 72590, 3114, 64569, 61498, 39988, 17756, 1506, 55523, 14391, 8341, 17766, 44786, 18868, 5372, 26, 720, 12, 78876, 12426, 28089, 36352, 55617, 5591, 6856, 5173, 7486, 26503, 44786, 18868, 5372, 26, 720, 12, 5173, 14082, 12394, 36352, 81803, 7975, 90877, 26, 720, 12, 14391, 8341, 17766, 48150, 46177, 5173, 3114, 9542, 38438, 48150, 5173, 15088, 39103, 23311, 1532, 29619, 6856, 13, 720, 16604, 2156, 38521, 2233, 5372, 23446, 1532, 18868, 79686, 11047, 67124, 3114, 6856, 63233, 5173, 41056, 1830, 6... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:50:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '246', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998712', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_03ba55a7984eb167b2126bed26de1bb5', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea159f8497b9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_03ba55a7984eb167b2126bed26de1bb5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96334B80>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 33006, 4331, 720, 1032, 13, 23, 23784, 11562, 37277, 1506, 10693, 5927, 49899, 1506, 11047, 20346, 10124, 29256, 24803, 9706, 6856, 11, 7740, 7094, 43293, 67745, 20879, 12561, 35111, 2233, 1482, 5372, 44786, 11047, 67124, 3114, 6856, 63233, 720, 8164, 41056, 1830, 6856, 11, 5927, 11122, 7094, 39280, 58317, 37277, 13433, 4329, 53280, 12394, 13433, 11047, 20346, 10124, 5927, 18868, 79686, 7740, 18034, 35297, 7094, 24697, 19190, 4655, 21599, 23311, 10693, 11122, 7094, 14332, 12415, 19175, 720, 7094, 29256, 44155, 13433, 50819, 13, 720, 34604, 19188, 64134, 4655, 20879, 49284, 6735, 44938, 20440, 12561, 29256, 44155, 13433, 11047, 20346, 10124, 90211, 32985, 18868, 79686, 7740, 18034, 35297, 7094, 24697, 19190, 4655, 720, 7094, 48181, 12648, 21923, 232... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:50:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '90', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998802', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_3e1996bcb8fcd7bcf42c3b812b4192d3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea159fe0d499185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3e1996bcb8fcd7bcf42c3b812b4192d3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:50:41. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u043e\u0432 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439  \\n\u041d.1 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \\n  \\n\u0421\u0442\u0435\u043d\u0430 \u0441 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0444\u0430\u0441\u0430\u0434\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0441 \u0442\u043e\u043d\u043a\u0438\u043c \u0448\u0442\u0443\u043a\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u0441\u043b\u043e\u0435\u043c. \\n\u0424\u0430\u0441\u0430\u0434\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u0442\u0435\u043d\u0443 \u0437... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:50:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1857', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794120', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '440ms', 'x-request-id': 'req_ceebfe2c2063c4744538f2feb89dacfb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15a00ab0a2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ceebfe2c2063c4744538f2feb89dacfb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:44", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8628189553289441, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:44", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:44", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438\\n\\nLLM Response: \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0441\u0442\u0435\u043d\u044b, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u044d\u043d\u0435\u0440\u0433\u043e\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0437\u0434\u0430\u043d\u0438\u044f. \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:50:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1597', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799425', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '43ms', 'x-request-id': 'req_0e7c570613648871102b1397c7abd544', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15a137ffb2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0e7c570613648871102b1397c7abd544", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:46", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a \u043e\u043d\u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f.', '\u041a\u0430\u043a \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0432\u0430\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435?', '\u041a\u0430\u043a\u0438\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u043a\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:46", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0441\u0442\u0435\u043d\u044b, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u044d\u043d\u0435\u0440\u0433\u043e\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0437\u0434\u0430\u043d\u0438\u044f. \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438\u0437 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u0438\u043b\u0438 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b\u0430 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 100-150 \u043c\u043c.\\n\\n\u041e\u0434\u043d\u0430\u043a\u043e \u0434\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c:\\n\u2022 \u0422\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u0441\u0442\u0435\u043d\u044b.\\n\u2022 \u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u043a\u0435.\\n\u2022 \u042d\u043d\u0435\u0440\u0433\u043e\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0441\u0442\u0438\u0447\u044c.\\n\\n\u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f \u0432\u0441\u0435\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u0436\u0435\u043b\u0430\u0435\u043c\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u044d\u043d\u0435\u0440\u0433\u043e\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442 \u0438\u043b\u0438 \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u0430\u043c\u0438 \u0432 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u0438 \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f.\\n\\n------------------\\nReferences:\\n\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf, p... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:46", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:46", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='61e740ce-bfac-4303-8f39-394f49babac9'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:46", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:46", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:47", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:50:47", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:38", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:38", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_0', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658070947137', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 50, 47, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2602, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='get_file:file_0', text='\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf'),), (InlineKeyboardButton(callback_data='get_file:file_1', text='\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001FA97A33CD0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a \u043e\u043d\u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='0fc3d881-082f-45cc-910f-3fb32892a6f5' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='0fc3d881-082f-45cc-910f-3fb32892a6f5'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a \u043e\u043d\u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f.'), kwargs: {'chat_history': [HumanMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a \u043e\u043d\u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0441\u0442\u0435\u043d\u044b, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u044d\u043d\u0435\u0440\u0433\u043e\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0437\u0434\u0430\u043d\u0438\u044f. \u0412 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u0441\u043b\u0443\u0447\u0430\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438\u0437 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u0438\u043b\u0438 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b\u0430 \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 100-150 \u043c\u043c.\\n\\n... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FB2142FA60>, 'json_data': {'input': [[41682, 9136, 2156, 19039, 51627, 84699, 60009, 8379, 11047, 67124, 3114, 13337, 98285, 23446, 6148, 23297, 17165, 10693, 45658, 1506, 11001, 118, 58060, 35111, 75281, 10693, 96573, 7753, 1840, 16331, 6856, 20440, 18868, 5372, 11, 82250, 46339, 92582, 18264, 11, 52770, 8379, 23446, 5927, 11320, 4329, 70129, 13373, 63229, 9239, 11047, 7975, 14476, 1840, 12648, 14257, 1830, 67124, 3114, 9542, 44100, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:51:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '39', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999937', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_abf650f27bac609328ec380cd9400fe6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15b6a1f455e9d-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_abf650f27bac609328ec380cd9400fe6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96318360>, 'json_data': {'input': [[41682, 9136, 2156, 19039, 51627, 84699, 60009, 8379, 11047, 67124, 3114, 13337, 98285, 23446, 6148, 23297, 17165, 10693, 45658, 1506, 11001, 118, 58060, 35111, 75281, 10693, 96573, 7753, 1840, 16331, 6856, 20440, 18868, 5372, 11, 82250, 46339, 92582, 18264, 11, 52770, 8379, 23446, 5927, 11320, 4329, 70129, 13373, 63229, 9239, 11047, 7975, 14476, 1840, 12648, 14257, 1830, 67124, 3114, 9542, 44100, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:51:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '84', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999937', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_b4c0b3fef44b402d281e551160c88c9f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15b6c28f45e9d-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b4c0b3fef44b402d281e551160c88c9f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96318360>, 'json_data': {'input': [[3865, 25657, 6148, 2156, 18999, 45658, 1506, 11001, 118, 58060, 35111, 38822, 96573, 7753, 1840, 16331, 6856, 5524, 14257, 64322, 12507, 7740, 10693, 5524, 44075, 2156, 21708, 5927, 3114, 38657, 68742, 5927, 78876, 64322, 34613, 720, 8164, 7753, 1840, 9706, 26, 49526, 2233, 18437, 64322, 1506, 5927, 35387, 3865, 10693, 1482, 14082, 38972, 1506, 5927, 5927, 35387, 3865, 12426, 39988, 12561, 23630, 3114, 16742, 53671, 26, 49526, 8164, 70059, 17165, 67425, 8131, 38438, 68742, 51548, 34082, 35034, 1506, 14257, 40590, 67768, 16742, 23934, 5927, 35387, 3865, 12426, 39988, 12561, 23630, 3114, 16742, 17165, 5927, 3114, 34493, 1840, 5927, 720, 2233, 18437, 64322, 34613, 28114, 1840, 9706, 26, 49526, 2233, 18437, 64322, 1506, 86995, 50693, 3865, 10298, 16742, 5927, 61642, 6148, 1840, 12648, 5524, 29256, 2233, 13337, 2... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:51:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '151', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999097', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_e22062f9356c491ef67d036f8c1622b4', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15b6e8ad25e9d-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e22062f9356c491ef67d036f8c1622b4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96318360>, 'json_data': {'input': [[2297, 89327, 14332, 10298, 78876, 64322, 6856, 11047, 10298, 8164, 7753, 8131, 56515, 44786, 29619, 21708, 2355, 20807, 13, 16, 35448, 94722, 38098, 79370, 57186, 11, 63229, 35682, 39988, 20440, 78876, 64322, 1506, 49526, 74598, 51412, 5524, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 18034, 18437, 23680, 39988, 93099, 16742, 5524, 11047, 17766, 4898, 16494, 55617, 1830, 67187, 8131, 56515, 12648, 6578, 35875, 1482, 10298, 13, 720, 55258, 18437, 23680, 44858, 93099, 1506, 11562, 17766, 23311, 20346, 50819, 13373, 18868, 5372, 3865, 11122, 7094, 39280, 11, 99396, 5372, 39900, 5524, 7820, 17721, 13433, 2297, 12507, 23934, 11562, 17766, 7975, 9542, 39900, 720, 17394, 12394, 32985, 14082, 8341, 74828, 13, 35889, 17721, 56999, 44065, 18868, 79686, 72060, 7975, 40251, 70129, 21204, 23934, 7820, 78746, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:51:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '50', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999522', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_00911904aa46c431f5ce97cad1b47162', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15b711d0c5e9d-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_00911904aa46c431f5ce97cad1b47162", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96318360>, 'json_data': {'input': [[56191, 33302, 78876, 64322, 44858, 11047, 7975, 14476, 69775, 84699, 60009, 11, 17756, 10298, 68088, 21923, 23297, 8164, 56857, 18264, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 37405, 82941, 9882, 10298, 61565, 198, 5591, 4655, 10124, 2233, 28241, 12415, 720, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 34613, 720, 6578, 8131, 7753, 1840, 16331, 11, 720, 41036, 13404, 73181, 720, 8164, 2233, 16494, 5372, 18264, 720, 10124, 7975, 50506, 720, 68506, 19916, 19916, 15298, 98695, 34613, 198, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 34613, 96573, 7753, 1840, 16331, 627, 54745, 16494, 5372, 17618, 38098, 79370, 15458, 12415, 5524, 84699, 12426, 21708, 11047, 7975, 14476, 19479, 16742, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39900, 35875, 61390, 86995, 50693, 73181, 11047, 98285, 23446, 6148,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:51:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '109', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998438', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_1cca16e4cc93e6540c74173bb6ea803d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15b737f535e9d-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1cca16e4cc93e6540c74173bb6ea803d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96318360>, 'json_data': {'input': [[140, 98, 1506, 11001, 118, 58060, 35111, 75281, 11047, 67124, 3114, 20219, 1506, 14476, 9542, 39988, 21923, 7975, 38438, 17165, 11122, 7094, 39280, 13, 67891, 41873, 81301, 13433, 4329, 5927, 61642, 6148, 69775, 11, 41176, 61498, 13999, 25190, 110, 44858, 720, 8164, 13337, 7753, 4329, 6578, 11047, 67124, 3114, 6856, 16742, 21599, 2156, 7753, 15752, 47273, 22918, 71438, 1840, 10589, 4655, 20879, 19619, 11320, 5591, 32062, 22885, 48440, 10298, 1506, 5927, 22918, 71438, 1840, 10589, 3865, 65811, 9882, 37405, 720, 8164, 7753, 67124, 23680, 1532, 11047, 10298, 8164, 7753, 8131, 3865, 39103, 5927, 220, 16, 37386, 19871, 90211, 32985, 11047, 67124, 3114, 20219, 1506, 14476, 9542, 77495, 21923, 7975, 38438, 36352, 11122, 7094, 39280, 13, 49526, 61432, 13, 1313, 14257, 7094, 26503, 44858, 45658, 1506, 11001, 118, 580... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:51:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '138', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998717', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_4c1670fff1b4340571fd2d50c07f8171', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15b75c9785e9d-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4c1670fff1b4340571fd2d50c07f8171", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:51:41. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0443\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0438\u0445 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u0438 \u0432 \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \\n\u043f\u0435\u0440\u0438\u043e\u0434; \\n  \\n\u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0432\u043e\u0437\u0434\u0443\u0445\u043e\u043e\u0431\u043c\u0435\u043d\u0430 \u0432 \u0432\u043e\u0437\u0434\u0443\u0448\u043d\u043e\u0439 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0435; \\n  \\n\u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0443\u0434\u0430\u043b\u044f\u0435\u043c\u043e\u0439 \u0438\u0437 \u0432\u043e\u0437\u0434\u0443\u0448\u043d\u043e\u0439 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438 \u0432\u043b\u0430... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:51:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '13106', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793507', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '486ms', 'x-request-id': 'req_c2aa0e3f580afe6db9d6d2a7bfe91241', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15b790e62ee24-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c2aa0e3f580afe6db9d6d2a7bfe91241", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:55", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8643180142166176, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:55", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:55", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as \\'learn more about ...\\', \\'how to determine ...\\', \\'how to calculate ...\\', etc., that the user can use to gather more information. If no additional prompts are needed, respond with \\'No suggestions needed\\'.\\n\\nUser Prompt: \u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a \u043e\u043d\u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f.\\n\\nLLM Response: \u0422\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0438\u0433\u0440\u0430\u044e\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u0443\u044e \u0440\u043e\u043b\u044c \u0432 \u0432\u044b\u0431\u043e\u0440\u0435 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. **\u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c**: \u042d\u0442\u043e \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:51:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1316', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799034', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '72ms', 'x-request-id': 'req_b600dd91d283a1be262168e3253bde9e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15bcd9d5eee24-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b600dd91d283a1be262168e3253bde9e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:57", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f.', '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443.', '\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u043c\u0435\u0442\u043e\u0434\u0430\u0445 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438 R-\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:57", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0422\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0438\u0433\u0440\u0430\u044e\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u0443\u044e \u0440\u043e\u043b\u044c \u0432 \u0432\u044b\u0431\u043e\u0440\u0435 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. <b>\u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c</b>: \u042d\u0442\u043e \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e. \u0427\u0435\u043c \u043d\u0438\u0436\u0435 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043c \u043b\u0443\u0447\u0448\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0442\u0435\u043f\u043b\u043e. \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u0438\u043b\u0438 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b, \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u043c\u0435\u043d\u044c\u0448\u0435\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u043f\u043e \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044e \u0441 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c\u0438 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e.\\n\\n2. <b>\u0422\u0435\u043f\u043b\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435 (R-\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435)</b>: \u042d\u0442\u043e \u043c\u0435\u0440\u0430 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u043c\u0443 \u043f\u043e\u0442\u043e\u043a\u0443. \u0411\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u043e\u0435 \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u043b\u0443\u0447\u0448\u0443\u044e \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e. \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u043f\u043e\u0434\u0431\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0435 R-\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u044d\u043d\u0435\u0440\u0433\u043e\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0437\u0434\u0430\u043d\u0438\u044f.\\n\\n3. <b>\u041f\u043b\u043e\u0442\u043d\u043e\u0441\u0442\u044c</b>: \u041f\u043b\u043e\u0442\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430. \u041b\u0435\u0433\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u043e, \u0438\u043c\u0435\u044e\u0442 \u043b\u0443\u0447\u0448\u0438\u0435 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:57", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:57", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='0fc3d881-082f-45cc-910f-3fb32892a6f5'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:57", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:57", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:58", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:51:58", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:38", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:38", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:38", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:38", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660834140866', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 50, 47, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2602, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='get_file:file_0', text='\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf'),), (InlineKeyboardButton(callback_data='get_file:file_1', text='\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001FA97A30E80>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:39", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:39", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='54c58a13-4794-4fc7-986a-888928aad3ee' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:39", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='54c58a13-4794-4fc7-986a-888928aad3ee'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:39", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443.'), kwargs: {'chat_history': [HumanMessage(content='\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a \u043e\u043d\u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0422\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0438\u0433\u0440\u0430\u044e\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u0443\u044e \u0440\u043e\u043b\u044c \u0432 \u0432\u044b\u0431\u043e\u0440\u0435 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. <b>\u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c</b>: \u042d\u0442\u043e \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e. \u0427\u0435\u043c \u043d\u0438\u0436\u0435 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043c \u043b\u0443\u0447\u0448\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0442\u0435\u043f\u043b\u043e. \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u0438\u043b\u0438 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b, \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u043c\u0435\u043d... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[31274, 2297, 41036, 13404, 83680, 51627, 11, 52770, 90189, 6578, 8131, 81301, 17165, 1532, 97991, 6856, 40231, 18600, 25698, 1840, 74828, 5927, 11320, 4329, 70129, 13373, 63229, 9239, 14257, 1830, 67124, 3114, 9542, 44100, 7740, 73385, 11047, 7975, 14476, 19479, 3865, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:52:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '111', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999958', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6301715f65446f467a7c0fcaa7786ab8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15cdfbb7c2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6301715f65446f467a7c0fcaa7786ab8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:40", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[31274, 2297, 41036, 13404, 83680, 51627, 11, 52770, 90189, 6578, 8131, 81301, 17165, 1532, 97991, 6856, 40231, 18600, 25698, 1840, 74828, 5927, 11320, 4329, 70129, 13373, 63229, 9239, 14257, 1830, 67124, 3114, 9542, 44100, 7740, 73385, 11047, 7975, 14476, 19479, 3865, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:52:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '66', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999958', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_11826d5ac00e3837cb95ef309abf139e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15ce5ffcd2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_11826d5ac00e3837cb95ef309abf139e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[10693, 1506, 11001, 118, 58060, 44786, 20440, 6850, 67745, 7820, 2233, 9542, 81301, 17165, 10693, 82702, 15298, 90189, 6578, 8131, 81301, 17165, 10693, 5927, 35387, 77628, 44938, 4390, 17279, 31203, 5173, 3114, 14332, 24803, 14332, 1840, 94508, 4655, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 5524, 29256, 25262, 18226, 14009, 29893, 7740, 67969, 2233, 15298, 67589, 18482, 25756, 2233, 14332, 6148, 44065, 198, 3865, 41036, 6856, 40231, 11, 7740, 10693, 91667, 6856, 60990, 61379, 7740, 17756, 84350, 13337, 3865, 96034, 37773, 90875, 85864, 71239, 61642, 20346, 10298, 63233, 90189, 6578, 8131, 81301, 17165, 10693, 198, 19916, 16248, 37773, 6856, 81757, 33793, 3114, 3865, 8131, 54686, 5524, 14257, 64322, 12507, 53376, 8379, 18034, 16248, 23311, 6148, 23297, 17165, 10693, 11562, 8341, 1532, 17766, 38722, 37906... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:52:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '77', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998914', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_6bfe1744d1387e8a8ec59da5aff549c2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15ceb9b5a2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6bfe1744d1387e8a8ec59da5aff549c2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[3865, 25657, 6148, 2156, 18999, 45658, 1506, 11001, 118, 58060, 35111, 38822, 96573, 7753, 1840, 16331, 6856, 5524, 14257, 64322, 12507, 7740, 10693, 5524, 44075, 2156, 21708, 5927, 3114, 38657, 68742, 5927, 78876, 64322, 34613, 720, 8164, 7753, 1840, 9706, 26, 49526, 2233, 18437, 64322, 1506, 5927, 35387, 3865, 10693, 1482, 14082, 38972, 1506, 5927, 5927, 35387, 3865, 12426, 39988, 12561, 23630, 3114, 16742, 53671, 26, 49526, 8164, 70059, 17165, 67425, 8131, 38438, 68742, 51548, 34082, 35034, 1506, 14257, 40590, 67768, 16742, 23934, 5927, 35387, 3865, 12426, 39988, 12561, 23630, 3114, 16742, 17165, 5927, 3114, 34493, 1840, 5927, 720, 2233, 18437, 64322, 34613, 28114, 1840, 9706, 26, 49526, 2233, 18437, 64322, 1506, 86995, 50693, 3865, 10298, 16742, 5927, 61642, 6148, 1840, 12648, 5524, 29256, 2233, 13337, 2... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:52:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '56', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999097', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_37600d7546e489f7f5b7b9023817ff30', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15cf22fcf2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_37600d7546e489f7f5b7b9023817ff30", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[27435, 11320, 6578, 8131, 81301, 17165, 1532, 67445, 39103, 25190, 117, 74828, 30392, 1482, 56008, 94071, 12561, 19479, 16494, 1506, 70129, 21204, 18154, 28599, 17279, 220, 9263, 13, 9423, 966, 20440, 720, 15752, 13, 25079, 6578, 9542, 24803, 45458, 23630, 90877, 66144, 16742, 21923, 3114, 13, 49526, 19871, 44075, 40251, 4329, 11047, 10298, 8164, 7753, 8131, 3865, 22911, 20879, 29256, 56008, 39900, 28114, 1840, 87878, 720, 12, 18, 11, 16, 37386, 19871, 26, 49526, 8164, 2233, 9706, 48181, 56008, 61379, 20879, 29256, 56008, 39900, 28114, 1840, 87878, 720, 12463, 5524, 38521, 26, 49526, 1830, 10298, 8164, 7753, 8131, 3865, 22911, 5927, 2156, 38521, 2233, 5372, 2156, 47295, 5927, 35387, 3865, 10693, 1506, 720, 508, 37386, 34, 13, 49526, 85587, 81376, 47805, 1532, 90189, 6578, 8131, 81301, 17165, 10693, 45658, 15... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:52:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '59', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999256', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_bac35d0d567e611ae10c11fb89f22267', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15cf7baba2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bac35d0d567e611ae10c11fb89f22267", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA96140720>, 'json_data': {'input': [[5591, 3114, 38657, 13999, 6735, 2156, 72952, 92175, 61390, 23446, 12182, 8379, 15752, 11001, 114, 40590, 90457, 67745, 38098, 79370, 15458, 12415, 26, 49526, 1830, 67124, 39865, 44155, 5591, 1482, 9882, 12182, 96034, 7753, 10693, 68742, 29619, 6856, 26, 49526, 2233, 18437, 31101, 3865, 11047, 67124, 3114, 6856, 16742, 21599, 2156, 7753, 15752, 47273, 13373, 20879, 29256, 56892, 7740, 5927, 19190, 1840, 14009, 15458, 12182, 11122, 7094, 14332, 12415, 13, 49526, 19, 13, 18, 23784, 3114, 38657, 13999, 6735, 34613, 18600, 50436, 16494, 76401, 86610, 62491, 11122, 7094, 14332, 12415, 5927, 45658, 7975, 9706, 34613, 28114, 1840, 9706, 25756, 87878, 5927, 93323, 13810, 16494, 85864, 720, 13337, 20879, 13999, 2297, 56008, 39988, 5927, 3114, 38657, 68742, 7740, 11047, 10298, 8164, 7753, 8131, 3865, 39103, 5927, 2156,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:52:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '59', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999396', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '7ms', 'x-request-id': 'req_19c5af9a2536cbbaae5087e76576d1ab', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15cf9fbf92dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_19c5af9a2536cbbaae5087e76576d1ab", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:52:44. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u044b\u0445 \u0434\u043b\u044f \u043d\u0438\u0445 \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0442\u043e\u0447\u0435\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439).\\n\u041f\u0440\u0438 \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0438 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0430\u043d\u0438\u0447\u043d\u044b\u0435\\n\u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0438\u0445 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438 \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u043c\u043e\u0441\u0442\u0438 \u043c\u043e\u0434\u0435\u043b\u0438\u0440\u0443\u0435\u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:52:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '8907', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793894', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '457ms', 'x-request-id': 'req_933e8aa9a1e807c2b5f7c14b485745b8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15cff2f5a2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_933e8aa9a1e807c2b5f7c14b485745b8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:54", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8465460877256539, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:54", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:54", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443.\\n\\nLLM Response: \u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u043b\u0438\u044f\u043d\u0438\u0435 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443. \u0412\u043e\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c:\\n\\n1. **\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c**: \u0412 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f. \u042d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:52:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1650', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799038', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '72ms', 'x-request-id': 'req_b878a5cdc292ce136ddcc2aa849b6357', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15d3e1ed72df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b878a5cdc292ce136ddcc2aa849b6357", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:56", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u043c\u0435\u0441\u0442\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f.', '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043e\u0431\u043b\u0430\u0434\u0430\u044e\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.', '\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c \u0438 \u043f\u0430\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0438 \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u043b\u0438\u044f\u043d\u0438\u0435 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443. \u0412\u043e\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c:\\n\\n1. <b>\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c</b>: \u0412 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f. \u042d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u043d\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f.\\n\\n2. <b>\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c</b>: \u0412\u044b\u0441\u043e\u043a\u0430\u044f \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c \u043c\u043e\u0436\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u043b\u0430\u0433\u043e\u0441\u0442\u043e\u0439\u043a\u0438\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u044f \u0432\u043b\u0430\u0433\u0438 \u0432 \u0441\u0442\u0435\u043d\u0430\u0445, \u0447\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u043d\u0438\u0437\u0438\u0442\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0438 \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043a \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044e \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438.\\n\\n3. <b>\u041a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b</b>: \u0427\u0430\u0441\u0442\u044b\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b \u0447\u0435\u0440\u0435\u0437 \u043d\u0443\u043b\u0435\u0432\u0443\u044e \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0443 \u043c\u043e\u0433\u0443\u0442 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0434\u0435\u043d\u0441\u0430\u0442\u0430 \u0438 \u043b\u0435\u0434\u044f\u043d\u044b\u0445 \u043f\u0440\u043e\u0431\u043e\u043a \u0432 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u0445 \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043e\u0434\u043e\u043f\u043e\u0433\u043b\u043e\u0449\u0430\u0435\u043c\u043e\u0441\u0442\u044c\u044e. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0430\u0436\u043d\u043e \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u0438, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.\\n\\n4. <b>\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430</b>... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:56", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:56", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='54c58a13-4794-4fc7-986a-888928aad3ee'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:56", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:56", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:57", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:52:57", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:18", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:18", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:18", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:18", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:18", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658988196844', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 52, 56, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=19, offset=152, type=<MessageEntityType.BOLD>), MessageEntity(length=9, offset=408, type=<MessageEntityType.BOLD>), MessageEntity(length=21, offset=653, type=<MessageEntityType.BOLD>), MessageEntity(length=14, offset=899, type=<MessageEntityType.BOLD>), MessageEntity(length=18, offset=1071, type=<MessageEntityType.BOLD>)), from_user=User(first_name='Pdflyx', id=78368953... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:18", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001FA97A33480>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:19", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043e\u0431\u043b\u0430\u0434\u0430\u044e\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:19", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='982630e2-40a6-41ce-8a2a-0005e31670cd' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:19", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='982630e2-40a6-41ce-8a2a-0005e31670cd'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:19", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043e\u0431\u043b\u0430\u0434\u0430\u044e\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.'), kwargs: {'chat_history': [HumanMessage(content='\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043e\u0431\u043b\u0430\u0434\u0430\u044e\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u043b\u0438\u044f\u043d\u0438\u0435 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438 \u0435\u0433\u043e \u0442\u043e\u043b\u0449\u0438\u043d\u0443. \u0412\u043e\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c:\\n\\n1. <b>\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c</b>: \u0412 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f. \u042d\u0442\u043e \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u043d\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0433\u043e \u0441\u043e\u043f\u0440\u043e\u0442\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A8040>, 'json_data': {'input': [[31274, 2297, 41036, 13404, 83680, 51627, 11, 52770, 50306, 96573, 7753, 1840, 16331, 4655, 21923, 80230, 1506, 70129, 6850, 41873, 4898, 16742, 11047, 67124, 3114, 29256, 24803, 9706, 61379, 12182, 7740, 14257, 6735, 16742, 6148, 28089, 4655, 7820, 39233, 38822, 3114, 24697, 11122, 24697, 7753, 9136, 39280, 7740, 20879, 44613, 28089, 39280, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:53:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '96', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999947', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_d0082c4236923282bd7b50c200505578', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15ddba8de2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d0082c4236923282bd7b50c200505578", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:20", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A8EA0>, 'json_data': {'input': [[31274, 2297, 41036, 13404, 83680, 51627, 11, 52770, 50306, 96573, 7753, 1840, 16331, 4655, 21923, 80230, 1506, 70129, 6850, 41873, 4898, 16742, 11047, 67124, 3114, 29256, 24803, 9706, 61379, 12182, 7740, 14257, 6735, 16742, 6148, 28089, 4655, 7820, 39233, 38822, 3114, 24697, 11122, 24697, 7753, 9136, 39280, 7740, 20879, 44613, 28089, 39280, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:53:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '118', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999947', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_40a4e2502dc886ccdde56af1cf4b0296', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15de21d9d2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_40a4e2502dc886ccdde56af1cf4b0296", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A8EA0>, 'json_data': {'input': [[20, 13, 605, 23227, 31203, 63229, 9239, 1532, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 44786, 96573, 7753, 1840, 16331, 6856, 7740, 5173, 15088, 24803, 44786, 35875, 1482, 33742, 93129, 73181, 14257, 91353, 35667, 18482, 18868, 16742, 4898, 97747, 198, 68506, 39244, 6856, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 38098, 79370, 57186, 7820, 45658, 16494, 81301, 17165, 21022, 15752, 2233, 94520, 28089, 12648, 6578, 18034, 16248, 37773, 24697, 72664, 20346, 17394, 1506, 90457, 21708, 5524, 44075, 4655, 345, 5591, 52520, 36497, 86291, 79104, 48150, 5927, 35387, 77628, 50306, 5927, 86610, 35034, 11, 80595, 1506, 14476, 67745, 21204, 5927, 23934, 7975, 1840, 20346, 10298, 12507, 55053, 1532, 627, 63720, 720, 7094, 29256, 44155, 13433, 50819, 720, 8164, 2233, 16494, 5372, 17618, 720, 1830, 671... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:53:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '152', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998190', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '21ms', 'x-request-id': 'req_fca120c73c2f52c04103fd48721d2769', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15de6e92a2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fca120c73c2f52c04103fd48721d2769", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A8EA0>, 'json_data': {'input': [[2297, 39865, 4329, 20440, 57925, 13337, 5591, 52866, 18999, 96034, 2233, 50436, 7094, 18999, 63780, 1482, 41873, 96485, 15458, 17766, 44786, 96573, 7753, 1840, 16331, 6856, 627, 257, 220, 20, 51418, 2233, 50693, 6856, 39280, 7820, 96573, 7753, 1840, 16331, 24697, 7740, 38098, 79370, 71829, 6578, 11047, 67124, 3114, 6856, 16742, 23934, 96485, 57186, 198, 20, 13, 16, 720, 16604, 720, 4898, 17766, 79370, 71829, 10693, 720, 1830, 67124, 39865, 41873, 96485, 57186, 720, 14082, 9239, 37013, 6856, 39280, 720, 1840, 720, 1830, 20346, 10124, 29256, 24803, 9706, 6856, 720, 2297, 720, 1830, 10298, 8164, 7753, 8131, 3865, 38808, 1840, 198, 2297, 75346, 1506, 14476, 67745, 21204, 5927, 6850, 67745, 5927, 86610, 35034, 5927, 7952, 1840, 19619, 19188, 17766, 1532, 20879, 220, 508, 57297, 220, 3101, 37386, 19871, 20440, 920... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:53:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '390', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998030', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '23ms', 'x-request-id': 'req_a446c99a23691c4f7496d099c333e9e6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15dec0c7f2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a446c99a23691c4f7496d099c333e9e6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A8EA0>, 'json_data': {'input': [[51627, 10693, 2156, 7975, 14837, 81301, 17165, 10693, 5927, 86610, 35034, 7740, 21022, 15752, 2233, 25698, 8131, 6856, 92175, 61390, 23446, 1840, 627, 21, 13, 21, 45458, 97341, 38657, 11047, 67124, 39865, 41873, 96485, 57186, 7740, 5173, 15088, 24803, 44786, 35875, 1482, 33742, 93129, 73181, 62315, 9706, 18264, 20879, 39479, 15752, 67024, 38438, 44786, 198, 3865, 77911, 20812, 11, 18034, 3114, 7486, 10589, 33742, 63233, 34943, 13404, 19479, 62491, 11, 7820, 2233, 28089, 7975, 19479, 21708, 44786, 14257, 6148, 84350, 90877, 7740, 18034, 18437, 17766, 44786, 17756, 84350, 21708, 627, 21, 13, 21, 13, 16, 45458, 97341, 38657, 11047, 67124, 39865, 41873, 96485, 57186, 93129, 73181, 62315, 9706, 18264, 5927, 91105, 28086, 3114, 84198, 11, 12561, 13337, 28089, 29256, 7975, 21956, 94962, 198, 67187, 3114, 17766, 386... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:53:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '405', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998581', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_c20290bd53a5b8f997d2ffa1cdc197af', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15df2a8ff2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c20290bd53a5b8f997d2ffa1cdc197af", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A8EA0>, 'json_data': {'input': [[4898, 17766, 19916, 70397, 3865, 22911, 71829, 7740, 100147, 4655, 23934, 7975, 1840, 20346, 10298, 16742, 96034, 7753, 10693, 68742, 280, 3865, 41036, 6856, 40231, 11562, 97341, 38657, 1506, 320, 6735, 23297, 2156, 5372, 61379, 11, 21477, 2297, 13337, 61379, 11, 5524, 32985, 17766, 61379, 7740, 7952, 2233, 60057, 3865, 41036, 6856, 40231, 7952, 10298, 97341, 38657, 1506, 7740, 14257, 23311, 11320, 9136, 54686, 627, 35095, 67124, 39865, 41873, 96485, 15458, 17766, 44858, 38098, 79370, 71829, 11047, 20346, 10124, 29256, 24803, 9706, 6856, 11047, 67124, 3114, 6856, 63233, 5524, 8341, 21708, 40842, 9136, 10298, 39988, 14391, 23297, 4898, 7486, 39127, 39988, 198, 8164, 2233, 15088, 80230, 17165, 56449, 14525, 21477, 7094, 58669, 28089, 18482, 92457, 39479, 20346, 12426, 18999, 512, 5591, 35387, 77628, 50306, 257... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:53:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '148', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998856', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_541cf658b086fb11b99f23a848ea0bd8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15dfa7dda2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_541cf658b086fb11b99f23a848ea0bd8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:53:25. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n5.10 \u041f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0438 \u043f\u043e\u043a\u0440\u043e\u0432\u043d\u044b\u0445 \u0441\u043b\u043e\u0435\u0432 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c\\n\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043a \u0445\u0438\u043c\u0438\u0447\u0435\u0441\u043a\u0438 \u0430\u0433\u0440\u0435\u0441\u0441\u0438\u0432\u043d\u044b\u043c \u0444\u0430\u043a\u0442\u043e\u0440\u0430\u043c \u043e\u043a\u0440\u0443\u0436\u0430\u044e\u0449\u0435\u0439 \u0441\u0440\u0435\u0434\u044b,\\n\u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0435 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:53:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6816', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '790664', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '700ms', 'x-request-id': 'req_2cac05d5f7f4334ce16df52a71d0243c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15dffa9a7c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2cac05d5f7f4334ce16df52a71d0243c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:32", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8523770747985765, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:32", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:32", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043e\u0431\u043b\u0430\u0434\u0430\u044e\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.\\n\\nLLM Response: \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. **\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b (XPS)**: \u041e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c\u044e \u043a \u0432\u043b\u0430\u0433\u0435, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0435\u0433\u043e \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u043c \u0432\u044b\u0431\u043e\u0440\u043e\u043c \u0434\u043b\u044f \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0441 \u0447\u0430\u0441\u0442\u044b\u043c\u0438 \u0446\u0438\u043a\u043b\u0430\u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:53:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1341', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799170', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '62ms', 'x-request-id': 'req_97575c35c20ea5db3bd97a11912553bf', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15e2dad7dc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_97575c35c20ea5db3bd97a11912553bf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:34", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u043e\u043c, \u043a\u0430\u043a \u044d\u043a\u0441\u0442\u0440\u0443\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b (XPS) \u0441\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435\u043c \u0432\u043b\u0430\u0433\u0438 \u0438 \u043a\u0430\u043a \u044d\u0442\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0435\u0433\u043e \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0446\u0438\u043a\u043b\u043e\u0432 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u0432\u043b\u0430\u0433\u0435?', '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:34", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. <b>\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b (XPS)</b>: \u041e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c\u044e \u043a \u0432\u043b\u0430\u0433\u0435, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0435\u0433\u043e \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u043c \u0432\u044b\u0431\u043e\u0440\u043e\u043c \u0434\u043b\u044f \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0441 \u0447\u0430\u0441\u0442\u044b\u043c\u0438 \u0446\u0438\u043a\u043b\u0430\u043c\u0438 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.\\n\\n2. <b>\u041f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0443\u0440\u0435\u0442\u0430\u043d (PUR/PIR)</b>: \u0418\u043c\u0435\u0435\u0442 \u043d\u0438\u0437\u043a\u0443\u044e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0438 \u0445\u043e\u0440\u043e\u0448\u0443\u044e \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u0438 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c, \u0447\u0442\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445.\\n\\n3. <b>\u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430</b>: \u041d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0442\u043e, \u0447\u0442\u043e \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u0445\u043e\u0440\u043e\u0448\u043e \u0438\u0437\u043e\u043b\u0438\u0440\u0443\u0435\u0442, \u0435\u0435 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u0432\u043b\u0430\u0433\u0435 \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f. \u0414\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043a \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044e \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044e \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u0430 \u043f\u0430\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0435\u0439 \u0438 \u0432\u043b\u0430\u0433\u043e\u0437\u0430\u0449\u0438\u0442\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u044f\u043c\u0438.\\n\\n4. <b>\u0410\u044d\u0440\u043e\u0433\u0435\u043b\u0438</b>: \u042d\u0442\u043e \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u043e\u0447\u0435\u043d\u044c \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e. \u041e\u043d\u0438 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u0443\u044e \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\u043c, \u043e\u0434\u043d\u0430\u043a\u043e \u0438\u0445 \u0432\u044b\u0441\u043e\u043a\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:34", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:34", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='982630e2-40a6-41ce-8a2a-0005e31670cd'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:34", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:34", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:35", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:53:35", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:18", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:18", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:18", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:18", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:18", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001FAF24805F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_2', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661230807555', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 53, 34, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=37, offset=97, type=<MessageEntityType.BOLD>), MessageEntity(length=24, offset=294, type=<MessageEntityType.BOLD>), MessageEntity(length=16, offset=482, type=<MessageEntityType.BOLD>), MessageEntity(length=8, offset=734, type=<MessageEntityType.BOLD>), MessageEntity(length=10, offset=941, type=<MessageEntityType.BOLD>)), from_user=User(first_name='Pdflyx', id=7836895356... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:18", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001FA97A33E00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:19", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:19", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='8fb96505-a306-4813-809b-f3d2c537586e' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:19", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='8fb96505-a306-4813-809b-f3d2c537586e'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:19", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FA97AA1310>, '\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c.'), kwargs: {'chat_history': [HumanMessage(content='\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043e\u0431\u043b\u0430\u0434\u0430\u044e\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0446\u0438\u043a\u043b\u0430\u043c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442:\\n\\n1. <b>\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b (XPS)</b>: \u041e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \u043d\u0438\u0437\u043a\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c\u044e \u043a \u0432\u043b\u0430\u0433\u0435, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0435\u0433\u043e \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u043c \u0432\u044b\u0431\u043e\u0440\u043e\u043c \u0434\u043b\u044f \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0441 \u0447\u0430\u0441\u0442\u044b\u043c\u0438 \u0446\u0438\u043a\u043b\u0430\u043c\u0438 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043e\u0442\u0442\u0430\u0438\u0432\u0430\u043d\u0438\u044f.\\n\\n2. <b>\u041f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0443\u0440\u0435\u0442\u0430\u043d (PUR/P... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A93A0>, 'json_data': {'input': [[31274, 2297, 41036, 13404, 83680, 51627, 11, 52770, 50306, 7952, 29256, 47680, 56008, 44065, 11562, 7753, 4655, 91398, 57925, 8164, 2233, 19479, 94975, 20440, 96034, 4655, 12426, 18999, 14257, 6735, 16742, 6148, 28089, 85864, 98968, 7753, 39127, 39988, 5927, 8131, 4655, 7820, 5927, 3114, 34493, 1532, 7740, 11047, 10298, 8164, 7753, 8131, 56515, 12648, 6578, 51548, 50693, 39280, 6578, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:55:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '123', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999940', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_f728dcce7433b158f2ca0888f24bb0f5', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea160c70cb59185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f728dcce7433b158f2ca0888f24bb0f5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A84A0>, 'json_data': {'input': [[31274, 2297, 41036, 13404, 83680, 51627, 11, 52770, 50306, 7952, 29256, 47680, 56008, 44065, 11562, 7753, 4655, 91398, 57925, 8164, 2233, 19479, 94975, 20440, 96034, 4655, 12426, 18999, 14257, 6735, 16742, 6148, 28089, 85864, 98968, 7753, 39127, 39988, 5927, 8131, 4655, 7820, 5927, 3114, 34493, 1532, 7740, 11047, 10298, 8164, 7753, 8131, 56515, 12648, 6578, 51548, 50693, 39280, 6578, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:55:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '33', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999940', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ca7946cceb5b4726262f8b3f0e366379', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea160cc481f9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ca7946cceb5b4726262f8b3f0e366379", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A84A0>, 'json_data': {'input': [[972, 13, 18, 59842, 2297, 1840, 56892, 38098, 79370, 15458, 12415, 2355, 972, 13, 18, 13, 16, 36479, 17766, 79370, 57186, 11, 81757, 33793, 3114, 3865, 8131, 1840, 20346, 10298, 51736, 37405, 78876, 64322, 39988, 11047, 10298, 8164, 7753, 8131, 56515, 1532, 720, 12, 1774, 11877, 19871, 7740, 23934, 15752, 13337, 6856, 61498, 44065, 23934, 720, 17165, 8164, 4329, 14476, 21708, 11562, 16331, 1482, 95570, 3114, 7753, 9706, 35111, 16742, 18868, 48355, 11, 21022, 50945, 59138, 23934, 81842, 67745, 18868, 16331, 21708, 11, 14257, 38153, 63233, 18154, 99300, 24697, 53687, 4655, 1830, 14332, 12415, 720, 9136, 31281, 18999, 14257, 7094, 17721, 39988, 5927, 64084, 4898, 85864, 6850, 1840, 59138, 25756, 17721, 7486, 67589, 28241, 10693, 25756, 23630, 37013, 17721, 20812, 5372, 12648, 64880, 18868, 76559, 60488, 50807, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:55:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '217', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998526', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_2c5415d7f75047ec768447c51975bb72', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea160d12b549185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2c5415d7f75047ec768447c51975bb72", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A84A0>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 11771, 33006, 720, 7, 10124, 32985, 12561, 13337, 28089, 12507, 9239, 20219, 44786, 59369, 15088, 8, 256, 18600, 1506, 20812, 9239, 1506, 10693, 5524, 91667, 72119, 16494, 14257, 8164, 2233, 38438, 9882, 10298, 48446, 23680, 17165, 720, 13810, 36352, 2297, 20812, 5372, 12648, 6578, 12561, 14837, 2233, 33742, 12507, 19175, 89159, 1482, 81376, 86630, 14009, 29893, 18154, 6735, 61390, 2156, 34613, 78085, 2233, 17461, 44946, 720, 1830, 10298, 8164, 7753, 8131, 56515, 12648, 64880, 97991, 6856, 40231, 64880, 11047, 49284, 7094, 18999, 18600, 1506, 20812, 9239, 1506, 5524, 18034, 38822, 2297, 30436, 21708, 7740, 10693, 5927, 58317, 56515, 14525, 3114, 1532, 13, 51418, 10298, 7058, 8164, 7753, 8131, 3865, 22911, 5927, 35387, 3865, 10693, 1506, 5927, 76401, 8... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:55:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '96', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999137', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_5440e5bd1400ec9b23de46239a645d0a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea160d69ee19185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5440e5bd1400ec9b23de46239a645d0a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A84A0>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1419, 33006, 10124, 4655, 29893, 21923, 9239, 37013, 6856, 7486, 4655, 18034, 1840, 53628, 38808, 1840, 13373, 92878, 6850, 38722, 37906, 7094, 62491, 44946, 14257, 68462, 3114, 9882, 10298, 14257, 24803, 40251, 13, 720, 20, 13, 24, 13, 20, 43896, 9136, 29471, 17618, 18600, 50436, 16494, 1506, 71121, 18999, 14257, 24803, 2156, 21708, 11, 11047, 10298, 8164, 7753, 8131, 3865, 39103, 7740, 92175, 18226, 1506, 720, 8164, 9706, 9136, 10298, 44786, 5927, 9706, 62315, 9706, 90297, 5927, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 69775, 10693, 11, 51548, 9706, 87994, 10693, 11, 13373, 720, 4898, 19619, 67589, 28241, 10693, 7740, 6735, 38438, 88596, 10693, 13, 49520, 50436, 16494, 44065, 6850, 38722, 37906,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:55:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '131', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999101', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_94cc0ae8c11d32321aae9fdfa23aa18f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea160dc1a9a9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_94cc0ae8c11d32321aae9fdfa23aa18f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FA980A84A0>, 'json_data': {'input': [[41682, 7094, 17721, 77495, 5927, 64084, 4898, 97747, 19175, 93129, 73181, 8379, 10589, 9882, 5591, 18482, 5927, 90226, 1506, 1532, 7820, 48445, 4329, 14476, 67745, 7740, 14391, 94520, 10298, 7753, 6856, 80112, 10693, 18868, 16331, 21708, 11, 21022, 50945, 59138, 720, 7094, 65489, 67745, 14257, 15752, 3114, 7753, 9706, 35111, 63233, 18868, 16331, 21708, 5524, 80595, 14332, 10298, 66386, 4655, 328, 29, 15, 11, 2131, 4, 46177, 18034, 23630, 19916, 9239, 1506, 393, 29, 15, 11, 16193, 14697, 33006, 39091, 37277, 1506, 20879, 10124, 9239, 1506, 12561, 14082, 20440, 46339, 92582, 18999, 28114, 56857, 13810, 61498, 44786, 5173, 87483, 8131, 12394, 21708, 11, 65619, 12561, 14082, 7740, 19175, 89159, 97747, 720, 44155, 1840, 62776, 11562, 37277, 21477, 2233, 32985, 17165, 14257, 52037, 18226, 11320, 5591, 28007, 8379,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:55:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '108', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998736', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_b64e38afd4542a1463e9a13a25108412', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea160e10dac9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b64e38afd4542a1463e9a13a25108412", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:55:24. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n18.3 \u0423\u0441\u0438\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439  \\n18.3.1 \u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0438\u0440\u0443\u0435\u043c\u044b\u0435 \u043f\u0440\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u043e\u0439 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0435 \\n-45\u00b0\u0421 \u0438 \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0438\u0437 \\n\u043a\u0438\u043f\u044f\u0449\u0435\u0439 \u043c\u0430\u043b\u043e\u0443\u0433\u043b\u0435\u0440\u043e\u0434\u0438\u0441\u0442\u043e\u0439 \u0441\u0442\u0430\u043b\u0438, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0437 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u0442\u0430\u043b\u0435\u0439, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043f\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u043c \u0438\u0441\u043f\u044b\u0442\u0430\u043d\u0438\u0439 \\n\u0437... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:55:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '5426', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '792154', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '588ms', 'x-request-id': 'req_775389c6e6f796f71592b8793bf76a41', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea160e70b9b2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_775389c6e6f796f71592b8793bf76a41", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:31", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.824783823081863, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:31", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:31", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c.\\n\\nLLM Response: \u0414\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b:\\n\\n1. **\u0413\u0438\u0434\u0440\u043e\u0444\u043e\u0431\u0438\u0437\u0430\u0446\u0438\u044f**: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0433\u0438\u0434\u0440\u043e\u0444\u043e\u0431\u043d\u044b\u0445 \u043f\u0440\u043e\u043f\u0438\u0442\u043e\u043a \u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u043e\u043a \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:55:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1197', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799100', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '67ms', 'x-request-id': 'req_f24ca78097fc04db457bde7d97f5a739', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea161106f702dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f24ca78097fc04db457bde7d97f5a739", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:32", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438 \u0433\u0438\u0434\u0440\u043e\u0444\u043e\u0431\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u0438 \u043a\u0430\u043a\u0438\u0435 \u0442\u0438\u043f\u044b \u0433\u0438\u0434\u0440\u043e\u0444\u043e\u0431\u043d\u044b\u0445 \u0434\u043e\u0431\u0430\u0432\u043e\u043a \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0445 \u043c\u0435\u043c\u0431\u0440\u0430\u043d \u0434\u043b\u044f \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u0432 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445?', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044e \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0445 \u0441 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u043e\u0439, \u0447\u0442\u043e\u0431\u044b \u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:32", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0414\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b:\\n\\n1. <b>\u0413\u0438\u0434\u0440\u043e\u0444\u043e\u0431\u0438\u0437\u0430\u0446\u0438\u044f</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0433\u0438\u0434\u0440\u043e\u0444\u043e\u0431\u043d\u044b\u0445 \u043f\u0440\u043e\u043f\u0438\u0442\u043e\u043a \u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u043e\u043a \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0441\u043d\u0438\u0437\u0438\u0442\u044c \u0435\u0435 \u0432\u043e\u0434\u043e\u043f\u043e\u0433\u043b\u043e\u0449\u0435\u043d\u0438\u0435 \u0438 \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u0432\u043b\u0430\u0433\u0435.\\n\\n2. <b>\u0417\u0430\u0449\u0438\u0442\u043d\u044b\u0435 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u044b</b>: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043f\u0430\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0438 \u0432\u0435\u0442\u0440\u043e\u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0445 \u043c\u0435\u043c\u0431\u0440\u0430\u043d \u0441 \u0432\u043d\u0435\u0448\u043d\u0435\u0439 \u0438 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f. \u042d\u0442\u043e \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438 \u0438 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u0435\u0442\u0440\u0430, \u0447\u0442\u043e \u0441\u043d\u0438\u0436\u0430\u0435\u0442 \u0440\u0438\u0441\u043a \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n\\n3. <b>\u041a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044f</b>: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0430\u0434\u043b\u0435\u0436\u0430\u0449\u0435\u0439 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u0438 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u0445, \u0433\u0434\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u044f \u0432\u043b\u0430\u0433\u0438 \u0438 \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0434\u043b\u044f \u0438\u0441\u043f\u0430\u0440\u0435\u043d\u0438\u044f.\\n\\n4. <b>\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043c\u043e\u043d\u0442\u0430\u0436</b>: \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0431\u0435\u0437 \u0437\u0430\u0437\u043e\u0440\u043e\u0432 \u0438 \u043c\u043e\u0441\u0442\u0438\u043a\u043e\u0432 \u0445\u043e\u043b\u043e\u0434\u0430. \u041a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438 \u0438 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f.\\n\\n5. <b>\u0418\u0441... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:32", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:32", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='8fb96505-a306-4813-809b-f3d2c537586e'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:32", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:32", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:33", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:55:33", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:08", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 19:53:10", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 19:53:10", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 19:53:10", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 19:53:18", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x00000252ED4FF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 16, 53, 17, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2607, supergroup_chat_created=False, text='/start'), update_id=881193704), <telegram.ext._callbackcontext.CallbackContext object at 0x0000025292B92E40>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000025292A03810>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:19", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:25", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:25", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:25", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:25", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:25", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x00000252ED4FF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 16, 53, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2609, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193705), <telegram.ext._callbackcontext.CallbackContext object at 0x0000025292B916A0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:25", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000025292A17640>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:26", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:26", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:28", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:28", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:28", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:28", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:28", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x00000252ED4FF530>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116660685286277', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 16, 53, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2610, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations')... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:28", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000002529184FA00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000025292B7F110>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000025292B7F110>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:53:29", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x00000252ED4FF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 16, 54, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2612, supergroup_chat_created=False, text='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'), update_id=881193707), <telegram.ext._callbackcontext.CallbackContext object at 0x0000025292B93540>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000025292B3E4D0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='855e9675-5981-4fc3-8d17-a229a52501c4' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='855e9675-5981-4fc3-8d17-a229a52501c4'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000025292B7F110>, '\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0418\u0441\u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435, \u043a\u0430\u043a\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0414\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u043a\u043e\u043b\u0435\u0431\u0430\u043d\u0438\u044f\u043c \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0440\u044b:\\n\\n1. <b>\u0413\u0438\u0434\u0440\u043e\u0444\u043e\u0431\u0438\u0437\u0430\u0446\u0438\u044f</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0433\u0438\u0434\u0440\u043e\u0444\u043e\u0431\u043d\u044b\u0445 \u043f\u0440\u043e\u043f\u0438\u0442\u043e\u043a \u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u043e\u043a \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0441\u043d\u0438\u0437\u0438\u0442\u044c \u0435\u0435 \u0432\u043e\u0434\u043e\u043f\u043e\u0433\u043b\u043e\u0449\u0435\u043d\u0438\u0435 \u0438 \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u043a \u0432\u043b\u0430\u0433\u0435.\\n\\n2. <b>\u0417\u0430\u0449\u0438\u0442\u043d\u044b\u0435 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u044b</b>: \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043f\u0430\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0438 \u0432\u0435\u0442\u0440\u043e\u0437\u0430\u0449\u0438\u0442\u043d\u044b\u0445 \u043c\u0435\u043c\u0431\u0440\u0430\u043d \u0441 \u0432\u043d\u0435\u0448\u043d\u0435\u0439 \u0438 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f. \u042d\u0442\u043e \u043f\u0440\u0435\u0434... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025292C03A60>, 'json_data': {'input': [[4898, 16248, 36497, 11047, 7975, 14476, 69775, 14257, 1830, 67124, 3114, 9542, 44100, 18868, 5372, 56449, 14525, 62731, 5927, 11562, 23630, 90877, 66144, 16742, 21923, 31443, 55523]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 16:54:02 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '104'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_8c183c5f862aace03d1e92d4e419abf9'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=kzDey5e4B45jWuWjqCJvA2vdNfIpuvYCPEXaGlNK5H4-1732899242-1.0.1.1-agV_HoTLg5C1TlQ14hphKwfqETaTWQ7qwuipn... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8c183c5f862aace03d1e92d4e419abf9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:02", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454D60>, 'json_data': {'input': [[4898, 16248, 36497, 11047, 7975, 14476, 69775, 14257, 1830, 67124, 3114, 9542, 44100, 18868, 5372, 56449, 14525, 62731, 5927, 11562, 23630, 90877, 66144, 16742, 21923, 31443, 55523]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '67', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_592443226c92c1f476c0895ff8c538ba', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41e076fe53574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_592443226c92c1f476c0895ff8c538ba", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454D60>, 'json_data': {'input': [[2297, 89327, 14332, 10298, 78876, 64322, 6856, 11047, 10298, 8164, 7753, 8131, 56515, 44786, 29619, 21708, 2355, 20807, 13, 16, 35448, 94722, 38098, 79370, 57186, 11, 63229, 35682, 39988, 20440, 78876, 64322, 1506, 49526, 74598, 51412, 5524, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 18034, 18437, 23680, 39988, 93099, 16742, 5524, 11047, 17766, 4898, 16494, 55617, 1830, 67187, 8131, 56515, 12648, 6578, 35875, 1482, 10298, 13, 720, 55258, 18437, 23680, 44858, 93099, 1506, 11562, 17766, 23311, 20346, 50819, 13373, 18868, 5372, 3865, 11122, 7094, 39280, 11, 99396, 5372, 39900, 5524, 7820, 17721, 13433, 2297, 12507, 23934, 11562, 17766, 7975, 9542, 39900, 720, 17394, 12394, 32985, 14082, 8341, 74828, 13, 35889, 17721, 56999, 44065, 18868, 79686, 72060, 7975, 40251, 70129, 21204, 23934, 7820, 78746, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '62', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999521', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_da5dbf69c3a36bcb9f668f304efc9228', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41e0b995e3574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_da5dbf69c3a36bcb9f668f304efc9228", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454D60>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 10895, 33006, 1840, 11320, 8379, 15458, 2156, 90877, 7486, 39988, 18868, 48355, 8, 11047, 7975, 14476, 19479, 16742, 220, 16, 12, 220, 16, 11, 20, 11562, 6578, 11, 98851, 59313, 2233, 67124, 14009, 70129, 7820, 19175, 2297, 43293, 21708, 720, 6148, 1506, 55523, 18868, 79686, 7952, 12182, 10124, 44100, 64880, 11, 78876, 8164, 7975, 21956, 5372, 12648, 64880, 5524, 55617, 34493, 12507, 19175, 14391, 7975, 50506, 220, 3101, 11562, 6578, 26, 720, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 44065, 5173, 3114, 9542, 4655, 14257, 52037, 18226, 11320, 94538, 70129, 5927, 8164, 3114, 13337, 77495, 81842, 7820, 81842, 3865, 13, 23784, 90226, 1506, 1532, 720, 23297, 11320, 11562, 50436, 7094, 3865, 6850, 16494, 1840, 21923, 89554, 34148, 1830, 21204, 11122, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '131', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999150', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_b9f4909cd2922211582d24f1efe596c5', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41e0f7a963574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b9f4909cd2922211582d24f1efe596c5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454D60>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 720, 966, 720, 12, 55617, 1830, 67187, 8131, 56515, 36352, 6850, 19188, 10298, 39988, 17756, 1506, 55523, 7820, 78746, 8164, 34082, 44786, 18868, 5372, 26, 720, 12, 11122, 8131, 78746, 36352, 39233, 10298, 19190, 12648, 6578, 18600, 1506, 20812, 9239, 12507, 72590, 3114, 64569, 61498, 39988, 17756, 1506, 55523, 14391, 8341, 17766, 44786, 18868, 5372, 26, 720, 12, 78876, 12426, 28089, 36352, 55617, 5591, 6856, 5173, 7486, 26503, 44786, 18868, 5372, 26, 720, 12, 5173, 14082, 12394, 36352, 81803, 7975, 90877, 26, 720, 12, 14391, 8341, 17766, 48150, 46177, 5173, 3114, 9542, 38438, 48150, 5173, 15088, 39103, 23311, 1532, 29619, 6856, 13, 720, 16604, 2156, 38521, 2233, 5372, 23446, 1532, 18868, 79686, 11047, 67124, 3114, 6856, 63233, 5173, 41056, 1830, 6... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '72', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998712', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_e8de321f57da81d24074a29b1fb6895d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41e135bad3574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e8de321f57da81d24074a29b1fb6895d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454D60>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 33006, 4331, 720, 1032, 13, 23, 23784, 11562, 37277, 1506, 10693, 5927, 49899, 1506, 11047, 20346, 10124, 29256, 24803, 9706, 6856, 11, 7740, 7094, 43293, 67745, 20879, 12561, 35111, 2233, 1482, 5372, 44786, 11047, 67124, 3114, 6856, 63233, 720, 8164, 41056, 1830, 6856, 11, 5927, 11122, 7094, 39280, 58317, 37277, 13433, 4329, 53280, 12394, 13433, 11047, 20346, 10124, 5927, 18868, 79686, 7740, 18034, 35297, 7094, 24697, 19190, 4655, 21599, 23311, 10693, 11122, 7094, 14332, 12415, 19175, 720, 7094, 29256, 44155, 13433, 50819, 13, 720, 34604, 19188, 64134, 4655, 20879, 49284, 6735, 44938, 20440, 12561, 29256, 44155, 13433, 11047, 20346, 10124, 90211, 32985, 18868, 79686, 7740, 18034, 35297, 7094, 24697, 19190, 4655, 720, 7094, 48181, 12648, 21923, 232... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '70', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998802', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_5bd770d0726286f616677d8ef62f8319', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41e169cca3574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5bd770d0726286f616677d8ef62f8319", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 19:54:05. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u043e\u0432 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439  \\n\u041d.1 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \\n  \\n\u0421\u0442\u0435\u043d\u0430 \u0441 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0444\u0430\u0441\u0430\u0434\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0441 \u0442\u043e\u043d\u043a\u0438\u043c \u0448\u0442\u0443\u043a\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u0441\u043b\u043e\u0435\u043c. \\n\u0424\u0430\u0441\u0430\u0434\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u0442\u0435\u043d\u0443 \u0437... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 16:54:10 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '4218'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792828'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '537ms'), ('x-request-id', 'req_a34df677e2038f3b5841699dbee308e6'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=_0KiPLhtzbz5B6S3CsVj8tsJAVvbpJWlyYly.sepCME-1732899250-1.0.1.1-SpuwiWMHS9f.c0wF7HCqCld_gCj6gpwGNoHcPjgjDn4MyRKe_V_XUpU8_tWXvCDwrxuHqnAa8lwNLG.gD2XApw; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a34df677e2038f3b5841699dbee308e6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:10", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8628189553289441, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:10", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:10", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438\\n\\nLLM Response: \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0438\u043f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f, \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0441\u0442\u0435\u043d\u044b \u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0435 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438. \u041e\u0434\u043d\u0430\u043a\u043e, \u0432 \u0441\u0440\u0435\u0434\u043d\u0435\u043c, \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0439, \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1006', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799485', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '38ms', 'x-request-id': 'req_ade2c4a145627b127f615843482f5119', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41e3b98fbee23-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ade2c4a145627b127f615843482f5119", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:12", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u0445 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0443\u044e \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430?', '\u041a\u0430\u043a\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:12", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0438\u043f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f, \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0441\u0442\u0435\u043d\u044b \u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0435 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438. \u041e\u0434\u043d\u0430\u043a\u043e, \u0432 \u0441\u0440\u0435\u0434\u043d\u0435\u043c, \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0439, \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438\u0437 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u0438\u043b\u0438 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b\u0430 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 100-150 \u043c\u043c.\\n\\n\u042d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f \u0431\u043e\u043b\u0435\u0435 \u044d\u043d\u0435\u0440\u0433\u043e\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0437\u0434\u0430\u043d\u0438\u0439 \u0438\u043b\u0438 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c\u044e \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0442\u043e\u043b\u0449\u0438\u043d\u044b. \u0412\u0430\u0436\u043d\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0440\u0430\u0441\u0447\u0435\u0442\u044b \u0438 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u043f\u0440\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f.\\n\\n------------------\\nReferences (/references):\\n\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf, pages: 86\\n\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf, pages: 165\\n\u0422\u0435\u043f\u043b\u043e\u0432\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u0438 \u0442\u0435\u043f\u043b\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435_\u0421\u041f 510.132... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:12", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:12", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='855e9675-5981-4fc3-8d17-a229a52501c4'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:12", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:13", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:13", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:23", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:24", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/references'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: references_command with args: (<handlers.BotHandlers object at 0x00000252ED4FF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 16, 54, 23, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2614, supergroup_chat_created=False, text='/references'), update_id=881193708), <telegram.ext._callbackcontext.CallbackContext object at 0x00000253214D6BA0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: references_command with result: <coroutine object BotHandlers.references_command at 0x0000025292A09FC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:24", "name": "handlers", "levelname": "INFO", "message": "Sent reference buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:41", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:41", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:41", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:41", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:41", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x00000252ED4FF530>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116658644286965', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 16, 54, 12, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=762, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2613, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='suggestion:suggestion_0', text='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u0445 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x0000025292B53350>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:42", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0443\u044e \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:42", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='05cd2c4e-5955-4e08-9b3b-4bdd7c26f395' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:42", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='05cd2c4e-5955-4e08-9b3b-4bdd7c26f395'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:42", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:42", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000025292B7F110>, '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0443\u044e \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430?'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0443\u044e \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0438\u043f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f, \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0441\u0442\u0435\u043d\u044b \u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0435 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438. \u041e\u0434\u043d\u0430\u043a\u043e, \u0432 \u0441\u0440\u0435\u0434\u043d\u0435\u043c, \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0439, \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0438\u0437 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0432\u0430\u0442\u044b \u0438\u043b\u0438 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b\u0430 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 100-150 \u043c\u043c.\\n\\n\u042d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000253214CBF60>, 'json_data': {'input': [[27435, 16248, 46339, 92582, 18264, 19175, 89159, 34148, 11047, 7975, 14476, 19479, 3865, 14257, 1830, 67124, 3114, 9542, 44100, 5927, 93323, 13810, 16494, 85864, 20879, 11047, 67124, 3114, 29256, 24803, 9706, 68742, 90795, 3865, 10298, 22885, 96573, 7753, 1840, 97065, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '132', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999959', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_979aa211acae88f1d275fceb54cc5e97', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41f004d1fee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_979aa211acae88f1d275fceb54cc5e97", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[27435, 16248, 46339, 92582, 18264, 19175, 89159, 34148, 11047, 7975, 14476, 19479, 3865, 14257, 1830, 67124, 3114, 9542, 44100, 5927, 93323, 13810, 16494, 85864, 20879, 11047, 67124, 3114, 29256, 24803, 9706, 68742, 90795, 3865, 10298, 22885, 96573, 7753, 1840, 97065, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '45', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999959', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_f056b9b48d7a76106550978c8f737f5c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41f03fb47ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f056b9b48d7a76106550978c8f737f5c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[3865, 25657, 6148, 2156, 18999, 45658, 1506, 11001, 118, 58060, 35111, 38822, 96573, 7753, 1840, 16331, 6856, 5524, 14257, 64322, 12507, 7740, 10693, 5524, 44075, 2156, 21708, 5927, 3114, 38657, 68742, 5927, 78876, 64322, 34613, 720, 8164, 7753, 1840, 9706, 26, 49526, 2233, 18437, 64322, 1506, 5927, 35387, 3865, 10693, 1482, 14082, 38972, 1506, 5927, 5927, 35387, 3865, 12426, 39988, 12561, 23630, 3114, 16742, 53671, 26, 49526, 8164, 70059, 17165, 67425, 8131, 38438, 68742, 51548, 34082, 35034, 1506, 14257, 40590, 67768, 16742, 23934, 5927, 35387, 3865, 12426, 39988, 12561, 23630, 3114, 16742, 17165, 5927, 3114, 34493, 1840, 5927, 720, 2233, 18437, 64322, 34613, 28114, 1840, 9706, 26, 49526, 2233, 18437, 64322, 1506, 86995, 50693, 3865, 10298, 16742, 5927, 61642, 6148, 1840, 12648, 5524, 29256, 2233, 13337, 2... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '136', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999097', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_e69531e25ad857da9ff412a97607216e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41f063f08ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e69531e25ad857da9ff412a97607216e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[56191, 33302, 78876, 64322, 44858, 11047, 7975, 14476, 69775, 84699, 60009, 11, 17756, 10298, 68088, 21923, 23297, 8164, 56857, 18264, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 37405, 82941, 9882, 10298, 61565, 198, 5591, 4655, 10124, 2233, 28241, 12415, 720, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 34613, 720, 6578, 8131, 7753, 1840, 16331, 11, 720, 41036, 13404, 73181, 720, 8164, 2233, 16494, 5372, 18264, 720, 10124, 7975, 50506, 720, 68506, 19916, 19916, 15298, 98695, 34613, 198, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 34613, 96573, 7753, 1840, 16331, 627, 54745, 16494, 5372, 17618, 38098, 79370, 15458, 12415, 5524, 84699, 12426, 21708, 11047, 7975, 14476, 19479, 16742, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39900, 35875, 61390, 86995, 50693, 73181, 11047, 98285, 23446, 6148,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '166', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998437', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_846754f3e663b44f5723ef5a97dfeb49', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41f090b6aee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_846754f3e663b44f5723ef5a97dfeb49", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[19871, 17279, 220, 1682, 13, 9423, 966, 13, 679, 16, 33006, 2618, 720, 262, 1301, 244, 13, 17, 13, 24, 13, 22, 36479, 1482, 68506, 19916, 19916, 1840, 15458, 19190, 18154, 6735, 61642, 81376, 47805, 14332, 12415, 23934, 5173, 3114, 9542, 44786, 14257, 1830, 67124, 3114, 9542, 12394, 21708, 320, 8164, 5372, 29256, 7975, 35111, 78746, 7975, 11, 720, 6578, 19479, 7753, 39127, 44858, 5927, 43203, 7740, 11047, 13, 8164, 25390, 14257, 82941, 5372, 44786, 18154, 5173, 3114, 9542, 24697, 28114, 15298, 39103, 23311, 12415, 11, 46339, 44075, 44100, 50819, 18154, 54261, 3865, 3114, 1532, 720, 340, 85, 198, 16, 1021, 17, 198, 15, 198, 15, 198, 15, 198, 83, 198, 56191, 198, 42, 274, 198, 11, 2355, 33006, 33006, 7, 140, 244, 13, 966, 8, 720, 15752, 100046, 259, 15, 1389, 21923, 14476, 36497, 11047, 7975, 14476, 69775, 358... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '48', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999680', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_4ac596baaa942fcef41e1aa0d86f1cc0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41f0cf9baee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4ac596baaa942fcef41e1aa0d86f1cc0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[54745, 16494, 56857, 39280, 198, 16, 28599, 44075, 40251, 4329, 11047, 10298, 8164, 7753, 8131, 3865, 22911, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39900, 35875, 61390, 11, 37386, 19871, 512, 86368, 10, 1272, 5738, 17, 482, 13373, 20879, 95565, 94866, 5927, 35387, 3865, 10693, 1532, 5927, 26539, 8341, 2156, 50506, 92878, 11, 5927, 76401, 86610, 84198, 11, 5927, 7820, 7486, 97065, 10693, 11, 11047, 17766, 2156, 44100, 10693, 11, 11047, 98285, 23446, 6148, 23297, 17165, 10693, 198, 8164, 9706, 8164, 17461, 4329, 10693, 11, 13373, 90211, 7094, 16248, 1506, 10693, 7740, 5927, 40842, 5591, 97065, 10693, 11122, 7094, 14332, 12415, 280, 15092, 14, 17, 482, 13373, 20879, 95565, 94866, 5927, 35387, 3865, 10693, 1532, 11, 5927, 35387, 3865, 10693, 1532, 5927, 11122, 16494, 2156, 50506, 92878, 11, 25756, 1000... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '77', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998749', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_66128f756c280647934d74aae836bf13', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41f102e9bee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_66128f756c280647934d74aae836bf13", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 19:54:45. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0443\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0438\u0445 \u0441\u0440\u0435\u0434\u043d\u0435\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u0438 \u0432 \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \\n\u043f\u0435\u0440\u0438\u043e\u0434; \\n  \\n\u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0432\u043e\u0437\u0434\u0443\u0445\u043e\u043e\u0431\u043c\u0435\u043d\u0430 \u0432 \u0432\u043e\u0437\u0434\u0443\u0448\u043d\u043e\u0439 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0435; \\n  \\n\u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0443\u0434\u0430\u043b\u044f\u0435\u043c\u043e\u0439 \u0438\u0437 \u0432\u043e\u0437\u0434\u0443\u0448\u043d\u043e\u0439 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438 \u0432\u043b\u0430... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:54:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '4488', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793180', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '511ms', 'x-request-id': 'req_3eafa7d8f0162a06afede82d7c9a9181', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea41f12f815ee2f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3eafa7d8f0162a06afede82d7c9a9181", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8798999110294422, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: 'R \\\\times \\\\lambda'", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 308, in generate_suggestions\n    ).format(n=n)\n      ^^^^^^^^^^^\nKeyError: 'R \\\\times \\\\lambda'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0414\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0444\u043e\u0440\u043c\u0443\u043b\u0430 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 (R) \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u0440\u0430\u0441\u0447\u0435\u0442\u0443:\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 (R):</b> \u042d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439. \u041e\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442, \u043a\u0430\u043a\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u0435\u043f\u043b\u0430 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0443\u0434\u0435\u0440\u0436\u0430\u043d\u043e \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0435\u0439.\\n\\n2. <b>\u0417\u043d\u0430\u0439\u0442\u0435 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f (\u03bb):</b> \u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0438\u0437\u043c\u0435\u0440\u044f\u0435\u0442\u0441\u044f \u0432 \u0412\u0442/(\u043c\u00b7\u041a) \u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e. \u0427\u0435\u043c \u043d\u0438\u0436\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u03bb, \u0442\u0435\u043c \u043b\u0443\u0447\u0448\u0435 \u0438\u0437\u043e\u043b\u0438\u0440\u0443\u044e\u0449\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430.\\n\\n3. <b>\u0412\u044b\u0447\u0438\u0441\u043b\u0438\u0442\u0435 \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f (d):</b> \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e \u0444\u043e\u0440\u043c\u0443\u043b\u0435:\\n\\n\\\\[\\nd = \\\\frac{R \\\\times \\\\lambda}{1}\\n\\\\]\\n\\n\u0417\u0434\u0435\u0441\u044c \\\\(d\\\\) \u2014 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u043c\u0435\u0442\u0440\u0430\u0445, \\\\(R\\\\) \u2014 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435, \u0430 \\... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:50", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='05cd2c4e-5955-4e08-9b3b-4bdd7c26f395'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:51", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:54:51", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:42", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x00000252ED4FF530>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_2', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116659481864451', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 16, 54, 12, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=762, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2613, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='suggestion:suggestion_0', text='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u0445 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x0000025292B510E0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='726f255d-a652-4569-98b0-f7707fbe98ec' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='726f255d-a652-4569-98b0-f7707fbe98ec'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000025292B7F110>, '\u041a\u0430\u043a\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0443\u044e \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0414\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0444\u043e\u0440\u043c\u0443\u043b\u0430 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 (R) \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u0440\u0430\u0441\u0447\u0435\u0442\u0443:\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 (R):</b> \u042d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439. \u041e\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442, \u043a\u0430... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000252EB4723E0>, 'json_data': {'input': [[27435, 16248, 50306, 5524, 86630, 34148, 1830, 18600, 25698, 1840, 74828, 29118, 44065, 30392, 1482, 56008, 44065, 6850, 32330, 4655, 20440, 14257, 1830, 67124, 62776, 18868, 5372, 5927, 45458, 23630, 90877, 66144, 16742, 21923, 31443, 55523, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:55:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '48', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999963', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_a52d431afda092750a17a78c6a713f23', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea420809a2d2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a52d431afda092750a17a78c6a713f23", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:44", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000252EB473560>, 'json_data': {'input': [[27435, 16248, 50306, 5524, 86630, 34148, 1830, 18600, 25698, 1840, 74828, 29118, 44065, 30392, 1482, 56008, 44065, 6850, 32330, 4655, 20440, 14257, 1830, 67124, 62776, 18868, 5372, 5927, 45458, 23630, 90877, 66144, 16742, 21923, 31443, 55523, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:55:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '135', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999962', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_c6675b24b68dca296f5fab6e7be64ee7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea420862d342df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c6675b24b68dca296f5fab6e7be64ee7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000252EB473560>, 'json_data': {'input': [[16, 33006, 19871, 31274, 19871, 35095, 56191, 39091, 37255, 35889, 20976, 34604, 39091, 37255, 35095, 31274, 16604, 20807, 140, 104, 140, 98, 39903, 20976, 27435, 41682, 39091, 56191, 20807, 35095, 20976, 16604, 23784, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 56191, 720, 19871, 16604, 20976, 25079, 23227, 34604, 37255, 16604, 31274, 65014, 23227, 20976, 23227, 34604, 20976, 56191, 27435, 35095, 31274, 34604, 20976, 16604, 37255, 20807, 31274, 140, 106, 2355, 31274, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 41682, 720, 17279, 34604, 20976, 56191, 27435, 35095, 31274, 34604, 20976, 16604, 37255, 20807, 31274, 56191, 43896, 28599, 35095, 34604, 20976, 31274, 35095, 56191, 65014, 140, 105, 19871, 35095, 16604, 20976, 2355,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:55:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '86', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999184', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_dd09cb93694996d303c4c3607fe18df8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4208b0fd82df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dd09cb93694996d303c4c3607fe18df8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000252EB473560>, 'json_data': {'input': [[3865, 52674, 8131, 44100, 10693, 330, 20807, 30436, 74828, 29118, 44065, 18868, 76559, 60488, 4655, 3343, 23784, 90226, 1506, 1532, 28114, 23297, 82224, 22911, 320, 9136, 24697, 79686, 8, 46177, 20879, 38972, 4655, 720, 14525, 6735, 61390, 14476, 47295, 45916, 87878, 73226, 64292, 34943, 13337, 48074, 20812, 72119, 50506, 14257, 36750, 12507, 56892, 69923, 46339, 64569, 11320, 90877, 7486, 1482, 5927, 720, 50436, 10298, 1532, 21204, 6148, 13999, 23934, 7094, 18226, 32062, 12507, 83083, 30436, 17766, 94962, 68214, 8131, 81856, 330, 20807, 30436, 74828, 29118, 44065, 18868, 76559, 60488, 4655, 3343, 720, 19871, 1482, 13337, 48074, 20812, 72119, 36497, 83083, 56860, 11, 14257, 36750, 12507, 56892, 7740, 71995, 4655, 39479, 6578, 86610, 1506, 70129, 21204, 50945, 59138, 5927, 720, 19479, 57719, 30436, 17766, 399... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:55:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '75', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998842', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_1dcb0ad8fb2a8574f5fc74a975f564bb', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea42090baf72df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1dcb0ad8fb2a8574f5fc74a975f564bb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000252EB473560>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:55:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '82', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_fc9f7bf8504287262e65ac48a28e1356', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea42093ec722df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fc9f7bf8504287262e65ac48a28e1356", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000252EB473560>, 'json_data': {'input': [[21, 33006, 19, 13, 19, 13, 17, 35889, 1506, 30392, 1482, 56008, 39988, 5173, 39865, 14476, 23680, 53671, 56449, 13999, 62731, 57925, 44155, 98397, 73281, 11562, 37277, 1482, 20440, 720, 66144, 80230, 59921, 39280, 21477, 2297, 3865, 12426, 5372, 44786, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 6856, 5524, 21923, 23297, 8164, 56857, 9882, 10298, 44946, 14476, 9542, 4655, 7740, 10693, 20879, 14257, 5591, 3114, 38657, 2156, 18999, 720, 5591, 41291, 10589, 94520, 1532, 45658, 35682, 18999, 13, 720, 19, 13, 20, 80798, 23297, 8164, 56857, 17618, 7740, 78085, 2233, 17461, 7820, 50223, 35034, 1506, 5927, 41291, 10589, 94520, 1532, 30392, 1482, 56008, 94071, 720, 19, 13, 20, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 41291, 41873, 49899, 20812, 5372, 12648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:55:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '96', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998581', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_7158c6b6a8af577789d66638fdfbb15f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4209a983b2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7158c6b6a8af577789d66638fdfbb15f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 19:55:49. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n1 \\n \\n\u0421\u0418\u0421\u0422\u0415\u041c\u0410 \u041d\u041e\u0420\u041c\u0410\u0422\u0418\u0412\u041d\u042b\u0425 \u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u041e\u0412 \u0412 \u0421\u0422\u0420\u041e\u0418\u0422\u0415\u041b\u042c\u0421\u0422\u0412\u0415 \\n\u0421\u0412\u041e\u0414 \u041f\u0420\u0410\u0412\u0418\u041b \u041f\u041e \u041f\u0420\u041e\u0415\u041a\u0422\u0418\u0420\u041e\u0412\u0410\u041d\u0418\u042e  \\n\u0418 \u0421\u0422\u0420\u041e\u0418\u0422\u0415\u041b\u042c\u0421\u0422\u0412\u0423 \\n\u041f\u0420\u041e\u0415\u041a\u0422\u0418\u0420\u041e\u0412\u0410\u041d\u0418\u0415 \u0418 \u0421\u0422\u0420\u041e\u0418\u0422\u0415\u041b\u042c\u0421\u0422\u0412\u041e  \\n\u042d\u041d\u0415\u0420\u0413\u041e\u042d\u0424\u0424\u0415\u041a\u0422\u0418\u0412\u041d\u042b\u0425 \u0414\u041d\u041e\u041a\u0412\u0410\u0420\u0422\u0418\u0420\u041d\u042b\u0425 \u0416\u0418\u041b\u042b\u0425 \u0414\u041e\u041c\u041e\u0412  \\n\u0421 \u0414\u0415\u0420\u0415\u0412\u042f\u041d\u041d\u042b\u041c \u041a\u0410\u0420\u041a\u0410\u0421\u041e\u041c \\n\u0421\u041f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:55:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '4156', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '792400', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '570ms', 'x-request-id': 'req_0ca31199c6eda7e66cd99f9fc54fcc81', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea420a0be372dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0ca31199c6eda7e66cd99f9fc54fcc81", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:53", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8547063873948725, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:53", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:53", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as \\'learn more about ...\\', \\'how to determine ...\\', \\'how to calculate ...\\', etc., that the user can use to gather more information. If no additional prompts are needed, respond with \\'No suggestions needed\\'.\\n\\nUser Prompt: \u041a\u0430\u043a\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?\\n\\nLLM Response: \u0412 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438, \u043a\u0430\u043a \u0438 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0420\u043e\u0441\u0441\u0438\u0438, \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u043e\u0431\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0433\u0438\u043e\u043d\u0430. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044e \u0441\u0442\u0435\u043d \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c\u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c\u0438:\\n\\n1. **\u0421\u0432\u043e\u0434 \u043f\u0440\u0430\u0432\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:55:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1517', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799155', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '63ms', 'x-request-id': 'req_e309e7a4699337cccf8c4093f9fb335c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea420bec83d2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e309e7a4699337cccf8c4093f9fb335c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:55", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u043c\u0435\u0442\u043e\u0434\u0438\u043a\u0430\u0445 \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441\u043e \u0421\u041f 50.13330.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043b\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?', '\u041a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:55", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0412 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438, \u043a\u0430\u043a \u0438 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0420\u043e\u0441\u0441\u0438\u0438, \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u043e\u0431\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0433\u0438\u043e\u043d\u0430. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044e \u0441\u0442\u0435\u043d \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c\u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c\u0438:\\n\\n1. <b>\u0421\u0432\u043e\u0434 \u043f\u0440\u0430\u0432\u0438\u043b \u0421\u041f 50.13330 \"\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f \u0437\u0430\u0449\u0438\u0442\u0430 \u0437\u0434\u0430\u043d\u0438\u0439\"</b>: \u042d\u0442\u043e\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0439 \u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u043d\u043e\u0433\u043e \u043c\u0438\u043a\u0440\u043e\u043a\u043b\u0438\u043c\u0430\u0442\u0430 \u0438 \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044f. \u041e\u043d \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043c\u0435\u0442\u043e\u0434\u0438\u043a\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 \u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 \u0441\u0442\u0435\u043d.\\n\\n2. <b>\u0421\u041d\u0438\u041f 23-02 \"\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f \u0437\u0430\u0449\u0438\u0442\u0430 \u0437\u0434\u0430\u043d\u0438\u0439\"</b>: \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0430\u0441\u0442\u044c\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0433\u043b\u0430\u043c\u0435\u043d\u0442\u0438\u0440\u0443\u044e\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0439 \u0438 \u0441\u043e\u043e\u0440\u0443\u0436\u0435\u043d\u0438\u0439.\\n\\n3. <b>\u0420\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b</b>: \u041f\u0440\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u0440\u0435\u0434\u043d\u0438\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u0437\u0438\u043c\u043d\u0435\u0433\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430, \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u043e\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u043d\u0435\u0439 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0441... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:55", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:55", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='726f255d-a652-4569-98b0-f7707fbe98ec'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:55", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:56", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:55:56", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:35", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:35", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:35", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:35", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:35", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x00000252ED4FF530>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_2', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116660471414823', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 16, 55, 55, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=48, offset=265, type=<MessageEntityType.BOLD>), MessageEntity(length=35, offset=577, type=<MessageEntityType.BOLD>), MessageEntity(length=36, offset=752, type=<MessageEntityType.BOLD>), MessageEntity(length=11, offset=1445, type=<MessageEntityType.BOT_COMMAND>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:35", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x0000025292B50FB0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:35", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:35", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='a7dc515c-dddb-40e6-a61f-a641107e3e66' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:36", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='a7dc515c-dddb-40e6-a61f-a641107e3e66'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:36", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:36", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000025292B7F110>, '\u041a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0412 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438, \u043a\u0430\u043a \u0438 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0420\u043e\u0441\u0441\u0438\u0438, \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u043e\u0431\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0435\u0433\u0438\u043e\u043d\u0430. \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044e \u0441\u0442\u0435\u043d \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c\u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c\u0438:\\n\\n1. <b>\u0421\u0432\u043e\u0434 \u043f\u0440\u0430\u0432\u0438\u043b \u0421\u041f 50.13330 \"\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f \u0437\u0430\u0449\u0438\u0442\u0430 \u0437\u0434\u0430\u043d\u0438\u0439\"</b>: \u042d\u0442\u043e\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0442\u0435\u043f\u043b... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025321A72AC0>, 'json_data': {'input': [[27435, 16248, 50306, 96573, 7753, 1840, 16331, 4655, 7740, 38098, 79370, 98695, 44065, 18600, 47067, 18999, 13373, 1840, 10124, 7975, 50506, 21599, 19916, 19916, 15298, 98695, 12648, 20440, 14257, 1830, 67124, 62776, 18868, 5372, 5927, 90189, 6578, 8131, 81301, 17165, 10693, 97991, 6856, 40231, 10693, 45458, 23630, 90877, 66144, 16742, 21923, 31443, 55523, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:36", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:56:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '41', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999946', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_a3ab4fbb3efab72a5f88ce32b021168d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea421c63b502dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a3ab4fbb3efab72a5f88ce32b021168d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:37", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[27435, 16248, 50306, 96573, 7753, 1840, 16331, 4655, 7740, 38098, 79370, 98695, 44065, 18600, 47067, 18999, 13373, 1840, 10124, 7975, 50506, 21599, 19916, 19916, 15298, 98695, 12648, 20440, 14257, 1830, 67124, 62776, 18868, 5372, 5927, 90189, 6578, 8131, 81301, 17165, 10693, 97991, 6856, 40231, 10693, 45458, 23630, 90877, 66144, 16742, 21923, 31443, 55523, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:56:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '50', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999946', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_5c5bfa45553e92ad71ebd7346a16f1cc', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea421cd7d802dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5c5bfa45553e92ad71ebd7346a16f1cc", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 33006, 16955, 33006, 17165, 2233, 8164, 34082, 7740, 7820, 24697, 23446, 14257, 5591, 3114, 38657, 40251, 29893, 11, 21022, 96573, 7753, 1840, 16331, 4655, 5524, 5927, 9706, 29256, 14837, 39865, 14476, 9882, 10298, 14391, 7975, 50506, 220, 868, 4, 2001, 14257, 5591, 7058, 3114, 38657, 40251, 29893, 5524, 98968, 38521, 39988, 21477, 7094, 58669, 4898, 16742, 26, 720, 12, 37405, 28114, 7753, 35667, 1506, 10693, 5927, 54204, 1532, 13373, 64362, 10693, 23446, 12415, 18600, 98073, 48446, 23680, 17165, 19175, 93129, 73181, 14257, 4898, 80230, 35667, 18482, 78876, 7058, 1830, 5591, 9239, 13, 23227, 23630, 3114, 1532, 28114, 7753, 35667, 1506, 48446, 23680, 36352, 19175, 89159, 1482, 14257, 5591, 3114, 38657, 40251, 29893, 13, 720, 41682, 31101, 44946, 99396, 5372... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:56:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '41', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999827', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_9f1ad8702b4a681d8bd4944e297cbe38', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea421d33fc22dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9f1ad8702b4a681d8bd4944e297cbe38", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[2970, 33006, 5591, 2297, 47295, 7820, 13373, 20346, 17394, 2156, 72952, 5927, 35387, 3865, 10693, 3865, 13, 51418, 67124, 39865, 41873, 96485, 15458, 17766, 44065, 5173, 3114, 9542, 4655, 46177, 96573, 4655, 5524, 6850, 16248, 3114, 1532, 5372, 12648, 6578, 35875, 1482, 10298, 720, 19916, 17461, 15752, 1840, 46177, 29619, 1840, 68506, 23311, 61498, 6856, 16742, 5173, 61498, 17165, 11562, 14837, 38521, 72060, 7975, 40251, 29893, 50945, 59138, 55813, 1840, 18154, 13373, 20346, 17394, 39988, 720, 9136, 1506, 14476, 27055, 18868, 79686, 20879, 5927, 35387, 3865, 10693, 29256, 2233, 17766, 1840, 10589, 39280, 320, 2297, 6578, 13, 220, 24, 13, 18, 13, 17, 570, 720, 24, 13, 17, 13, 17, 13, 18, 59842, 1830, 67124, 56892, 14257, 6148, 84350, 90877, 13373, 20346, 17394, 39988, 18868, 79686, 5927, 11562, 37277, 1506, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:56:39 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '165', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999006', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_f938c96555ecf54c35bb3998443ad79a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea421d8993d2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f938c96555ecf54c35bb3998443ad79a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[2297, 89327, 14332, 10298, 78876, 64322, 6856, 11047, 10298, 8164, 7753, 8131, 56515, 44786, 29619, 21708, 2355, 20807, 13, 16, 35448, 94722, 38098, 79370, 57186, 11, 63229, 35682, 39988, 20440, 78876, 64322, 1506, 49526, 74598, 51412, 5524, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 18034, 18437, 23680, 39988, 93099, 16742, 5524, 11047, 17766, 4898, 16494, 55617, 1830, 67187, 8131, 56515, 12648, 6578, 35875, 1482, 10298, 13, 720, 55258, 18437, 23680, 44858, 93099, 1506, 11562, 17766, 23311, 20346, 50819, 13373, 18868, 5372, 3865, 11122, 7094, 39280, 11, 99396, 5372, 39900, 5524, 7820, 17721, 13433, 2297, 12507, 23934, 11562, 17766, 7975, 9542, 39900, 720, 17394, 12394, 32985, 14082, 8341, 74828, 13, 35889, 17721, 56999, 44065, 18868, 79686, 72060, 7975, 40251, 70129, 21204, 23934, 7820, 78746, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:56:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '62', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999521', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_28dbb2dd20c76a6aa2b8b2112d591f2d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea421ddaa7e2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_28dbb2dd20c76a6aa2b8b2112d591f2d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000025291454CC0>, 'json_data': {'input': [[27435, 11320, 6578, 8131, 81301, 17165, 1532, 67445, 39103, 25190, 117, 74828, 30392, 1482, 56008, 94071, 12561, 19479, 16494, 1506, 70129, 21204, 18154, 28599, 17279, 220, 9263, 13, 9423, 966, 20440, 720, 15752, 13, 25079, 6578, 9542, 24803, 45458, 23630, 90877, 66144, 16742, 21923, 3114, 13, 49526, 19871, 44075, 40251, 4329, 11047, 10298, 8164, 7753, 8131, 3865, 22911, 20879, 29256, 56008, 39900, 28114, 1840, 87878, 720, 12, 18, 11, 16, 37386, 19871, 26, 49526, 8164, 2233, 9706, 48181, 56008, 61379, 20879, 29256, 56008, 39900, 28114, 1840, 87878, 720, 12463, 5524, 38521, 26, 49526, 1830, 10298, 8164, 7753, 8131, 3865, 22911, 5927, 2156, 38521, 2233, 5372, 2156, 47295, 5927, 35387, 3865, 10693, 1506, 720, 508, 37386, 34, 13, 49526, 85587, 81376, 47805, 1532, 90189, 6578, 8131, 81301, 17165, 10693, 45658, 15... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:56:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '56', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999256', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_51640fc07795427727a5615b433ea9f4', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea421e32c7c2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_51640fc07795427727a5615b433ea9f4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 19:56:41. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 70.13330.2012 \\n \\n269 \\n \\n\u043a\u0438\u0440\u043f\u0438\u0447 \u0438 \u043a\u0430\u043c\u043d\u0438 \u0443\u0432\u043b\u0430\u0436\u043d\u044f\u0442\u044c, \u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441 \u0432\u043e\u0434\u043e\u043f\u043e\u0433\u043b\u043e\u0449\u0435\u043d\u0438\u0435\u043c \u0431\u043e\u043b\u0435\u0435 15% \u2014 \u0443\u0432-\\n\u043b\u0430\u0436\u043d\u044f\u0442\u044c \u0441 \u043c\u0438\u043d\u0443\u0442\u043d\u043e\u0439 \u0432\u044b\u0434\u0435\u0440\u0436\u043a\u043e\u0439; \\n- \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0440\u044b\u0432\u0430\u0445 \u0432 \u0440\u0430\u0431\u043e\u0442\u0435 \u043d\u0430 \u0432\u0435\u0440\u0445\u043d\u0438\u0439 \u0440\u044f\u0434 \u043a\u043b\u0430\u0434\u043a\u0438 \u043d\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c \u0440\u0430\u0441-\\n\u0442\u0432\u043e\u0440.... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:56:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '7254', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794725', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '395ms', 'x-request-id': 'req_3dd4f90608fe7d16d020376195d3bb7d', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea421e868862df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3dd4f90608fe7d16d020376195d3bb7d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:49", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8622754173066622, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:49", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:49", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?\\n\\nLLM Response: \u0414\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f:\\n\\n1. **\u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430**: \u041e\u043d\u0430 \u043e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \u0445\u043e\u0440\u043e\u0448\u0438\u043c\u0438 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u043c\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c\u044e \u043a \u043e\u0433\u043d\u044e. \u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u043c\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 16:56:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1011', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799054', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '70ms', 'x-request-id': 'req_ab85388b7b047d9d3212c8081e8125ca', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4221cced52df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ab85388b7b047d9d3212c8081e8125ca", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430\u0445 \u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043a\u0430\u0445 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0438\u0437 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u043e\u0439 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0437\u0434\u0430\u043d\u0438\u044f \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0435\u0433\u043e \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0438 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f?', '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0443\u044e \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0414\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f:\\n\\n1. <b>\u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430</b>: \u041e\u043d\u0430 \u043e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \u0445\u043e\u0440\u043e\u0448\u0438\u043c\u0438 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u043c\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c\u044e \u043a \u043e\u0433\u043d\u044e. \u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u043a\u0430\u043a \u0432 \u0432\u0438\u0434\u0435 \u043f\u043b\u0438\u0442, \u0442\u0430\u043a \u0438 \u0440\u0443\u043b\u043e\u043d\u043e\u0432. \u0415\u0435 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u0432 \u043d\u0430\u0432\u0435\u0441\u043d\u044b\u0445 \u0432\u0435\u043d\u0442\u0438\u043b\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u0444\u0430\u0441\u0430\u0434\u0430\u0445, \u0433\u0434\u0435 \u043e\u043d\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u0430 \u043e\u0442 \u0432\u043d\u0435\u0448\u043d\u0435\u0439 \u0432\u043b\u0430\u0433\u0438.\\n\\n2. <b>\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b (XPS)</b>: \u042d\u0442\u043e\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0438\u043c\u0435\u0435\u0442 \u043d\u0438\u0437\u043a\u0443\u044e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0438 \u0432\u044b\u0441\u043e\u043a\u0443\u044e \u0432\u043b\u0430\u0433\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0435\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u043c \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u0438. XPS \u0447\u0430\u0441\u0442\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u0445 \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u043d\u0430\u0440\u0443\u0436\u0438, \u0433\u0434\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b \u043e\u0442 \u0443\u043b\u044c\u0442\u0440\u0430\u0444\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u043e\u0433\u043e \u0438\u0437\u043b\u0443\u0447\u0435\u043d\u0438\u044f.\\n\\n3. <b>\u041f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0443\u0440\u0435\u0442\u0430\u043d</b>: \u041e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u043c\u0438 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u043c\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u044c\u0441\u044f \u043c\u0435\u0442\u043e\u0434\u043e\u043c \u043d\u0430\u043f\u044b\u043b\u0435\u043d\u0438\u044f, \u0447\u0442\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0433\u0435\u0440\u043c\u0435\u0442\u0438\u0447\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435 \u0431\u0435\u0437 \u0448\u0432\u043e\u0432. \u041e\u043d \u0442\u0430\u043a\u0436\u0435 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432 \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u0430\u043a \u0432\u043d\u0443\u0442\u0440\u0438, \u0442\u0430\u043a \u0438 \u0441\u043d\u0430\u0440\u0443\u0436\u0438 \u0437\u0434\u0430\u043d... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='a7dc515c-dddb-40e6-a61f-a641107e3e66'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 19:56:51", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:29", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 20:26:30", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 20:26:30", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 20:26:30", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 20:26:43", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 26, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2619, supergroup_chat_created=False, text='/start'), update_id=881193712), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F5D4271010>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x000001F5D40E3810>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:44", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:45", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:45", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:53", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:53", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:53", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:53", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:53", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 26, 52, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2621, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193713), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F5D4272200>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:53", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001F5D40FFAC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:54", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:26:54", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:12", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:12", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:12", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:13", "name": "decorators", "levelname": "WARNING", "message": "Documents not indexed for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:15", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:15", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:15", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:15", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:15", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 27, 14, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2625, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193715), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F5D4273B60>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:15", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001F5D40FFAC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:15", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:15", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116661357482466', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 27, 15, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2626, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations')... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001F5D2F2FA00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001F5D41ECEF0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001F5D41ECEF0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:21", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:21", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:21", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:21", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:21", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 27, 20, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2628, supergroup_chat_created=False, text='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'), update_id=881193717), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F5D4273B60>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:21", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001F5D421D120>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:21", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='53201aab-5075-4b74-b6fc-9d2a9ffd1f81' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:21", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='53201aab-5075-4b74-b6fc-9d2a9ffd1f81'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:22", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:22", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001F5D41ECEF0>, '\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0414\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d \u0432 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f:\\n\\n1. <b>\u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430</b>: \u041e\u043d\u0430 \u043e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \u0445\u043e\u0440\u043e\u0448\u0438\u043c\u0438 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u043c\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c\u044e \u043a \u043e\u0433\u043d\u044e. \u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u043a\u0430\u043a \u0432 \u0432\u0438\u0434\u0435 \u043f\u043b\u0438\u0442, \u0442\u0430\u043a \u0438 \u0440\u0443\u043b\u043e\u043d\u043e\u0432. \u0415\u0435 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u0432 \u043d\u0430\u0432\u0435\u0441\u043d\u044b\u0445 \u0432\u0435\u043d\u0442\u0438\u043b\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u0444\u0430\u0441\u0430\u0434\u0430\u0445, \u0433\u0434\u0435 \u043e\u043d\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u0430 \u043e\u0442 \u0432\u043d\u0435\u0448\u043d\u0435\u0439 \u0432\u043b\u0430\u0433\u0438.\\n\\n2. <b>\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b (XPS)</b>: \u042d\u0442\u043e\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D43253A0>, 'json_data': {'input': [[4898, 16248, 36497, 11047, 7975, 14476, 69775, 14257, 1830, 67124, 3114, 9542, 44100, 18868, 5372, 56449, 14525, 62731, 5927, 11562, 23630, 90877, 66144, 16742, 21923, 31443, 55523]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 17:27:22 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '130'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_5fa80eef2eb45bff74f9aa9738f3e7b9'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=ug2WHunHxKMeFoDYCHVSdIcmANjF0g9AzLNJaf9CF4w-1732901242-1.0.1.1-y4tBVU3MBt4_Wx0imTHBY2njEowcCwErpO1U5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5fa80eef2eb45bff74f9aa9738f3e7b9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24D60>, 'json_data': {'input': [[4898, 16248, 36497, 11047, 7975, 14476, 69775, 14257, 1830, 67124, 3114, 9542, 44100, 18868, 5372, 56449, 14525, 62731, 5927, 11562, 23630, 90877, 66144, 16742, 21923, 31443, 55523]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:27:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_1102885cdbf156fa61b0381ccc1eeace', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44edd8d47ee38-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1102885cdbf156fa61b0381ccc1eeace", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24D60>, 'json_data': {'input': [[2297, 89327, 14332, 10298, 78876, 64322, 6856, 11047, 10298, 8164, 7753, 8131, 56515, 44786, 29619, 21708, 2355, 20807, 13, 16, 35448, 94722, 38098, 79370, 57186, 11, 63229, 35682, 39988, 20440, 78876, 64322, 1506, 49526, 74598, 51412, 5524, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 18034, 18437, 23680, 39988, 93099, 16742, 5524, 11047, 17766, 4898, 16494, 55617, 1830, 67187, 8131, 56515, 12648, 6578, 35875, 1482, 10298, 13, 720, 55258, 18437, 23680, 44858, 93099, 1506, 11562, 17766, 23311, 20346, 50819, 13373, 18868, 5372, 3865, 11122, 7094, 39280, 11, 99396, 5372, 39900, 5524, 7820, 17721, 13433, 2297, 12507, 23934, 11562, 17766, 7975, 9542, 39900, 720, 17394, 12394, 32985, 14082, 8341, 74828, 13, 35889, 17721, 56999, 44065, 18868, 79686, 72060, 7975, 40251, 70129, 21204, 23934, 7820, 78746, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:27:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '142', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999521', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_9d45d62e6143b0f391432cf88d5fbffa', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44ee38c20ee38-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9d45d62e6143b0f391432cf88d5fbffa", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24D60>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 10895, 33006, 1840, 11320, 8379, 15458, 2156, 90877, 7486, 39988, 18868, 48355, 8, 11047, 7975, 14476, 19479, 16742, 220, 16, 12, 220, 16, 11, 20, 11562, 6578, 11, 98851, 59313, 2233, 67124, 14009, 70129, 7820, 19175, 2297, 43293, 21708, 720, 6148, 1506, 55523, 18868, 79686, 7952, 12182, 10124, 44100, 64880, 11, 78876, 8164, 7975, 21956, 5372, 12648, 64880, 5524, 55617, 34493, 12507, 19175, 14391, 7975, 50506, 220, 3101, 11562, 6578, 26, 720, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 44065, 5173, 3114, 9542, 4655, 14257, 52037, 18226, 11320, 94538, 70129, 5927, 8164, 3114, 13337, 77495, 81842, 7820, 81842, 3865, 13, 23784, 90226, 1506, 1532, 720, 23297, 11320, 11562, 50436, 7094, 3865, 6850, 16494, 1840, 21923, 89554, 34148, 1830, 21204, 11122, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:27:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '84', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999150', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_9013ba2ea033996caaf1f018513cf49f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44ee728b1ee38-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9013ba2ea033996caaf1f018513cf49f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24D60>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 720, 966, 720, 12, 55617, 1830, 67187, 8131, 56515, 36352, 6850, 19188, 10298, 39988, 17756, 1506, 55523, 7820, 78746, 8164, 34082, 44786, 18868, 5372, 26, 720, 12, 11122, 8131, 78746, 36352, 39233, 10298, 19190, 12648, 6578, 18600, 1506, 20812, 9239, 12507, 72590, 3114, 64569, 61498, 39988, 17756, 1506, 55523, 14391, 8341, 17766, 44786, 18868, 5372, 26, 720, 12, 78876, 12426, 28089, 36352, 55617, 5591, 6856, 5173, 7486, 26503, 44786, 18868, 5372, 26, 720, 12, 5173, 14082, 12394, 36352, 81803, 7975, 90877, 26, 720, 12, 14391, 8341, 17766, 48150, 46177, 5173, 3114, 9542, 38438, 48150, 5173, 15088, 39103, 23311, 1532, 29619, 6856, 13, 720, 16604, 2156, 38521, 2233, 5372, 23446, 1532, 18868, 79686, 11047, 67124, 3114, 6856, 63233, 5173, 41056, 1830, 6... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:27:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '125', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998712', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_67703b8e31de402c2cf45b0ca59e9719', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44eeaed4cee38-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_67703b8e31de402c2cf45b0ca59e9719", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24D60>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 33006, 4331, 720, 1032, 13, 23, 23784, 11562, 37277, 1506, 10693, 5927, 49899, 1506, 11047, 20346, 10124, 29256, 24803, 9706, 6856, 11, 7740, 7094, 43293, 67745, 20879, 12561, 35111, 2233, 1482, 5372, 44786, 11047, 67124, 3114, 6856, 63233, 720, 8164, 41056, 1830, 6856, 11, 5927, 11122, 7094, 39280, 58317, 37277, 13433, 4329, 53280, 12394, 13433, 11047, 20346, 10124, 5927, 18868, 79686, 7740, 18034, 35297, 7094, 24697, 19190, 4655, 21599, 23311, 10693, 11122, 7094, 14332, 12415, 19175, 720, 7094, 29256, 44155, 13433, 50819, 13, 720, 34604, 19188, 64134, 4655, 20879, 49284, 6735, 44938, 20440, 12561, 29256, 44155, 13433, 11047, 20346, 10124, 90211, 32985, 18868, 79686, 7740, 18034, 35297, 7094, 24697, 19190, 4655, 720, 7094, 48181, 12648, 21923, 232... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:27:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '80', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998802', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_64567d3ced578e5a7ee20f3c946ae1e2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44eeeaa8cee38-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_64567d3ced578e5a7ee20f3c946ae1e2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 20:27:26. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u043e\u0432 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439  \\n\u041d.1 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \\n  \\n\u0421\u0442\u0435\u043d\u0430 \u0441 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0444\u0430\u0441\u0430\u0434\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0441 \u0442\u043e\u043d\u043a\u0438\u043c \u0448\u0442\u0443\u043a\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u0441\u043b\u043e\u0435\u043c. \\n\u0424\u0430\u0441\u0430\u0434\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u0442\u0435\u043d\u0443 \u0437... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 17:27:30 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '3973'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793415'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '493ms'), ('x-request-id', 'req_e3d26bcf84986de75a2cecfe6ab77852'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=To6zOhEEQBqNut2FjwYso2ThaMIDZ38q58fnksETk6k-1732901250-1.0.1.1-kyDDg1VhTyN73EYKoI2ZFgP3DIJ9ZjFcJMT6sOjSFr7FoxHDX1zSeLAsRpy90ltGLqRYguTpC_H.5LNA9q1wng; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e3d26bcf84986de75a2cecfe6ab77852", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:30", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8628189553289441, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:30", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:30", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438\\n\\nLLM Response: \u0412 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0439 \u043e\u0431\u044b\u0447\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044c \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0441 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e 100-150 \u043c\u043c. \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0432\u0438\u0441\u0435\u0442\u044c \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f, \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:27:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1672', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799595', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '30ms', 'x-request-id': 'req_7ba29a84d92dd9bb7f1fb76f1c849897', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44f101a0eb5cc-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7ba29a84d92dd9bb7f1fb76f1c849897", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u0435: \u043a\u0430\u043a \u043e\u043d \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0438 \u043a\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u0435\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f?', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u0435\u0439 \u0438 \u043a\u0430\u043a \u044d\u0442\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f?', '\u041a\u0430\u043a\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u044b \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044f \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0438 \u043a\u0430\u043a \u043e\u043d\u0438 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0441\u0442\u0435\u043d?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0412 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0439 \u043e\u0431\u044b\u0447\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044c \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0441 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e 100-150 \u043c\u043c. \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0432\u0438\u0441\u0435\u0442\u044c \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f, \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0433\u043e \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435. \u042d\u0442\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u044b \u0432 \u0445\u043e\u0434\u0435 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u044b \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044f.\\n\\n------------------\\nReferences (/references):\\n\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf, pages: 86\\n\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf, pages: 165\\n\u0422\u0435\u043f\u043b\u043e\u0432\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u0438 \u0442\u0435\u043f\u043b\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435_\u0421\u041f 510.1325800.2022.pdf, pages: 34, 57\\n', {'\u0422\u0435\u043f\u043b\u043e\u0432\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u0438 \u0442\u0435\u043f\u043b\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435_\u0421\u041f 510.1325800.2022.pdf', '\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf', '\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf'}, ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='53201aab-5075-4b74-b6fc-9d2a9ffd1f81'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:33", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:45", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:45", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:45", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:45", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/references'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: references_command with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 27, 44, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2630, supergroup_chat_created=False, text='/references'), update_id=881193718), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F5D42737E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: references_command with result: <coroutine object BotHandlers.references_command at 0x000001F5D40E9FC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:45", "name": "handlers", "levelname": "INFO", "message": "No references available for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:46", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:57", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:57", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:58", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:58", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:58", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_0', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116659256130014', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 27, 33, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=527, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2629, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='suggestion:suggestion_0', text='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u0435: \u043a\u0430\u043a \u043e\u043d \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0438 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:58", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001F5D4231DF0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:58", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u0435: \u043a\u0430\u043a \u043e\u043d \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0438 \u043a\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u0435\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:58", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='e034db54-1467-47cf-99d5-6df71d7321a7' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:58", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='e034db54-1467-47cf-99d5-6df71d7321a7'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:59", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:59", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001F5D41ECEF0>, '\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u0435: \u043a\u0430\u043a \u043e\u043d \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0438 \u043a\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u0435\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f?'), kwargs: {'chat_history': [HumanMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u0435: \u043a\u0430\u043a \u043e\u043d \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0438 \u043a\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u0435\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0412 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0437\u0434\u0430\u043d\u0438\u0439 \u043e\u0431\u044b\u0447\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044c \u0434\u043b\u044f \u0441\u0442\u0435\u043d \u0441 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e 100-150 \u043c\u043c. \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u0432\u0438\u0441\u0435\u0442\u044c \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f, \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0433\u043e \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435. \u042d\u0442\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u044b \u0432 \u0445\u043e\u0434\u0435 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443\u0447\u0438\u0442\u044b\u0432\u0430... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:59", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D42F3BA0>, 'json_data': {'input': [[41682, 9136, 2156, 19039, 51627, 84699, 60009, 8379, 11047, 67124, 3114, 13337, 98285, 23446, 6148, 23297, 4898, 12507, 78876, 64322, 1532, 25, 52770, 99845, 62315, 9706, 97334, 7740, 52770, 50306, 67181, 19175, 89159, 4655, 20440, 73385, 99396, 18999, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:27:59", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:27:59 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '48', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999960', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_fed41a3fb06d63ff6cd5633237625555', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44fbeaa1c2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fed41a3fb06d63ff6cd5633237625555", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:00", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24B80>, 'json_data': {'input': [[41682, 9136, 2156, 19039, 51627, 84699, 60009, 8379, 11047, 67124, 3114, 13337, 98285, 23446, 6148, 23297, 4898, 12507, 78876, 64322, 1532, 25, 52770, 99845, 62315, 9706, 97334, 7740, 52770, 50306, 67181, 19175, 89159, 4655, 20440, 73385, 99396, 18999, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:28:00 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '110', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999960', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_f550738f12ca3d09697ff63c538b9bc6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44fc5fde02df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f550738f12ca3d09697ff63c538b9bc6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24B80>, 'json_data': {'input': [[19, 28599, 10693, 10298, 3865, 46177, 90211, 1830, 50436, 11, 5173, 49855, 96485, 90457, 50306, 5173, 17766, 94975, 92175, 18226, 7740, 14257, 77911, 20812, 1482, 46088, 1506, 13, 49526, 20, 51418, 10298, 8164, 7753, 8131, 56515, 48150, 29619, 1532, 14257, 9136, 31443, 80595, 1506, 14476, 47295, 46088, 13, 49526, 21, 80584, 19479, 90297, 51736, 5927, 78876, 64322, 1532, 11047, 10298, 8164, 7753, 8131, 56515, 39900, 89302, 11047, 10298, 8164, 7753, 8131, 3865, 39103, 13373, 20346, 17394, 39900, 7740, 5927, 2156, 38521, 2233, 5372, 2156, 47295, 720, 5591, 35387, 3865, 10693, 1506, 11, 21022, 50945, 59138, 25756, 1532, 12507, 8341, 31203, 6148, 23297, 17165, 1532, 100147, 4655, 14257, 9136, 31443, 38098, 79370, 57186, 11, 5927, 52520, 5372, 39900, 5927, 78876, 64322, 77495, 720, 14082, 31443, 35592, 13, 49526, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:28:01 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '138', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999368', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '7ms', 'x-request-id': 'req_3b10e4a771583b781683399becf3ce19', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44fcd397c2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3b10e4a771583b781683399becf3ce19", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24B80>, 'json_data': {'input': [[34604, 18437, 64322, 14257, 7094, 26503, 39988, 45658, 1506, 11001, 118, 58060, 35111, 1840, 17165, 78876, 31101, 1506, 11047, 67124, 3114, 6856, 16742, 21599, 2156, 7753, 15752, 47273, 13373, 20879, 29256, 56892, 7740, 720, 5591, 19190, 1840, 14009, 15458, 12182, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 2355, 38214, 13, 16, 49520, 18437, 64322, 77495, 14257, 7094, 26503, 77495, 45658, 1506, 11001, 118, 58060, 35111, 1840, 36352, 78876, 31101, 1506, 11047, 67124, 3114, 6856, 16742, 21599, 2156, 7753, 15752, 47273, 13373, 20879, 29256, 56892, 7740, 720, 5591, 19190, 1840, 14009, 15458, 12182, 11122, 7094, 39280, 11, 720, 11, 23784, 1830, 12148, 6578, 9787, 11877, 19871, 8, 93129, 73181, 46339, 44075, 44100, 29893, 18154, 54261, 3865, 3114, 1532, 49526, 11, 1014, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:28:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '89', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999059', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_fcd60f04250345146498444316bf84a3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44fd34cc12df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fcd60f04250345146498444316bf84a3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24B80>, 'json_data': {'input': [[8164, 2233, 33742, 4655, 12426, 18999, 7740, 10693, 6850, 23680, 11047, 67124, 3114, 29256, 13337, 7753, 4329, 64880, 49526, 33006, 2148, 36479, 1482, 68506, 19916, 19916, 1840, 15458, 19190, 14257, 64322, 1506, 7952, 29256, 47680, 56008, 44786, 11047, 67124, 3114, 29256, 13337, 7753, 4929, 720, 2297, 85496, 4655, 20879, 29256, 62776, 49526, 33006, 5996, 720, 16, 11, 1032, 2355, 33006, 1084, 1827, 23, 36479, 12507, 8164, 3114, 79288, 44065, 5173, 87483, 8131, 61642, 78876, 31101, 1506, 11047, 67124, 3114, 6856, 16742, 21599, 2156, 7753, 15752, 47273, 1084, 33006, 720, 17279, 87483, 60990, 2355, 720, 74339, 20219, 31281, 17618, 720, 8164, 87483, 8131, 44100, 7740, 720, 13404, 19479, 1840, 87994, 720, 41873, 64134, 18999, 49526, 720, 36551, 31281, 17618, 720, 8164, 87483, 8131, 44100, 2355, 720, 843, 49520, 18... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:28:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '95', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999594', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_1bf1562a36175c7a02c70def5b752723', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44fd7efb22df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1bf1562a36175c7a02c70def5b752723", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F5D2B24B80>, 'json_data': {'input': [[1830, 67124, 3114, 6856, 63233, 5173, 41056, 44613, 10693, 26, 33006, 12, 99396, 17618, 11562, 7753, 29256, 31203, 4329, 23311, 12415, 18154, 46339, 1830, 16494, 41873, 54686, 28114, 67124, 23680, 1506, 7952, 18226, 62776, 13373, 5927, 49899, 1532, 5524, 8341, 21708, 720, 1830, 67124, 3114, 23630, 2156, 38722, 17394, 18999, 5927, 11122, 7094, 39280, 26, 33006, 12, 14257, 68462, 13433, 21022, 2156, 98695, 76559, 39127, 39988, 21022, 2233, 6578, 8131, 3865, 39103, 5927, 11562, 37277, 1506, 10693, 21923, 14476, 47295, 5173, 33295, 39280, 26, 33006, 12, 5524, 15088, 52866, 17618, 6850, 7753, 30436, 74828, 29118, 39900, 81803, 2233, 50693, 62776, 11047, 67124, 3114, 6856, 16742, 7740, 21599, 3114, 30656, 31203, 6148, 23297, 4898, 16742, 21599, 2156, 7753, 15752, 47273, 13373, 720, 8164, 44075, 8164, 31203, 4329, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:28:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '104', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998543', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_2eabe18b0051b5fb6a7c21747789b57a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44fde8aa72df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2eabe18b0051b5fb6a7c21747789b57a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 20:28:05. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \u0421\u0445\u0435\u043c\u0443 \u0438\u043b\u0438 \u0447\u0435\u0440\u0442\u0435\u0436, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0438\u0435 \u043f\u043e\u043d\u044f\u0442\u044c \u0441\u043e\u0441\u0442\u0430\u0432 \u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430. \\n  \\n5 \u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u0443\u0437\u043b\u0430 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442. \\n  \\n6 \u041f\u0440\u0438\u043d\u044f\u0442\u044b\u0435 \u0432 \u0440\u0430\u0441\u0447\u0435\u0442\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u043d\u0430\u0440\u0443\u0436\u043d\u043e\u0433\u043e \u0438 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0433\u043e \\n\u0432\u043e\u0437\u0434\u0443\u0445\u0430, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:28:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '5941', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793719', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '471ms', 'x-request-id': 'req_0ee29dd69ee869458307d0fe03275e27', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea44fe4ed452df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0ee29dd69ee869458307d0fe03275e27", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8444162049415294, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: 'd_i'", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 308, in generate_suggestions\n    ).format(n=n)\n      ^^^^^^^^^^^\nKeyError: 'd_i'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0422\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442 \u2014 \u044d\u0442\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u0432\u044b\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439 \u0437\u0434\u0430\u043d\u0438\u044f, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0441\u0442\u0435\u043d\u044b, \u043a\u0440\u044b\u0448\u0438 \u0438 \u043f\u043e\u043b\u044b, \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0437\u0430\u0449\u0438\u0442\u0435 \u0438 \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044e. \u0412\u043e\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u044d\u0442\u0430\u043f\u044b \u0438 \u0434\u0430\u043d\u043d\u044b\u0435, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430:\\n\\n1. <b>\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435:</b>\\n\u2022 <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0440\u0435\u0433\u0438\u043e\u043d\u0430:</b> \u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u043d\u0430\u0440\u0443\u0436\u043d\u043e\u0433\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0432 \u043e\u0442\u043e\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434, \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u043e\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u043d\u0435\u0439, \u0440\u0430\u0441\u0447\u0435\u0442\u043d\u0430\u044f \u0437\u0438\u043c\u043d\u044f\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430.\\n\u2022 <b>\u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 (\u03bb):</b> \u042d\u0442\u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0435\u0433\u043e \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u043d\u0430\u0442\u044c \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c.\\n\u2022 <b>\u0413\u0435\u043e\u043c\u0435\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438:</b> \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u043b\u043e\u044f \u0441\u0442\u0435\u043d\u044b \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0435\u0439 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438.\\n\\n2. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0433\u043e \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0435 (R):</b>\\n\u2022 \u042d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0437\u043e\u043d\u044b \u0438 \u0442\u0438\u043f\u0430 \u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u0437\u0430\u0434\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u043d\u043e\u0440\u043c\u0430\u043c\u0438. \u041e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:12", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='e034db54-1467-47cf-99d5-6df71d7321a7'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:13", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:13", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:21", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:21", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:21", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:21", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/references'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:21", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: references_command with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 28, 20, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2633, supergroup_chat_created=False, text='/references'), update_id=881193720), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F62733F4D0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:21", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: references_command with result: <coroutine object BotHandlers.references_command at 0x000001F5D40E9FC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:22", "name": "handlers", "levelname": "INFO", "message": "No references available for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:22", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:24", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:24", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:24", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:24", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/references'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:24", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: references_command with args: (<handlers.BotHandlers object at 0x000001F5AEBDF530>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 28, 23, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2635, supergroup_chat_created=False, text='/references'), update_id=881193721), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F62733F230>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:24", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: references_command with result: <coroutine object BotHandlers.references_command at 0x000001F5D40E9E70>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:24", "name": "handlers", "levelname": "INFO", "message": "No references available for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:28:25", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:38", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 20:43:40", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 20:43:40", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 20:43:40", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 20:43:43", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 43, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2637, supergroup_chat_created=False, text='/start'), update_id=881193722), <telegram.ext._callbackcontext.CallbackContext object at 0x0000017FE0083070>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000017FDFEF36E0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:44", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:45", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:45", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:49", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:49", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:49", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:49", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:49", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 43, 48, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2639, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193723), <telegram.ext._callbackcontext.CallbackContext object at 0x0000017FE00834D0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:49", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000017FDFF0F520>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:50", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:50", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116660110355574', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 43, 49, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2640, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations')... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000017FDED3FA00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000017FE006F8F0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000017FE006F8F0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:43:52", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:08", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 44, 8, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2642, supergroup_chat_created=False, text='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'), update_id=881193725), <telegram.ext._callbackcontext.CallbackContext object at 0x0000017FE0083690>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000017FE0206890>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='45b29444-d061-4dce-ba2a-ef996ce17b33' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='45b29444-d061-4dce-ba2a-ef996ce17b33'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000017FE006F8F0>, '\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u0435: \u043a\u0430\u043a \u043e\u043d \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0438 \u043a\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u0435\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u0435: \u043a\u0430\u043a \u043e\u043d \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u0438 \u043a\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u0435\u0433\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f?\\n-----------\\n\u0422\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442 \u2014 \u044d\u0442\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u0432\u044b\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439 \u0437\u0434\u0430\u043d\u0438\u044f, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0441\u0442\u0435\u043d\u044b, \u043a\u0440\u044b\u0448\u0438 \u0438 \u043f\u043e\u043b\u044b, \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043f\u043b\u043e\u0437\u0430\u0449\u0438\u0442\u0435 \u0438 \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044e. \u0412\u043e\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u044d\u0442\u0430\u043f\u044b \u0438 \u0434\u0430\u043d\u043d\u044b\u0435, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430:\\n\\n1. <b>\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435:</b>\\n\u2022 <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0440\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FE01037E0>, 'json_data': {'input': [[4898, 16248, 36497, 11047, 7975, 14476, 69775, 14257, 1830, 67124, 3114, 9542, 44100, 18868, 5372, 56449, 14525, 62731, 5927, 11562, 23630, 90877, 66144, 16742, 21923, 31443, 55523]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 17:44:09 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '111'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_d619f7bc9044aa0d3d0a97f17abeac45'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=jTrlt7B9HUSW.fV49jTLBiuO5Tw1qQotgR_EdH5iSaQ-1732902249-1.0.1.1-qnCsTf4m0J1h3.l7zrCQDzNzcUgAafkMZ71Ji... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d619f7bc9044aa0d3d0a97f17abeac45", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:10", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934D60>, 'json_data': {'input': [[4898, 16248, 36497, 11047, 7975, 14476, 69775, 14257, 1830, 67124, 3114, 9542, 44100, 18868, 5372, 56449, 14525, 62731, 5927, 11562, 23630, 90877, 66144, 16742, 21923, 31443, 55523]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '125', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_74f6f60d9a71ec86503b01ca9b8d089d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46775d8d25e9c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_74f6f60d9a71ec86503b01ca9b8d089d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934D60>, 'json_data': {'input': [[2297, 89327, 14332, 10298, 78876, 64322, 6856, 11047, 10298, 8164, 7753, 8131, 56515, 44786, 29619, 21708, 2355, 20807, 13, 16, 35448, 94722, 38098, 79370, 57186, 11, 63229, 35682, 39988, 20440, 78876, 64322, 1506, 49526, 74598, 51412, 5524, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 18034, 18437, 23680, 39988, 93099, 16742, 5524, 11047, 17766, 4898, 16494, 55617, 1830, 67187, 8131, 56515, 12648, 6578, 35875, 1482, 10298, 13, 720, 55258, 18437, 23680, 44858, 93099, 1506, 11562, 17766, 23311, 20346, 50819, 13373, 18868, 5372, 3865, 11122, 7094, 39280, 11, 99396, 5372, 39900, 5524, 7820, 17721, 13433, 2297, 12507, 23934, 11562, 17766, 7975, 9542, 39900, 720, 17394, 12394, 32985, 14082, 8341, 74828, 13, 35889, 17721, 56999, 44065, 18868, 79686, 72060, 7975, 40251, 70129, 21204, 23934, 7820, 78746, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '138', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999522', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_e249b9bfd1780da6f33df92892ffc5b7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea467797b885e9c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e249b9bfd1780da6f33df92892ffc5b7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934D60>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 10895, 33006, 1840, 11320, 8379, 15458, 2156, 90877, 7486, 39988, 18868, 48355, 8, 11047, 7975, 14476, 19479, 16742, 220, 16, 12, 220, 16, 11, 20, 11562, 6578, 11, 98851, 59313, 2233, 67124, 14009, 70129, 7820, 19175, 2297, 43293, 21708, 720, 6148, 1506, 55523, 18868, 79686, 7952, 12182, 10124, 44100, 64880, 11, 78876, 8164, 7975, 21956, 5372, 12648, 64880, 5524, 55617, 34493, 12507, 19175, 14391, 7975, 50506, 220, 3101, 11562, 6578, 26, 720, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 44065, 5173, 3114, 9542, 4655, 14257, 52037, 18226, 11320, 94538, 70129, 5927, 8164, 3114, 13337, 77495, 81842, 7820, 81842, 3865, 13, 23784, 90226, 1506, 1532, 720, 23297, 11320, 11562, 50436, 7094, 3865, 6850, 16494, 1840, 21923, 89554, 34148, 1830, 21204, 11122, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '102', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999150', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_95954e86fa59e8ef7776962dd28cd744', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4677d9dea5e9c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_95954e86fa59e8ef7776962dd28cd744", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934D60>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 720, 966, 720, 12, 55617, 1830, 67187, 8131, 56515, 36352, 6850, 19188, 10298, 39988, 17756, 1506, 55523, 7820, 78746, 8164, 34082, 44786, 18868, 5372, 26, 720, 12, 11122, 8131, 78746, 36352, 39233, 10298, 19190, 12648, 6578, 18600, 1506, 20812, 9239, 12507, 72590, 3114, 64569, 61498, 39988, 17756, 1506, 55523, 14391, 8341, 17766, 44786, 18868, 5372, 26, 720, 12, 78876, 12426, 28089, 36352, 55617, 5591, 6856, 5173, 7486, 26503, 44786, 18868, 5372, 26, 720, 12, 5173, 14082, 12394, 36352, 81803, 7975, 90877, 26, 720, 12, 14391, 8341, 17766, 48150, 46177, 5173, 3114, 9542, 38438, 48150, 5173, 15088, 39103, 23311, 1532, 29619, 6856, 13, 720, 16604, 2156, 38521, 2233, 5372, 23446, 1532, 18868, 79686, 11047, 67124, 3114, 6856, 63233, 5173, 41056, 1830, 6... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '80', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998712', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '15ms', 'x-request-id': 'req_d9c300fb6bc0e8dbcb4e572611ad3f01', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4678148315e9c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d9c300fb6bc0e8dbcb4e572611ad3f01", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FE0103CE0>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 33006, 4331, 720, 1032, 13, 23, 23784, 11562, 37277, 1506, 10693, 5927, 49899, 1506, 11047, 20346, 10124, 29256, 24803, 9706, 6856, 11, 7740, 7094, 43293, 67745, 20879, 12561, 35111, 2233, 1482, 5372, 44786, 11047, 67124, 3114, 6856, 63233, 720, 8164, 41056, 1830, 6856, 11, 5927, 11122, 7094, 39280, 58317, 37277, 13433, 4329, 53280, 12394, 13433, 11047, 20346, 10124, 5927, 18868, 79686, 7740, 18034, 35297, 7094, 24697, 19190, 4655, 21599, 23311, 10693, 11122, 7094, 14332, 12415, 19175, 720, 7094, 29256, 44155, 13433, 50819, 13, 720, 34604, 19188, 64134, 4655, 20879, 49284, 6735, 44938, 20440, 12561, 29256, 44155, 13433, 11047, 20346, 10124, 90211, 32985, 18868, 79686, 7740, 18034, 35297, 7094, 24697, 19190, 4655, 720, 7094, 48181, 12648, 21923, 232... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '87', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998802', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_792d6347558ec5528ab58ad332fdd3c5', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea467848a705e9c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_792d6347558ec5528ab58ad332fdd3c5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 20:44:13. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0430\u0441\u0447\u0435\u0442\u043e\u0432 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u043e\u043b\u0435\u0439  \\n\u041d.1 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \\n  \\n\u0421\u0442\u0435\u043d\u0430 \u0441 \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0444\u0430\u0441\u0430\u0434\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0441 \u0442\u043e\u043d\u043a\u0438\u043c \u0448\u0442\u0443\u043a\u0430\u0442\u0443\u0440\u043d\u044b\u043c \u0441\u043b\u043e\u0435\u043c. \\n\u0424\u0430\u0441\u0430\u0434\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043c\u043e\u043d\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u0441\u0442\u0435\u043d\u0443 \u0437... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 17:44:16 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '1740'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793136'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '514ms'), ('x-request-id', 'req_6d6cf5f379e672e15af677eb268beef8'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=FCT1It6nBBUIhBSxbgl0vZQVmRpaiq5k.QM8zsjKQLw-1732902256-1.0.1.1-09FfN4gmfgb_.ts4Tb6yPsp8jfOE44uO5jqmFqzAg9fDor9N7mAd9BawFKBrli2P21Pm7ZRj9xNvgXk_q7GLqw; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6d6cf5f379e672e15af677eb268beef8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:16", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8628189553289441, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:16", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:16", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438\\n\\nLLM Response: \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u0442 100 \u0434\u043e 150 \u043c\u043c. \u042d\u0442\u0430 \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430, \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0437\u0434\u0430\u043d\u0438\u044f, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044e. \u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1216', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799620', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '28ms', 'x-request-id': 'req_08cebc9513e71dbe554ba8e5649d3962', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4679f8fff2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_08cebc9513e71dbe554ba8e5649d3962", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:18", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.', '\u041a\u0430\u043a \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f?', '\u041a\u0430\u043a\u0438\u0435 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:18", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u0442 100 \u0434\u043e 150 \u043c\u043c. \u042d\u0442\u0430 \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430, \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0437\u0434\u0430\u043d\u0438\u044f, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044e. \u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435.\\n\\n------------------\\nReferences (/references):\\n\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf, pages: 86\\n\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf, pages: 165\\n\u0422\u0435\u043f\u043b\u043e\u0432\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u0438 \u0442\u0435\u043f\u043b\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435_\u0421\u041f 510.1325800.2022.pdf, pages: 34, 57\\n', {'\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf', '\u0422\u0435\u043f\u043b\u043e\u0432\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u0438 \u0442\u0435\u043f\u043b\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435_\u0421\u041f 510.1325800.2022.pdf', '\u0422\u0435\u043f\u043b\u043e\u0432\u0430\u044f_\u0437\u0430\u0449\u0438\u0442\u0430_\u0437\u0434\u0430\u043d\u0438\u0439_\u0421\u041f_50_13330_2012.pdf'}, ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.', '\u041a\u0430\u043a \u043f\u0440\u043e\u0432\u0435\u0441\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:18", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:18", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='45b29444-d061-4dce-ba2a-ef996ce17b33'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:18", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:19", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:19", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:35", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:35", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:35", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:35", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/references'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:35", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: references_command with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 44, 34, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2644, supergroup_chat_created=False, text='/references'), update_id=881193726), <telegram.ext._callbackcontext.CallbackContext object at 0x0000017FE00816A0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:35", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: references_command with result: <coroutine object BotHandlers.references_command at 0x0000017FDFEFB370>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:36", "name": "handlers", "levelname": "INFO", "message": "Sent reference buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:36", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:40", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:41", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:41", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='get_file:file_0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:41", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: send_file with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='get_file:file_0', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116658036155259', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 44, 35, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2645, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='get_file:file_0', text='\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf'),), (InlineKeyboardButton(callback_data='get_file:file_1', text='\u0422\u0435\u043f\u043b\u043e\u0432\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u0438 \u0442\u0435\u043f\u043b\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435_\u0421\u041f 510.1325800.2022.pdf')... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: send_file with result: <coroutine object BotHandlers.send_file at 0x0000017FE0085D20>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:41", "name": "handlers", "levelname": "DEBUG", "message": "Initiated async task to send file '\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf' to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:41", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:44", "name": "handlers", "levelname": "INFO", "message": "File '\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf' sent successfully to user_id=244732168.", "taskName": "Task-32"}
{"asctime": "2024-11-29 20:44:51", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:51", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:51", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:51", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_0', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116660841851141', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 44, 18, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=474, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2643, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='suggestion:suggestion_0', text='\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x0000017FE0043CD0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:52", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:52", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='185484b4-a8f3-449f-a316-7c24c4d37c9f' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:52", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='185484b4-a8f3-449f-a316-7c24c4d37c9f'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:52", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000017FE006F8F0>, '\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.'), kwargs: {'chat_history': [HumanMessage(content='\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u0430\u044f \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u043c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u0442\u0435\u043d \u0432 \u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u0442 100 \u0434\u043e 150 \u043c\u043c. \u042d\u0442\u0430 \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0438\u043f\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430, \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0437\u0434\u0430\u043d\u0438\u044f, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e \u044d\u043d\u0435\u0440\u0433\u043e\u0441\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0438\u044e. \u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043f\u043b\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0430\u0441\u0447\u0435\u0442, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430 \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0442\u0435\u043f\u043b\u043e\u0432\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u0435.\\n\\n------------------\\nReferences (/references):\\n\u0422\u0435\u043f\u043b\u043e\u0432... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000180236DC9A0>, 'json_data': {'input': [[41682, 9136, 2156, 18482, 84699, 60009, 8379, 11047, 67124, 3114, 29256, 24803, 9706, 68742, 39479, 91216, 44786, 96573, 7753, 1840, 16331, 6856, 20440, 14257, 1830, 67124, 62776, 18868, 5372, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '129', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999970', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_db41277821e57e312775aae16c34599a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4687e1a5e6d21-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_db41277821e57e312775aae16c34599a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934E00>, 'json_data': {'input': [[41682, 9136, 2156, 18482, 84699, 60009, 8379, 11047, 67124, 3114, 29256, 24803, 9706, 68742, 39479, 91216, 44786, 96573, 7753, 1840, 16331, 6856, 20440, 14257, 1830, 67124, 62776, 18868, 5372, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '325', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999970', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_be22584201fb605801a76c91bfaca0c7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea468820c4e6d21-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_be22584201fb605801a76c91bfaca0c7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934E00>, 'json_data': {'input': [[2970, 33006, 5591, 2297, 47295, 7820, 13373, 20346, 17394, 2156, 72952, 5927, 35387, 3865, 10693, 3865, 13, 51418, 67124, 39865, 41873, 96485, 15458, 17766, 44065, 5173, 3114, 9542, 4655, 46177, 96573, 4655, 5524, 6850, 16248, 3114, 1532, 5372, 12648, 6578, 35875, 1482, 10298, 720, 19916, 17461, 15752, 1840, 46177, 29619, 1840, 68506, 23311, 61498, 6856, 16742, 5173, 61498, 17165, 11562, 14837, 38521, 72060, 7975, 40251, 29893, 50945, 59138, 55813, 1840, 18154, 13373, 20346, 17394, 39988, 720, 9136, 1506, 14476, 27055, 18868, 79686, 20879, 5927, 35387, 3865, 10693, 29256, 2233, 17766, 1840, 10589, 39280, 320, 2297, 6578, 13, 220, 24, 13, 18, 13, 17, 570, 720, 24, 13, 17, 13, 17, 13, 18, 59842, 1830, 67124, 56892, 14257, 6148, 84350, 90877, 13373, 20346, 17394, 39988, 18868, 79686, 5927, 11562, 37277, 1506, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '121', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999006', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_3276721e3d6d5e36710abffd0a7c14ed', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46885ae0c6d21-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3276721e3d6d5e36710abffd0a7c14ed", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934E00>, 'json_data': {'input': [[2946, 33006, 720, 34604, 13810, 35297, 15088, 220, 24, 13, 18, 482, 59842, 1830, 67124, 56892, 28114, 15298, 39103, 23311, 12415, 6850, 23680, 19175, 13337, 19619, 11320, 5591, 32062, 4655, 64880, 76401, 86610, 18999, 64880, 720, 24, 13, 17, 13, 18, 59842, 77911, 20812, 1482, 11047, 67124, 39865, 41873, 96485, 57186, 23934, 5173, 3114, 9542, 7740, 96573, 6856, 2355, 24, 13, 17, 13, 18, 13, 16, 51418, 67124, 39865, 41873, 96485, 15458, 12182, 8379, 15752, 11001, 114, 40590, 90457, 67745, 38098, 79370, 15458, 12415, 93129, 73181, 78876, 8164, 44075, 44100, 29893, 720, 28086, 2156, 50619, 13999, 11, 82250, 5927, 57925, 12394, 1506, 10693, 35714, 21708, 23934, 7975, 1840, 20346, 10298, 16742, 38098, 79370, 57186, 5173, 87483, 8131, 61642, 11047, 67124, 3114, 20219, 1506, 14476, 9542, 4655, 720, 10124, 4655, 1132... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '187', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998971', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_e514e2fe5dba2070a60b935d3ea7d7c6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46888ffd86d21-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e514e2fe5dba2070a60b935d3ea7d7c6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934E00>, 'json_data': {'input': [[2297, 89327, 14332, 10298, 78876, 64322, 6856, 11047, 10298, 8164, 7753, 8131, 56515, 44786, 29619, 21708, 2355, 20807, 13, 16, 35448, 94722, 38098, 79370, 57186, 11, 63229, 35682, 39988, 20440, 78876, 64322, 1506, 49526, 74598, 51412, 5524, 11047, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 18034, 18437, 23680, 39988, 93099, 16742, 5524, 11047, 17766, 4898, 16494, 55617, 1830, 67187, 8131, 56515, 12648, 6578, 35875, 1482, 10298, 13, 720, 55258, 18437, 23680, 44858, 93099, 1506, 11562, 17766, 23311, 20346, 50819, 13373, 18868, 5372, 3865, 11122, 7094, 39280, 11, 99396, 5372, 39900, 5524, 7820, 17721, 13433, 2297, 12507, 23934, 11562, 17766, 7975, 9542, 39900, 720, 17394, 12394, 32985, 14082, 8341, 74828, 13, 35889, 17721, 56999, 44065, 18868, 79686, 72060, 7975, 40251, 70129, 21204, 23934, 7820, 78746, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '68', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999521', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_46795fe118c55953f475b023c4b4b5b7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4688bb9836d21-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_46795fe118c55953f475b023c4b4b5b7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017FDE934E00>, 'json_data': {'input': [[6735, 5372, 5927, 11122, 10298, 3114, 1532, 7740, 29619, 1506, 18154, 25756, 20346, 2156, 89348, 320, 89554, 7094, 26503, 13999, 8, 2355, 33006, 33006, 5996, 720, 5996, 33006, 7071, 1827, 19, 23227, 87483, 8131, 61642, 11047, 67124, 3114, 13337, 98285, 23446, 6148, 23297, 17165, 1532, 1084, 33006, 33006, 720, 17279, 87483, 60990, 2355, 720, 74339, 20219, 31281, 17618, 720, 1840, 22918, 71438, 1840, 87994, 720, 41873, 64134, 18999, 49526, 720, 20807, 32330, 1840, 20346, 1532, 198, 6578, 44867, 720, 9136, 31281, 17618, 2355, 720, 34604, 18437, 6148, 1532, 198, 1830, 48150, 720, 8164, 2233, 1482, 15298, 198, 1830, 48150, 720, 9136, 31281, 1532, 198, 23446, 1532, 2355, 720, 55258, 16248, 23311, 6148, 1532, 198, 66144, 44867, 720, 9136, 31281, 17618, 2355, 720, 868, 80584, 28089, 13404, 5372, 48150, 5524, 29256, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:44:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '83', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999703', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_8fcbe9ebe99eff69b44706099a088587', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea4688e0a9a6d21-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8fcbe9ebe99eff69b44706099a088587", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 20:44:55. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n58 \\n \\n\u0432\u0441\u0435\u0433\u043e \u043a \u043d\u0430\u0440\u0443\u0436\u043d\u043e\u043c\u0443 \u0432\u043e\u0437\u0434\u0443\u0445\u0443. \u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043f\u043b\u0438\u0442\u044b \u0438\u043b\u0438 \u043c\u0430\u0442\u044b \u0441 \u043d\u0430\u043a\u043b\u0435\u0435\u043d\u043d\u044b\u043c \u0441\u043b\u043e\u0435\u043c \\n\u0444\u043e\u043b\u044c\u0433\u0438 \u0438\u043b\u0438 \u043f\u043e\u043b\u0438\u044d\u0442\u0438\u043b\u0435\u043d\u043e\u0432\u043e\u0439 \u043f\u043b\u0435\u043d\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0442\u0430\u043a\u0436\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043f\u043e \u043d\u0430\u0440\u0443\u0436\u043d\u043e\u0439 \\n\u0437\u0430\u0449\u0438\u0442\u0435 \u0441\u0442\u0435\u043d\u044b \u043e\u0442 \u0432\u043e\u0437\u0434\u0443\u0445\u043e\u043f\u0440\u043e\u043d\u0438\u0446\u0430\u043d\u0438\u044f (\u0441\u043c. 9.3.2). \\n9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:44:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:45:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6766', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794508', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '411ms', 'x-request-id': 'req_b5f5bddc4aa2b140659057fce9ecc289', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea468929e85ee36-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b5f5bddc4aa2b140659057fce9ecc289", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:03", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8704677664295629, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:03", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:03", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.\\n\\nLLM Response: \u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u2014 \u044d\u0442\u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e. \u0427\u0435\u043c \u043d\u0438\u0436\u0435 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u0442\u0435\u043c \u043b\u0443\u0447\u0448\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043f\u043b\u043e, \u0438 \u0442\u0435\u043c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0435\u0435 \u043e\u043d \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f. \u0412\u043e\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d:\\n\\n1. **\u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430**: \\n  ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:45:08 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '5247', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799180', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '61ms', 'x-request-id': 'req_5d03c3ad1c1e1fab3341de5bb7b946e7', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea468bf6f1fee36-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5d03c3ad1c1e1fab3341de5bb7b946e7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:08", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u043e\u043c, \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u0441\u0442\u0435\u043d.', '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0443\u044e \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0435\u0433\u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439.', '\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0438 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u0435\u0439 \u0438 \u0438\u0445 \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u0438.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:08", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u2014 \u044d\u0442\u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e. \u0427\u0435\u043c \u043d\u0438\u0436\u0435 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u0442\u0435\u043c \u043b\u0443\u0447\u0448\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043f\u043b\u043e, \u0438 \u0442\u0435\u043c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0435\u0435 \u043e\u043d \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f. \u0412\u043e\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d:\\n\\n1. <b>\u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430</b>:\\n\u2022 \u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c: \u043e\u043a\u043e\u043b\u043e 0.035-0.045 \u0412\u0442/(\u043c\u00b7\u00b0\u0421)\\n\u2022 \u042d\u0442\u043e \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b, \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0438\u0437 \u043a\u0430\u043c\u0435\u043d\u043d\u044b\u0445 \u0438\u043b\u0438 \u0441\u0442\u0435\u043a\u043b\u044f\u043d\u043d\u044b\u0445 \u0432\u043e\u043b\u043e\u043a\u043e\u043d. \u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u0445\u043e\u0440\u043e\u0448\u043e \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043f\u043b\u043e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u0430 \u043a \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0435.\\n\\n2. <b>\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b (XPS)</b>:\\n\u2022 \u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c: \u043e\u043a\u043e\u043b\u043e 0.029-0.034 \u0412\u0442/(\u043c\u00b7\u00b0\u0421)\\n\u2022 XPS \u043e\u0431\u043b\u0430\u0434\u0430\u0435\u0442 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0433\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c\u044e \u0438 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c\u044e, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u0435\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u043c \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u043e\u0432 \u0438 \u0444\u0430\u0441\u0430\u0434\u043e\u0432.\\n\\n3. <b>\u041f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0443\u0440\u0435\u0442\u0430\u043d</b>:\\n\u2022 \u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c: \u043e\u043a\u043e\u043b\u043e 0.022-0.030 \u0412\u0442/(\u043c\u00b7\u00b0\u0421)\\n\u2022 \u042d\u0442\u043e\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u043d\u0430\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u043c\u0435\u0442\u043e\u0434\u043e\u043c \u043d\u0430\u043f\u044b\u043b\u0435\u043d\u0438\u044f \u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u0431\u0435\u0441\u0448\u043e\u0432\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u0442\u043b\u0438\u0447\u043d\u043e \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043f\u043b\u043e \u0438 \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438.\\n\\n4. <b>\u041f\u0435\u043d\u043e\u043f\u043e\u043b\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:08", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:08", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='185484b4-a8f3-449f-a316-7c24c4d37c9f'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:08", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:09", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:45:09", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:06", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:06", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:06", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:06", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/status'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:06", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: status with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 48, 5, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=7, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2648, supergroup_chat_created=False, text='/status'), update_id=881193729), <telegram.ext._callbackcontext.CallbackContext object at 0x000001802317C210>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:06", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: status with result: <coroutine object BotHandlers.status at 0x0000017FDFEFB370>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:11", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 7 of document '\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 446.1325800.2019 .pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:12", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 86 of document '\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0421\u041f 20.13330.2016.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:12", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 1 of document '\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:16", "name": "handlers", "levelname": "INFO", "message": "Provided status to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:16", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/clear_context'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: clear_context with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 48, 32, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=14, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2650, supergroup_chat_created=False, text='/clear_context'), update_id=881193730), <telegram.ext._callbackcontext.CallbackContext object at 0x000001802316AEB0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: clear_context with result: <coroutine object BotHandlers.clear_context at 0x0000017FE0085D20>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 initiated /clear_context command.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'folder_path' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'vector_store_loaded' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'valid_files_in_folder' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'context_source' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'file_id_map' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "DEBUG", "message": "Cleared context key 'conversation_id' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "DEBUG", "message": "Cleared vector_store for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:33", "name": "handlers", "levelname": "DEBUG", "message": "Cleared folder path in database for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:34", "name": "handlers", "levelname": "INFO", "message": "Context cleared for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:34", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:38", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:38", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:38", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:38", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 48, 37, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2652, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193731), <telegram.ext._callbackcontext.CallbackContext object at 0x000001802316B1C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000017FE01A9FC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:38", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:38", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:ISO Regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:ISO Regulations', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), id='1051116658918743415', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 48, 38, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2653, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),), (... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000017FE0085D20>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\iso_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "handlers", "levelname": "DEBUG", "message": "Found 5 valid files in folder_path='E:\\knowledge_base\\iso_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000017FE006F8F0>, 'E:\\\\knowledge_base\\\\iso_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\iso_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000017FE006F8F0>, 'E:\\\\knowledge_base\\\\iso_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\iso_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\iso_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:41", "name": "handlers", "levelname": "INFO", "message": "Knowledge base 'ISO Regulations' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:48:42", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='What is BIM Execution Plan?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 49, 8, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2655, supergroup_chat_created=False, text='What is BIM Execution Plan?'), update_id=881193733), <telegram.ext._callbackcontext.CallbackContext object at 0x000001802316B1C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000017FE0206890>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='e701f939-4229-40be-87bf-49688d088ff2' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='e701f939-4229-40be-87bf-49688d088ff2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000017FE006F8F0>, 'What is BIM Execution Plan?'), kwargs: {'chat_history': [HumanMessage(content='What is BIM Execution Plan?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d.\\n-----------\\n\u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c \u2014 \u044d\u0442\u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0435\u043f\u043b\u043e. \u0427\u0435\u043c \u043d\u0438\u0436\u0435 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438, \u0442\u0435\u043c \u043b\u0443\u0447\u0448\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043f\u043b\u043e, \u0438 \u0442\u0435\u043c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0435\u0435 \u043e\u043d \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0443\u0442\u0435\u043f\u043b\u0438\u0442\u0435\u043b\u044f. \u0412\u043e\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0442\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0435\u043d:\\n\\n1. <b>\u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430</b>:\\n\u2022 \u0422\u0435\u043f\u043b\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u043e\u0441\u0442\u044c: \u043e\u043a\u043e\u043b\u043e 0.035-0.045 \u0412\u0442/(\u043c\u00b7\u00b0\u0421)\\n\u2022 \u042d\u0442\u043e \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b, \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0438\u0437 \u043a\u0430\u043c\u0435\u043d\u043d\u044b\u0445 \u0438\u043b\u0438 \u0441\u0442\u0435\u043a\u043b\u044f\u043d\u043d\u044b\u0445 \u0432\u043e\u043b\u043e\u043a\u043e\u043d. \u041c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430 \u0445\u043e\u0440\u043e\u0448\u043e \u0443\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043f\u043b\u043e \u0438 \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u0430 \u043a \u0432\u044b\u0441\u043e\u043a... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000180236DCC20>, 'json_data': {'input': [[3923, 374, 426, 1829, 32028, 9878, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:49:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '115', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ca938f4c5047ed6c1cb84094cc62185a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46ec54f0e9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ca938f4c5047ed6c1cb84094cc62185a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:10", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000180236DE480>, 'json_data': {'input': [[3923, 374, 426, 1829, 32028, 9878, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:49:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_9d248309cfb4a12cada2ca99cec676cf', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46ecaf8849185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9d248309cfb4a12cada2ca99cec676cf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000180236DE480>, 'json_data': {'input': [[7497, 40, 35653, 57994, 198, 42674, 323, 16099, 2065, 315, 2038, 922, 720, 5957, 826, 323, 8431, 15009, 4375, 11, 2737, 720, 24177, 2038, 61966, 4194, 5462, 1829, 8, 4194, 2345, 8245, 720, 43573, 1701, 4857, 2038, 61966, 198, 5920, 220, 18, 25, 90396, 10474, 315, 279, 12032, 198, 7497, 4194, 965, 4194, 25141, 4194, 5162, 1135, 57064, 18, 25, 2366, 15]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:49:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999938', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_e3e09af1eb777e272401db429b17bbde', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46ee8c9429185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e3e09af1eb777e272401db429b17bbde", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000180236DE480>, 'json_data': {'input': [[62619, 42674, 323, 16099, 2065, 315, 2038, 922, 720, 5957, 826, 323, 8431, 15009, 4375, 11, 2737, 4857, 720, 26125, 61966, 320, 33, 1829, 8, 4194, 2345, 8245, 6373, 720, 985, 4857, 2038, 61966, 4194, 2345, 198, 5920, 4194, 16, 25, 720, 45676, 82, 323, 16565, 198, 16, 197, 36020, 198, 2028, 2246, 50729, 279, 19476, 323, 16565, 369, 2038, 6373, 520, 264, 6566, 315, 48261, 720, 5919, 17890, 439, 1054, 24177, 2038, 61966, 320, 33, 1829, 8, 4184, 311, 279, 22705, 4194, 5162, 1135, 4101, 863, 627, 2028, 2246, 5825, 19075, 369, 264, 12914, 311, 10299, 2038, 2737, 720, 327, 52813, 11, 14975, 11, 2373, 287, 323, 35821, 369, 682, 20142, 627, 2028, 2246, 374, 8581, 311, 279, 4459, 2324, 11008, 315, 904, 5918, 9513, 11, 2737, 19092, 9293, 11, 720, 9613, 2955, 11, 15009, 11, 4500, 11, 9904, 323, 8246, 11, 1938, 4791, 114... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:49:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '169', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999528', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_cb44694ba314b0a5cdf8e298774d02e0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46eeb19c09185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cb44694ba314b0a5cdf8e298774d02e0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000180236DE480>, 'json_data': {'input': [[7497, 40, 35653, 57994, 198, 42674, 323, 16099, 2065, 315, 2038, 922, 720, 5957, 826, 323, 8431, 15009, 4375, 11, 2737, 720, 24177, 2038, 61966, 320, 33, 1829, 8, 482, 8245, 720, 43573, 1701, 4857, 2038, 61966, 198, 5920, 220, 16, 25, 76872, 323, 16565, 198, 7497, 4194, 965, 4194, 25141, 4194, 5162, 1135, 57064, 16, 25, 679, 23]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:49:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '72', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999940', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_8a5c28c9e229aaa4b092e580bf577df1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46ef38c029185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8a5c28c9e229aaa4b092e580bf577df1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000180236DE480>, 'json_data': {'input': [[62619, 25141, 220, 5162, 1135, 12, 20, 25, 2366, 15, 10953, 340, 38255, 198, 791, 5918, 4676, 374, 25051, 264, 4261, 315, 11295, 15740, 13, 1102, 374, 30199, 430, 279, 25375, 720, 1073, 4857, 2038, 61966, 320, 33, 1829, 8, 323, 279, 7859, 1005, 315, 7528, 14645, 304, 279, 2955, 11, 720, 48297, 11, 30847, 11, 5784, 323, 6373, 315, 12032, 477, 3956, 11, 439, 1664, 439, 279, 17575, 720, 1073, 3600, 11, 2949, 279, 5918, 4676, 690, 617, 264, 87435, 2515, 389, 279, 9875, 6532, 13, 1102, 720, 285, 4461, 430, 311, 5376, 27375, 323, 15374, 11, 28271, 477, 7224, 430, 527, 11469, 502, 720, 5271, 477, 10105, 11, 477, 47141, 477, 18646, 6484, 6305, 11, 2011, 3719, 810, 40806, 304, 7138, 13, 720, 21365, 20632, 7612, 810, 18300, 11, 1825, 5627, 315, 3318, 11, 323, 11, 439, 1790, 439, 3284, 11, 279, 720, 29228, 11821, 323, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:49:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '61', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999203', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_c2ea502437805545160470b3d424cf5a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46ef8ad1e9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c2ea502437805545160470b3d424cf5a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 20:49:18. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\nBSI Standards Publication\\nOrganization and digitization of information about \\nbuildings and civil engineering works, including \\nbuilding information modelling\\xa0(BIM)\\xa0\u2014 Information \\nmanagement using building ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:49:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '3626', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '795545', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '334ms', 'x-request-id': 'req_4a6ccb4d849b4f9f7ca36e91ee75a295', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46efd29032df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4a6ccb4d849b4f9f7ca36e91ee75a295", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:23", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8122928068096668, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:23", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:23", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: What is BIM Execution Plan?\\n\\nLLM Response: A BIM Execution Plan (BEP) is a comprehensive document that outlines the processes, standards, and protocols for the implementation of Building Information Modelling (BIM) within a project. It serves as a roadmap for all stakeholders involved, ensuring that there is a clear understanding of how BIM will be utilized to achieve project goals. The BE... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 17:49:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '951', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799492', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '38ms', 'x-request-id': 'req_101661764db23b4340a31dd19d46c3f0', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea46f197d3f2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_101661764db23b4340a31dd19d46c3f0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:24", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['Learn more about the typical components included in a BIM Execution Plan and their significance.', 'How to determine the specific BIM uses that should be included in a BIM Execution Plan for a particular project?', 'How to establish effective data exchange protocols in a BIM Execution Plan to facilitate seamless collaboration among stakeholders?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:24", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('A BIM Execution Plan (BEP) is a comprehensive document that outlines the processes, standards, and protocols for the implementation of Building Information Modelling (BIM) within a project. It serves as a roadmap for all stakeholders involved, ensuring that there is a clear understanding of how BIM will be utilized to achieve project goals. The BEP typically includes:\\n\\n1. <b>Project Goals and Objectives</b>: Clearly defined aims for using BIM on the project.\\n\\n2. <b>Roles and Responsibilities</b>: Designation of tasks and duties related to BIM processes among the project team members.\\n\\n3. <b>BIM Uses</b>: Specific applications of BIM to be employed, such as clash detection, quantity take-offs, or 3D coordination.\\n\\n4. <b>Data Exchange Protocols</b>: Standards for data formats, platforms, and communication methods to ensure seamless information sharing.\\n\\n5. <b>Modeling Standards</b>: Guidelines for model development, including l... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:24", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:24", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='e701f939-4229-40be-87bf-49688d088ff2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:24", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:25", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:25", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:31", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:31", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:31", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:31", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/references'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: references_command with args: (<handlers.BotHandlers object at 0x0000017FDFF9A300>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 17, 49, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='ru', username='Akumsk'), group_chat_created=False, message_id=2657, supergroup_chat_created=False, text='/references'), update_id=881193734), <telegram.ext._callbackcontext.CallbackContext object at 0x000001802316AC80>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: references_command with result: <coroutine object BotHandlers.references_command at 0x0000017FDFEFAB90>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:32", "name": "handlers", "levelname": "INFO", "message": "Sent reference buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 20:49:32", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
