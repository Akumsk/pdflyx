{"asctime": "2024-11-28 05:20:14", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:14", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:14", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:14", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000002320CF4B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 2, 20, 13, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2495, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193635), <telegram.ext._callbackcontext.CallbackContext object at 0x000002323259F230>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000002320F450CA0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:15", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:15", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000002320CF4B7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660184469746', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 2, 20, 15, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2496, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000023232591BC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x00000232326762A0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x00000232326762A0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:18", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:20:18", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:06", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:06", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041d\u0443\u0436\u043d\u043e \u043b\u0438 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d\u044b \u0442\u0440\u0443\u0431 \u043d\u0430 \u043f\u043b\u0430\u043d\u0430\u0445 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002320CF4B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 2, 21, 6, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2498, supergroup_chat_created=False, text='\u041d\u0443\u0436\u043d\u043e \u043b\u0438 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d\u044b \u0442\u0440\u0443\u0431 \u043d\u0430 \u043f\u043b\u0430\u043d\u0430\u0445 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431?'), update_id=881193637), <telegram.ext._callbackcontext.CallbackContext object at 0x000002323259F230>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x00000232A553C4F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='061d13d6-e62c-421f-adb2-7e87cddf837b' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='061d13d6-e62c-421f-adb2-7e87cddf837b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x00000232326762A0>, '\u041d\u0443\u0436\u043d\u043e \u043b\u0438 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d\u044b \u0442\u0440\u0443\u0431 \u043d\u0430 \u043f\u043b\u0430\u043d\u0430\u0445 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431?'), kwargs: {'chat_history': [HumanMessage(content='\u041d\u0443\u0436\u043d\u043e \u043b\u0438 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d\u044b \u0442\u0440\u0443\u0431 \u043d\u0430 \u043f\u043b\u0430\u043d\u0430\u0445 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431?', additional_kwargs={}, response_metadata={}), HumanMessage(content='what is BIM level 3', additional_kwargs={}, response_metadata={}), AIMessage(content='BIM Level 3 represents the next stage of maturity in Building Information Modelling, building upon the foundations laid by BIM Level 2. It involves a fully integrated and collaborative approach to project delivery, where all stakeholders work on a shared model. Key characteristics of BIM Level 3 include:\\n\\n1. <b>Single Shared Model</b>: Unlike BIM Level 2, where separate discipline models are used, BIM Level 3 involves a single, shared model that all parties contribute to and access. This enhances collaboration and minimizes the risk ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023232B3D940>, 'json_data': {'input': [[20807, 56999, 13999, 59195, 5173, 87483, 35667, 18482, 14257, 4898, 39865, 12648, 11047, 20346, 10124, 13373, 5173, 3114, 7486, 1506, 10693, 78876, 4898, 80230, 17165, 7820, 7486, 72331, 30436, 17766, 44786, 11047, 20346, 10124, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 02:21:08 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '49', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999965', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_c0de2e8a15693c3442b429a1dfe12ec9', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=FU_k8vDB4z9S08m0jdszK2AJc6A64wXtY5cgdQAAgQU-1732760468-1.0.1.1-DG8x2uBQsaQxFMt4OZHBVzFQh5gyXnL0zdZzMHd0ifc9b5Jm8JXPR_QdHrRxA.18.C3ocOLpCAegi... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c0de2e8a15693c3442b429a1dfe12ec9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:09", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023232B3DD00>, 'json_data': {'input': [[20807, 56999, 13999, 59195, 5173, 87483, 35667, 18482, 14257, 4898, 39865, 12648, 11047, 20346, 10124, 13373, 5173, 3114, 7486, 1506, 10693, 78876, 4898, 80230, 17165, 7820, 7486, 72331, 30436, 17766, 44786, 11047, 20346, 10124, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 02:21:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '68', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999965', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_c63ad132825845ad6d5abff94be1431a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e96e201df809185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c63ad132825845ad6d5abff94be1431a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023232B3DD00>, 'json_data': {'input': [[1490, 33006, 720, 34604, 13810, 35297, 15088, 220, 1032, 13, 19, 482, 36479, 2233, 67124, 56892, 5927, 35387, 3865, 10693, 6856, 9706, 6856, 33006, 34604, 13810, 35297, 15088, 220, 1032, 13, 20, 12, 34604, 19188, 6578, 86610, 17618, 20879, 49284, 6735, 40231, 20440, 12561, 29256, 44155, 13433, 11047, 20346, 10124, 7740, 21599, 3114, 30656, 2233, 29256, 24803, 9706, 17165, 5927, 14391, 16331, 13433, 10693, 720, 8164, 7753, 15298, 39103, 23311, 4329, 720, 1032, 13, 19, 13, 17, 59842, 6578, 35667, 39127, 23446, 17165, 7740, 5927, 28241, 7820, 2233, 67124, 90297, 21204, 7820, 18868, 16742, 4898, 24697, 19175, 2297, 43293, 67745, 18868, 5372, 11, 52770, 68214, 7486, 1482, 13373, 720, 2233, 13810, 41056, 1532, 220, 1032, 13, 21, 13, 28599, 1830, 16742, 17165, 5524, 21477, 2233, 32985, 50807, 46177, 20879, 49284, 6... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 02:21:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '49', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999712', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_a76df9e66541af2a42d3dadb23dc7874', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e96e207ac589185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a76df9e66541af2a42d3dadb23dc7874", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023232B3DD00>, 'json_data': {'input': [[54745, 16494, 56857, 27717, 482, 23227, 7753, 13404, 53280, 12394, 4898, 16742, 18868, 61390, 13433, 18600, 1506, 20812, 9239, 12507, 13373, 11047, 20346, 10124, 4655, 19175, 89159, 1482, 59313, 2233, 67124, 18264, 92457, 11122, 19188, 9239, 1506, 198, 9136, 5591, 3865, 48199, 41873, 96485, 15458, 17766, 34613, 720, 4898, 21956, 3865, 10693, 720, 41873, 720, 2156, 25698, 9239, 12182, 6148, 47295, 720, 38521, 67124, 3114, 9542, 44100, 720, 1830, 7975, 14476, 19479, 16742, 720, 966, 720, 6578, 6578, 11, 720, 16494, 1532, 90457, 44938, 198, 15752, 48262, 2233, 1482, 41873, 96485, 15458, 17766, 48150, 46177, 18034, 17461, 15752, 59921, 7486, 48150, 5173, 15088, 39103, 23311, 1532, 5524, 5927, 2156, 47067, 2156, 21708, 18868, 9239, 1482, 12648, 627, 972, 13, 806, 80584, 15088, 80230, 13433, 11047, 20346, 10124, 2... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 02:21:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '145', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998353', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_e8cdcf2fd2d61eb0130a1a8c49a17353', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e96e20e1a009185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e8cdcf2fd2d61eb0130a1a8c49a17353", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023232B3DD00>, 'json_data': {'input': [[6086, 33006, 720, 34604, 13810, 35297, 15088, 220, 1032, 13, 23, 482, 80584, 15088, 80230, 13433, 7820, 7486, 72331, 30436, 17766, 44786, 11047, 20346, 10124, 5927, 7820, 17721, 13433, 2297, 1532, 7952, 12507, 1506, 720, 1032, 13, 20, 81529, 3114, 30656, 2233, 29256, 24803, 9706, 17165, 720, 1032, 13, 20, 13, 16, 81529, 3114, 30656, 2233, 29256, 24803, 9706, 17165, 93129, 73181, 14257, 6735, 22911, 28089, 18482, 5173, 38521, 10298, 12561, 29256, 44155, 13433, 7820, 38722, 12394, 21708, 320, 8164, 24803, 9706, 6856, 5927, 720, 9136, 1506, 14476, 9542, 39988, 21923, 7975, 38438, 53671, 8, 90211, 32985, 5173, 61613, 13337, 4655, 46177, 30889, 47680, 5372, 44065, 14257, 1830, 67124, 3114, 9542, 12394, 10298, 12561, 25262, 35682, 94071, 5927, 2156, 38521, 31203, 720, 6735, 5372, 7740, 28114, 15298, 39103, 23311, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 02:21:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '72', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999769', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_5acc4deb30385709a9193da29434605c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e96e2147ff59185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5acc4deb30385709a9193da29434605c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023232B3DD00>, 'json_data': {'input': [[8164, 31203, 10124, 9239, 4655, 720, 29471, 8341, 1506, 720, 49899, 29256, 13337, 2233, 50693, 62776, 13, 720, 85587, 720, 8164, 2233, 13810, 1482, 13404, 19479, 84198, 720, 4898, 7975, 3114, 30656, 9239, 6856, 720, 4898, 720, 6735, 61390, 4898, 24697, 720, 41036, 13404, 73181, 198, 3865, 52037, 18226, 11320, 5591, 18482, 30889, 9239, 77495, 21022, 2233, 6578, 8131, 3865, 20346, 11, 18034, 1840, 53628, 2233, 7740, 49103, 38657, 34613, 18600, 25698, 3865, 14009, 37773, 7952, 18226, 62776, 13, 49520, 19188, 49899, 4329, 14476, 50306, 5524, 8341, 1840, 20879, 198, 4898, 7975, 3114, 30656, 9239, 6856, 57297, 7820, 5591, 17721, 23311, 2233, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14257, 64322, 12507, 21923, 23297, 8164, 56857, 18999, 91105, 9239, 1506, 320, 7094, 18226, 62776, 8, 14257, 37405, 10124, 9239... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 02:21:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '90', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998093', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '22ms', 'x-request-id': 'req_cc8ec15161e1617fd857499d82793e4c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e96e216ea1d9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cc8ec15161e1617fd857499d82793e4c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 05:21:13. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n80 \\n \\n \\n\u0420\u0438\u0441\u0443\u043d\u043e\u043a 13.4 - \u041a\u0440\u0435\u043f\u043b\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u043e\u0432\u043e\u0434\u043e\u0432 \\n \\n\u0420\u0438\u0441\u0443\u043d\u043e\u043a 13.5-\u0420\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0440\u0441\u0442\u0438\u044f \u0434\u043b\u044f \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430 \u0442\u0440\u0443\u0431 \u0438 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043a\u0438 \u0432 \u0431\u0430\u043b\u043a\u0430\u0445 \\n\u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u044f \\n13.4.2 \u0423\u043c\u044b\u0432\u0430\u043b\u044c\u043d\u0438\u043a\u0438 \u0438 \u0432\u0430\u043d\u043d\u044b \u043a\u0440\u0435\u043f\u044f\u0442\u0441\u044f \u043a \u0441\u0442\u043e\u0439\u043a\u0430\u043c \u043d\u0435\u0441\u0443\u0449\u0438\u0445 \u0441\u0442\u0435\u043d, \u043a\u0430\u043a \u0443\u043a... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 02:21:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2095', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794454', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '415ms', 'x-request-id': 'req_388cb67ac7cbb283613ec99af975fee5', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=B4CmNVI8v1MCXKU7L2IsYubue3ROmfHReqz_AwuV6iE-1732760476-1.0.1.1-P0A3q0VttyjTvoCbnNIfM109i.wlx.uGj6PoZ4S4Rq.XTJphrxscwzTqSGDLr77HV65XPFD.ytDjuf5pL5pfMg; path=/; expires=Thu, 28-Nov-24 02:51:16 GMT; domain=.api.o... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_388cb67ac7cbb283613ec99af975fee5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:16", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8606353522248418", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:16", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0414\u0430, \u0443\u043a\u043b\u043e\u043d\u044b \u0442\u0440\u0443\u0431 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u043f\u043b\u0430\u043d\u0430\u0445 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431. \u0423\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u043a\u043b\u043e\u043d\u043e\u0432 \u0432\u0430\u0436\u043d\u043e \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0433\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u0442 \u044d\u0442\u043e\u0433\u043e \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0435 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434. \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u0441\u043e\u0440\u043e\u0432 \u0438 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0442\u0432\u043e\u0434 \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0430 \u0447\u0435\u0440\u0442\u0435\u0436\u0430\u0445 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0443 \u0443\u043a\u043b\u043e\u043d\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0442\u0440\u0443\u0431\u044b.\\n\\n------------------\\nReferences:\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 79, 81\\n\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f_\u0421\u041f 30.13330.2020.pdf, pages: 21, 53\\n', {'\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf', '\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f_\u0421\u041f 30.13330.2020.pdf'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:16", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:17", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:17", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='061d13d6-e62c-421f-adb2-7e87cddf837b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 05:21:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:15", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-28 10:00:17", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-28 10:00:17", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-28 10:00:17", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-28 10:00:31", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:32", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:32", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:32", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:32", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:32", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:33", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:33", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:33", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 0, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2500, supergroup_chat_created=False, text='/start'), update_id=881193638), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F378A8EC0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:33", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000021F377535B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:33", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:33", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:34", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:36", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:36", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:37", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:37", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/language'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:37", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: language with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 0, 35, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=9, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2502, supergroup_chat_created=False, text='/language'), update_id=881193639), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F378AA0B0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: language with result: <coroutine object BotHandlers.language at 0x0000021F378F0D00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:37", "name": "handlers", "levelname": "INFO", "message": "Prompted language selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:37", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:38", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:38", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:38", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:38", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_language:Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_language:Russian', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660074844335', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 0, 36, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2503, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), (InlineKeyboardButton(callback_data='set_language:Indonesian', text='Indones... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x0000021F37753220>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:39", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'Russian' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:39", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 set language to 'Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:39", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:41", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:42", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:42", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:42", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:42", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 0, 40, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2505, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193641), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F378AB770>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:42", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000021F14760CA0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:42", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:42", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:Indonesian Regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:Indonesian Regulations', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658680397094', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 0, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2506, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations')... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000021F3756B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\indonesian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "handlers", "levelname": "DEBUG", "message": "Found 19 valid files in folder_path='E:\\knowledge_base\\indonesian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'E:\\\\knowledge_base\\\\indonesian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\indonesian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'E:\\\\knowledge_base\\\\indonesian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\indonesian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\indonesian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:45", "name": "handlers", "levelname": "INFO", "message": "Knowledge base 'Indonesian Regulations' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:45", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:51", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:52", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:52", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:52", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/language'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: language with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 0, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=9, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2508, supergroup_chat_created=False, text='/language'), update_id=881193643), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F378AB770>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: language with result: <coroutine object BotHandlers.language at 0x0000021F378F0F20>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:52", "name": "handlers", "levelname": "INFO", "message": "Prompted language selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:53", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_language:Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_language:Russian', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661524556094', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 0, 51, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2509, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), (InlineKeyboardButton(callback_data='set_language:Indonesian', text='Indones... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x0000021F378E2B00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'Russian' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 set language to 'Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:57", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:59", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:59", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:59", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:59", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/status'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:59", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: status with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 0, 58, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=7, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2511, supergroup_chat_created=False, text='/status'), update_id=881193645), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F378AB770>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:00:59", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: status with result: <coroutine object BotHandlers.status at 0x0000021F3775ACE0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:01:00", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 164 of document 'GUBERNUR BALI PERATURAN DAERAH PROVINSI BALI.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:01:01", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 1 of document 'Persyaratan Umum Instalasi Listrik 2000 - SNI 04-0225-2000.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:01:06", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 1 of document 'SNI-03-7065-2005-plambing.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:01:13", "name": "handlers", "levelname": "INFO", "message": "Provided status to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:01:13", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u0439\u0441\u043c\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c \u043c\u043e\u0441\u0442\u043e\u0432?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 3, 36, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2513, supergroup_chat_created=False, text='\u041a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u0439\u0441\u043c\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c \u043c\u043e\u0441\u0442\u043e\u0432?'), update_id=881193646), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F26AC0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021F37A38CC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='30dfeb22-ced1-41ba-b43e-028198ab30fd' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='30dfeb22-ced1-41ba-b43e-028198ab30fd'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:37", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, '\u041a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u0439\u0441\u043c\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c \u043c\u043e\u0441\u0442\u043e\u0432?'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u0439\u0441\u043c\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c \u043c\u043e\u0441\u0442\u043e\u0432?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041d\u0443\u0436\u043d\u043e \u043b\u0438 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d\u044b \u0442\u0440\u0443\u0431 \u043d\u0430 \u043f\u043b\u0430\u043d\u0430\u0445 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0414\u0430, \u0443\u043a\u043b\u043e\u043d\u044b \u0442\u0440\u0443\u0431 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u043f\u043b\u0430\u043d\u0430\u0445 \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431. \u0423\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0443\u043a\u043b\u043e\u043d\u043e\u0432 \u0432\u0430\u0436\u043d\u043e \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0433\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438, \u0442\u0430\u043a \u043a\u0430\u043a \u043e\u0442 \u044d\u0442\u043e\u0433\u043e \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0435 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434. \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u0441\u043e\u0440\u043e\u0432 \u0438 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043e\u0442\u0432\u043e\u0434 \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0430 \u0447\u0435\u0440\u0442\u0435\u0436\u0430\u0445 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0432\u0435\u043b\u0438\u0447\u0438\u043d\u0443 \u0443\u043a\u043b\u043e\u043d\u0430 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0442\u0440\u0443\u0431\u044b.\\n\\n------------------\\nReferences:\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 79, 81\\n\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f_\u0421\u041f 30.1333... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6B9C0>, 'json_data': {'input': [[27435, 16248, 16742, 18868, 76559, 60488, 18600, 25698, 3865, 11320, 20346, 8341, 5524, 21708, 2297, 6578, 25262, 16742, 4898, 97747, 11562, 25262, 6856, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:38", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Thu, 28 Nov 2024 07:03:40 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '161'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999975'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_f8f66e06dbedcfe453e11239794056a5'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=ig4Ia8rwtVYQqDG8.UvIz_TRhJn.xLxTyFFyGKPm4GQ-1732777420-1.0.1.1-GKPp5diu1L1AE0Ptz0ntKlo7ecZQK7YnJZshF... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f8f66e06dbedcfe453e11239794056a5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194CC0>, 'json_data': {'input': [[27435, 16248, 16742, 18868, 76559, 60488, 18600, 25698, 3865, 11320, 20346, 8341, 5524, 21708, 2297, 6578, 25262, 16742, 4898, 97747, 11562, 25262, 6856, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:03:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '121', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999975', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_c6352421de1a29aab3bd5f105f13656c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e987fdeac78c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c6352421de1a29aab3bd5f105f13656c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194CC0>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 22, 25, 2366, 15, 720, 17313, 25177, 220, 13121, 33006, 48547, 56587, 720, 29518, 10229, 315, 3314, 29866, 323, 30978, 64239, 320, 32, 1950, 2607, 46, 570, 45650, 14938, 720, 14024, 2955, 29803, 11, 220, 22, 339, 3279, 2637, 220, 679, 19, 11, 449, 220, 679, 20, 41653, 54862, 11, 362, 1950, 2607, 46, 11, 720, 39231, 11, 11162, 13, 33006, 29518, 13581, 315, 51684, 49796, 320, 1950, 7614, 570, 320, 679, 18, 570, 3778, 5426, 5410, 720, 82, 39718, 2082, 369, 12231, 3046, 323, 27533, 3... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:03:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '84', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999194', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_00c2d1fbc37927576e0258a676de4942', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e987fe10dfec02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_00c2d1fbc37927576e0258a676de4942", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194CC0>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 21, 25, 679, 24, 720, 20644, 426, 19503, 220, 679, 24, 720, 8929, 25177, 220, 13895, 33006, 47, 833, 526, 74, 27105, 25177, 84044, 94033, 90988, 276, 597, 519, 458, 424, 88748, 2004, 1297, 263, 59597, 15907, 85795, 21045, 720, 32390, 53857, 16623, 6502, 278, 220, 868, 13, 19, 13, 24, 25177, 5871, 2152, 14, 937, 40, 220, 22, 13, 435, 10114, 269, 37673, 53167, 32911, 85564, 258, 10426, 387, 6993, 32911, 720, 42201, 278, 220, 17, 13, 16, 9279, 220, 17, 13, 17, 38660, 220, 16, 13, 15... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:03:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '131', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999006', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_410437b8cf22c66a9e54f9fd9c6c4e41', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e987fe7ea3fc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_410437b8cf22c66a9e54f9fd9c6c4e41", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194CC0>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 22, 25, 2366, 15, 720, 2721, 25177, 220, 13121, 720, 1950, 2152, 14, 937, 40, 220, 3174, 12, 1032, 11, 1369, 55194, 40388, 323, 58498, 315, 69571, 74248, 11, 3778, 720, 50, 6180, 315, 16803, 49796, 11, 220, 679, 19, 13, 720, 34, 1639, 304, 25, 60137, 220, 21, 13, 23, 13, 18, 13, 20, 13, 17, 13, 17, 323, 220, 21, 13, 1032, 13, 17, 13, 16, 720, 9, 9173, 6157, 27766, 73766, 58385, 507, 946, 5975, 2818, 12, 8878, 11, 35653, 11, 14577, 11, 323, 720, 1360, 54791, 369, 86748, 40388, 315... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:03:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '136', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999789', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_76c2c64deb22c4b2b60c7e64ee4a6409', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e987fee0df6c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_76c2c64deb22c4b2b60c7e64ee4a6409", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194CC0>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 22, 25, 2366, 15, 720, 3076, 25177, 220, 13121, 33006, 79984, 2308, 220, 21, 13, 23, 12, 16, 482, 2893, 6993, 17634, 13005, 48756, 355, 387, 6993, 220, 17, 9279, 220, 18, 720, 51, 786, 220, 21, 13, 23, 12, 16, 482, 435, 10114, 269, 20801, 287, 72155, 20166, 31894, 24409, 258, 309, 11755, 9279, 387, 6993, 3242, 587, 720, 42, 32334, 10025, 24551, 72155, 720, 10155, 52, 198, 40, 27907, 42, 32334, 54463, 24551, 26132, 62103, 8105, 720, 16, 11, 15, 720, 42, 32334, 54463, 24551, 26132,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:03:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '66', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999689', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_edabbc4098d2ce5165896fdf4e5bf654', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e987ff50a9fc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_edabbc4098d2ce5165896fdf4e5bf654", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:03:45. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u201cHak cipta Badan Standardisasi Nasional, copy standar ini dibuat untuk Sub KT 91-01-S4 Bahan, Sain, Struktur & Konstruksi Bangunan, dan tidak untuk dikomersialkan\u201d \\nSNI 1727:2020 \\n293 dari 302 \\n \\nReferensi \\nAmer... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Thu, 28 Nov 2024 07:03:47 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '2529'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '796230'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '282ms'), ('x-request-id', 'req_ce28f52a384cbd37af1ff4b366600c49'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=jLhc5SNanFMjYhnBNEbRtw_9A.aJ_az3nCqbK.ac9a0-1732777427-1.0.1.1-mY6aV6Yol82yTWhPcQpINAKg3GQtK9k9U0ZbUi1A2Bn5KhVfsWX5qwa9bWEjc.zdIyfooyBE7C3jMiIL64yScg; path=/; expires=Thu, 28... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ce28f52a384cbd37af1ff4b366600c49", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:48", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.7853607240391706, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:48", "name": "llm_service", "levelname": "DEBUG", "message": "Similarity threshold not met. Returning answer without references.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:48", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442, \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u0441\u0435\u0439\u0441\u043c\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c \u043c\u043e\u0441\u0442\u043e\u0432, \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u0441\u043d\u043e\u0432\u0430\u043d \u043d\u0430 \u043c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u0445, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 AASHTO (American Association of State Highway and Transportation Officials) \u0434\u043b\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043c\u043e\u0441\u0442\u043e\u0432 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u0435\u0439\u0441\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0435. \u0412 \u0420\u043e\u0441\u0441\u0438\u0438 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u0442\u0440\u0430\u043d\u0430\u0445 \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0430\u0434\u0430\u043f\u0442\u0438\u0440\u0443\u044e\u0442 \u043c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c.\\n\\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0438\u043c\u0435\u0435\u0442\u0435 \u0432 \u0432\u0438\u0434\u0443 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442, \u0442\u043e \u044d\u0442\u043e \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0421\u0432\u043e\u0434 \u041f\u0440\u0430\u0432\u0438\u043b (\u0421\u041f), \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0441\u0442\u043e\u0432 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0441\u0435\u0439\u0441\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439. \u0414\u043b\u044f \u0431\u043e\u043b\u0435\u0435 \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0439 \u0440\u0435\u0434\u0430\u043a\u0446\u0438\u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0432 \u0432\u0430\u0448\u0435\u0439 \u0441\u0442\u0440\u0430\u043d\u0435.', None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:48", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:49", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:49", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='30dfeb22-ced1-41ba-b43e-028198ab30fd'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:03:49", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:22", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:22", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='Standar apa yang mengatur ketahanan gempa jembatan?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 4, 21, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2515, supergroup_chat_created=False, text='Standar apa yang mengatur ketahanan gempa jembatan?'), update_id=881193647), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F25320>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021F37A38CC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='e72a4011-f421-4db9-a82f-bee349683aed' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='e72a4011-f421-4db9-a82f-bee349683aed'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'Standar apa yang mengatur ketahanan gempa jembatan?'), kwargs: {'chat_history': [HumanMessage(content='Standar apa yang mengatur ketahanan gempa jembatan?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u0439\u0441\u043c\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c \u043c\u043e\u0441\u0442\u043e\u0432?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442, \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u0441\u0435\u0439\u0441\u043c\u043e\u0441\u0442\u043e\u0439\u043a\u043e\u0441\u0442\u044c \u043c\u043e\u0441\u0442\u043e\u0432, \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u0441\u043d\u043e\u0432\u0430\u043d \u043d\u0430 \u043c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f\u0445, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 AASHTO (American Association of State Highway and Transportation Officials) \u0434\u043b\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043c\u043e\u0441\u0442\u043e\u0432 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u0435\u0439\u0441\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0435. \u0412 \u0420\u043e\u0441\u0441\u0438\u0438 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u0442\u0440\u0430\u043d\u0430\u0445 \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0430\u0434\u0430\u043f\u0442\u0438\u0440\u0443\u044e\u0442 \u043c\u0435\u0436\u0434\u0443\u043d\u0430\u0440\u043e\u0434\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c.\\n\\n\u0415\u0441\u043b\u0438 \u0432\u044b \u0438\u043c\u0435\u0435\u0442\u0435 \u0432 \u0432\u0438\u0434\u0443 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442, \u0442\u043e \u044d\u0442\u043e \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0421\u0432\u043e\u0434 \u041f\u0440\u0430\u0432\u0438\u043b (... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021FA01B1120>, 'json_data': {'input': [[49833, 277, 61693, 10587, 20309, 2693, 32381, 22826, 276, 342, 3342, 64, 503, 9034, 16623, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:04:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '158', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999984', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_1abf3f1a184f40c57870910369d03722', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9880e4e9b42df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1abf3f1a184f40c57870910369d03722", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:24", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194C20>, 'json_data': {'input': [[49833, 277, 61693, 10587, 20309, 2693, 32381, 22826, 276, 342, 3342, 64, 503, 9034, 16623, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:04:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '150', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999983', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_5ec9bf04b8a6a983eae75eacbf4ace9d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9880ec6fff2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5ec9bf04b8a6a983eae75eacbf4ace9d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194C20>, 'json_data': {'input': [[54672, 1111, 198, 790, 39735, 1669, 85602, 198, 35596, 1294, 984, 198, 3472, 6353, 2078, 1111, 735, 9377, 98865, 48818, 1111, 77457, 1669, 85602, 16473, 1294, 984, 198, 45, 1937, 878, 220, 25298, 14, 3472, 47, 14, 7497, 45, 14, 717, 14, 679, 24, 198, 51, 1863, 5330, 198, 47, 965, 1372, 2599, 1111, 4015, 4064, 946, 16473, 1294, 984, 19877, 61389, 5987, 220, 10861, 21, 25, 679, 24, 350, 4586, 28876, 32, 198, 9851, 16624, 39874, 1111, 735, 21352, 39, 1111, 1111, 480, 2783, 8201, 549, 6542, 25554, 12428, 25554, 51, 1539, 426, 5330, 1899, 1111, 198, 46622, 61102, 84510, 452, 7691, 1507, 61102, 5161, 33, 1929, 15836, 3680, 58427, 40, 97227, 75, 4015, 4064, 946, 16473, 1294, 984, 198, 5358, 61389, 5987, 220, 10861, 21, 25, 679, 17, 350, 4586, 28876, 32, 18335, 16624, 39874, 1111, 735, 21352, 39, 1111, 1111, 480, 27... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:04:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '95', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999517', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_328817eb8ac4c1738cfcfe9bfb762f84', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9880f3addd2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_328817eb8ac4c1738cfcfe9bfb762f84", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194C20>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 21, 25, 679, 24, 720, 20644, 426, 19503, 220, 679, 24, 720, 12994, 25177, 220, 13895, 33006, 33006, 720, 79984, 2308, 220, 868, 1389, 15521, 17684, 587, 14531, 1494, 328, 82, 11, 342, 3342, 64, 90244, 2411, 10587, 24522, 531, 21495, 87112, 10025, 24551, 12, 466, 5775, 320, 11865, 643, 8, 31331, 85174, 24922, 20166, 720, 34474, 74, 376, 372, 4294, 220, 15, 11, 17, 92004, 1609, 320, 1171, 13005, 597, 38090, 220, 20, 1034, 8]], 'model': 'text-embedding-ada-002', 'encoding_format': '... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:04:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '118', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999866', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_c6f0261a0b83f56e032bdec2977c49bf', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9880fa4b262df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c6f0261a0b83f56e032bdec2977c49bf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194C20>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 21, 25, 679, 24, 720, 20644, 426, 19503, 220, 679, 24, 720, 11727, 25177, 220, 13895, 33006, 33006, 79984, 2308, 220, 845, 1389, 15521, 17684, 587, 14531, 1494, 11, 328, 16, 11, 342, 3342, 64, 90244, 3375, 10587, 24522, 531, 21495, 87112, 10025, 24551, 12, 466, 5775, 320, 11865, 643, 8, 31331, 85174, 24922, 20166, 720, 34474, 74, 376, 372, 4294, 220, 15, 11, 17, 12, 3474, 1609, 320, 1171, 13005, 597, 38090, 220, 20, 1034, 8]], 'model': 'text-embedding-ada-002', 'encoding_format':... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:04:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '92', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999864', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_d5392c9abb717580651428693f9d4909', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e988100a8622df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d5392c9abb717580651428693f9d4909", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F36194C20>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 22, 25, 2366, 15, 720, 20644, 426, 19503, 220, 2366, 15, 720, 1954, 25177, 220, 13121, 720, 51, 797, 19148, 14531, 1494, 304, 10109, 25177, 387, 6993, 72155, 9279, 31469, 1247, 59597, 5213, 300, 68304, 30892, 720, 716, 23306, 52288, 1028, 8826, 276, 21901, 10426, 13, 15448, 3178, 43029, 12874, 72155, 597, 974, 2191, 1609, 85644, 10587, 2024, 93146, 720, 325, 46597, 17774, 581, 266, 25177, 342, 3342, 64, 85644, 11, 80264, 13532, 14531, 1494, 1891, 2798, 266, 9279, 14175, 26261, 27... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:04:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999025', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_ef237dceb6798116f8b0e1f529710e19', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9881030a132df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ef237dceb6798116f8b0e1f529710e19", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:04:29. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\nBADAN\\nSTANDARDISASI\\nNASIONAL\\nKEPUTUSAN KEPALA BADAN STANDARDISASI NASIONAL\\nNOMOR 693/KEP/BSN/12/2019\\nTENTANG\\nPENETAPAN STANDAR NASIONAL INDONESIA 1726:2019 TATA CARA\\nPERENCANAAN KETAHANAN GEMPA UNTUK STRUKTUR ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:04:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1380', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '797089', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '218ms', 'x-request-id': 'req_3c299fb8c523ffac207c74c1b06f339e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9881099b6ac02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3c299fb8c523ffac207c74c1b06f339e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:31", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8708886704270639, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:31", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('Standar yang mengatur ketahanan gempa jembatan di Indonesia adalah SNI 2833:2016. Standar ini memberikan panduan dan persyaratan teknis untuk perencanaan dan perancangan jembatan agar dapat menahan beban gempa, memastikan keamanan dan stabilitas struktur jembatan selama dan setelah terjadinya gempa.\\n\\n------------------\\nReferences:\\nSNI_1726_2019_Persyaratan_Beton_Struktural_Untuk_Bangunan_Gedung.pdf, pages: 1, 244, 245\\nSNI 1727 2020_Beban desain minimum dan kriteria terkait .pdf, pages: 121\\n', {'SNI_1726_2019_Persyaratan_Beton_Struktural_Untuk_Bangunan_Gedung.pdf', 'SNI 1727 2020_Beban desain minimum dan kriteria terkait .pdf'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:31", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:32", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:32", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='e72a4011-f421-4db9-a82f-bee349683aed'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:04:32", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:44", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:44", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:44", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 6, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2517, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193648), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F27EE0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000021F37B17520>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:45", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:45", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:Indonesian Regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:Indonesian Regulations', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658390064394', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 6, 44, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2518, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations')... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000021F378A2C40>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\indonesian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "handlers", "levelname": "DEBUG", "message": "Found 19 valid files in folder_path='E:\\knowledge_base\\indonesian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'E:\\\\knowledge_base\\\\indonesian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\indonesian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'E:\\\\knowledge_base\\\\indonesian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "llm_service", "levelname": "ERROR", "message": "Failed to load vector store from E:\\knowledge_base\\indonesian_regulations\\vector_store: Error in __cdecl faiss::FileIOReader::FileIOReader(const char *) at D:\\a\\faiss-wheels\\faiss-wheels\\faiss\\faiss\\impl\\io.cpp:68: Error: 'f' failed: could not open E:\\knowledge_base\\indonesian_regulations\\vector_store\\index.faiss for reading: No such file or directory", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: False", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:47", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: Daftar SNI Teknik Sipil Arsitektur dan Lingkungan.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:48", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: GUBERNUR BALI PERATURAN DAERAH PROVINSI BALI.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:48", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: Peraturan Bupati Badung Nomor 28 Tahun 2023.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:49", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: Perda-Nomor-9-Tahun-2013-Tentang-Bangunan-Gedung.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:49", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: perdes_nomor_3_tahun_2021_tentang_rencana_tata_ruang_wilayah_desa.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:49", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: Persyaratan Umum Instalasi Listrik 2000 - SNI 04-0225-2000.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:52", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: RISBT-FINAL-APRESIASI-REV-Bedah-Buku-Jimmy-Yuwana-pdf.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:52", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI 03-1736-2000 Sistem Proteksi Pasif.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:53", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI 1727 2020_Beban desain minimum dan kriteria terkait .pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:53", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI 1729-2015 Spesifikasi untuk bangunan gedung baja struktural.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:53", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI 6481-2000 Sistem plumbing.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:53", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI 8153-2015_Sistem plambing pada bangunan gedung.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:53", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI-03-6572-2001 Sistem Ventilasi dan Pengkondisian Udara.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:53", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI-03-7065-2005-plambing.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:55", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI-2847-2019-Persyaratan-Beton-Struktural-Untuk-Bangunan-Gedung-1.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:55", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI-6389_2020-Konservasi-Energi-Selubung-Bangunan-Pada-Bangunan-Gedung.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:57", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI_1726_2019_Persyaratan_Beton_Struktural_Untuk_Bangunan_Gedung.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:57", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI_2052-2002-2017_Baja tulangan beton.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:59", "name": "llm_service", "levelname": "INFO", "message": "Loaded PDF document: SNI_2847_2019_Persyaratan_Beton_Struktural_Untuk_Bangunan_Gedung.pdf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:59", "name": "llm_service", "levelname": "DEBUG", "message": "Skipped unsupported file type: vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:06:59", "name": "llm_service", "levelname": "INFO", "message": "Split documents into 4896 chunks.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021FA77D82C0>, 'json_data': {'input': [[31516, 47301, 220, 328, 15259, 220, 426, 22826, 24277, 496, 84, 32160, 17343, 65734, 9279, 1050, 74, 352, 15790, 328, 575, 321, 720, 260, 320, 82, 900, 551, 16406, 735, 1133, 7414, 393, 52316, 5697, 276, 24218, 372, 11, 32421, 220, 975, 386, 11554, 220, 679, 16, 340, 66552, 526, 25, 33006, 720, 2822, 41502, 526, 198, 49833, 277, 198, 41, 31427, 198, 36294, 7053, 720, 56815, 26209, 720, 35919, 70014, 3178, 720, 56815, 26209, 720, 7749, 198, 35773, 536, 198, 51, 13, 80013, 720, 6540, 288, 78450, 27907, 2864, 2864, 198, 16, 198, 77197, 1494, 198, 3080, 198, 1114, 198, 18, 198, 4044, 198, 806, 198, 15, 198, 3264, 198, 17, 198, 59500, 10602, 198, 23, 198, 19, 198, 15, 198, 717, 198, 17, 198, 15, 198, 975, 198, 18, 198, 50, 291, 27236, 198, 21, 198, 16, 198, 15, 198, 22, 198, 15, 198, 15, 198, 22, 198, 19, 198, 33... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:07:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6592', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4245492', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9.054s', 'x-request-id': 'req_31e70daaa1d4d5e89498915453312806', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9884cc6d93e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_31e70daaa1d4d5e89498915453312806", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021FA01B3B00>, 'json_data': {'input': [[50, 15259, 220, 2371, 12, 18642, 20, 12, 1049, 15, 33006, 11727, 720, 21, 13, 21, 13, 19, 13, 18, 720, 43, 14041, 276, 10587, 4170, 95204, 20166, 4562, 72, 8985, 64, 1375, 9279, 4371, 27105, 59597, 25177, 94351, 720, 41345, 259, 22826, 2024, 32345, 391, 597, 7304, 23014, 924, 17156, 10587, 294, 13154, 61175, 71, 8826, 13, 33006, 21, 13, 21, 13, 20, 220, 27790, 621, 268, 342, 37069, 72848, 8115, 720, 5996, 21, 13, 21, 13, 20, 13, 16, 720, 83143, 621, 268, 342, 37069, 72848, 8115, 68820, 44180, 337, 11, 78410, 301, 277, 11, 29062, 84, 11, 274, 6577, 278, 11, 78410, 301, 277, 33297, 720, 36255, 720, 74, 675, 266, 720, 64183, 27780, 2234, 720, 13279, 355, 720, 76, 3342, 359, 88, 2192, 720, 74, 336, 1141, 10602, 720, 41345, 720, 9459, 85795, 720, 67, 18763, 720, 64183, 62375, 72198, 13, 33006, 21, 13, 21, 13, 20,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:07:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '4562', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4446891', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '6.637s', 'x-request-id': 'req_af175b5677dfe8a83d206338f6c054a2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98851d8b14e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_af175b5677dfe8a83d206338f6c054a2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021FA01B3B00>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 21975, 720, 8596, 5169, 1940, 43698, 1609, 8882, 288, 3067, 324, 66070, 526, 32911, 31079, 2308, 220, 975, 13, 1627, 70937, 720, 5794, 70014, 68304, 8882, 288, 25177, 3805, 1048, 19148, 10587, 1550, 4202, 66070, 526, 20166, 720, 64183, 62375, 276, 37786, 6200, 546, 55504, 27306, 9279, 2004, 716, 10036, 276, 6348, 343, 10426, 79886, 13, 36378, 526, 720, 3935, 3178, 3805, 597, 10088, 28960, 404, 8826, 2004, 17332, 13192, 13, 33006, 720, 5291, 328, 900, 25, 39322, 404, 11, 220, 2366, 15, 33006, 79984, 2308, 220, 975, 13, 1627, 13, 4923, 43698, 1609, 1322, 9459, 423, 4202, 66070, 526, 6690, 32911, 17343, 65734, 720, 38, 291, 2234, 33006, 68, 8, 220, 328, 900, 6690, 20054, 50848, 33006, 47, 16357, 3716, 16623, 274, 900, 3805, 7064, 50848, 43469, 78083, 8859, 84602, 10587, 72... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:07:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:07:57 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6086', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4282443', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8.61s', 'x-request-id': 'req_a38b10134fa06930aa3e7bb8459379a7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98856ba87ce77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a38b10134fa06930aa3e7bb8459379a7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021FA01B3B00>, 'json_data': {'input': [[2118, 39, 587, 356, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 14882, 2559, 277, 17225, 42168, 55282, 20166, 5869, 352, 19148, 1891, 8604, 960, 9810, 18487, 1801, 9279, 28380, 20166, 1891, 11129, 388, 532, 8826, 863, 33006, 33006, 33006, 33006, 720, 50, 15259, 220, 23582, 18, 25, 679, 20, 720, 20644, 426, 19503, 220, 679, 20, 720, 6550, 25177, 220, 10350, 33006, 51, 786, 220, 1313, 482, 356, 2910, 258, 274, 3042, 52288, 29325, 33006, 52, 74, 27105, 24547, 64, 720, 68183, 8, 720, 52, 74, 27105, 9145, 1122, 720, 67, 17243, 320, 3906, 8, 720, 36793, 38627, 720, 68183, 8, 720, 39379, 266, 8187, 720, 7, 1549, 8, 720, 843, 2355, 8258, 720, 2397, 720, 20213, 720, 1272, 2355, 14206, 720, 1490, 720, 23505, 720, 1135, 2355, 20698, 720, 1041, 720, 9800, 19, 33006, 33006, 720, 23, 13, 19, 13, 1691, 720, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6451', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4173681', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9.915s', 'x-request-id': 'req_69305cbb0fd76b569ff9ac6058d83177', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9886454834e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_69305cbb0fd76b569ff9ac6058d83177", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021FA01B3B00>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 21, 25, 679, 24, 720, 20644, 426, 19503, 220, 679, 24, 720, 4218, 25177, 220, 13895, 720, 51, 786, 220, 777, 1389, 435, 10114, 269, 3679, 32160, 8485, 64, 951, 467, 18205, 1658, 5835, 11, 19766, 720, 50, 67521, 18205, 1658, 5835, 33006, 51, 17172, 546, 1098, 14748, 261, 10335, 40820, 1098, 48907, 324, 720, 33, 35794, 1867, 294, 1224, 4781, 10587, 1550, 288, 467, 15907, 85795, 328, 15259, 220, 17058, 22, 9279, 720, 42201, 278, 220, 975, 13, 17, 5871, 2152, 14, 937, 40, 220, 22, 12... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '8107', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4211809', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9.458s', 'x-request-id': 'req_d4af1af9b097ff198829e8ab92ec11e8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9886a11997e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d4af1af9b097ff198829e8ab92ec11e8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:31", "name": "llm_service", "levelname": "INFO", "message": "Documents successfully indexed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:32", "name": "llm_service", "levelname": "INFO", "message": "Vector store saved to E:\\knowledge_base\\indonesian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:32", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Documents successfully indexed and vector store saved.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:35", "name": "handlers", "levelname": "INFO", "message": "Knowledge base 'Indonesian Regulations' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:35", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='Standar apa yang mengatur ketahanan gempa jembatan?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 8, 45, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2520, supergroup_chat_created=False, text='Standar apa yang mengatur ketahanan gempa jembatan?'), update_id=881193650), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F27EE0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021FA639C360>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='7f4a445d-610d-4e04-b996-ed225c67d101' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='7f4a445d-610d-4e04-b996-ed225c67d101'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'Standar apa yang mengatur ketahanan gempa jembatan?'), kwargs: {'chat_history': [HumanMessage(content='Standar apa yang mengatur ketahanan gempa jembatan?', additional_kwargs={}, response_metadata={}), HumanMessage(content='Standar apa yang mengatur ketahanan gempa jembatan?', additional_kwargs={}, response_metadata={}), AIMessage(content='Standar yang mengatur ketahanan gempa jembatan di Indonesia adalah SNI 2833:2016. Standar ini memberikan panduan dan persyaratan teknis untuk perencanaan dan perancangan jembatan agar dapat menahan beban gempa, memastikan keamanan dan stabilitas struktur jembatan selama dan setelah terjadinya gempa.\\n\\n------------------\\nReferences:\\nSNI_1726_2019_Persyaratan_Beton_Struktural_Untuk_Bangunan_Gedung.pdf, pages: 1, 244, 245\\nSNI 1727 2020_Beban desain minimum dan kriteria terkait .pdf, pages: 121', additional_kwargs={}, response_metadata={}), HumanM... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F35509EE0>, 'json_data': {'input': [[49833, 277, 61693, 10587, 20309, 2693, 32381, 22826, 276, 342, 3342, 64, 503, 9034, 16623, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '70', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999984', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_22f154f22ae3f2604752e46f6f58af26', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9887538a0d5e9a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_22f154f22ae3f2604752e46f6f58af26", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F35509EE0>, 'json_data': {'input': [[49833, 277, 61693, 10587, 20309, 2693, 32381, 22826, 276, 342, 3342, 64, 503, 9034, 16623, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '41', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999984', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_32d4a6b94faf69c187e545de0f178ebe', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e988755ec485e9a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_32d4a6b94faf69c187e545de0f178ebe", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F35509EE0>, 'json_data': {'input': [[54672, 1111, 198, 790, 39735, 1669, 85602, 198, 35596, 1294, 984, 198, 3472, 6353, 2078, 1111, 735, 9377, 98865, 48818, 1111, 77457, 1669, 85602, 16473, 1294, 984, 198, 45, 1937, 878, 220, 25298, 14, 3472, 47, 14, 7497, 45, 14, 717, 14, 679, 24, 198, 51, 1863, 5330, 198, 47, 965, 1372, 2599, 1111, 4015, 4064, 946, 16473, 1294, 984, 19877, 61389, 5987, 220, 10861, 21, 25, 679, 24, 350, 4586, 28876, 32, 198, 9851, 16624, 39874, 1111, 735, 21352, 39, 1111, 1111, 480, 2783, 8201, 549, 6542, 25554, 12428, 25554, 51, 1539, 426, 5330, 1899, 1111, 198, 46622, 61102, 84510, 452, 7691, 1507, 61102, 5161, 33, 1929, 15836, 3680, 58427, 40, 97227, 75, 4015, 4064, 946, 16473, 1294, 984, 198, 5358, 61389, 5987, 220, 10861, 21, 25, 679, 17, 350, 4586, 28876, 32, 18335, 16624, 39874, 1111, 735, 21352, 39, 1111, 1111, 480, 27... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '82', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999517', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_09637b85dddd0ac300859b353b78e51b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e988758fedb5e9a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_09637b85dddd0ac300859b353b78e51b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F35509EE0>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 21, 25, 679, 24, 720, 20644, 426, 19503, 220, 679, 24, 720, 12994, 25177, 220, 13895, 33006, 33006, 720, 79984, 2308, 220, 868, 1389, 15521, 17684, 587, 14531, 1494, 328, 82, 11, 342, 3342, 64, 90244, 2411, 10587, 24522, 531, 21495, 87112, 10025, 24551, 12, 466, 5775, 320, 11865, 643, 8, 31331, 85174, 24922, 20166, 720, 34474, 74, 376, 372, 4294, 220, 15, 11, 17, 92004, 1609, 320, 1171, 13005, 597, 38090, 220, 20, 1034, 8]], 'model': 'text-embedding-ada-002', 'encoding_format': '... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '114', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999865', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_8acafb016f3b7e7d4c22503e2c46a19d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98875b69415e9a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8acafb016f3b7e7d4c22503e2c46a19d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F35509EE0>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 21, 25, 679, 24, 720, 20644, 426, 19503, 220, 679, 24, 720, 11727, 25177, 220, 13895, 33006, 33006, 79984, 2308, 220, 845, 1389, 15521, 17684, 587, 14531, 1494, 11, 328, 16, 11, 342, 3342, 64, 90244, 3375, 10587, 24522, 531, 21495, 87112, 10025, 24551, 12, 466, 5775, 320, 11865, 643, 8, 31331, 85174, 24922, 20166, 720, 34474, 74, 376, 372, 4294, 220, 15, 11, 17, 12, 3474, 1609, 320, 1171, 13005, 597, 38090, 220, 20, 1034, 8]], 'model': 'text-embedding-ada-002', 'encoding_format':... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '84', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999865', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_e3f40744bcebd9751166c49cc8265f54', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98875ddb705e9a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e3f40744bcebd9751166c49cc8265f54", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F35509EE0>, 'json_data': {'input': [[2118, 39, 587, 272, 11696, 64, 11717, 276, 12028, 285, 10426, 39322, 4001, 11, 3048, 2559, 277, 17225, 42168, 55282, 20166, 3804, 78561, 220, 5925, 12, 1721, 6354, 19, 426, 22826, 11, 328, 467, 11, 4610, 86056, 612, 24277, 496, 84, 32160, 17343, 65734, 11, 9279, 28380, 20166, 47299, 69638, 532, 8826, 863, 720, 50, 15259, 220, 10861, 22, 25, 2366, 15, 720, 20644, 426, 19503, 220, 2366, 15, 720, 1954, 25177, 220, 13121, 720, 51, 797, 19148, 14531, 1494, 304, 10109, 25177, 387, 6993, 72155, 9279, 31469, 1247, 59597, 5213, 300, 68304, 30892, 720, 716, 23306, 52288, 1028, 8826, 276, 21901, 10426, 13, 15448, 3178, 43029, 12874, 72155, 597, 974, 2191, 1609, 85644, 10587, 2024, 93146, 720, 325, 46597, 17774, 581, 266, 25177, 342, 3342, 64, 85644, 11, 80264, 13532, 14531, 1494, 1891, 2798, 266, 9279, 14175, 26261, 27... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '61', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999025', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_66dec0da75ba824d95d01770afed7603', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9887602d795e9a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_66dec0da75ba824d95d01770afed7603", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:08:49. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\nBADAN\\nSTANDARDISASI\\nNASIONAL\\nKEPUTUSAN KEPALA BADAN STANDARDISASI NASIONAL\\nNOMOR 693/KEP/BSN/12/2019\\nTENTANG\\nPENETAPAN STANDAR NASIONAL INDONESIA 1726:2019 TATA CARA\\nPERENCANAAN KETAHANAN GEMPA UNTUK STRUKTUR ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:08:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1122', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '797343', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '199ms', 'x-request-id': 'req_e7c40aed93768901f72858172152fd81', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e988762c819e791-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e7c40aed93768901f72858172152fd81", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:50", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8708886704270639, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:50", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:50", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('Standar yang mengatur ketahanan gempa jembatan di Indonesia adalah SNI 2833:2016. Standar ini memberikan panduan dan persyaratan teknis untuk perencanaan dan perancangan jembatan agar dapat menahan beban gempa, memastikan keamanan dan stabilitas struktur jembatan selama dan setelah terjadinya gempa.\\n\\n------------------\\nReferences:\\nSNI_1726_2019_Persyaratan_Beton_Struktural_Untuk_Bangunan_Gedung.pdf, pages: 1, 244, 245\\nSNI 1727 2020_Beban desain minimum dan kriteria terkait .pdf, pages: 121\\n', {'SNI_1726_2019_Persyaratan_Beton_Struktural_Untuk_Bangunan_Gedung.pdf', 'SNI 1727 2020_Beban desain minimum dan kriteria terkait .pdf'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:50", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:51", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:51", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='7f4a445d-610d-4e04-b996-ed225c67d101'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:08:51", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:10", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='Cara Uji Kepadatan Berat untuk\nTanah'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 10, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2522, supergroup_chat_created=False, text='Cara Uji Kepadatan Berat untuk\\nTanah'), update_id=881193651), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021FA77D2270>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021FA639C4F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='5608553f-1dd6-4de6-b4cd-98e676787373' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='5608553f-1dd6-4de6-b4cd-98e676787373'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'Cara Uji Kepadatan Berat untuk\\nTanah'), kwargs: {'chat_history': [HumanMessage(content='Cara Uji Kepadatan Berat untuk\\nTanah', additional_kwargs={}, response_metadata={}), HumanMessage(content='Standar apa yang mengatur ketahanan gempa jembatan?', additional_kwargs={}, response_metadata={}), AIMessage(content='Standar yang mengatur ketahanan gempa jembatan di Indonesia adalah SNI 2833:2016. Standar ini memberikan panduan dan persyaratan teknis untuk perencanaan dan perancangan jembatan agar dapat menahan beban gempa, memastikan keamanan dan stabilitas struktur jembatan selama dan setelah terjadinya gempa.\\n\\n------------------\\nReferences:\\nSNI_1726_2019_Persyaratan_Beton_Struktural_Untuk_Bangunan_Gedung.pdf, pages: 1, 244, 245\\nSNI 1727 2020_Beban desain minimum dan kriteria terkait .pdf, pages: 121', additional_kwargs={}, response_metadata={}), HumanMessage(content='Standar apa ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[34, 5169, 549, 7910, 735, 70641, 16623, 9084, 266, 20166, 198, 77197, 1494]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:10:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '70', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999986', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6f4ca9a28fedf4da0065553e69402b57', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98896258302df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6f4ca9a28fedf4da0065553e69402b57", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:12", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[34, 5169, 549, 7910, 735, 70641, 16623, 9084, 266, 20166, 198, 77197, 1494]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:10:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '131', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999986', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_b0063e0ec409f1d7f3ce60ea13bc917d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98896a0e412df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b0063e0ec409f1d7f3ce60ea13bc917d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[18245, 328, 15259, 220, 2839, 12, 22347, 24, 12, 1049, 17, 6344, 536, 52150, 78171, 276, 2140, 2319, 549, 7910, 11, 720, 33, 306, 3178, 11, 60413, 27105, 9279, 735, 14833, 78450, 720, 35773, 536, 17225, 4170, 95204, 20166, 3026, 306, 28824, 274, 333, 266, 1355, 333, 266, 720, 3178, 27105, 9279, 30280, 3178, 79294, 266, 4751, 300, 3178, 14531, 1494, 514, 1331, 2234, 11, 720, 10946, 2933, 9279, 4316, 84, 198, 16460, 328, 15259, 220, 2839, 12, 21897, 15, 12, 1049, 17, 80013, 577, 7910, 49328, 19990, 276, 3805, 1891, 9511, 66844, 720, 3935, 3178, 14531, 1494, 10418, 8248, 404, 15104, 355, 21045, 720, 1303, 8376, 1028, 8826, 3026, 324, 359, 198, 34, 5169, 577, 7910, 17225, 52618, 587, 455, 48034, 577, 7910, 49328, 19990, 276, 3805, 1891, 720, 75, 4422, 66844, 20166, 14531, 1494, 10418, 8248, 404, 15104, 355, 1058... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:10:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '93', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999150', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_2f63a5e79db34fce06d648ed90862b77', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98896efab72df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2f63a5e79db34fce06d648ed90862b77", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[2985, 2931, 198, 1627, 328, 15259, 220, 2839, 12, 5162, 20, 13, 16, 7058, 1049, 15, 198, 35773, 536, 52150, 9832, 1122, 735, 37180, 6690, 25566, 1494, 720, 67, 18763, 1708, 266, 15535, 88, 198, 35773, 536, 17225, 4170, 95204, 20166, 3026, 306, 28824, 75009, 3805, 720, 53691, 1494, 81427, 453, 266, 66583, 198, 1544, 328, 15259, 220, 2839, 12, 5162, 23, 12, 2550, 15, 6344, 536, 52150, 9832, 1122, 67680, 526, 20017, 9667, 720, 50, 3329, 276, 4701, 1610, 266, 20442, 355, 9279, 38642, 277, 198, 35773, 536, 17225, 4170, 95204, 20166, 3026, 306, 28824, 64667, 351, 1122, 720, 8248, 404, 320, 6902, 10426, 8, 79294, 266, 15104, 355, 9279, 79294, 266, 48756, 277, 720, 76, 833, 75805, 274, 3329, 276, 627, 1591, 328, 15259, 220, 2839, 12, 4468, 16, 12, 2550, 15, 6344, 536, 52150, 9832, 1122, 735, 37180, 6690, 4701, 1610,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:10:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '68', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999196', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_113db2b4171098af4ef68ca529998425', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9889715c492df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_113db2b4171098af4ef68ca529998425", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[12375, 24107, 15259, 350, 12, 2705, 12, 1049, 19, 198, 51, 460, 48034, 37786, 3178, 27105, 1208, 8783, 43364, 10426, 720, 53691, 1494, 1891, 24301, 19148, 21045, 720, 76, 833, 75805, 4225, 3036, 88371, 272, 2910, 258, 720, 70, 10018, 320, 35, 220, 18633, 20, 12, 2421, 340, 49833, 277, 17225, 20309, 5808, 23014, 20309, 268, 2192, 259, 460, 48034, 720, 64183, 3178, 27105, 1208, 8783, 43364, 10426, 3805, 2004, 30892, 14531, 1494, 720, 76, 833, 75805, 4225, 3036, 88371, 272, 2910, 258, 342, 10018, 13, 88245, 48034, 17225, 720, 67, 26844, 19371, 51095, 551, 264, 13, 1891, 14175, 26261, 276, 14531, 1494, 39472, 32911, 720, 48259, 278, 13005, 98214, 306, 84, 30892, 342, 10700, 11, 32911, 1208, 10118, 41497, 647, 720, 460, 84, 32911, 2798, 266, 293, 5976, 456, 10426, 26, 293, 13, 32911, 14531, 1494, 10587, 720, 1075... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:10:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '67', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999112', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_ac8acd5c9202240869bca65858e95bbf', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e988976e8822df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ac8acd5c9202240869bca65858e95bbf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[45961, 3042, 62986, 59722, 8936, 10426, 9680, 28999, 37786, 3178, 324, 720, 5132, 5169, 20760, 258, 84, 3026, 306, 28824, 8286, 3805, 20309, 278, 404, 720, 28226, 278, 2005, 23819, 3805, 627, 25090, 328, 15259, 220, 15282, 18, 12, 1049, 23, 198, 34, 5169, 577, 7910, 37700, 266, 14748, 261, 65052, 2234, 14531, 1494, 720, 466, 74, 2439, 5303, 10426, 9279, 2024, 3696, 467, 521, 198, 49833, 277, 17225, 39334, 93066, 93164, 7565, 53857, 16623, 11, 32381, 306, 10602, 11, 720, 66, 5169, 577, 7910, 11, 824, 23306, 52288, 9279, 326, 72839, 76143, 577, 7910, 14748, 261, 720, 65017, 2234, 9279, 10418, 75, 24468, 20166, 577, 7910, 14748, 261, 85307, 16876, 93719, 720, 67, 321, 833, 74, 2113, 21045, 86038, 37786, 531, 1122, 627, 19274, 328, 15259, 220, 16544, 20, 12, 1049, 23, 198, 34, 5169, 577, 7910, 33479, 266, 56534,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:10:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '177', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999119', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_6a366923a65c82bd8d105d2504fd721a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e9889793a5e2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6a366923a65c82bd8d105d2504fd721a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:10:15. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n421 SNI 03-6869-2002 Metode Pengambilan Contoh Uji, \\nBentuk, Ukuran dan Klasifikasi \\nMetode ini digunakan untuk menentukan sifat-sifat \\nukuran dan bentuk agregat termasuk tanah lempung, \\nlanau dan debu\\n422 SNI 0... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:10:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '3690', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '796223', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '283ms', 'x-request-id': 'req_3940834a4b5bfec944f38aeba5008de8', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98897e9b882df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3940834a4b5bfec944f38aeba5008de8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:20", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8708883532097743, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:20", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:20", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('Untuk pengujian kepadatan berat tanah, terdapat beberapa metode yang dapat digunakan, salah satunya adalah metode penggantian volume air pada sumur uji. Standar yang mengatur cara uji ini adalah SNI 03-6872-2002. Metode ini mencakup penentuan kepadatan tanah dan batuan di lapangan dengan menghitung berat isi material menggunakan air untuk mengisi sumur uji. Proses ini digunakan untuk menentukan berat isi material di lapangan yang telah dipadatkan, seperti pada konstruksi timbunan tanah atau urugan jalan. Metode ini juga dapat digunakan untuk mengontrol kualitas konstruksi dengan mengevaluasi material yang telah dipadatkan untuk mencapai berat isi tertentu atau persentase berat isi maksimum yang ditentukan melalui pengujian di laboratorium.\\n\\n------------------\\nReferences:\\nDaftar SNI Teknik Sipil Arsitektur dan Lingkungan.pdf, pages: 5, 51, 69, 96\\n', {'Daftar SNI Teknik Sipil Arsitektur dan Lingkungan.pdf'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:20", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:21", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:21", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='5608553f-1dd6-4de6-b4cd-98e676787373'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:10:21", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='Hello my name is Findus'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 26, 6, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2524, supergroup_chat_created=False, text='Hello my name is Findus'), update_id=881193652), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F26120>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021FA639C040>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='8fbab07d-d6d2-46a3-873e-75514bc1660f' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='8fbab07d-d6d2-46a3-873e-75514bc1660f'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'Hello my name is Findus'), kwargs: {'chat_history': [HumanMessage(content='Hello my name is Findus', additional_kwargs={}, response_metadata={}), HumanMessage(content='Cara Uji Kepadatan Berat untuk\\nTanah', additional_kwargs={}, response_metadata={}), AIMessage(content='Untuk pengujian kepadatan berat tanah, terdapat beberapa metode yang dapat digunakan, salah satunya adalah metode penggantian volume air pada sumur uji. Standar yang mengatur cara uji ini adalah SNI 03-6872-2002. Metode ini mencakup penentuan kepadatan tanah dan batuan di lapangan dengan menghitung berat isi material menggunakan air untuk mengisi sumur uji. Proses ini digunakan untuk menentukan berat isi material di lapangan yang telah dipadatkan, seperti pada konstruksi timbunan tanah atau urugan jalan. Metode ini juga dapat digunakan untuk mengontrol kualitas konstruksi dengan mengevaluasi material yang telah dipa... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F349B18A0>, 'json_data': {'input': [[9906, 856, 836, 374, 7531, 355]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:08 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '104', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_e5e32b420fc1fa53305f5e6e4c0a734a', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=8hGKPxLBkhA09HEjYcz6PUHcWDqkA5evvvg_xQJtjkM-1732778768-1.0.1.1-WXbVzyQLaEWxECFmarSQNKotQXR1PbCgNjUd1YwsivkjYQp.qEwJ3pA9cM.pYKolL1.9HPea8.JU... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e5e32b420fc1fa53305f5e6e4c0a734a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:09", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37AC0540>, 'json_data': {'input': [[9906, 856, 836, 374, 7531, 355]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '48', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_0332115cfebf6c6152b8d9435698481d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a0c7af729185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0332115cfebf6c6152b8d9435698481d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37AC0540>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 22744]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '110', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999992', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ea706c7a04e20582a047b04f95a540e4', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a0ce0b6b9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ea706c7a04e20582a047b04f95a540e4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37AC0540>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 25150]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '130', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999992', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_0fd52733aa4a889015a03fbd43c56f49', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a0d3ef8c9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0fd52733aa4a889015a03fbd43c56f49", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37AC0540>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 87, 720, 18126, 84, 18405, 11, 10587, 28380, 503, 34163, 13636, 34163, 9279, 2024, 355, 296, 804, 355, 4562, 23014, 88577, 52288, 720, 86390, 940, 513, 857, 38627, 824, 48792, 29718, 24318, 404, 55037, 13, 33006, 56902, 30728, 23741, 11, 1891, 88518, 4915, 278, 25041, 11, 77897, 28471, 47800, 11, 29749, 10118, 25482, 386, 13856, 33479, 15790, 11, 20166, 720, 14949, 6181, 10418, 84602, 11, 436, 1494, 8637, 9279, 24318, 359, 689, 45, 7911, 11, 10587, 1708, 5721, 67, 360, 484, 1494, 30892, 597, 1430, 14034, 46488, 720, 79, 2649, 71789, 34606, 22530, 38074, 220, 777, 17225, 11, 84571, 4562, 23014, 52077, 3342, 16623, 77897, 55037, 720, 3935, 3178, 45217, 3026, 9188, 645, 64, 23014, 1048, 12407, 17225, 13, 2355, 720, 15841, 7911, 28471, 1048, 12407, 17225, 45217, 4562, 23014... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '313', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999810', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '2ms', 'x-request-id': 'req_f731bdfd81f5e310235acdb8efe79a91', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a0dacc0c9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f731bdfd81f5e310235acdb8efe79a91", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37AC0540>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 72, 33006, 33006, 33006, 33006, 33006, 33006, 47, 4064, 52, 1111, 432, 27267, 5330, 1111, 2355, 691, 69103, 85602, 328, 3931, 2783, 426, 5330, 1899, 1111, 350, 1753, 29134, 720, 36255, 735, 715, 6805, 25554, 14137, 94674, 42, 2818, 1111, 41, 1406, 1111]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '40', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999949', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ea3eff38ad7f132913347f23f0e452f7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a0e2496c9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ea3eff38ad7f132913347f23f0e452f7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:26:14. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\nJimmy S. Juwana  \\n715\\n\\nJimmy S. Juwana  \\n717\\n\\nJimmy S. Juwana  \\nx \\nkeluarga, yang tidak jemu-jemu dan terus menerus memberikan dukungan \\nspiritual sepanjang perjalanan karir saya. \\n \\nAkhirnya, di atas sega... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '363', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '798750', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '93ms', 'x-request-id': 'req_16c8e2e6d6b8c17d0fe50e909565f97f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=qW5rpKjoNZTTMYpNWEuDX7VXnJBLIZtOzagZikiVlSA-1732778774-1.0.1.1-LM5XeP2weLK4heb7JY8AidXcEGw0lrKz.7yHk2kyX3u0nKK2SXX6XP3k_X.bCD4xY10T6HLTs2Fj6h79p1H99g; path=/; expires=Thu, 28-Nov-24 07:56:14 GMT; domain=.api.ope... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_16c8e2e6d6b8c17d0fe50e909565f97f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.7613868598037798, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "llm_service", "levelname": "DEBUG", "message": "Similarity threshold not met. Returning answer without references.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('Hello Findus! How can I assist you today?', None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:14", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:15", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:15", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='8fbab07d-d6d2-46a3-873e-75514bc1660f'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:15", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='What day is it today?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 26, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2526, supergroup_chat_created=False, text='What day is it today?'), update_id=881193653), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F25470>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021FA639C4F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='2629a7bb-35a8-45ce-b64b-ec4beab19ce7' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='2629a7bb-35a8-45ce-b64b-ec4beab19ce7'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'What day is it today?'), kwargs: {'chat_history': [HumanMessage(content='What day is it today?', additional_kwargs={}, response_metadata={}), HumanMessage(content='Hello my name is Findus', additional_kwargs={}, response_metadata={}), AIMessage(content='Hello Findus! How can I assist you today?', additional_kwargs={}, response_metadata={}), HumanMessage(content='Cara Uji Kepadatan Berat untuk\\nTanah', additional_kwargs={}, response_metadata={}), AIMessage(content='Untuk pengujian kepadatan berat tanah, terdapat beberapa metode yang dapat digunakan, salah satunya adalah metode penggantian volume air pada sumur uji. Standar yang mengatur cara uji ini adalah SNI 03-6872-2002. Metode ini mencakup penentuan kepadatan tanah dan batuan di lapangan dengan menghitung berat isi material menggunakan air untuk mengisi sumur uji. Proses ini digunakan untuk menentukan berat isi material di lapang... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A33EC0>, 'json_data': {'input': [[3923, 1938, 374, 433, 3432, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '110', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_314d11dae7e0572d171856faa0fc6e0c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a1341e3b2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_314d11dae7e0572d171856faa0fc6e0c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:27", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[3923, 1938, 374, 433, 3432, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '40', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_7078d502a215d0673e2dc198231a1836', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a13aeb222dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7078d502a215d0673e2dc198231a1836", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[50, 15259, 220, 2371, 12, 18642, 20, 12, 1049, 15, 33006, 508]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '42', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999987', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_0312ad49d8e50d17203969bcf34dffb0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a13cfc712dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0312ad49d8e50d17203969bcf34dffb0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[50, 15259, 220, 2371, 12, 18642, 20, 12, 1049, 15, 33006, 344]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '77', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999987', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ab39da4875462ce89bb04de37a05abcc', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a14318ad2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ab39da4875462ce89bb04de37a05abcc", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[50, 15259, 220, 2371, 12, 18642, 20, 12, 1049, 15, 33006, 17112]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '71', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999987', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_91888937ca09564d60ff9dfa067fc64a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a149bce92dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_91888937ca09564d60ff9dfa067fc64a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[50, 15259, 220, 2371, 12, 18642, 20, 12, 1049, 15, 33006, 20571]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '93', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999987', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_b6e4bd36665efaa0802559b84b6030a3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a14ff9982dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b6e4bd36665efaa0802559b84b6030a3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:26:32. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\nSNI 04-0225-2000 \\n \\n20\\n\\nSNI 04-0225-2000 \\n \\niv\\n\\nSNI 04-0225-2000 \\n \\n358\\n\\nSNI 04-0225-2000 \\n \\n516\", 'role': 'system'}, {'content': 'What day is it today?', 'role': 'user'}, {'content': 'Hello my name is ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '256', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799260', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '55ms', 'x-request-id': 'req_f9aab8e60cb094f096564a5073d358db', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a1564e58ee2c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f9aab8e60cb094f096564a5073d358db", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.7526239421420617, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "llm_service", "levelname": "DEBUG", "message": "Similarity threshold not met. Returning answer without references.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('Today is Thursday.', None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:32", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:33", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:33", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='2629a7bb-35a8-45ce-b64b-ec4beab19ce7'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:33", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='What is my name'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 26, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2528, supergroup_chat_created=False, text='What is my name'), update_id=881193654), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F26B30>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021FA639C360>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='64e4efe8-6ff2-4da2-bee6-28e3a39da43a' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='64e4efe8-6ff2-4da2-bee6-28e3a39da43a'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'What is my name'), kwargs: {'chat_history': [HumanMessage(content='What is my name', additional_kwargs={}, response_metadata={}), HumanMessage(content='What day is it today?', additional_kwargs={}, response_metadata={}), AIMessage(content='Today is Thursday.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Hello my name is Findus', additional_kwargs={}, response_metadata={}), AIMessage(content='Hello Findus! How can I assist you today?', additional_kwargs={}, response_metadata={}), HumanMessage(content='Cara Uji Kepadatan Berat untuk\\nTanah', additional_kwargs={}, response_metadata={}), AIMessage(content='Untuk pengujian kepadatan berat tanah, terdapat beberapa metode yang dapat digunakan, salah satunya adalah metode penggantian volume air pada sumur uji. Standar yang mengatur cara uji ini adalah SNI 03-6872-2002. Metode ini mencakup penentuan kepadatan tanah dan... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A33880>, 'json_data': {'input': [[3923, 374, 856, 836]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '106', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999995', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_92f591c39521cac66a0e6385f0ad3334', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a195d850b5ca-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_92f591c39521cac66a0e6385f0ad3334", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[3923, 374, 856, 836]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '38', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999995', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_8207b9c69791685a8e5b9f4c45c2ab68', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a1996c4ab5ca-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8207b9c69791685a8e5b9f4c45c2ab68", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 85, 33006, 33006, 33006, 33006, 33006, 33006, 720, 2028, 2363, 374, 12514, 311, 1884, 1274, 889, 4465, 369, 2355, 50828, 17025, 11, 323, 2559, 709, 369, 22706, 323, 20057, 11, 2355, 4291, 279, 8592, 35996, 311, 856, 3070, 323, 4885]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '44', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999953', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_230005585632de8e8fb4499454ab895d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a19b8efab5ca-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_230005585632de8e8fb4499454ab895d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 22744]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999992', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ccb2b403bb44d0a1aa242eb843d9911a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a19db8e4b5ca-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ccb2b403bb44d0a1aa242eb843d9911a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 25150]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '75', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999992', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_35300e12f94a9476007707b283e7e55a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a19febceb5ca-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_35300e12f94a9476007707b283e7e55a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[50, 15259, 220, 2371, 12, 18642, 20, 12, 1049, 15, 33006, 344]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '132', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999987', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_3bfa254899e38fee106e0eb187ffaa3c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a1a1fdf1b5ca-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3bfa254899e38fee106e0eb187ffaa3c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:26:44. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\nJimmy S. Juwana  \\nv \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\nThis book is dedicated to those people who fight for  \\ntheir integrity, and stand up for humanity and diversity,  \\nwith the highest appreciation to my fami... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:26:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '611', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799343', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '49ms', 'x-request-id': 'req_aa4869039323f9795de2753b89ed4603', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a1a4aa30b5ab-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_aa4869039323f9795de2753b89ed4603", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:45", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.762712849889389, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:45", "name": "llm_service", "levelname": "DEBUG", "message": "Similarity threshold not met. Returning answer without references.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('Your name is Findus.', None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:45", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:46", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:46", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='64e4efe8-6ff2-4da2-bee6-28e3a39da43a'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:26:46", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='Do you like  my name?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 27, 1, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2530, supergroup_chat_created=False, text='Do you like  my name?'), update_id=881193655), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F26AC0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021FA639C040>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='c3c082d4-4798-4d01-a89a-b1238b970f91' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='c3c082d4-4798-4d01-a89a-b1238b970f91'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'Do you like  my name?'), kwargs: {'chat_history': [HumanMessage(content='Do you like  my name?', additional_kwargs={}, response_metadata={}), HumanMessage(content='What is my name', additional_kwargs={}, response_metadata={}), AIMessage(content='Your name is Findus.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What day is it today?', additional_kwargs={}, response_metadata={}), AIMessage(content='Today is Thursday.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Hello my name is Findus', additional_kwargs={}, response_metadata={}), AIMessage(content='Hello Findus! How can I assist you today?', additional_kwargs={}, response_metadata={}), HumanMessage(content='Cara Uji Kepadatan Berat untuk\\nTanah', additional_kwargs={}, response_metadata={}), AIMessage(content='Untuk pengujian kepadatan berat tanah, terdapat beberapa metode yang dapat dig... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[5519, 499, 1093, 220, 856, 836, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '162', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_3b7807361a92fe768e2914999bf9056c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a2160b19be71-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3b7807361a92fe768e2914999bf9056c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[5519, 499, 1093, 220, 856, 836, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '39', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_d313eabb3393fc301a6407803400c65d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a219ddaabe71-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d313eabb3393fc301a6407803400c65d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 85, 33006, 33006, 33006, 33006, 33006, 33006, 720, 2028, 2363, 374, 12514, 311, 1884, 1274, 889, 4465, 369, 2355, 50828, 17025, 11, 323, 2559, 709, 369, 22706, 323, 20057, 11, 2355, 4291, 279, 8592, 35996, 311, 856, 3070, 323, 4885]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '43', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999953', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_77153a20faa8cebf1e303af0d1b98a15', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a21bff00be71-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_77153a20faa8cebf1e303af0d1b98a15", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[50, 15259, 220, 2371, 12, 18642, 20, 12, 1049, 15, 33006, 344]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '63', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999987', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_4591d018dd0844fc32b91f5f3ae84e23', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a21e28d1be71-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4591d018dd0844fc32b91f5f3ae84e23", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 25150]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '75', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999992', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_8710fca44ae9fb6a0fb74c9e591b0b27', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a2204a36be71-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8710fca44ae9fb6a0fb74c9e591b0b27", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F3766E5C0>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 23193, 720, 43, 1428, 1932, 49, 1111, 220, 17, 720, 6486, 4082, 946, 26599, 1750, 426, 31694, 32]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '110', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_ef348a822e3b8ed077beffd654524ef7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a222bbdbbe71-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ef348a822e3b8ed077beffd654524ef7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:27:05. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\nJimmy S. Juwana  \\nv \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\nThis book is dedicated to those people who fight for  \\ntheir integrity, and stand up for humanity and diversity,  \\nwith the highest appreciation to my fami... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '544', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799460', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '40ms', 'x-request-id': 'req_8d03254510b9954dd7afa522ef0bbe09', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a2255e63b5d0-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8d03254510b9954dd7afa522ef0bbe09", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:06", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.7394303336765068, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:06", "name": "llm_service", "levelname": "DEBUG", "message": "Similarity threshold not met. Returning answer without references.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:06", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: (\"As an AI, I don't have personal preferences or feelings, but I'm happy to assist you, Findus! It's a unique name.\", None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:06", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:06", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:07", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='c3c082d4-4798-4d01-a89a-b1238b970f91'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:07", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:51", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:51", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='Tell me the joke about Indonesian construction'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021F122DB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 28, 7, 27, 50, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2532, supergroup_chat_created=False, text='Tell me the joke about Indonesian construction'), update_id=881193656), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021F37F26B30>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021FA639C4F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='177de76b-d20d-46c3-ac13-577f8ff77876' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='177de76b-d20d-46c3-ac13-577f8ff77876'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021F3771DA90>, 'Tell me the joke about Indonesian construction'), kwargs: {'chat_history': [HumanMessage(content='Tell me the joke about Indonesian construction', additional_kwargs={}, response_metadata={}), HumanMessage(content='Do you like  my name?', additional_kwargs={}, response_metadata={}), AIMessage(content=\"As an AI, I don't have personal preferences or feelings, but I'm happy to assist you, Findus! It's a unique name.\", additional_kwargs={}, response_metadata={}), HumanMessage(content='What is my name', additional_kwargs={}, response_metadata={}), AIMessage(content='Your name is Findus.', additional_kwargs={}, response_metadata={}), HumanMessage(content='What day is it today?', additional_kwargs={}, response_metadata={}), AIMessage(content='Today is Thursday.', additional_kwargs={}, response_metadata={}), HumanMessage(content='Hello my name is Findus', additional_kwargs={}, response_metad... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37AC0540>, 'json_data': {'input': [[41551, 757, 279, 22380, 922, 59929, 8246]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '163', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_dcdb3b7243316ed1af57944d2d43c0b2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a349fc435ea6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dcdb3b7243316ed1af57944d2d43c0b2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[41551, 757, 279, 22380, 922, 59929, 8246]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '57', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999993', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6d39a810ecbec68a36c49644128a8e50', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a34cceb55ea6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6d39a810ecbec68a36c49644128a8e50", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 22895, 33006, 720, 79984, 2308, 220, 1032, 13, 717, 13, 25937, 285, 70930, 43423, 320, 18876, 73999, 8, 33006, 33006, 79984, 2308, 220, 1032, 13, 1032, 13, 393, 3333, 16623, 37632, 34826, 9279, 34785, 37632, 72392, 33006, 1032, 13, 18, 13, 17, 13, 6344, 536, 41465, 9483, 370, 21042, 10426, 33006, 20863, 3178, 1871, 716, 346, 4781, 8882, 288, 1069, 76018, 276, 12077, 10011, 3444, 276, 16947, 496, 84, 32160, 26518, 65734, 720, 3640, 2234, 11, 9279, 20166, 20309, 324, 79428, 62581, 1494, 16947, 496, 84, 32160, 320, 48297, 12571, 8, 220, 1446, 287, 720, 45961, 95204, 42630, 1247, 16623, 21045, 69986, 45103, 2320, 370, 21042, 10426, 320, 1762, 2269, 29997, 660, 570, 15448, 3178, 720, 65, 22826, 10587, 81427, 1297, 263, 11, 83377, 294, 37533, 278, 6127, 321, 1494, 1297, 263, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '49', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999671', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_be43dec9d5d35ee95f05578a8077911a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a34f28bc5ea6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_be43dec9d5d35ee95f05578a8077911a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 22303, 720, 716, 1149, 19148, 50707, 73427, 1253, 64, 320, 26752, 8, 50896, 45217, 3026, 456, 1494, 2005, 68820, 61693, 720, 28273, 65734, 56866, 503, 329, 62187, 13, 33006, 1032, 13, 18, 13, 16, 13, 6344, 536, 24277, 85, 2711, 278, 33006, 40141, 324, 12825, 8882, 288, 12077, 10011, 3444, 276, 16947, 496, 84, 32160, 25177, 1384, 278, 62581, 2192, 21045, 513, 645, 467, 7911, 720, 375, 76018, 276, 45217, 1891, 321, 3497, 300, 23014, 30892, 31079, 2308, 220, 1032, 13, 20, 13, 2355, 33006, 79984, 2308, 220, 1032, 13, 20, 13, 1322, 9459, 24587, 10011, 3444, 276, 24277, 496, 84, 32160, 24277, 85, 2711, 278, 720, 29305, 306, 10602, 720, 43, 564, 10426, 198, 23912, 588, 72, 37234, 587, 198, 47, 43698, 19148, 720, 43, 22826, 17146, 391, 587, 198, 41, 33383, 198, 362, 55109, 198,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '86', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999722', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_a9471ebdb77e27f399334dcecd0e20d4', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a3516a775ea6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a9471ebdb77e27f399334dcecd0e20d4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 21209, 720, 51, 786, 220, 605, 13, 975, 13, 24277, 496, 84, 32160, 17343, 65734, 320, 33, 8, 33006, 720, 78566, 496, 84, 32160, 17343, 65734, 720, 19604, 2192, 2314, 21854, 720, 40141, 324, 12825, 26518, 65734, 2024, 70942, 25177, 1515, 309, 320, 76, 664, 1494, 720, 5794, 16858, 324, 8826, 1160, 21042, 8, 33006, 720, 15, 720, 63919, 65734, 21045, 16947, 496, 84, 32160, 1297, 263, 68199, 360, 526, 11, 720, 460, 84, 43200, 4657, 9234, 72, 21045, 520, 391, 1515, 309, 33006, 16, 720, 63919, 65734, 21045, 16947, 496, 84, 32160, 1297, 263, 68199, 360, 526, 720, 7197, 526, 4657, 9234, 72, 9279, 520, 391, 1048, 8826, 1515, 309, 13, 17343, 65734, 720, 74, 352, 84, 21045, 520, 391, 1048, 8826, 1515, 309, 720, 17, 720, 63919, 65734, 37947, 84, 21045, 520, 391, 1048, 8826, 1515, 30... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '57', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999630', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_3848152a36e8068bcaea9d6d670fe47e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a353bc625ea6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3848152a36e8068bcaea9d6d670fe47e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021F37A6AE80>, 'json_data': {'input': [[86755, 328, 13, 22410, 86, 3444, 2355, 3893, 720, 47, 438, 10602, 432, 1149, 19148, 30101, 10426, 328, 67521, 17343, 65734, 99632, 8376, 2355, 36255, 24277, 496, 84, 32160, 9084, 18126, 53191, 49624, 720, 46, 74890, 25, 28933, 328, 285, 86, 13873, 22410, 86, 3444, 33006, 35, 2058, 4590, 8826, 18713, 3105, 97468, 52416, 720, 47, 804, 4590, 49526, 33006, 38, 291, 2234, 64133, 7127, 5955, 42970, 13, 220, 22, 720, 41, 75, 13, 622, 408, 73213, 354, 3804, 299, 998, 735, 402, 13, 220, 4331, 1389, 64133, 393, 88532, 220, 4278, 1399, 720, 4886, 551, 379, 74, 13, 1590, 635, 74, 1801, 10591, 916, 720, 31151, 551, 3788, 1129, 73640, 12, 2192, 25268, 1801, 720, 33, 52316, 5697, 67723, 21045, 42433, 16623, 1676, 9703, 74, 24922, 33006, 39, 587, 272, 11696, 64, 19371, 485, 82590, 2073, 526, 12, 1263, 526, 720, 35, 3653, 52... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '134', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999283', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_5324c283e87cd6261d3930a8f27a3748', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a3561e025ea6-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5324c283e87cd6261d3930a8f27a3748", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-28, 10:27:54. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\nJimmy S. Juwana  \\n558 \\n \\n \\nGambar 13.12. Jenis Mobil Derek (Mobile Crane) \\n \\n \\n \\nGambar 13.13. Peralatan Concrete Pump dan Truck Concrete Mixer \\n \\n13.3.2. Metode Pra-Pabrikasi \\n \\nUntuk mempercepat proses ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Thu, 28 Nov 2024 07:27:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '624', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '798474', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '114ms', 'x-request-id': 'req_0cd12774aa8c88168bc7af5c11b5a668', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8e98a358df56ee30-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0cd12774aa8c88168bc7af5c11b5a668", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:55", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8051568432505842, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:55", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:55", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: (\"I'm sorry, but I don't know a specific joke about Indonesian construction. If you have any other questions or need assistance, feel free to ask!\\n\\n------------------\\nReferences:\\nRISBT-FINAL-APRESIASI-REV-Bedah-Buku-Jimmy-Yuwana-pdf.pdf, pages: 2, 495, 591, 595\\n\", {'RISBT-FINAL-APRESIASI-REV-Bedah-Buku-Jimmy-Yuwana-pdf.pdf'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:55", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:56", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:56", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='177de76b-d20d-46c3-ac13-577f8ff77876'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-28 10:27:56", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
