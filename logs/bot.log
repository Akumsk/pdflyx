{"asctime": "2024-12-06 06:25:21", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-12-06 06:25:21", "name": "__main__", "levelname": "INFO", "message": "Logging is set up.", "taskName": null}
{"asctime": "2024-12-06 06:25:22", "name": "__main__", "levelname": "INFO", "message": "Application built with provided token.", "taskName": null}
{"asctime": "2024-12-06 06:25:22", "name": "__main__", "levelname": "INFO", "message": "DatabaseService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-06 06:25:23", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": null}
{"asctime": "2024-12-06 06:25:23", "name": "__main__", "levelname": "INFO", "message": "LLMService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-06 06:25:23", "name": "__main__", "levelname": "INFO", "message": "Handlers added to the application.", "taskName": null}
{"asctime": "2024-12-06 06:25:23", "name": "__main__", "levelname": "INFO", "message": "Bot is starting...", "taskName": null}
{"asctime": "2024-12-06 06:25:23", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:25:24", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:25:24", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:25:40", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000002C1B5D6BA70>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 25, 39, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3271, supergroup_chat_created=False, text='/start'), update_id=881194096), <telegram.ext._callbackcontext.CallbackContext object at 0x000002C1DB4A9630>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x000002C1DB431080>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "handlers", "levelname": "DEBUG", "message": "User ID: 244732168, User Name: Andrey, Language Code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:41", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:25:41", "last_active": "2024-12-06, 06:25:41", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:25:41", "name": "handlers", "levelname": "INFO", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:42", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:42", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:45", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:25:45", "last_active": "2024-12-06, 06:25:45", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:25:45", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:45", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:45", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:45", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000002C1B5D6BA70>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 25, 44, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3273, supergroup_chat_created=False, text='/knowledge_base'), update_id=881194097), <telegram.ext._callbackcontext.CallbackContext object at 0x000002C1DB4A9630>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000002C1DB42CA60>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:46", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:46", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:25:49", "last_active": "2024-12-06, 06:25:49", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000002C1B5D6BA70>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660740416776', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 25, 45, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3274, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000002C1DB2F6150>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "handlers", "levelname": "DEBUG", "message": "Found 29 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000002C1DB517DD0>, 'E:\\\\knowledge_base\\\\russian_regulations', 'Russian'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000002C1DB517DD0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:25:49", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:26:43", "last_active": "2024-12-06, 06:26:43", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:26:44", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002C1B5D6BA70>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 26, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3276, supergroup_chat_created=False, text='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'), update_id=881194099), <telegram.ext._callbackcontext.CallbackContext object at 0x000002C1DB4A9390>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000002C1DB998F40>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='159e30cb-c3e4-4761-b21f-c6e3dd1ab242' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='159e30cb-c3e4-4761-b21f-c6e3dd1ab242'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000002C1DB517DD0>, '\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'), kwargs: {'chat_history': [HumanMessage(content='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a\u043e\u0432\u044b \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u044f \u043c\u0435\u0436\u0434\u0443 Autodesk BIM 360 \u0438 Bentley ProjectWise?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u0430\u043a\u043e\u0432\u044b \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u044f \u043c\u0435\u0436\u0434\u0443 Autodesk BIM 360 \u0438 Bentley ProjectWise?\\n-----------\\nAutodesk BIM 360 \u0438 Bentley ProjectWise \u2014 \u044d\u0442\u043e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u044b, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0432 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u043e\u0439, \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e\u0439 \u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 (AEC) \u0438\u043d\u0434\u0443\u0441\u0442\u0440\u0438\u0438 \u0434\u043b\u044f \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u043d\u0430\u0434 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u043c\u0438 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u043c\u0438, \u043d\u043e \u043e\u043d\u0438 \u0438\u043c\u0435\u044e\u0442 \u044f\u0432\u043d\u044b\u0435 \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u044f \u0432 \u0441\u0432\u043e\u0438\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u0445 \u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u044f\u0445 \u0444\u043e\u043a\u0443\u0441\u0430:\\n\\n1. <b>\u0426\u0435\u043b\u044c \u0438 \u0424\u043e\u043a\u0443\u0441</b>:\\n\u2022 <b>Autodesk BIM 360</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0443\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u0435\u0434\u0438\u043d\u043e\u0439 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u044b \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432. BIM ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "llm_service", "levelname": "INFO", "message": "Detected language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "llm_service", "levelname": "INFO", "message": "Detected user language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1DB9A6CA0>, 'json_data': {'input': [[66144, 54570, 7820, 15752, 21477, 7094, 58669, 9542, 7952, 23630, 13433, 293, 284, 220, 1049, 3906, 11, 305, 284, 220, 1135, 3906, 11, 7952, 11320, 39988, 220, 18, 11562, 11, 45658, 5591, 16742, 39988, 91146, 9706, 4655]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 06 Dec 2024 03:26:44 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '79'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999962'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_3ae9a6aefa17945b4e8b8dd29c7861ca'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=XqF5opXILZS3KA4V9CY8jxekLBwjTzJ.LSJH8C.5vHg-1733455604-1.0.1.1-.cZKirVM.WYrV3U6px9FxY0XS3SA.QmIaLgrEH... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3ae9a6aefa17945b4e8b8dd29c7861ca", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F380>, 'json_data': {'input': [[66144, 54570, 7820, 15752, 21477, 7094, 58669, 9542, 7952, 23630, 13433, 293, 284, 220, 1049, 3906, 11, 305, 284, 220, 1135, 3906, 11, 7952, 11320, 39988, 220, 18, 11562, 11, 45658, 5591, 16742, 39988, 91146, 9706, 4655]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:26:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '44', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999962', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_04a32de1a7e743c750222f8b2ca87377', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92d190f3b3574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_04a32de1a7e743c750222f8b2ca87377", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F380>, 'json_data': {'input': [[20976, 8164, 9239, 4655, 23934, 18868, 5591, 9239, 1506, 26539, 19479, 47273, 37405, 7952, 11320, 79862, 12561, 7975, 8341, 1506, 11, 11562, 25, 2355, 33006, 7094, 1482, 220, 1049, 720, 1041, 11562, 6578, 720, 1041, 11562, 6578, 720, 2297, 5591, 13, 220, 1049, 720, 1049, 11562, 6578, 720, 1049, 11562, 6578, 720, 35095, 28086, 7753, 57319, 20879, 25756, 9239, 41873, 97341, 39127, 39988, 81376, 1840, 720, 16, 14, 1135, 7952, 11320, 12648, 720, 1830, 28086, 7753, 57319, 720, 16, 14, 1041, 7952, 11320, 12648, 11047, 28086, 7753, 57319, 720, 35095, 28086, 7753, 57319, 20879, 13999, 2297, 56008, 13999, 26539, 19479, 47273, 11, 28114, 8164, 5372, 7094, 1840, 36352, 14009, 2233, 39988, 81376, 1840, 23784, 65014, 320, 7094, 14009, 720, 95570, 3114, 6856, 16742, 46339, 9239, 4655, 20879, 13999, 2297, 56008, 13999, 143... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:26:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '140', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999275', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_de769f19133dcc73fc83830afac4f874', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92d1b28d23574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_de769f19133dcc73fc83830afac4f874", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F380>, 'json_data': {'input': [[3076, 33006, 16604, 48262, 13373, 20346, 17394, 39988, 21923, 67222, 6856, 17165, 46177, 720, 13337, 59030, 17165, 720, 39091, 19479, 92091, 44858, 720, 7094, 11320, 14525, 25756, 5591, 35387, 4329, 46177, 720, 66144, 51973, 11, 11562, 6578, 720, 39091, 19479, 92091, 48150, 720, 4898, 99714, 720, 15752, 5591, 35387, 21708, 46177, 69471, 14082, 11, 720, 12426, 1830, 13, 720, 39091, 94178, 92091, 48150, 720, 2233, 18437, 6735, 61390, 23446, 1532, 11562, 50436, 7094, 3865, 720, 15752, 5591, 35387, 4329, 64880, 46177, 720, 66144, 14082, 4898, 50807, 11, 11562, 6578, 720, 74339, 67222, 6856, 13433, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 50807, 720, 1840, 11320, 5173, 3114, 9542, 12648, 64880, 96573, 7753, 1840, 16331, 50807, 720, 14525, 81376, 47805, 1532, 7952, 2233, 33742, 23297, 1840, 12648, 720, 1135, 7... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:26:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '118', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998763', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_a191c7eae9d8847a9c30f3edcaea872c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92d1d9a163574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a191c7eae9d8847a9c30f3edcaea872c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F380>, 'json_data': {'input': [[4218, 33006, 16604, 48262, 720, 63873, 33742, 23297, 1840, 12648, 28599, 9239, 1830, 720, 34604, 19188, 64134, 720, 8164, 29256, 7753, 56857, 39900, 720, 2297, 56857, 18999, 720, 10124, 16331, 17165, 11, 11562, 6578, 720, 39091, 94178, 92091, 34613, 12561, 7975, 8341, 11, 11562, 720, 8164, 31203, 13373, 91216, 47273, 720, 15752, 9239, 41873, 97341, 39127, 44786, 720, 2297, 5591, 64084, 21708, 14257, 46339, 9239, 720, 8164, 31203, 13373, 91216, 47273, 720, 8164, 7753, 15298, 2233, 37277, 44786, 720, 49284, 23311, 13433, 29118, 44786, 720, 2297, 5591, 64084, 21708, 720, 8164, 31203, 13373, 91216, 47273, 720, 15752, 9239, 41873, 97341, 39127, 44786, 720, 2297, 5591, 64084, 21708, 14257, 46339, 9239, 7740, 720, 8164, 7753, 15298, 2233, 37277, 44786, 720, 49284, 23311, 13433, 29118, 44786, 720, 2297, 5591, 64084,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:26:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '274', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998891', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_77b15f9ae18e9a1b23cdb7db234e97b9', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92d201b553574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_77b15f9ae18e9a1b23cdb7db234e97b9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F380>, 'json_data': {'input': [[10124, 8, 59346, 58317, 1532, 11, 39479, 39988, 11047, 7975, 14476, 1840, 12648, 7740, 720, 30480, 31203, 12648, 720, 18, 2355, 720, 19871, 5591, 17721, 44065, 18868, 4655, 90877, 51736, 34943, 13404, 19479, 18999, 25, 33006, 720, 11320, 6735, 6856, 22885, 720, 68506, 39244, 1506, 720, 14525, 720, 8164, 9706, 4898, 80230, 94962, 720, 11320, 6735, 1532, 720, 7, 2156, 34493, 67024, 13433, 720, 8164, 7753, 8164, 5372, 7094, 1840, 36352, 14009, 2233, 14525, 720, 4898, 720, 2297, 5591, 17721, 2156, 72952, 720, 12426, 5591, 3865, 8, 720, 19, 2355, 720, 1830, 20346, 10124, 13373, 40842, 4898, 80230, 94962, 7820, 17461, 10589, 1532, 720, 19, 2355, 720, 8164, 2233, 15088, 8131, 44786, 41291, 19916, 64292, 21708, 5927, 18868, 4655, 4898, 720, 19, 2355, 33006, 19871, 5591, 17721, 44065, 5524, 56857, 18999, 74254, 38521... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:26:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '58', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999690', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_b8f5d03cf2218528e75bb3ad062f2b16', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92d23ccec3574-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b8f5d03cf2218528e75bb3ad062f2b16", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-06, 06:26:47. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retriev... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 06 Dec 2024 03:26:57 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '10098'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792682'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '548ms'), ('x-request-id', 'req_bb413f7ad25fb3b8a6d9ea0d0bb19dcc'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=wnFjM3BQ5Y64dLUAzniapE_WSECpJTgb3bJHdDlBXwM-1733455617-1.0.1.1-ihhjS1vM6vbKCwEHzcUs1.5PHTee9p65hVySGHQyPSeeYkfzgMlOcqp2ulH2DxWZSkRb9hW8AABab.PlvW4sGg; path=/; expires=Fri, 0... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bb413f7ad25fb3b8a6d9ea0d0bb19dcc", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "llm_service", "levelname": "INFO", "message": "No need to translate the answer", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8530898775431425, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: 'b \\\\cdot h^2'", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 365, in generate_suggestions\n    ).format(n=n)\n      ^^^^^^^^^^^\nKeyError: 'b \\\\cdot h^2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u043e\u0432 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 \u0438\u0437 \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b \u0441 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\u043c\u0438 200 \u043c\u043c (\u0448\u0438\u0440\u0438\u043d\u0430) x 50 \u043c\u043c (\u0432\u044b\u0441\u043e\u0442\u0430) x 3 \u043c (\u0434\u043b\u0438\u043d\u0430), \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430, \u0442\u0438\u043f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f.\\n\\n\u0414\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u044b \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0434\u0443\u043b\u044c \u0443\u043f\u0440\u0443\u0433\u043e\u0441\u0442\u0438 \u0438 \u043f\u0440\u0435\u0434\u0435\u043b \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u041e\u0434\u043d\u0430\u043a\u043e \u0442\u043e\u0447\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0434\u0435\u0440\u0435\u0432\u0430 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u043f\u0440\u0435\u0434\u0435\u043b \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 40 \u041c\u041f\u0430.\\n\\n\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0435\u043c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0431\u0430\u0437\u043e\u0432\u044b\u0435 \u0444\u043e\u0440\u043c\u0443\u043b\u044b \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432. \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c, \u0447\u0442\u043e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e:\\n\\n1. \u041d\u0430\u0439\u0434\u0435\u043c \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0435\u0447\u0435\u043d\u0438\u044f (W):\\n\\\\[ W = \\\\frac{b \\\\cdot h^2}{6} \\\\]\\n\\\\[ W = \\\\frac{200 \\\\, \\\\text{\u043c\u043c} \\\\cdot (50 \\\\, \\\\text{\u043c\u043c})^2}{6} = \\\\frac{200 \\\\cdot 2500}{6} = 83333.33 \\\\, \\\\text{\u043c\u043c}^3 \\\\]\\n\\n2. \u041f\u0435\u0440\u0435\u0432\u0435\u0434\u0435\u043c \u0432 \u043c\u0435\u0442\u0440\u044b:\\n\\\\[ W = 83333.33 \\\\times... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='159e30cb-c3e4-4761-b21f-c6e3dd1ab242'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:26:58", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:01", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:28:01", "last_active": "2024-12-06, 06:28:01", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:28:01", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:01", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:01", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:01", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002C1B5D6BA70>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3278, supergroup_chat_created=False, text='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881194100), <telegram.ext._callbackcontext.CallbackContext object at 0x000002C22BD399B0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000002C1DB998D60>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:01", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='c71117e4-6b1c-45a3-9319-9817bb423bbd' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='c71117e4-6b1c-45a3-9319-9817bb423bbd'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000002C1DB517DD0>, '\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043c\u043c\u043e\u0432 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 \u0438\u0437 \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b \u0441 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\u043c\u0438 200 \u043c\u043c (\u0448\u0438\u0440\u0438\u043d\u0430) x 50 \u043c\u043c (\u0432\u044b\u0441\u043e\u0442\u0430) x 3 \u043c (\u0434\u043b\u0438\u043d\u0430), \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u043e\u0440\u044b, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430, \u0442\u0438\u043f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f.\\n\\n\u0414\u043b\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u044b \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0434\u0443\u043b\u044c \u0443\u043f\u0440\u0443\u0433\u043e\u0441\u0442\u0438 \u0438 \u043f\u0440\u0435\u0434\u0435\u043b \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u041e\u0434\u043d\u0430\u043a\u043e \u0442\u043e\u0447\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0434\u0435\u0440\u0435\u0432\u0430 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u043d\u0438\u0439 \u043f\u0440\u0435\u0434\u0435\u043b \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "llm_service", "levelname": "INFO", "message": "Detected language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "llm_service", "levelname": "INFO", "message": "Detected user language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C224CD6CA0>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 7820, 24803, 26503, 34613, 96573, 7753, 1840, 16331, 20440, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:28:01 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '111', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_7586b4a14afb17e91b4b132c11d5cae5', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92ef83bf0e782-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7586b4a14afb17e91b4b132c11d5cae5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F2E0>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 7820, 24803, 26503, 34613, 96573, 7753, 1840, 16331, 20440, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:28:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '46', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6e911114a30a47f37d7ff5986df083ac', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92efa8896e782-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6e911114a30a47f37d7ff5986df083ac", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F2E0>, 'json_data': {'input': [[20, 33006, 19, 13, 18, 80798, 14476, 50306, 86995, 50693, 6856, 39280, 7820, 90795, 3865, 10298, 4655, 6578, 96573, 7753, 1840, 16331, 24697, 720, 19, 13, 18, 13, 16, 35889, 23297, 43293, 50306, 38098, 79370, 57186, 320, 68506, 39244, 4655, 7820, 17721, 13433, 2297, 1506, 8, 7952, 12507, 6856, 98599, 39988, 93099, 4655, 720, 41873, 15752, 13337, 6856, 14009, 70129, 21204, 23934, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 6856, 45658, 5591, 16742, 44786, 91146, 9706, 11, 21477, 2297, 3865, 12426, 5372, 44786, 7740, 44946, 14476, 1840, 14476, 5372, 44786, 20879, 720, 3865, 5591, 3114, 38657, 2156, 18999, 5927, 41291, 10589, 94520, 1532, 45658, 35682, 18999, 13, 720, 19, 13, 18, 13, 17, 39903, 7753, 33742, 4329, 2156, 44065, 46088, 4655, 38098, 79370, 15458, 12415, 11, 20879, 6578, 8341, 13433, 6850, 41873, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:28:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '198', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_75c2d3e3d6d00ebe4b17eab1665fabbf', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92efcbd22e782-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_75c2d3e3d6d00ebe4b17eab1665fabbf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F2E0>, 'json_data': {'input': [[4370, 33006, 23, 13, 20, 13, 22, 13, 17, 51418, 7975, 14476, 69775, 13373, 55523, 31443, 20440, 81757, 33793, 3114, 3865, 8131, 1840, 20346, 10298, 16742, 5173, 3114, 23630, 4898, 16742, 7820, 39103, 30480, 56449, 14525, 34943, 13337, 48074, 20812, 6856, 18482, 720, 9136, 31281, 18999, 6578, 11, 12561, 28089, 13404, 5372, 12648, 6578, 5927, 79327, 1532, 220, 21, 13, 17, 20440, 90211, 44786, 29619, 6856, 13, 720, 23, 13, 21, 36479, 24803, 14009, 720, 23, 13, 21, 13, 16, 36479, 24803, 14009, 56449, 14525, 21923, 23297, 8164, 56857, 28089, 18482, 44946, 14476, 9542, 3865, 38098, 79370, 15458, 12415, 7820, 39103, 30480, 7740, 7952, 12507, 1506, 20879, 720, 8164, 2233, 17766, 38822, 39280, 7952, 21956, 7094, 33742, 16742, 11, 11047, 16331, 16742, 5927, 9706, 4655, 7740, 5524, 2156, 25698, 1506, 13, 23784, 22918, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:28:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '119', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998329', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_0b3e4799c89bcf3714bfc2d8e2c19bd1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92effbb26e782-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0b3e4799c89bcf3714bfc2d8e2c19bd1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F2E0>, 'json_data': {'input': [[19871, 17279, 220, 1114, 13, 9423, 966, 13, 679, 22, 36479, 24803, 11320, 13, 57855, 4898, 89348, 72331, 59921, 7486, 44858, 18600, 83586, 71829, 28599, 20807, 1840, 17279, 8105, 12, 1627, 12, 4767, 320, 2297, 43896, 9136, 38972, 18999, 64880, 452, 220, 16, 11, 220, 17, 11, 220, 18, 8, 720, 19871, 49899, 73226, 64292, 20879, 220, 2148, 13, 2304, 13, 679, 22, 452, 220, 1114, 13, 9423, 966, 13, 679, 22, 720, 54745, 16494, 5372, 4329, 50819, 5524, 220, 1721, 13, 717, 13, 679, 22, 5927, 9136, 24697, 5372, 28599, 17279, 220, 1114, 13, 9423, 966, 13, 679, 16, 720, 74598, 96256, 1506, 220, 1114, 720, 16604, 2156, 16494, 27717, 0, 39903, 92533, 5927, 52520, 5372, 5927, 7952, 87483, 60990, 77495, 79373, 3865, 11047, 98285, 23446, 6148, 23297, 4898, 22885, 18600, 25698, 3114, 24697, 88831, 13, 39903, 29256, 47680, 560... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:28:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '88', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998277', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_61b31474e94853ae2ab254eba9b12123', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92f022882e782-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_61b31474e94853ae2ab254eba9b12123", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002C1D9D0F2E0>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 6549, 33006, 22, 13, 18, 45458, 97341, 38657, 11562, 8341, 16331, 91216, 23297, 17165, 10693, 8379, 15752, 11001, 114, 40590, 90457, 67745, 38098, 79370, 15458, 12415, 7820, 24803, 11320, 2355, 996, 29619, 35111, 6856, 16742, 5524, 10124, 9239, 17165, 7740, 23934, 5524, 68506, 2156, 7094, 5591, 34082, 12, 8164, 7486, 12394, 21708, 33006, 22, 13, 18, 13, 16, 23227, 7753, 13404, 73642, 16331, 12507, 11562, 97341, 38657, 1506, 26539, 35111, 6856, 7820, 24803, 11320, 7740, 220, 7820, 24803, 26503, 44786, 5173, 7486, 12394, 21708, 19175, 14082, 31101, 1840, 7058, 6578, 1482, 93323, 7753, 12426, 18264, 95967, 18154, 14257, 77911, 20812, 3865, 30392, 29256, 64292, 7740, 12561, 14837, 17766, 6856, 11, 69556, 18264, 13373, 34943, 13337, 48074, 20812, 50306, 72... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:28:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '105', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999085', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_3fc9b90c8a9d54ef6dfe1cde46ea0511', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92f04adcce782-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3fc9b90c8a9d54ef6dfe1cde46ea0511", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-06, 06:28:04. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retri... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:28:10 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6600', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '789919', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '756ms', 'x-request-id': 'req_d1e6c2dc1629a3ea7c188e06e0d672b7', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92f07eaa1ee26-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d1e6c2dc1629a3ea7c188e06e0d672b7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:11", "name": "llm_service", "levelname": "INFO", "message": "No need to translate the answer", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:11", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8400711689206254, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:11", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:11", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively.If yes, provide up to 3 additional prompts based on key concepts in the response.\\nPrompts have to be precise, focused questions that seek additional details or clarification about key points in the response.\\nPrompts that encourage:\\nBroader contextual understanding\\nAlternative perspectives\\nPractical applications or real-world implications\\nIf no additional prompts are needed, respond with 'No suggestions needed'.\\nEach suggestion have to fit in 50 or less symbols.\\nUser Prompt: \u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nYour Response: \u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:11", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:28:12 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1019', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '798835', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '87ms', 'x-request-id': 'req_b1821903403c67adb87856fd81e6af34', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed92f353e29ee26-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b1821903403c67adb87856fd81e6af34", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:13", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u041a\u0430\u043a\u043e\u0439 \u0431\u044e\u0434\u0436\u0435\u0442 \u0432\u044b \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442\u0435 \u0432\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430 \u043a\u0440\u044b\u0448\u0443?', '\u041a\u0430\u043a\u043e\u0439 \u043a\u043b\u0438\u043c\u0430\u0442 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435?', '\u041a\u0430\u043a\u043e\u0439 \u0441\u0442\u0438\u043b\u044c \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0438\u0442\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0434\u043e\u043c\u0430?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:13", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n\u2022 \u0412 \u0440\u0430\u0439\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0438\u043b\u0438 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u043d\u0435\u0433\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c\u0438 \u0432\u0430\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u043e\u0440\u043e\u0448\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u043d\u0438\u0437\u043a\u0438\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u0438 \u0442\u044f\u0436\u0435\u043b\u044b\u0439 \u0441\u043d\u0435\u0433.\\n\u2022 \u0412 \u0437\u043e\u043d\u0430\u0445 \u0441 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0434\u043e\u0436\u0434\u044f\u043c\u0438 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044e \u043f\u043b\u0435\u0441\u0435\u043d\u0438.\\n\\n2. <b>\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430</b>:\\n\u2022 \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0447\u0435\u0442\u0430\u0442\u044c\u0441\u044f \u0441 \u043e\u0431\u0449\u0438\u043c \u0441\u0442\u0438\u043b\u0435\u043c \u0438 \u0434\u0438\u0437\u0430\u0439\u043d\u043e\u043c \u0432\u0430\u0448\u0435\u0433\u043e \u0434\u043e\u043c\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0434\u043e\u0439\u0442\u0438 \u0434\u043b\u044f \u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0441\u0442\u0438\u043b\u044f, \u0432 \u0442\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u043a \u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u0440\u043e\u0432\u043b\u044f \u043c\u043e\u0436\u0435\u0442 \u043b\u0443\u0447\u0448\u0435 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u043c \u0434\u043e\u043c\u0435.\\n\\n3. <b>\u0414\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c \u0438 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435</b>:\\n\u2022 \u0420\u0430\u0437\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438\u043c\u0435\u044e\u0442 \u0440\u0430\u0437\u043d\u044b\u0439 \u0441\u0440\u043e\u043a \u0441\u043b\u0443\u0436\u0431\u044b. \u041c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u0440\u043e\u0432\u043b\u0438 \u0438 \u0441\u043b\u0430\u043d\u0435\u0446, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u043e, \u0441... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:13", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:13", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='c71117e4-6b1c-45a3-9319-9817bb423bbd'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:13", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:14", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:28:14", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:41", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-12-06 06:32:41", "name": "__main__", "levelname": "INFO", "message": "Logging is set up.", "taskName": null}
{"asctime": "2024-12-06 06:32:41", "name": "__main__", "levelname": "INFO", "message": "Application built with provided token.", "taskName": null}
{"asctime": "2024-12-06 06:32:41", "name": "__main__", "levelname": "INFO", "message": "DatabaseService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-06 06:32:42", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": null}
{"asctime": "2024-12-06 06:32:42", "name": "__main__", "levelname": "INFO", "message": "LLMService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-06 06:32:42", "name": "__main__", "levelname": "INFO", "message": "Handlers added to the application.", "taskName": null}
{"asctime": "2024-12-06 06:32:42", "name": "__main__", "levelname": "INFO", "message": "Bot is starting...", "taskName": null}
{"asctime": "2024-12-06 06:32:43", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:32:43", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:32:44", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:32:47", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:47", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:32:47", "last_active": "2024-12-06, 06:32:47", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:32:47", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:48", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001BE7F8F86B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 32, 46, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3280, supergroup_chat_created=False, text='/knowledge_base'), update_id=881194101), <telegram.ext._callbackcontext.CallbackContext object at 0x000001BE7FFA96A0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001BE7FF2D240>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:49", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:32:51", "last_active": "2024-12-06, 06:32:51", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001BE7F8F86B0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660611698131', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 32, 48, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3281, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001BE7FDF6150>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "handlers", "levelname": "DEBUG", "message": "Found 29 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001BE011087D0>, 'E:\\\\knowledge_base\\\\russian_regulations', 'Russian'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001BE011087D0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:52", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:32:52", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:00", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:33:00", "last_active": "2024-12-06, 06:33:00", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:33:00", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:00", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001BE7F8F86B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 32, 59, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3283, supergroup_chat_created=False, text='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881194103), <telegram.ext._callbackcontext.CallbackContext object at 0x000001BE7FFA96A0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001BE01121030>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='ffd203d1-854d-470a-960b-c95b197d69f2' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='ffd203d1-854d-470a-960b-c95b197d69f2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001BE011087D0>, '\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n\u2022 \u0412 \u0440\u0430\u0439\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0438\u043b\u0438 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u043d\u0435\u0433\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c\u0438 \u0432\u0430\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u043e\u0440\u043e\u0448\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u043d\u0438\u0437\u043a\u0438\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u0438 \u0442\u044f\u0436\u0435\u043b\u044b\u0439 \u0441\u043d\u0435\u0433.\\n\u2022 \u0412 \u0437\u043e\u043d\u0430\u0445 \u0441 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u043d\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0434\u043e\u0436\u0434\u044f\u043c\u0438 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u044e \u043f\u043b\u0435\u0441\u0435\u043d\u0438.\\n\\n2. <b>\u0410\u0440\u0445\u0438\u0442\u0435\u043a... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "llm_service", "levelname": "INFO", "message": "Detected language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "llm_service", "levelname": "INFO", "message": "Detected user language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001BE015727A0>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 7820, 24803, 26503, 34613, 96573, 7753, 1840, 16331, 20440, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 06 Dec 2024 03:33:01 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '86'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999980'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_9551ff39c06510202c09f4666b819d9f'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=aKhwOwQmETOtlBM_J8vKi7DVCpqWvMLAvvbRQvPDMOQ-1733455981-1.0.1.1-N9GhRN7gDBeYJYrZcqc98L2NrpwqczWLZXKQdk... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9551ff39c06510202c09f4666b819d9f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001BE7E108220>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 7820, 24803, 26503, 34613, 96573, 7753, 1840, 16331, 20440, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:33:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '81', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_2ca03a27db732297e3006eafd7213e69', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed9364e0f6cc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2ca03a27db732297e3006eafd7213e69", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001BE7E108220>, 'json_data': {'input': [[20, 33006, 19, 13, 18, 80798, 14476, 50306, 86995, 50693, 6856, 39280, 7820, 90795, 3865, 10298, 4655, 6578, 96573, 7753, 1840, 16331, 24697, 720, 19, 13, 18, 13, 16, 35889, 23297, 43293, 50306, 38098, 79370, 57186, 320, 68506, 39244, 4655, 7820, 17721, 13433, 2297, 1506, 8, 7952, 12507, 6856, 98599, 39988, 93099, 4655, 720, 41873, 15752, 13337, 6856, 14009, 70129, 21204, 23934, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 6856, 45658, 5591, 16742, 44786, 91146, 9706, 11, 21477, 2297, 3865, 12426, 5372, 44786, 7740, 44946, 14476, 1840, 14476, 5372, 44786, 20879, 720, 3865, 5591, 3114, 38657, 2156, 18999, 5927, 41291, 10589, 94520, 1532, 45658, 35682, 18999, 13, 720, 19, 13, 18, 13, 17, 39903, 7753, 33742, 4329, 2156, 44065, 46088, 4655, 38098, 79370, 15458, 12415, 11, 20879, 6578, 8341, 13433, 6850, 41873, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:33:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '85', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_c52ecefaf79da0cc17847fcf3b32247f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed9365048dcc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c52ecefaf79da0cc17847fcf3b32247f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001BE7E108220>, 'json_data': {'input': [[4370, 33006, 23, 13, 20, 13, 22, 13, 17, 51418, 7975, 14476, 69775, 13373, 55523, 31443, 20440, 81757, 33793, 3114, 3865, 8131, 1840, 20346, 10298, 16742, 5173, 3114, 23630, 4898, 16742, 7820, 39103, 30480, 56449, 14525, 34943, 13337, 48074, 20812, 6856, 18482, 720, 9136, 31281, 18999, 6578, 11, 12561, 28089, 13404, 5372, 12648, 6578, 5927, 79327, 1532, 220, 21, 13, 17, 20440, 90211, 44786, 29619, 6856, 13, 720, 23, 13, 21, 36479, 24803, 14009, 720, 23, 13, 21, 13, 16, 36479, 24803, 14009, 56449, 14525, 21923, 23297, 8164, 56857, 28089, 18482, 44946, 14476, 9542, 3865, 38098, 79370, 15458, 12415, 7820, 39103, 30480, 7740, 7952, 12507, 1506, 20879, 720, 8164, 2233, 17766, 38822, 39280, 7952, 21956, 7094, 33742, 16742, 11, 11047, 16331, 16742, 5927, 9706, 4655, 7740, 5524, 2156, 25698, 1506, 13, 23784, 22918, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:33:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '169', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998329', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_ad6cadbdcd6c44208edf0179f5f1af6d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93656eceec02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ad6cadbdcd6c44208edf0179f5f1af6d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001BE7E108220>, 'json_data': {'input': [[19871, 17279, 220, 1114, 13, 9423, 966, 13, 679, 22, 36479, 24803, 11320, 13, 57855, 4898, 89348, 72331, 59921, 7486, 44858, 18600, 83586, 71829, 28599, 20807, 1840, 17279, 8105, 12, 1627, 12, 4767, 320, 2297, 43896, 9136, 38972, 18999, 64880, 452, 220, 16, 11, 220, 17, 11, 220, 18, 8, 720, 19871, 49899, 73226, 64292, 20879, 220, 2148, 13, 2304, 13, 679, 22, 452, 220, 1114, 13, 9423, 966, 13, 679, 22, 720, 54745, 16494, 5372, 4329, 50819, 5524, 220, 1721, 13, 717, 13, 679, 22, 5927, 9136, 24697, 5372, 28599, 17279, 220, 1114, 13, 9423, 966, 13, 679, 16, 720, 74598, 96256, 1506, 220, 1114, 720, 16604, 2156, 16494, 27717, 0, 39903, 92533, 5927, 52520, 5372, 5927, 7952, 87483, 60990, 77495, 79373, 3865, 11047, 98285, 23446, 6148, 23297, 4898, 22885, 18600, 25698, 3114, 24697, 88831, 13, 39903, 29256, 47680, 560... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:33:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '141', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998277', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_1b5e98c10787189b56802491862d8873', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed9365d79c0c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1b5e98c10787189b56802491862d8873", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001BE7E108220>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 6549, 33006, 22, 13, 18, 45458, 97341, 38657, 11562, 8341, 16331, 91216, 23297, 17165, 10693, 8379, 15752, 11001, 114, 40590, 90457, 67745, 38098, 79370, 15458, 12415, 7820, 24803, 11320, 2355, 996, 29619, 35111, 6856, 16742, 5524, 10124, 9239, 17165, 7740, 23934, 5524, 68506, 2156, 7094, 5591, 34082, 12, 8164, 7486, 12394, 21708, 33006, 22, 13, 18, 13, 16, 23227, 7753, 13404, 73642, 16331, 12507, 11562, 97341, 38657, 1506, 26539, 35111, 6856, 7820, 24803, 11320, 7740, 220, 7820, 24803, 26503, 44786, 5173, 7486, 12394, 21708, 19175, 14082, 31101, 1840, 7058, 6578, 1482, 93323, 7753, 12426, 18264, 95967, 18154, 14257, 77911, 20812, 3865, 30392, 29256, 64292, 7740, 12561, 14837, 17766, 6856, 11, 69556, 18264, 13373, 34943, 13337, 48074, 20812, 50306, 72... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:33:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '138', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999085', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_1fa6874b4db126240a282755bc3d91e6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed936604b8fc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1fa6874b4db126240a282755bc3d91e6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-06, 06:33:05. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retri... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 06 Dec 2024 03:33:12 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '6331'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '790031'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '747ms'), ('x-request-id', 'req_927647d6fee358eb5c02e8a8a30e548f'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=9V5.A_XgGARBnghLdTzDkog9pbMKg8hBI3OGwl3T2S0-1733455992-1.0.1.1-tXeTtVv.UGxFC7Gp.MVptibHqgUJcT5iA.Yz9YXFI4.t1R.6mQsQC3zn0oAQuFdnqklGR_TuDgk6oDw6oZr8yQ; path=/; expires=Fri, 06... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_927647d6fee358eb5c02e8a8a30e548f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:13", "name": "llm_service", "levelname": "INFO", "message": "No need to translate the answer", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:13", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8400711689206254, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:13", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:13", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response that the user can use to gather more information.\\nProvide suggestions categorized as: Clarification Questions, Exploratory Prompts, Critical Thinking Challenges, Creative Expansion Ideas\\nEach suggestion have to fit in 50 or less symbols.\\nIf no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0441\u0442\u0438\u043b\u044c \u0432\u0430\u0448\u0435\u0433\u043e \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:13", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:33:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1898', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '798866', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '84ms', 'x-request-id': 'req_ee6ba67802f5c514fb57ace2dc5490fd', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93694b9802dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ee6ba67802f5c514fb57ace2dc5490fd", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:16", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['Clarification Questions:', '\u041a\u0430\u043a\u0438\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435?', '\u041a\u0430\u043a\u043e\u0439 \u0441\u0442\u0438\u043b\u044c \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b \u0443 \u0432\u0430\u0448\u0435\u0433\u043e \u0434\u043e\u043c\u0430?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0441\u0442\u0438\u043b\u044c \u0432\u0430\u0448\u0435\u0433\u043e \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n\u2022 \u0412 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0438\u043b\u0438 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u043d\u0435\u0433\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c\u0438 \u043f\u043e\u0434\u043e\u0439\u0434\u0443\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u043d\u0438\u0437\u043a\u0438\u043c \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430\u043c \u0438 \u0442\u044f\u0436\u0435\u043b\u043e\u043c\u0443 \u0441\u043d\u0435\u0433\u0443, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043d\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430.\\n\u2022 \u0414\u043b\u044f \u0437\u043e\u043d \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0434\u043e\u0436\u0434\u044f\u043c\u0438 \u0432\u044b\u0431\u0438\u0440\u0430\u0439\u0442\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u043f\u043b\u0435\u0441\u0435\u043d\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u0435\u0440\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430.\\n\\n2. <b>\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430</b>:\\n\u2022 \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0447\u0435\u0442\u0430\u0442\u044c\u0441\u044f \u0441 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043e\u0439 \u0434\u043e\u043c\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f \u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0441\u0442\u0438\u043b\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0434\u043e\u0439\u0442\u0438 \u043a\u0435\u0440\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0438\u043b\u0438 \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430, \u0430 \u0434\u043b\u044f \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u2014 \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n\\n3. <b>\u0414\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c \u0438 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435</b>:\\n\u2022 \u0420\u0430\u0437\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438\u043c\u0435\u044e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0439 \u0441\u0440\u043e\u043a \u0441\u043b\u0443\u0436\u0431\u044b. \u041c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u0440\u043e\u0432\u043b\u0438 \u0438 \u0433\u043b\u0438\u043d\u044f\u043d\u0430... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:16", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:16", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='ffd203d1-854d-470a-960b-c95b197d69f2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:16", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:16", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:33:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:03", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-12-06 06:34:03", "name": "__main__", "levelname": "INFO", "message": "Logging is set up.", "taskName": null}
{"asctime": "2024-12-06 06:34:03", "name": "__main__", "levelname": "INFO", "message": "Application built with provided token.", "taskName": null}
{"asctime": "2024-12-06 06:34:03", "name": "__main__", "levelname": "INFO", "message": "DatabaseService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-06 06:34:04", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": null}
{"asctime": "2024-12-06 06:34:04", "name": "__main__", "levelname": "INFO", "message": "LLMService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-06 06:34:04", "name": "__main__", "levelname": "INFO", "message": "Handlers added to the application.", "taskName": null}
{"asctime": "2024-12-06 06:34:04", "name": "__main__", "levelname": "INFO", "message": "Bot is starting...", "taskName": null}
{"asctime": "2024-12-06 06:34:05", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:34:05", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:34:05", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:34:10", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:10", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:34:10", "last_active": "2024-12-06, 06:34:10", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:34:10", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:10", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000021AFC8A86B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 34, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3285, supergroup_chat_created=False, text='/knowledge_base'), update_id=881194104), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021AFE0E9860>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:11", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000021AFE06D240>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:12", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:12", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:34:14", "last_active": "2024-12-06, 06:34:14", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000021AFC8A86B0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659767844229', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 34, 11, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3286, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000021AFDF36150>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "handlers", "levelname": "DEBUG", "message": "Found 29 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000021AFE218650>, 'E:\\\\knowledge_base\\\\russian_regulations', 'Russian'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000021AFE218650>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:14", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:15", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:22", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:34:22", "last_active": "2024-12-06, 06:34:22", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:34:22", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000021AFC8A86B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 34, 21, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3288, supergroup_chat_created=False, text='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881194106), <telegram.ext._callbackcontext.CallbackContext object at 0x0000021AFDFE7E00>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000021AFE2315D0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='1a77c64f-1141-4f0e-a834-714cea1d91d6' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='1a77c64f-1141-4f0e-a834-714cea1d91d6'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000021AFE218650>, '\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0441\u0442\u0438\u043b\u044c \u0432\u0430\u0448\u0435\u0433\u043e \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n\u2022 \u0412 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0438\u043b\u0438 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u043d\u0435\u0433\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c\u0438 \u043f\u043e\u0434\u043e\u0439\u0434\u0443\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u043d\u0438\u0437\u043a\u0438\u043c \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430\u043c \u0438 \u0442\u044f\u0436\u0435\u043b\u043e\u043c\u0443 \u0441\u043d\u0435\u0433\u0443, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043d\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430.\\n\u2022 \u0414\u043b\u044f \u0437\u043e\u043d \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0434\u043e\u0436\u0434\u044f\u043c\u0438 \u0432\u044b\u0431\u0438\u0440\u0430\u0439\u0442\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u043f\u043b\u0435\u0441\u0435\u043d\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "llm_service", "levelname": "INFO", "message": "Detected language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "llm_service", "levelname": "INFO", "message": "Detected user language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021AFE67A840>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 7820, 24803, 26503, 34613, 96573, 7753, 1840, 16331, 20440, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 06 Dec 2024 03:34:23 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '313'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999980'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_994771479f2f8c85ff44a372e326ecea'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=Z6wW7WS_Ih0q6qcYWX2TxeRCPp9meM..RqXG622PGJs-1733456063-1.0.1.1-nMg34_.CLWaUo18AOEBcmkb6ga8M9FNitldhK... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_994771479f2f8c85ff44a372e326ecea", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021AFBCEC860>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 7820, 24803, 26503, 34613, 96573, 7753, 1840, 16331, 20440, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:34:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '108', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_5c5e714580020f3354d5998b7fb03437', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed9384ddc1bbe79-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5c5e714580020f3354d5998b7fb03437", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021AFBCEC860>, 'json_data': {'input': [[20, 33006, 19, 13, 18, 80798, 14476, 50306, 86995, 50693, 6856, 39280, 7820, 90795, 3865, 10298, 4655, 6578, 96573, 7753, 1840, 16331, 24697, 720, 19, 13, 18, 13, 16, 35889, 23297, 43293, 50306, 38098, 79370, 57186, 320, 68506, 39244, 4655, 7820, 17721, 13433, 2297, 1506, 8, 7952, 12507, 6856, 98599, 39988, 93099, 4655, 720, 41873, 15752, 13337, 6856, 14009, 70129, 21204, 23934, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 6856, 45658, 5591, 16742, 44786, 91146, 9706, 11, 21477, 2297, 3865, 12426, 5372, 44786, 7740, 44946, 14476, 1840, 14476, 5372, 44786, 20879, 720, 3865, 5591, 3114, 38657, 2156, 18999, 5927, 41291, 10589, 94520, 1532, 45658, 35682, 18999, 13, 720, 19, 13, 18, 13, 17, 39903, 7753, 33742, 4329, 2156, 44065, 46088, 4655, 38098, 79370, 15458, 12415, 11, 20879, 6578, 8341, 13433, 6850, 41873, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:34:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '176', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_2753ea0469e903b6f471ae35e5d5d0b7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed938502dfdbe79-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2753ea0469e903b6f471ae35e5d5d0b7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021AFBCEC860>, 'json_data': {'input': [[4370, 33006, 23, 13, 20, 13, 22, 13, 17, 51418, 7975, 14476, 69775, 13373, 55523, 31443, 20440, 81757, 33793, 3114, 3865, 8131, 1840, 20346, 10298, 16742, 5173, 3114, 23630, 4898, 16742, 7820, 39103, 30480, 56449, 14525, 34943, 13337, 48074, 20812, 6856, 18482, 720, 9136, 31281, 18999, 6578, 11, 12561, 28089, 13404, 5372, 12648, 6578, 5927, 79327, 1532, 220, 21, 13, 17, 20440, 90211, 44786, 29619, 6856, 13, 720, 23, 13, 21, 36479, 24803, 14009, 720, 23, 13, 21, 13, 16, 36479, 24803, 14009, 56449, 14525, 21923, 23297, 8164, 56857, 28089, 18482, 44946, 14476, 9542, 3865, 38098, 79370, 15458, 12415, 7820, 39103, 30480, 7740, 7952, 12507, 1506, 20879, 720, 8164, 2233, 17766, 38822, 39280, 7952, 21956, 7094, 33742, 16742, 11, 11047, 16331, 16742, 5927, 9706, 4655, 7740, 5524, 2156, 25698, 1506, 13, 23784, 22918, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:34:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '157', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998329', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_c9289f9882bddb86083341393cf9e843', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93853c8dabe79-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c9289f9882bddb86083341393cf9e843", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021AFBCEC860>, 'json_data': {'input': [[19871, 17279, 220, 1114, 13, 9423, 966, 13, 679, 22, 36479, 24803, 11320, 13, 57855, 4898, 89348, 72331, 59921, 7486, 44858, 18600, 83586, 71829, 28599, 20807, 1840, 17279, 8105, 12, 1627, 12, 4767, 320, 2297, 43896, 9136, 38972, 18999, 64880, 452, 220, 16, 11, 220, 17, 11, 220, 18, 8, 720, 19871, 49899, 73226, 64292, 20879, 220, 2148, 13, 2304, 13, 679, 22, 452, 220, 1114, 13, 9423, 966, 13, 679, 22, 720, 54745, 16494, 5372, 4329, 50819, 5524, 220, 1721, 13, 717, 13, 679, 22, 5927, 9136, 24697, 5372, 28599, 17279, 220, 1114, 13, 9423, 966, 13, 679, 16, 720, 74598, 96256, 1506, 220, 1114, 720, 16604, 2156, 16494, 27717, 0, 39903, 92533, 5927, 52520, 5372, 5927, 7952, 87483, 60990, 77495, 79373, 3865, 11047, 98285, 23446, 6148, 23297, 4898, 22885, 18600, 25698, 3114, 24697, 88831, 13, 39903, 29256, 47680, 560... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:34:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '169', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998277', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_559915af6d43b5193630f769308c1135', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed938566b0cbe79-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_559915af6d43b5193630f769308c1135", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000021AFBCEC860>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 6549, 33006, 22, 13, 18, 45458, 97341, 38657, 11562, 8341, 16331, 91216, 23297, 17165, 10693, 8379, 15752, 11001, 114, 40590, 90457, 67745, 38098, 79370, 15458, 12415, 7820, 24803, 11320, 2355, 996, 29619, 35111, 6856, 16742, 5524, 10124, 9239, 17165, 7740, 23934, 5524, 68506, 2156, 7094, 5591, 34082, 12, 8164, 7486, 12394, 21708, 33006, 22, 13, 18, 13, 16, 23227, 7753, 13404, 73642, 16331, 12507, 11562, 97341, 38657, 1506, 26539, 35111, 6856, 7820, 24803, 11320, 7740, 220, 7820, 24803, 26503, 44786, 5173, 7486, 12394, 21708, 19175, 14082, 31101, 1840, 7058, 6578, 1482, 93323, 7753, 12426, 18264, 95967, 18154, 14257, 77911, 20812, 3865, 30392, 29256, 64292, 7740, 12561, 14837, 17766, 6856, 11, 69556, 18264, 13373, 34943, 13337, 48074, 20812, 50306, 72... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:34:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '139', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999085', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_63eedad85c96b0729dc5620a9cbabb8a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed938596d88be79-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_63eedad85c96b0729dc5620a9cbabb8a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-06, 06:34:26. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retri... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 06 Dec 2024 03:34:33 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '6673'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '789883'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '758ms'), ('x-request-id', 'req_a9ab14c076a5e69fe2584d6ba3dcf323'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=9h5xZcsymbTJ_.8RrcLiOsYqw8PHlE56zTEcFSt26r0-1733456073-1.0.1.1-Kebd2ykSg_xz6cBKcL1nqsdad9KZ8BA7VyyTxptOyZaA6bp4371QgyDG.UdExa9lHUl_5XE8W7fxDQQSYHyYYg; path=/; expires=Fri, 06... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a9ab14c076a5e69fe2584d6ba3dcf323", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:33", "name": "llm_service", "levelname": "INFO", "message": "No need to translate the answer", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:33", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8400711689206254, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:33", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:33", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n   - \u0412 \u0440\u0430\u0439\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0438 \u0441\u043d\u0435\u0433\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:34:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '265', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '798879', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '84ms', 'x-request-id': 'req_e2ac23cfbea129ff9ae827e4409b6dfb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed9388a7cc7ea79-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e2ac23cfbea129ff9ae827e4409b6dfb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['No suggestions needed.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n\u2022 \u0412 \u0440\u0430\u0439\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0438 \u0441\u043d\u0435\u0433\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c\u0438 \u043b\u0443\u0447\u0448\u0435 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u043d\u0438\u0437\u043a\u0438\u043c \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430\u043c \u0438 \u0441\u043d\u0435\u0436\u043d\u044b\u043c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043d\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430.\\n\u2022 \u0412 \u0437\u043e\u043d\u0430\u0445 \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0447\u0430\u0441\u0442\u044b\u043c\u0438 \u0434\u043e\u0436\u0434\u044f\u043c\u0438 \u043f\u043e\u0434\u043e\u0439\u0434\u0443\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u043f\u043b\u0435\u0441\u0435\u043d\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u0435\u0440\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430.\\n\\n2. <b>\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430</b>:\\n\u2022 \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0447\u0435\u0442\u0430\u0442\u044c\u0441\u044f \u0441 \u043e\u0431\u0449\u0438\u043c \u0441\u0442\u0438\u043b\u0435\u043c \u0434\u043e\u043c\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f \u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0441\u0442\u0438\u043b\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0434\u043e\u0439\u0442\u0438 \u043a\u0435\u0440\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0438\u043b\u0438 \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430, \u0430 \u0434\u043b\u044f \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u2014 \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n\\n3. <b>\u0414\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c \u0438 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435</b>:\\n\u2022 \u0420\u0430\u0437\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438\u043c\u0435\u044e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0439 \u0441\u0440\u043e\u043a \u0441\u043b\u0443\u0436\u0431\u044b. \u041c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='1a77c64f-1141-4f0e-a834-714cea1d91d6'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:34", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:35", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:34:35", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:46", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-12-06 06:36:46", "name": "__main__", "levelname": "INFO", "message": "Logging is set up.", "taskName": null}
{"asctime": "2024-12-06 06:36:47", "name": "__main__", "levelname": "INFO", "message": "Application built with provided token.", "taskName": null}
{"asctime": "2024-12-06 06:36:47", "name": "__main__", "levelname": "INFO", "message": "DatabaseService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-06 06:36:48", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": null}
{"asctime": "2024-12-06 06:36:48", "name": "__main__", "levelname": "INFO", "message": "LLMService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-06 06:36:48", "name": "__main__", "levelname": "INFO", "message": "Handlers added to the application.", "taskName": null}
{"asctime": "2024-12-06 06:36:48", "name": "__main__", "levelname": "INFO", "message": "Bot is starting...", "taskName": null}
{"asctime": "2024-12-06 06:36:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:36:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:36:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-12-06 06:36:50", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:50", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:36:50", "last_active": "2024-12-06, 06:36:50", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:36:50", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:50", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000017552ABBA70>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 36, 49, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3290, supergroup_chat_created=False, text='/knowledge_base'), update_id=881194107), <telegram.ext._callbackcontext.CallbackContext object at 0x00000175781B94E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001757813D240>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:51", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:52", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:53", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:36:53", "last_active": "2024-12-06, 06:36:53", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:36:53", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000017552ABBA70>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658156160495', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 36, 51, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3291, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000017578006150>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "handlers", "levelname": "DEBUG", "message": "Found 29 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000017578248320>, 'E:\\\\knowledge_base\\\\russian_regulations', 'Russian'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000017578248320>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:36:54", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:02", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-06, 06:37:02", "last_active": "2024-12-06, 06:37:02", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-06 06:37:02", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:02", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000017552ABBA70>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 6, 3, 37, 1, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3293, supergroup_chat_created=False, text='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881194109), <telegram.ext._callbackcontext.CallbackContext object at 0x00000175781B94E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000017578261030>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='27535c7f-4024-4b18-ab8e-02136448383b' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='27535c7f-4024-4b18-ab8e-02136448383b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000017578248320>, '\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n\u2022 \u0412 \u0440\u0430\u0439\u043e\u043d\u0430\u0445 \u0441 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u043c \u043a\u043b\u0438\u043c\u0430\u0442\u043e\u043c \u0438 \u0441\u043d\u0435\u0433\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c\u0438 \u043b\u0443\u0447\u0448\u0435 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u043d\u0438\u0437\u043a\u0438\u043c \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430\u043c \u0438 \u0441\u043d\u0435\u0436\u043d\u044b\u043c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u043c, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043d\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430.\\n\u2022 \u0412 \u0437\u043e\u043d\u0430\u0445 \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0447\u0430\u0441\u0442\u044b\u043c\u0438 \u0434\u043e\u0436\u0434\u044f\u043c\u0438 \u043f\u043e\u0434\u043e\u0439\u0434\u0443\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u043f\u043b\u0435\u0441\u0435\u043d\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "llm_service", "levelname": "INFO", "message": "Detected language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "llm_service", "levelname": "INFO", "message": "Detected user language: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000175787327A0>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 7820, 24803, 26503, 34613, 96573, 7753, 1840, 16331, 20440, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 06 Dec 2024 03:37:03 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '122'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999980'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_c7e4f87d114f8d4feb268ec95dcb4ddd'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=OLtKO5RsyfnAA4EKzoKXPLBgo5JKnhuBMAqK.apVYrY-1733456223-1.0.1.1-matoxyC1.SegJW0dLAEuhNkQX37pWM3jfMYYx... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_c7e4f87d114f8d4feb268ec95dcb4ddd", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:04", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017575348220>, 'json_data': {'input': [[27435, 16248, 63229, 2233, 18482, 7820, 24803, 26503, 34613, 96573, 7753, 1840, 16331, 20440, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:37:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '120', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999980', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_e84c566525efcb7cc0760ee97d05d5fc', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93c378c2a9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e84c566525efcb7cc0760ee97d05d5fc", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017575348220>, 'json_data': {'input': [[20, 33006, 19, 13, 18, 80798, 14476, 50306, 86995, 50693, 6856, 39280, 7820, 90795, 3865, 10298, 4655, 6578, 96573, 7753, 1840, 16331, 24697, 720, 19, 13, 18, 13, 16, 35889, 23297, 43293, 50306, 38098, 79370, 57186, 320, 68506, 39244, 4655, 7820, 17721, 13433, 2297, 1506, 8, 7952, 12507, 6856, 98599, 39988, 93099, 4655, 720, 41873, 15752, 13337, 6856, 14009, 70129, 21204, 23934, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 6856, 45658, 5591, 16742, 44786, 91146, 9706, 11, 21477, 2297, 3865, 12426, 5372, 44786, 7740, 44946, 14476, 1840, 14476, 5372, 44786, 20879, 720, 3865, 5591, 3114, 38657, 2156, 18999, 5927, 41291, 10589, 94520, 1532, 45658, 35682, 18999, 13, 720, 19, 13, 18, 13, 17, 39903, 7753, 33742, 4329, 2156, 44065, 46088, 4655, 38098, 79370, 15458, 12415, 11, 20879, 6578, 8341, 13433, 6850, 41873, 1... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:37:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '77', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_9ec73d7c27e6cc1f337d59aa0322006e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93c3df9419185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9ec73d7c27e6cc1f337d59aa0322006e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017575348220>, 'json_data': {'input': [[4370, 33006, 23, 13, 20, 13, 22, 13, 17, 51418, 7975, 14476, 69775, 13373, 55523, 31443, 20440, 81757, 33793, 3114, 3865, 8131, 1840, 20346, 10298, 16742, 5173, 3114, 23630, 4898, 16742, 7820, 39103, 30480, 56449, 14525, 34943, 13337, 48074, 20812, 6856, 18482, 720, 9136, 31281, 18999, 6578, 11, 12561, 28089, 13404, 5372, 12648, 6578, 5927, 79327, 1532, 220, 21, 13, 17, 20440, 90211, 44786, 29619, 6856, 13, 720, 23, 13, 21, 36479, 24803, 14009, 720, 23, 13, 21, 13, 16, 36479, 24803, 14009, 56449, 14525, 21923, 23297, 8164, 56857, 28089, 18482, 44946, 14476, 9542, 3865, 38098, 79370, 15458, 12415, 7820, 39103, 30480, 7740, 7952, 12507, 1506, 20879, 720, 8164, 2233, 17766, 38822, 39280, 7952, 21956, 7094, 33742, 16742, 11, 11047, 16331, 16742, 5927, 9706, 4655, 7740, 5524, 2156, 25698, 1506, 13, 23784, 22918, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:37:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '82', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998329', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_743239f16cd66662ed4a61567b4f61e9', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93c439e109185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_743239f16cd66662ed4a61567b4f61e9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017575348220>, 'json_data': {'input': [[19871, 17279, 220, 1114, 13, 9423, 966, 13, 679, 22, 36479, 24803, 11320, 13, 57855, 4898, 89348, 72331, 59921, 7486, 44858, 18600, 83586, 71829, 28599, 20807, 1840, 17279, 8105, 12, 1627, 12, 4767, 320, 2297, 43896, 9136, 38972, 18999, 64880, 452, 220, 16, 11, 220, 17, 11, 220, 18, 8, 720, 19871, 49899, 73226, 64292, 20879, 220, 2148, 13, 2304, 13, 679, 22, 452, 220, 1114, 13, 9423, 966, 13, 679, 22, 720, 54745, 16494, 5372, 4329, 50819, 5524, 220, 1721, 13, 717, 13, 679, 22, 5927, 9136, 24697, 5372, 28599, 17279, 220, 1114, 13, 9423, 966, 13, 679, 16, 720, 74598, 96256, 1506, 220, 1114, 720, 16604, 2156, 16494, 27717, 0, 39903, 92533, 5927, 52520, 5372, 5927, 7952, 87483, 60990, 77495, 79373, 3865, 11047, 98285, 23446, 6148, 23297, 4898, 22885, 18600, 25698, 3114, 24697, 88831, 13, 39903, 29256, 47680, 560... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:37:07 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '143', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998277', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '20ms', 'x-request-id': 'req_f604e8a89227bc09c17628e6962b29d3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93c497b179185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f604e8a89227bc09c17628e6962b29d3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000017575348220>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 6549, 33006, 22, 13, 18, 45458, 97341, 38657, 11562, 8341, 16331, 91216, 23297, 17165, 10693, 8379, 15752, 11001, 114, 40590, 90457, 67745, 38098, 79370, 15458, 12415, 7820, 24803, 11320, 2355, 996, 29619, 35111, 6856, 16742, 5524, 10124, 9239, 17165, 7740, 23934, 5524, 68506, 2156, 7094, 5591, 34082, 12, 8164, 7486, 12394, 21708, 33006, 22, 13, 18, 13, 16, 23227, 7753, 13404, 73642, 16331, 12507, 11562, 97341, 38657, 1506, 26539, 35111, 6856, 7820, 24803, 11320, 7740, 220, 7820, 24803, 26503, 44786, 5173, 7486, 12394, 21708, 19175, 14082, 31101, 1840, 7058, 6578, 1482, 93323, 7753, 12426, 18264, 95967, 18154, 14257, 77911, 20812, 3865, 30392, 29256, 64292, 7740, 12561, 14837, 17766, 6856, 11, 69556, 18264, 13373, 34943, 13337, 48074, 20812, 50306, 72... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:37:07 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999085', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_602ef4b734b07b27f836e035030481b7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93c4c4d579185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_602ef4b734b07b27f836e035030481b7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-06, 06:37:08. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retri... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 06 Dec 2024 03:37:16 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '7323'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '790147'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '738ms'), ('x-request-id', 'req_46b04bb0370793ef821d9f07fb27de1b'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=YIZ9s29_8pnLfXBvU4mRTKG9nVpFfsR1_jv2GUTkMhA-1733456236-1.0.1.1-reDljB6uqfjha_vFWW_iPXEyGdSUAX7o4tNLjyEeGoqAZZ.DJ1GqC.iMk7WHIDjhKAwN1sr.BMUV4PtOMMgU5w; path=/; expires=Fri, 06... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_46b04bb0370793ef821d9f07fb27de1b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:17", "name": "llm_service", "levelname": "INFO", "message": "No need to translate the answer", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:17", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8400711689206254, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:17", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:17", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u044f\u0434\u0430 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n   - \u0412 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u043e\u0431\u0438\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u043d\u0435\u0433\u043e\u043f\u0430\u0434\u0430\u043c\u0438 \u0441\u0442\u043e\u0438\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 06 Dec 2024 03:37:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '674', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '798889', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '83ms', 'x-request-id': 'req_7554f45377b16775fa84e9cb4c89eeeb', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ed93c89a8fcc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7554f45377b16775fa84e9cb4c89eeeb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:18", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0432\u0438\u0434\u0430\u0445 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432: \u043a\u0430\u043a\u043e\u0432\u044b \u0438\u0445 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043a\u0438?', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u043e\u0439 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u043b\u0443\u0447\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430?', '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442 \u043d\u0430 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:18", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0412\u044b\u0431\u043e\u0440 \u043a\u0440\u043e\u0432\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430 \u0434\u043b\u044f \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u044f\u0434\u0430 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430, \u0431\u044e\u0434\u0436\u0435\u0442 \u0438 \u043b\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f. \u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c:\\n\\n1. <b>\u041a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f</b>:\\n\u2022 \u0412 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0445 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u043e\u0431\u0438\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u043d\u0435\u0433\u043e\u043f\u0430\u0434\u0430\u043c\u0438 \u0441\u0442\u043e\u0438\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u043e\u0440\u043e\u0448\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442 \u0441\u043d\u0435\u0433\u043e\u0432\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u043d\u0438\u0437\u043a\u0438\u0435 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043d\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430.\\n\u2022 \u0412 \u0440\u0430\u0439\u043e\u043d\u0430\u0445 \u0441 \u0432\u044b\u0441\u043e\u043a\u043e\u0439 \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0438 \u0447\u0430\u0441\u0442\u044b\u043c\u0438 \u0434\u043e\u0436\u0434\u044f\u043c\u0438 \u043f\u043e\u0434\u043e\u0439\u0434\u0443\u0442 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u044b\u0435 \u043a \u0432\u043b\u0430\u0433\u0435 \u0438 \u043f\u043b\u0435\u0441\u0435\u043d\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043c\u0435\u0442\u0430\u043b\u043b \u0438\u043b\u0438 \u043a\u0435\u0440\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430.\\n\\n2. <b>\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0434\u043e\u043c\u0430</b>:\\n\u2022 \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0434\u043e\u043b\u0436\u0435\u043d \u0433\u0430\u0440\u043c\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441 \u043e\u0431\u0449\u0438\u043c \u0441\u0442\u0438\u043b\u0435\u043c \u0434\u043e\u043c\u0430. \u0414\u043b\u044f \u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0441\u0442\u0438\u043b\u044f \u0447\u0430\u0441\u0442\u043e \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0442 \u043a\u0435\u0440\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0438\u043b\u0438 \u0431\u0435\u0442\u043e\u043d\u043d\u0443\u044e \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0443, \u0430 \u0434\u043b\u044f \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0433\u043e \u2014 \u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u043b\u0438 \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n\\n3. <b>\u0414\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u043e\u0441\u0442\u044c \u0438 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435</b>:\\n\u2022 \u041c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u0440\u043e\u0432\u043b\u0438 \u0438 \u0433\u043b\u0438\u043d\u044f\u043d\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0434\u043e\u043b\u0433\u043e\u0432\u0435\u0447\u043d\u0435\u0435, \u0447\u0435\u043c \u0430\u0441\u0444\u0430\u043b\u044c\u0442\u043e\u0432\u0430\u044f \u0447\u0435\u0440\u0435\u043f\u0438\u0446\u0430. \u041e\u0434... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:18", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:18", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='27535c7f-4024-4b18-ab8e-02136448383b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:18", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:19", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-06 06:37:19", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
