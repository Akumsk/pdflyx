{"asctime": "2024-11-29 09:10:57", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:10:58", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:10:59", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:10:59", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:11:00", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 7957491500", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: ZYUEV plas", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Initialized language for user_id=7957491500: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=7957491500, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='ZYUEV plas', id=7957491500, type=<ChatType.PRIVATE>, username='ZYUEV'), date=datetime.datetime(2024, 11, 28, 18, 20, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='ZYUEV plas', id=7957491500, is_bot=False, language_code='ru', username='ZYUEV'), group_chat_created=False, message_id=2534, supergroup_chat_created=False, text='/start'), update_id=881193657), <telegram.ext._callbackcontext.CallbackContext object at 0x0000018B12102F90>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000018B11F73810>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:01", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=7957491500", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:02", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=7957491500", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:02", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=7957491500, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:55", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 11, 55, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2536, supergroup_chat_created=False, text='/start'), update_id=881193658), <telegram.ext._callbackcontext.CallbackContext object at 0x0000018B121037E0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000018B11F736E0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:56", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:58", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:11:58", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 12, 1, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2538, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193659), <telegram.ext._callbackcontext.CallbackContext object at 0x0000018B121015C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000018B11F879A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:02", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659032932607', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 12, 1, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2539, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000018B10DBB8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000018B12141370>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000018B12141370>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:04", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:12:05", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000018B6C99B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 13, 22, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2541, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193661), <telegram.ext._callbackcontext.CallbackContext object at 0x0000018B121015C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000018B120CDF20>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='fd748cf4-b296-4e25-8c47-ef8c5322e0c8' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='fd748cf4-b296-4e25-8c47-ef8c5322e0c8'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000018B12141370>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='Tell me the joke about Indonesian construction', additional_kwargs={}, response_metadata={}), AIMessage(content=\"I'm sorry, but I don't know a specific joke about Indonesian construction. If you have any other questions or need assistance, feel free to ask!\\n\\n------------------\\nReferences:\\nRISBT-FINAL-APRESIASI-REV-Bedah-Buku-Jimmy-Yuwana-pdf.pdf, pages: 2, 495, 591, 595\", additional_kwargs={}, response_metadata={}), HumanMessage(content='Do you like  my name?', additional_kwargs={}, response_metadata={}), AIMessage(content=\"As an AI, I don't have personal preferences or feelings, but I'm happy to assist you, Findus! It's a un... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B121C6CA0>, 'json_data': {'input': [[4898, 16248, 16742, 18868, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:13:24 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '39'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_d360df73e224d7ed011d5148b96d72b5'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=fR5d1N8Og7_.f9nGoIE44Orr2LdvXnLY4mpn8c3B.Gs-1732860804-1.0.1.1-.ax315bJvYH.nM14PUGGE2Yc4O2bosjDoa7_zf... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d360df73e224d7ed011d5148b96d72b5", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[4898, 16248, 16742, 18868, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '33', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_f0a2c61a4e94946cb74a8f2a6ffcdde6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0739acb55b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f0a2c61a4e94946cb74a8f2a6ffcdde6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '123', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_6eb69f963f64c1673830285b5facf976', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0739e7f58b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6eb69f963f64c1673830285b5facf976", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '88', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_d1095a72572fd320573cbfc86b62b354', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea073a26af4b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d1095a72572fd320573cbfc86b62b354", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '140', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998365', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_794156e54b97c00913bf8e70dd3adcc6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea073a60ee8b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_794156e54b97c00913bf8e70dd3adcc6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000018B109B4CC0>, 'json_data': {'input': [[7094, 14009, 11047, 98285, 2156, 7975, 14837, 81301, 17165, 10693, 77083, 7094, 570, 33006, 605, 13, 23, 720, 60627, 4898, 2233, 90705, 51736, 720, 8164, 2233, 1482, 10298, 4655, 720, 1840, 11320, 720, 15088, 14525, 720, 8164, 2233, 1482, 41873, 49899, 20812, 5372, 44786, 720, 8164, 12507, 86610, 62491, 11, 720, 8164, 44075, 2156, 19188, 31281, 5372, 44065, 20440, 22918, 6735, 35034, 5372, 39900, 12561, 9542, 74351, 5927, 35387, 3865, 10693, 1506, 5927, 11047, 67124, 3114, 35723, 28114, 1840, 9706, 25756, 87878, 11, 93129, 73181, 720, 89554, 6578, 86610, 18482, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 20879, 29619, 1506, 46177, 25190, 109, 38438, 21708, 5173, 39865, 14476, 23680, 17165, 57297, 6850, 41873, 1506, 41291, 10298, 1506, 11, 21022, 20440, 720, 8164, 2233,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '123', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998495', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_962a57aa10625dbd91dfc4deca4b3771', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea073a8b9f4b5e4-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_962a57aa10625dbd91dfc4deca4b3771", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:13:27. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n84 \\n \\n\u0430) \u0438\u0437\u0432\u0435\u0449\u0430\u0442\u0435\u043b\u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043f\u043e\u043b\u0430 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430 (\u0432\u043a\u043b\u044e\u0447\u0430\u044f \\n\u043f\u043e\u0434\u0432\u0430\u043b\u044b), \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e\u0441\u044f \u043d\u0430 900 \u0438\u043b\u0438 \u0431\u043e\u043b\u0435\u0435 \u043c\u043c \u0432\u044b\u0448\u0435 \u0438\u043b\u0438 \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u0441\u043c\u0435\u0436\u043d\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430; \\n\u0431) \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043e\u0442 \u043b\u044e\u0431\u043e\u0433\u043e \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u043d\u0430 \u044d\u0442\u0430\u0436\u0435 \u0434... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:13:32 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '4734'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793891'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '458ms'), ('x-request-id', 'req_fe6642a18c723723b8e9f4c57475936f'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=2tXxJRbSKYUt7sMXXisIUT5lKHWb59rTqHrXo7BnmEU-1732860812-1.0.1.1-KNEeJKdQSFMGf9kFlr3ZQaeEj8YQaOWquKR80kbTPmh3vdSNyp4KCQk8XhGSvWJxv5sBZajaWQpolEAKPt9I4g; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fe6642a18c723723b8e9f4c57475936f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8543789145294048, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and response, determine whether additional suggestions would help the user continue the conversation effectively. If yes, provide up to 3 follow-up questions or topics that the user can clarify or explore further. If no further suggestions are needed, respond with 'No suggestions needed.'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0443 \u043c\u0435\u043d\u044f \u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043e\u0441\u0442\u0430\u0432\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u0432\u044b\u0431\u043e\u0440 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0436\u0435\u043b\u0430\u0435\u043c\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043e\u043c \u0438\u043b\u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u043e\u0440\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430.\\n\\nSuggestions:\", 'role': 'user'}], 'model': 'gpt-4o', 'n': 1, 'stream': Fals... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:13:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1041', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799684', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '23ms', 'x-request-id': 'req_6c0a0709db134153dbd7b8967308eb42', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea073cd79194ac5-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6c0a0709db134153dbd7b8967308eb42", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: object of type 'LLMResult' has no len()", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 319, in generate_suggestions\n    if suggestions_response and len(suggestions_response) > 0:\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: object of type 'LLMResult' has no len()", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0443 \u043c\u0435\u043d\u044f \u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043e\u0441\u0442\u0430\u0432\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u0432\u044b\u0431\u043e\u0440 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0436\u0435\u043b\u0430\u0435\u043c\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043e\u043c \u0438\u043b\u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u043e\u0440\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430.\\n\\n------------------\\nReferences:\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 76, 83\\n\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421\u041f 1.13130.2020.pdf, pages: 20\\n\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044f \u0438 \u043a\u043e\u043d\u0434\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430_\u0421\u041f 60.13330.2020.pdf, pages: 63\\n', {'\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421\u041f 1.13130.2020.pdf', '\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf', '\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044f \u0438 \u043a\u043e\u043d\u0434\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430_\u0421\u041f 60.13330.2020.pdf'}, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:34", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='fd748cf4-b296-4e25-8c47-ef8c5322e0c8'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:13:35", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:05", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:25:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:25:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:25:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:25:10", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000028964A8B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 25, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2543, supergroup_chat_created=False, text='/start'), update_id=881193662), <telegram.ext._callbackcontext.CallbackContext object at 0x000002890A0CB150>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000028909F73480>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "handlers", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:11", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000028964A8B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 25, 14, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2545, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193663), <telegram.ext._callbackcontext.CallbackContext object at 0x000002890A0CB380>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000028909F8B520>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:15", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:15", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000028964A8B7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661891825317', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 25, 14, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2546, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000028908DBB8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000002890A2658E0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000002890A2658E0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000028964A8B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 25, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2548, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193665), <telegram.ext._callbackcontext.CallbackContext object at 0x000002890A0CB5B0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000002890A0F20C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='b8aac589-def2-4c0a-bb52-94e80e436193' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='b8aac589-def2-4c0a-bb52-94e80e436193'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000002890A2658E0>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0443 \u043c\u0435\u043d\u044f \u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043e\u0441\u0442\u0430\u0432\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u044d\u0442\u0430\u0436\u0430 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430. \u041e\u0431\u044b\u0447\u043d\u043e \u0432\u044b\u0431\u043e\u0440 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0436\u0435\u043b\u0430\u0435\u043c\u0430\u044f \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043e\u043c \u0438\u043b\u0438 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u043e\u0440\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043d\u0430\u0438\u043b\u0443\u0447\u0448\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430.\\n\\n------------------\\nReferences:\\n\u041a\u0430\u0440\u043a\u0430\u0441\u043d\u044b\u0435 \u0414\u043e\u043c\u0430_\u0421\u041f 31-105-2002 .pdf, pages: 76, 83\\n\u0421\u0438\u0441\u0442\u0435\u043c\u044b \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u0436\u0430\u0440\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b_\u0421... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002890A253EC0>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:25:46 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '72'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_5d769863c186de0c9f8c75dd8d1346c7'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=LN6_pOYdd6A9YWaGKPwzpknm55f_acbRaONctClqKIs-1732861546-1.0.1.1-VOKBRFk95AEh.pXQznH7krzu.5QlstEGd7Se0i... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5d769863c186de0c9f8c75dd8d1346c7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000289089B4CC0>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '60', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_23058c4b567333b2e2cf048000b81fac', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085bbfaff2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_23058c4b567333b2e2cf048000b81fac", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000289089B4CC0>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '113', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_64b3b01e6f8e131a78075c9130cb9021', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085c1ef812df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_64b3b01e6f8e131a78075c9130cb9021", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000289089B4CC0>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '152', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_9cefce41fb5bef33d5d1be5dbd5f5b50', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085c80b7c2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9cefce41fb5bef33d5d1be5dbd5f5b50", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002890A28AFC0>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '193', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_9a3f743d9f39a867a1d60e15e58a4515', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085cd1f642df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9a3f743d9f39a867a1d60e15e58a4515", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002890A28AFC0>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:25:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '85', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998365', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_45f3f1ec7d433fe75391e37d75ade9ac', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea085d04a062df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_45f3f1ec7d433fe75391e37d75ade9ac", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:25:52. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:25:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:26:00 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '6622'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793625'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '478ms'), ('x-request-id', 'req_7ffcec8068edce8cb53cecdb34b536b8'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=e_oM5GZtJfmhsHMzOHWoJwqs5eAMYvU8u0mfHMy1uEE-1732861560-1.0.1.1-aZtmqms1Wy7Qe_giO_l0luBiGj6vJpByEDPLhbFztYd5rlln6NcZWu1hZC37onKqn4Intk.cOHP1bkPxtih8yQ; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7ffcec8068edce8cb53cecdb34b536b8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: Invalid input type <class 'langchain_core.messages.human.HumanMessage'>. Must be a PromptValue, str, or list of BaseMessages.", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 314, in generate_suggestions\n    suggestions_response = self.llm.generate([message])\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 643, in generate\n    raise e\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 633, in generate\n    self._generate_with_cache(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 851, in _generate_with_cache\n    result = self._generate(\n             ^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 692, in _generate\n    payload = self._get_request_payload(messages, stop=stop, **kwargs)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 717, in _get_request_payload\n    messages = self._convert_input(input_).to_messages()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 273, in _convert_input\n    raise ValueError(msg)\nValueError: Invalid input type <class 'langchain_core.messages.human.HumanMessage'>. Must be a PromptValue, str, or list of BaseMessages.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0438 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439. \u041e\u0434\u043d\u0430\u043a\u043e, \u0442\u0438\u043f\u0438\u0447\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e\u043b\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e\u043b\u0430.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u042d\u0442\u043e \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0417\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e\u043b\u0430 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n5. <b>\u0427\u0438\u0441\u0442\u043e\u0432\u043e\u0439 \u0431\u0435\u0442\u043e\u043d\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 (\u0441\u0442\u044f\u0436\u043a\u0430)</b>: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u0438 \u0440\u043e\u0432\u043d\u0443\u044e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f.\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u041c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u0441\u0435\u0431\u044f \u043f\u043b\u0438\u0442\u043a\u0443, \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c \u0438\u043b\u0438 \u043f\u0430\u0440\u043a\u0435\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f.\\n\\n\u042d\u0442\u0438 \u0441\u043b\u043e\u0438 \u043c\u043e\u0433\u0443\u0442 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439, \u0442\u0438\u043f\u0430 \u0433\u0440\u0443\u043d\u0442\u0430 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:00", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:01", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='b8aac589-def2-4c0a-bb52-94e80e436193'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:26:01", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:33", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:30:34", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:30:34", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:30:35", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:30:37", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:37", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:37", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/status'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: status with args: (<handlers.BotHandlers object at 0x000001AF735FB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 30, 37, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=7, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2550, supergroup_chat_created=False, text='/status'), update_id=881193666), <telegram.ext._callbackcontext.CallbackContext object at 0x000001AF18D5ADD0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: status with result: <coroutine object BotHandlers.status at 0x000001AF18C0A110>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:39", "name": "handlers", "levelname": "INFO", "message": "Provided status to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:39", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:42", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001AF735FB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 30, 42, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2552, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193667), <telegram.ext._callbackcontext.CallbackContext object at 0x000001AF18D5B460>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001AF18C1B520>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:43", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001AF735FB7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660290209692', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 30, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2553, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001AF17A4B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001AF18F25AF0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001AF18F25AF0>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:45", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:30:46", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:00", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:00", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001AF735FB7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 31, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2555, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193669), <telegram.ext._callbackcontext.CallbackContext object at 0x000001AF18D5B620>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001AF18D820C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='c3ac41b8-43ec-44bd-80bb-86c83c9cbd17' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='c3ac41b8-43ec-44bd-80bb-86c83c9cbd17'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001AF18F25AF0>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0438 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439. \u041e\u0434\u043d\u0430\u043a\u043e, \u0442\u0438\u043f\u0438\u0447\u043d\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e\u043b\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e\u043b\u0430.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u042d\u0442\u043e \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0417\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e\u043b\u0430 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u044b\u0445 \u0432\u043e\u0434.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF18F13B00>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:31:02 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '164'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_bb443690405d0ac742c3faf00acc5eac'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=lkBdznxCMKE9OXRC4NGncpT5fv3pLP7QwPPpVbrfRlM-1732861862-1.0.1.1-S1QiozGKayZCLtmHEqVWnOtms0.Exjqitde4E... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bb443690405d0ac742c3faf00acc5eac", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF17654D60>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:02", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '43', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_1f27b8301254fa54366608141f06043f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d6fb8e42df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1f27b8301254fa54366608141f06043f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF17654D60>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '175', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_0673927bcf68b5003fa84c94c205b910', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d765dbd2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0673927bcf68b5003fa84c94c205b910", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF17654D60>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '172', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_ecd96f931341d7182b9e89c8c1609a63', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d791fe22df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ecd96f931341d7182b9e89c8c1609a63", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF18F4F7E0>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '165', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_e8dff8e83ca35a398e6326629de47e83', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d7f8c262df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e8dff8e83ca35a398e6326629de47e83", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001AF18F4F7E0>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '163', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998365', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_987eff21c44cc69ddc3e6e6194418f0d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08d82ae182df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_987eff21c44cc69ddc3e6e6194418f0d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:31:06. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:31:40 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '32725'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793075'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '519ms'), ('x-request-id', 'req_886af9dc0592d2fa9e0ec613bd8dd15f'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=rJbTW3ep9kET4eWtwRbR1Oz8YiTrijpnv9WJUUaZj3A-1732861900-1.0.1.1-_ua5yLPkKCBvi9Q.5jdF3V1SP.4ad2ULTPY_AwdElBLG_buin0oQ8hqCQlcuWMDXmJKyfss9UNhIJ_5Hd2q5_A; path=/; expires=Fri, 2... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_886af9dc0592d2fa9e0ec613bd8dd15f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:40", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and response, determine whether additional suggestions would help the user continue the conversation effectively. If yes, provide up to 3 follow-up questions or topics that the user can clarify or explore further. If no further suggestions are needed, respond with 'No suggestions needed.'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430:\\n\\n1. **\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442**: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043b\u043e\u0438 \u043f\u043e\u043b\u0430.\\n2. **\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430**: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. **\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f**: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:31:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1812', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799379', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '46ms', 'x-request-id': 'req_fa05efd57167e820189fe7f6ed7359c7', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea08e5f8afa2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fa05efd57167e820189fe7f6ed7359c7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\"\u041a\u0430\u043a\u0438\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u043b\u0430?\"', '\"\u041a\u0430\u043a\u043e\u0439 \u0442\u0438\u043f \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f \u0432\u044b \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0438\u0442\u0430\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u0441\u0432\u043e\u0435\u043c \u0434\u043e\u043c\u0435 \u0438 \u043f\u043e\u0447\u0435\u043c\u0443?\"', '\"\u0415\u0441\u0442\u044c \u043b\u0438 \u0443 \u0432\u0430\u0448\u0435\u0433\u043e \u0434\u043e\u043c\u0430 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0433\u0440\u0443\u043d\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u043e\u0438\u0442 \u0443\u0447\u0435\u0441\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430?\"']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043b\u043e\u0438 \u043f\u043e\u043b\u0430.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n5. <b>\u0410\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0431\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u044f\u0436\u043a\u0430</b>: \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f. \u0410\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u0441\u0435\u0442\u043a\u043e\u0439 \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438.\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0438 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043b\u0438\u0442\u043a\u0430, \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043f\u0430\u0440\u043a\u0435\u0442 \u0438\u043b\u0438 \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c.\\n\\n\u042d\u0442\u0430 \u0441\u0445\u0435\u043c\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:43", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='c3ac41b8-43ec-44bd-80bb-86c83c9cbd17'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:31:44", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:06", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:34:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:34:08", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:34:08", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:34:26", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:26", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:26", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:27", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000023F2BF0B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 34, 26, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2557, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193670), <telegram.ext._callbackcontext.CallbackContext object at 0x0000023F51560FA0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000023F513EB9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:28", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000023F2BF0B7D0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658013570100', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 34, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2558, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000023F511EB8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000023F515A2600>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000023F515A2600>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:31", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:32", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000023F2BF0B7D0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 34, 38, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2560, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193672), <telegram.ext._callbackcontext.CallbackContext object at 0x0000023F51561630>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000023F5152DD80>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='aec4fea4-b471-4c82-bd84-4ee071fab277' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='aec4fea4-b471-4c82-bd84-4ee071fab277'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000023F515A2600>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0442 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e\u043b\u0430:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u043b\u043e\u0438 \u043f\u043e\u043b\u0430.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u043e\u0442 \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>:... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F515DF560>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:34:40 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '82'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_6bc1f23fa9322624d9751732f06bb2eb'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=sh.d2.GIN.4zgi_2A2TXb9ex2VoscymjRrPo02lUIHU-1732862080-1.0.1.1-L1XShK3UGlRUDAAUMOyb3Opz_fBxbdqk3Y_qKh... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6bc1f23fa9322624d9751732f06bb2eb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '161', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_2d858be8aecce6746828317cc965e383', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092c499522dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2d858be8aecce6746828317cc965e383", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '166', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_3bbffd6c24aa4d6302f848cdf1b1df79', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092cbfeaf2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3bbffd6c24aa4d6302f848cdf1b1df79", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '144', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_2f2f91c623d0cd15a4deedb2d6fd416a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092d2abab2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2f2f91c623d0cd15a4deedb2d6fd416a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '81', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_336ca193690b437bd125526570811fa9', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092d8e8a42dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_336ca193690b437bd125526570811fa9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000023F4FE18D60>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998364', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_e9c2a9941706320b5ef578633a2af9a8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea092dfbe052dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e9c2a9941706320b5ef578633a2af9a8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:34:45. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:34:53 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '6565'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792545'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '559ms'), ('x-request-id', 'req_81163ecbd040ca2f25b41ba62eb3b13f'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=TLba3myOhUwH5olXCnI4b.mAVzSZcSwGvS1J3nr4X_I-1732862093-1.0.1.1-fJGlPOUVYx8NVDC1zh9ew15b2MmnMsgvQudEX1zpTAhULlMP51wnPY2ZZUbZc5XeczFS0HqKMhtmaLsFaJ9yog; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_81163ecbd040ca2f25b41ba62eb3b13f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and response, determine whether additional suggestions would help the user continue the conversation effectively. If yes, provide up to 3 follow-up questions or topics that the user can clarify or explore further. If no further suggestions are needed, respond with 'No suggestions needed.'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432:\\n\\n1. **\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442**: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n2. **\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430**: \u042d\u0442\u043e\u0442 \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. **\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f**: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438 \u0438\u0437 \u0433\u0440\u0443\u043d\u0442\u0430.\\n4. **\u0422\u0435\u043f\u043b\u043e\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:34:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2086', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799400', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '45ms', 'x-request-id': 'req_f5cdffaab385d40ab2d215598ce9be43', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0931459372dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f5cdffaab385d40ab2d215598ce9be43", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u041a\u0430\u043a\u0438\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u044b \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430, \u0438 \u043a\u0430\u043a \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u043f\u043e\u0432\u043b\u0438\u044f\u0442\u044c \u043d\u0430 \u0432\u044b\u0431\u043e\u0440 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430?', '\u041a\u0430\u043a\u043e\u0435 \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435 \u0432\u044b \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u0442\u0435, \u0438 \u0435\u0441\u0442\u044c \u043b\u0438 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u043f\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c \u0438\u043b\u0438 \u0441\u0442\u0438\u043b\u044e?', '\u041f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442\u0435 \u043b\u0438 \u0432\u044b \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0443 \u043f\u043e\u043b\u0430, \u0438\u043b\u0438 \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442\u0435\u0441\u044c \u043d\u0430\u043d\u0438\u043c\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u043e\u0432?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u042d\u0442\u043e\u0442 \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438 \u0438\u0437 \u0433\u0440\u0443\u043d\u0442\u0430.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n5. <b>\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u044f\u0436\u043a\u0430</b>: \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u0438 \u0440\u043e\u0432\u043d\u0443\u044e \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f. \u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0430\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438.\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043b\u0438\u0442\u043a\u0430, \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043f\u0430\u0440\u043a\u0435\u0442 \u0438\u043b\u0438 \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c.\\n\\n\u042d\u0442\u0438 \u0441\u043b\u043e\u0438 \u043c\u043e\u0433\u0443\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:56", "name": "handlers", "levelname": "INFO", "message": "Sent response with source files to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:57", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='aec4fea4-b471-4c82-bd84-4ee071fab277'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:34:57", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:50:35", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 09:50:36", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:50:37", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:50:37", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 09:51:32", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:32", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:32", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:33", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:34", "name": "decorators", "levelname": "WARNING", "message": "Documents not indexed for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001E89F6527B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 51, 35, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2564, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193674), <telegram.ext._callbackcontext.CallbackContext object at 0x000001E8C4B81630>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001E8C4A0F9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:36", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:37", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001E89F6527B0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658269182318', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 51, 36, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2565, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001E8C383B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001E8C4B6FE00>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001E8C4B6FE00>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:38", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001E89F6527B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 6, 51, 43, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2567, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193676), <telegram.ext._callbackcontext.CallbackContext object at 0x000001E8C4B81630>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001E8C4A077F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='0871604c-6138-481d-a6b3-6887880cbcae' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='0871604c-6138-481d-a6b3-6887880cbcae'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001E8C4B6FE00>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content=\"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0435\u0432 \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438, \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0438 \u043a\u043e\u043c\u0444\u043e\u0440\u0442\u0430. \u0412\u043e\u0442 \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043b\u043e\u0439, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b.\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u042d\u0442\u043e\u0442 \u0441\u043b\u043e\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u0434\u0440\u0435\u043d\u0430\u0436 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438.\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0432\u043b\u0430\u0433\u0438 \u0438\u0437 \u0433\u0440\u0443\u043d\u0442\u0430.\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C4C03A60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:51:45 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '122'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_102dd302e4a2dc595e56fbbf6f2c1ba7'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=z8zSkaugf3gy0sS.TNkDKDkuR2V2_DiLqRwlJ.SPqME-1732863105-1.0.1.1-Gd7NA8JK8OcDBGkn0auSNtgJEKx4UrHKVQdgO... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_102dd302e4a2dc595e56fbbf6f2c1ba7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '70', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_9116a68532e4e6872df3ce55b5d07771', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abc8b8a12dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9116a68532e4e6872df3ce55b5d07771", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '118', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_bd8568dfd46800d47590431c8c8a5a9d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abcaea002dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bd8568dfd46800d47590431c8c8a5a9d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:47 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '75', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_1a3dcb0c39c9a380164eec325e7a463b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abd12efe2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_1a3dcb0c39c9a380164eec325e7a463b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '261', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998944', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_9c7f301d264e7d556782d58c1f66d2b1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abd7bc8d2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9c7f301d264e7d556782d58c1f66d2b1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001E8C3438D60>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '79', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_5794eeb9158dcc7d27e4c32fb087bba3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0abdbefb62dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5794eeb9158dcc7d27e4c32fb087bba3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 09:51:49. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:49", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 06:51:56 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '6221'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '793025'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '523ms'), ('x-request-id', 'req_583b5d275ca44460ed19870fa65b8b7d'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=EBXFXyDd1szb.2T4XEHfqLCf4ySR8RhBXT6EPeMoR7o-1732863116-1.0.1.1-NEfzputZ0FziZGDn1ks6Y7cz4CTZjwP5DPNIwMEkZdD8hjqtxBJaeiw4T2iyAP7wa8bb3ndOs7TLrE6j1bHXew; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_583b5d275ca44460ed19870fa65b8b7d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:56", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and response, determine whether additional suggestions would help the user continue the conversation effectively. If yes, provide up to 3 follow-up questions or topics that the user can clarify or explore further. If no further suggestions are needed, respond with 'No suggestions needed.'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n   \\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 06:51:58 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1212', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799445', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '41ms', 'x-request-id': 'req_f4222166e20ed675fae71134c59c64f4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea0ac0f2e592dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f4222166e20ed675fae71134c59c64f4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u041a\u0430\u043a\u043e\u0432\u044b \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431?', '\u041a\u0430\u043a\u0438\u0435 \u0442\u0438\u043f\u044b \u0433\u0440\u0443\u043d\u0442\u0430 \u0443 \u0432\u0430\u0441 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u043a\u0435 \u0438 \u043a\u0430\u043a \u044d\u0442\u043e \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0442\u0440\u0443\u0431?', '\u0412\u044b \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442\u0435 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u043b\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u043e\u0432?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0441\u0443\u0440\u043e\u0432\u044b\u043c\u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0412\u0430\u0436\u043d\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431 \u0434\u043b\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434. \u041e\u0431\u044b\u0447\u043d\u043e \u0443\u043a\u043b\u043e\u043d \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u043c\u0435\u0441\u0442\u043d\u044b\u043c\u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u043d\u043e\u0440\u043c\u0430\u043c\u0438 \u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430\u043c\u0438 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.\\n\\n------------------\\nRe... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='0871604c-6138-481d-a6b3-6887880cbcae'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:58", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:59", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 09:51:59", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:20", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:29:21", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:29:21", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:29:21", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:29:25", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:26", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:26", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000002DFBD5227B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 29, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2569, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193677), <telegram.ext._callbackcontext.CallbackContext object at 0x000002DFE2A3B000>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000002DFE28F79A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:27", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:28", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000002DFBD5227B0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658846927998', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 29, 27, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2570, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:29", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000002DFE26FB8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000002DFE2B1DD00>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000002DFE2B1DD00>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:30", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:38", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000002DFBD5227B0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 29, 38, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2572, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193679), <telegram.ext._callbackcontext.CallbackContext object at 0x000002DFE2A3B000>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000002DFE28FB7F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='167912a8-0850-4c68-9d47-a291278b74f8' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='167912a8-0850-4c68-9d47-a291278b74f8'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000002DFE2B1DD00>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u044d... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE2A49620>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:29:39 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '42'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_6a239fed01a28a696a1cb8db20b92897'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=XmWJXGLu15aDBJre7Pmm_aFM2rq2XJVm.7t.jwNPG4o-1732868979-1.0.1.1-HuCOayvqLwc1YSw5r0dE2dCKjm4xj7tuoanqwS... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6a239fed01a28a696a1cb8db20b92897", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '127', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_cf49deb270149d91422f5ec645244e29', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b32febee780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cf49deb270149d91422f5ec645244e29", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '79', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_43bdb08a8c082459bd7b6b8a7bbb2d25', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b36bec9e780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_43bdb08a8c082459bd7b6b8a7bbb2d25", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '171', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_a465b54754b2d2f9a658183a05d2437f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b3a5ebbe780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a465b54754b2d2f9a658183a05d2437f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '76', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998943', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_4a28fa217ca154a796a1a6f198c891c8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b3e686ee780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4a28fa217ca154a796a1a6f198c891c8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002DFE1324D60>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_0a109b3440738e46bb8412b6de3741a9', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b426baae780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0a109b3440738e46bb8412b6de3741a9", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:29:43. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:29:46 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '3392'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792805'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '539ms'), ('x-request-id', 'req_2838043e986acd8bdd9073fdf1a8fea4'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=bV8qRObfRQEc_sBbNNlHmPa31h_zYoBsvf_hYBRM5I4-1732868986-1.0.1.1-kWyYrypV5tditf4CsZJlXD6CPm04IJZW.7_mx_7M2sPWhGotqvT6.GjJ4PJ4LuDvg3Br8uuXmMSVg505Z9t.3g; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2838043e986acd8bdd9073fdf1a8fea4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. **\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f**: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:29:48 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1025', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799405', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '44ms', 'x-request-id': 'req_dd754f81b6c02146e54fd939e22c10ba', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea13b5fdcc3be76-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dd754f81b6c02146e54fd939e22c10ba", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435?', '\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u043c\u0435\u0441\u0442\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431.', '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0434\u043b\u044f \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435 \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0432\u0430\u0440\u044c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e, \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u0445 \u0441 \u0431\u043e\u043b\u0435\u0435 \u0441\u0443\u0440\u043e\u0432\u044b\u043c\u0438 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 \u044d\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0430.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0412\u0430\u0436\u043d\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431 \u0434\u043b\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434. \u041e\u0431\u044b\u0447\u043d\u043e \u0443\u043a\u043b\u043e\u043d \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430\u043c \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.\\n\\n-----------... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='167912a8-0850-4c68-9d47-a291278b74f8'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:48", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:50", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:29:50", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:32:11", "name": "telegram.ext.Application", "levelname": "ERROR", "message": "No error handlers are registered, logging exception.", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_application.py\", line 1319, in process_update\n    await coroutine\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_handlers\\basehandler.py\", line 158, in handle_update\n    return await self.callback(update, context)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: BotHandlers.handle_inline_buttons() missing 1 required positional argument: 'context'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:06", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:35:07", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:35:08", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:35:08", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:35:15", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:15", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:15", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 14, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2574, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193681), <telegram.ext._callbackcontext.CallbackContext object at 0x000001EE73AEB1C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001EE739AB9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:17", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:17", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:18", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660528924932', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 17, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2575, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001EE727D78A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001EE73BC8320>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001EE73BC8320>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:19", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 30, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2577, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193683), <telegram.ext._callbackcontext.CallbackContext object at 0x000001EE73AEB1C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001EE739A79A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='0c4732c1-9bc4-442c-9f7d-bc2b2e8a7777' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:30", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='0c4732c1-9bc4-442c-9f7d-bc2b2e8a7777'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001EE73BC8320>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0442\u0438\u043f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435 \u0438 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0432\u0430\u0440\u044c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u041e\u0431\u044b\u0447\u043d\u043e \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE73BEF4C0>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:35:31 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '40'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999973'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_e7481d0fb8d323e41977761344b85a9d'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=02ZuYkx376.3dPta0Ei8hYueCFOFKxvlJT4mdYZIDhw-1732869331-1.0.1.1-8Yk14uBVOD8mPEQkTJq0jdC3_2nGTJgo.1mRay... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e7481d0fb8d323e41977761344b85a9d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '103', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_b6abe383bca0236363ec6b2026afb89f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143c86c07ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b6abe383bca0236363ec6b2026afb89f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_929b0f0695806a9fcb6d297f2496c628', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143cbcb54ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_929b0f0695806a9fcb6d297f2496c628", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '178', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_5a17349bc88c348d261ee08a2d85a59a', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143cf3aa3ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5a17349bc88c348d261ee08a2d85a59a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '150', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998943', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_a1e32120e180f2a265a80004a750acf4', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143d30b87ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a1e32120e180f2a265a80004a750acf4", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001EE723D4D60>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:33", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '152', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_96469328fc84889b363d4d47bde7fc6e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143d5a941ee34-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_96469328fc84889b363d4d47bde7fc6e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:35:34. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:34", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:35:38 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '4377'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792853'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '536ms'), ('x-request-id', 'req_2c65c0203b300f48afe2986d87c3a428'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=MPS8.NILNe9S7sPGYRrLuycr5EE2_QZFEShg44R9i8w-1732869338-1.0.1.1-5BcSjYS3CPj05NdCIzhVBcQH1qQS9g7GfhXjsPmhZE4p9OJVy.atK4kWn3gmL2mDy7cAPvBiVfQ0AzFm3dNJZw; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2c65c0203b300f48afe2986d87c3a428", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. **\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f**: \u041a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:39", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:35:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1263', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799422', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '43ms', 'x-request-id': 'req_09336f5344f236742100986528838e7e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea143f9d8deee2f-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_09336f5344f236742100986528838e7e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431.', '\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d \u0434\u043b\u044f \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043a\u0430.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u041a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u0412 \u0441\u0440\u0435\u0434\u043d\u0435\u043c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u0412 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u044d\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0430.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431. \u041e\u0431\u044b\u0447\u043d\u043e \u0443\u043a\u043b\u043e\u043d \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u0430\u043c.\\n\\n------------------\\nReferences:\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='0c4732c1-9bc4-442c-9f7d-bc2b2e8a7777'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:41", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_2', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661233670610', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=19, offset=211, type=<MessageEntityType.BOLD>), MessageEntity(length=19, offset=411, type=<MessageEntityType.BOLD>), MessageEntity(length=10, offset=593, type=<MessageEntityType.BOLD>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2578, reply_markup=InlineKeyboardMarkup(inline_keyboard=((In... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:54", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001EE73BBC9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:55", "name": "decorators", "levelname": "ERROR", "message": "Exception in handler function handle_inline_buttons: Attribute `text` of class `Message` can't be set!", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\decorators.py\", line 77, in wrapper\n    result = await func(self, update, context, *args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\handlers.py\", line 615, in handle_inline_buttons\n    fake_message.text = suggestion\n    ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_telegramobject.py\", line 159, in __setattr__\n    raise AttributeError(\nAttributeError: Attribute `text` of class `Message` can't be set!", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:35:55", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:32", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:32", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='get_file:file_0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: send_file with args: (<handlers.BotHandlers object at 0x000001EE71FAFCE0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='get_file:file_0', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659746484715', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 35, 41, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=19, offset=211, type=<MessageEntityType.BOLD>), MessageEntity(length=19, offset=411, type=<MessageEntityType.BOLD>), MessageEntity(length=10, offset=593, type=<MessageEntityType.BOLD>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2578, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: send_file with result: <coroutine object BotHandlers.send_file at 0x000001EE73AE1BC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "handlers", "levelname": "DEBUG", "message": "Initiated async task to send file '\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f_\u0421\u041f 30.13330.2020.pdf' to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:33", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:40:35", "name": "handlers", "levelname": "INFO", "message": "File '\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f_\u0421\u041f 30.13330.2020.pdf' sent successfully to user_id=244732168.", "taskName": "Task-86"}
{"asctime": "2024-11-29 11:42:47", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:42:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:42:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:42:49", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:42:56", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:56", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:56", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001FACC6D05F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 42, 55, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2581, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193686), <telegram.ext._callbackcontext.CallbackContext object at 0x000001FAF1C7F070>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:57", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001FAF1B0F9A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:58", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:42:58", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001FACC6D05F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659192146091', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 42, 57, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2582, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:00", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001FAF093B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001FAF1C6DA30>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001FAF1C6DA30>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:01", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:13", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001FACC6D05F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 43, 13, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2584, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193688), <telegram.ext._callbackcontext.CallbackContext object at 0x000001FAF1C7F070>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001FAF21527A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='1a493237-f3f3-4302-bf5d-50294efe4460' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='1a493237-f3f3-4302-bf5d-50294efe4460'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001FAF1C6DA30>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u043b\u0443\u0431\u0438\u043d\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443, \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0438 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b. \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u041a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u0412 \u0441\u0440\u0435\u0434\u043d\u0435\u043c \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF1D03560>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:43:15 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '124'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_e77850e851e9b3e77854a7c5e5d601ff'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=.gJBFHwxuujeC8LxAeAbGQwr_KAf4HiK7gE1Xw3pSkE-1732869795-1.0.1.1-RQQPOM6JMugyEfFVInIltkLJ_FbYdCXkxaRJ9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e77850e851e9b3e77854a7c5e5d601ff", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '69', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_01a3b322f30d9eb02c7cb9fe47c468e7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f1c2abac02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_01a3b322f30d9eb02c7cb9fe47c468e7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_a6c517e3bd0452f325116cd11f747978', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f215e0fc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a6c517e3bd0452f325116cd11f747978", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '93', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_5d6b8eeae04aafa2db95762cee445e2b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f281a12c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5d6b8eeae04aafa2db95762cee445e2b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '70', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_575b25af65950de9e5c99b982672bf61', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f2ece2ac02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_575b25af65950de9e5c99b982672bf61", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001FAF0534D60>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '145', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998364', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_04a12ae63ca65112cf24f1464c20a150', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f311f98c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_04a12ae63ca65112cf24f1464c20a150", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:43:19. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:43:24 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '3880'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '791828'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '612ms'), ('x-request-id', 'req_bee1fa259bb19d4a08e70fe768c67fb6'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=9qBDUssBo9HbJnLoe.o5ObAp_0EXyp6zKHJY3YoYfFg-1732869804-1.0.1.1-f95T1ufrj_kZHpG36zT4aupmdatL4TjpaZYUa62y.xjoBWRdCo3KZxQwjekrbQF9Ai3zBiwUPRfF4Eo_4yx45w; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bee1fa259bb19d4a08e70fe768c67fb6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. **\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442**: \u042d\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432.\\n\\n2. **\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430**: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0441\u043b\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 10-... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:43:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '278', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799405', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '44ms', 'x-request-id': 'req_b40ac6d6147538d56395738ea232ce9f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea14f556f112df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b40ac6d6147538d56395738ea232ce9f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0441\u043b\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 10-15 \u0441\u043c.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0435\u043c\u0431\u0440\u0430\u043d\u0430 \u0438\u043b\u0438 \u043f\u043b\u0435\u043d\u043a\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e\u043b\u0430.\\n\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c \u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u043b.\\n\\n5. <b>\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u044f\u0436\u043a\u0430</b>: \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u0438 \u0440\u043e\u0432\u043d\u0443\u044e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f. \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439, \u043e\u0431\u044b\u0447\u043d\u043e 5-10 \u0441\u043c.\\n\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043b\u0438\u0442\u043a\u0430, \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043f\u0430\u0440\u043a\u0435\u0442 \u0438\u043b\u0438 \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439 \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f.\\n\\n\u042d\u0442\u0438 \u0441\u043b\u043e\u0438 \u043c\u043e\u0433\u0443\u0442 \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='1a493237-f3f3-4302-bf5d-50294efe4460'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:25", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:26", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:43:26", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:24", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:44:26", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:44:26", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:44:26", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:44:27", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:27", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:27", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x00000240638005F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 44, 25, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2586, supergroup_chat_created=False, text='/knowledge_base'), update_id=881193689), <telegram.ext._callbackcontext.CallbackContext object at 0x0000024008DB3000>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000024065C30CA0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:28", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:29", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x00000240638005F0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116658514875286', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 44, 28, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=2587, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000024007A6B8A0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "handlers", "levelname": "DEBUG", "message": "Found 28 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000024008DF1130>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000024008DF1130>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:31", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x00000240638005F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 44, 39, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2589, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), update_id=881193691), <telegram.ext._callbackcontext.CallbackContext object at 0x0000024008DB3000>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000024008C377F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='1c2a3737-574d-4628-98a0-6ce539d8e5a4' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='1c2a3737-574d-4628-98a0-6ce539d8e5a4'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000024008DF1130>, '\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u043b\u043e\u0438:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043e\u0441\u043d\u043e\u0432\u0443 \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0441\u043b\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 10-15 \u0441\u043c.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0435\u043c\u0431\u0440\u0430\u043d\u0430 \u0438\u043b\u0438 \u043f\u043b\u0435\u043d\u043a\u0430, \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e\u043b\u0430.\\n\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024008E077E0>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:44:41 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '127'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999974'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_4bb9f4029f6939e8187933bddfbf830b'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=L6Laxhj_RNCroo8by.DUob5z1DE3Kpx0sLvcl53YXOc-1732869881-1.0.1.1-PHLoRf2FznbH62tnLqVqUJNA8Mdf4T0K7ve9V... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4bb9f4029f6939e8187933bddfbf830b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[4898, 16248, 16742, 92175, 18226, 14257, 77911, 94071, 29619, 1506, 56449, 5372, 62731, 13373, 77901, 12507, 49103, 38657, 1532, 17756, 84350, 39900, 7952, 12507, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '42', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_2ff7d14e6e30c8f9c872903b751872d2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea151362eb82df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_2ff7d14e6e30c8f9c872903b751872d2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[19, 33006, 19, 35448, 61432, 140, 102, 31274, 56191, 23227, 20976, 65014, 20976, 140, 244, 56191, 20807, 31274, 86491, 720, 19, 13, 16, 28599, 1830, 2233, 1482, 56008, 20812, 1482, 7952, 12507, 6856, 56449, 13999, 81376, 86630, 14009, 29893, 21204, 18154, 14257, 1830, 49284, 17394, 7094, 5372, 39988, 5927, 14257, 68462, 61498, 94962, 720, 8164, 9239, 98073, 53671, 41291, 30656, 39988, 7952, 92533, 54686, 11, 39479, 67186, 7486, 39988, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 86995, 50693, 6856, 39280, 64880, 720, 51745, 1482, 56008, 44786, 6850, 32330, 7740, 73226, 64292, 20440, 34943, 13337, 48074, 20812, 72119, 67745, 90189, 6578, 8131, 81301, 17165, 10693, 11, 42078, 17394, 5372, 7753, 13999, 7058, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 7740, 81842, 67745, 97991, 6856, 44938, 25190, 117, 748... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '153', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998478', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_faec9217bcea02d539bf47a77a570bf1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1513c8adf2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_faec9217bcea02d539bf47a77a570bf1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[2813, 33006, 2233, 18437, 8164, 7975, 21956, 51412, 13373, 21477, 2297, 13337, 1532, 19175, 14391, 7975, 50506, 220, 16, 11, 23, 11562, 6850, 23680, 14257, 24803, 2156, 10298, 25756, 20346, 2156, 44613, 11, 7740, 19175, 69844, 50506, 220, 7699, 15, 11562, 6578, 5927, 720, 25262, 39127, 44786, 90226, 36497, 10693, 13, 720, 20976, 15752, 11001, 114, 7094, 18999, 13373, 20346, 17394, 44786, 26539, 37277, 23446, 10589, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 18, 23784, 2297, 1532, 8379, 15752, 11001, 114, 7094, 18999, 5927, 2156, 38521, 31203, 7952, 12507, 1506, 56449, 12648, 48835, 8341, 4929, 21477, 2297, 13337, 3865, 19175, 69844, 50506, 220, 7467, 11562, 6578, 13, 720, 717, 13, 19, 13, 19, 49520, 19188, 64134, 94136, 10... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '134', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998468', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_b61a56066c9d9dbce3e8e6490dcf5fb3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15141ae7a2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b61a56066c9d9dbce3e8e6490dcf5fb3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[5833, 33006, 1506, 8, 23934, 5591, 86610, 8131, 61642, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 14257, 52037, 18226, 11320, 5591, 18482, 13373, 14257, 24803, 79862, 29619, 1506, 89666, 22885, 49103, 38657, 1506, 320, 5591, 52520, 36497, 720, 8164, 9706, 5591, 16331, 4655, 705, 13373, 31101, 4329, 14476, 47295, 21204, 13373, 220, 7467, 46177, 14391, 7975, 50506, 11562, 6578, 21477, 60009, 46177, 6850, 1840, 59138, 14257, 24803, 40251, 5524, 6578, 50436, 39900, 49103, 38657, 1506, 26, 720, 10124, 8, 78876, 6735, 61390, 23446, 1532, 20879, 94136, 10124, 22885, 76401, 86610, 18999, 13373, 49103, 38657, 1532, 57297, 23934, 5591, 86610, 8131, 44100, 13373, 11047, 12507, 58317, 1532, 49103, 38657, 1532, 720, 2233, 15298, 12507, 5372, 7094, 3865, 50819, 12561, 19479, 16494, 18482, 19175, 14391, 7975, 50506, 220... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '87', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998488', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_dbbd2bfa7bda7c228cd517d982fa67c8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15148abe52df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dbbd2bfa7bda7c228cd517d982fa67c8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674D60>, 'json_data': {'input': [[19871, 17279, 220, 16, 13, 9263, 966, 13, 2366, 15, 198, 21, 13, 16, 13, 975, 23227, 12507, 86610, 18999, 21923, 14476, 35034, 5372, 39900, 6850, 19188, 31281, 18999, 56449, 12648, 48835, 8341, 4929, 5927, 31101, 4655, 11, 21599, 5591, 16248, 3865, 30436, 17766, 44065, 21477, 31101, 4655, 7740, 720, 8164, 3865, 23311, 21599, 5591, 16248, 3865, 54686, 11, 23934, 7975, 59921, 28241, 1532, 20879, 58317, 64292, 16742, 17756, 1506, 55523, 11122, 7094, 39280, 627, 16604, 11122, 7094, 39280, 10693, 21477, 2297, 13337, 16742, 19175, 14391, 7975, 50506, 220, 1591, 11562, 7952, 29256, 44155, 13433, 50819, 39479, 6578, 86610, 17618, 13373, 64362, 10693, 2156, 10298, 49103, 38657, 1532, 11562, 84350, 7753, 80112, 10693, 45658, 37013, 21956, 23446, 5879, 198, 90877, 7740, 21022, 2233, 10693, 9542, 30656, 9239, 6856, 11, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '159', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998365', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_78f216b0053a2a91165ac8a44b304bf3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1514f89452df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_78f216b0053a2a91165ac8a44b304bf3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:44:46. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n4 \\n \\n4 \u041e\u0411\u0429\u0418\u0415 \u041f\u041e\u041b\u041e\u0416\u0415\u041d\u0418\u042f \\n4.1 \u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043c\u043e\u0432 \u0434\u043e\u043b\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u043e \u0443\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u043e\u0439 \u0432 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u043c \\n\u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0439 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c\u0438 \\n\u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c \u0438 \u043f\u0440\u0430\u0432\u0438\u043b \u0434\u043b\u044f ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Fri, 29 Nov 2024 08:44:51 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '3540'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '792017'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '598ms'), ('x-request-id', 'req_7bf4bb69c85753aa24524a53918cb40b'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=nWm2GSB8E9IyEgL07iX00fq9fC3ifLZUnQb.GJH5Kuc-1732869891-1.0.1.1-G_aFcgcZrwUUICjCHnmUQ2XwvelaGSOaC3uO_eoi1Lr7lgmE7sHf_giN1i1pRxYew6fKdMUr687bcqCxMtqj9A; path=/; expires=Fri, 29... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_7bf4bb69c85753aa24524a53918cb40b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8513050766567404, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430\\n\\nLLM Response: \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:51", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:44:51 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '282', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799375', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '46ms', 'x-request-id': 'req_280722e0985573f67b057b2e5e60a807', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea151754c679185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_280722e0985573f67b057b2e5e60a807", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u0421\u043b\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 10-15 \u0441\u043c \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u044f.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438.\\n\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f</b>: \u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043f\u0435\u043d\u043e\u043f\u043e\u043b\u0438\u0441\u0442\u0438\u0440\u043e\u043b \u0438\u043b\u0438 \u043c\u0438\u043d\u0435\u0440\u0430\u043b\u044c\u043d\u0430\u044f \u0432\u0430\u0442\u0430, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0441\u043d\u0438\u0436\u0435\u043d\u0438\u044f \u0442\u0435\u043f\u043b\u043e\u043f\u043e\u0442\u0435\u0440\u044c.\\n\\n5. <b>\u0411\u0435\u0442\u043e\u043d\u043d\u0430\u044f \u0441\u0442\u044f\u0436\u043a\u0430</b>: \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u0440\u043e\u0432\u043d\u0443\u044e \u0438 \u043f\u0440\u043e\u0447\u043d\u0443\u044e \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0444\u0438\u043d\u0438\u0448\u043d\u043e\u0433\u043e \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u044f. \u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0441\u0442\u044f\u0436\u043a\u0438 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 5-10 \u0441\u043c.\\n\\n6. <b>\u0424\u0438\u043d\u0438\u0448\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435</b>: \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043b\u0430\u043c\u0438\u043d\u0430\u0442, \u043f\u0430\u0440\u043a\u0435\u0442, \u043f\u043b\u0438\u0442\u043a\u0430 \u0438\u043b\u0438 \u043b\u0438\u043d\u043e\u043b\u0435\u0443\u043c, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0439 \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f.\\n\\n\u041a\u0430\u0436\u0434\u044b\u0439 \u0438\u0437 \u044d\u0442\u0438\u0445 \u0441\u043b\u043e\u0435\u0432 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0441\u0432\u043e\u044e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='1c2a3737-574d-4628-98a0-6ce539d8e5a4'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:52", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:53", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:44:53", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x00000240638005F0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 11, 29, 8, 45, 27, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=2591, supergroup_chat_created=False, text='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), update_id=881193692), <telegram.ext._callbackcontext.CallbackContext object at 0x00000240A13B31C0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000024008C377F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='868e127e-d243-48b8-9b18-6906eb84ed14' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='868e127e-d243-48b8-9b18-6906eb84ed14'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000024008DF1130>, '\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443'), kwargs: {'chat_history': [HumanMessage(content='\u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043a\u0430\u043a\u043e\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043f\u043e\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043f\u043e\u043b\u0430 \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0434\u043e\u043c\u0430 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043b\u043e\u0435\u0432, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044e \u0438 \u0437\u0430\u0449\u0438\u0442\u0443 \u043e\u0442 \u0432\u043b\u0430\u0433\u0438. \u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u0441\u043e\u0441\u0442\u0430\u0432 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c:\\n\\n1. <b>\u0423\u043f\u043b\u043e\u0442\u043d\u0435\u043d\u043d\u044b\u0439 \u0433\u0440\u0443\u043d\u0442</b>: \u042d\u0442\u043e \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u0441\u043b\u043e\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443.\\n\\n2. <b>\u0429\u0435\u0431\u0435\u043d\u043e\u0447\u043d\u0430\u044f \u0438\u043b\u0438 \u0433\u0440\u0430\u0432\u0438\u0439\u043d\u0430\u044f \u043f\u043e\u0434\u0443\u0448\u043a\u0430</b>: \u0421\u043b\u043e\u0439 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 10-15 \u0441\u043c \u0434\u043b\u044f \u0434\u0440\u0435\u043d\u0430\u0436\u0430 \u0438 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u044f.\\n\\n3. <b>\u0413\u0438\u0434\u0440\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430</b>: \u041f\u043b\u0435\u043d\u043a\u0430 \u0438\u043b\u0438 \u043c\u0435\u043c\u0431\u0440\u0430\u043d\u0430 \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u043d\u0438\u043a\u043d\u043e\u0432\u0435\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u043e\u0432\u043e\u0439 \u0432\u043b\u0430\u0433\u0438.\\n\\n4. <b>\u0422\u0435\u043f\u043b\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007658360>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '74', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_82cd4bd69e6f0db0c7d40c35b37edd0c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea152568e4b9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_82cd4bd69e6f0db0c7d40c35b37edd0c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[4898, 16248, 6856, 1506, 25756, 3114, 64569, 69775, 13373, 38153, 34148, 77083, 13999, 59313, 29256, 18482, 7820, 7486, 72331, 30436, 17766, 77495, 11047, 20346, 10124, 3865]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '116', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_31b0b5534c5551c57a454e57bff0b33d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1525aea6f9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_31b0b5534c5551c57a454e57bff0b33d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 1227, 720, 1049, 15, 11562, 5927, 93323, 13810, 16494, 85864, 20879, 35875, 21956, 68742, 25756, 48262, 2233, 14837, 1532, 7975, 14837, 81301, 17165, 10693, 97991, 6856, 44938, 7740, 12561, 13337, 4329, 17394, 5372, 68742, 720, 8164, 29256, 7753, 56857, 88596, 320, 6578, 19479, 92091, 44065, 78876, 6735, 61390, 23446, 4329, 1389, 5927, 35875, 21956, 44786, 97991, 6856, 40231, 10693, 46177, 37405, 720, 8164, 2233, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 57297, 220, 16, 7820, 6578, 11, 21022, 11562, 94178, 92091, 44065, 1389, 37405, 12561, 25262, 63233, 97991, 6856, 40231, 10693, 46177, 720, 8164, 31203, 12561, 13337, 4329, 17394, 5372, 68742, 5173, 29256, 7753, 56857, 88596, 14391, 7975, 50506, 220, 605, 7820, 6578, 5... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '114', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999230', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_3ea94598eff618608ba71bf93685c397', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1525fcee09185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3ea94598eff618608ba71bf93685c397", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[8164, 6856, 7753, 10693, 68742, 29619, 1506, 57297, 64362, 10693, 1506, 11047, 20346, 10124, 4655, 627, 972, 13, 966, 35889, 1506, 25756, 9239, 41873, 97341, 39127, 44786, 14257, 6148, 84350, 13433, 10693, 5524, 8341, 1840, 7820, 7486, 72331, 54686, 13373, 1840, 10124, 17461, 30480, 1532, 7952, 29256, 44155, 13433, 10298, 51736, 78876, 6735, 61390, 23446, 4329, 198, 6578, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 64880, 46177, 12561, 38438, 35111, 4898, 50807, 93129, 73181, 12561, 19479, 16494, 18482, 5524, 14837, 3114, 18437, 13999, 79327, 1532, 220, 972, 13, 16, 627, 35095, 72805, 1506, 220, 972, 13, 16, 198, 25079, 1840, 24697, 8341, 2233, 198, 1830, 20346, 10124, 29256, 24803, 87878, 345, 34604, 18437, 6735, 61390, 23446, 1532, 11, 11562, 11, 11562, 50436, 7094, 3865, 18600, 33742, 41873, 40231, 648... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '114', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '17ms', 'x-request-id': 'req_52417ae9d0a65f2cfc7b63497fa690e6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1526248cf9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_52417ae9d0a65f2cfc7b63497fa690e6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[19871, 17279, 220, 20385, 13, 9413, 18216, 15, 13, 679, 24, 33006, 5538, 720, 38214, 3114, 64569, 69775, 42078, 17394, 5372, 7753, 13999, 12, 15752, 1532, 7975, 14837, 81301, 17165, 10693, 69471, 5591, 38657, 19479, 56449, 14525, 62731, 13373, 220, 20, 11562, 6850, 1840, 59138, 720, 8164, 7975, 3865, 37773, 39988, 25756, 3114, 64569, 1840, 12648, 11122, 16331, 21956, 18999, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 11, 6850, 1482, 19175, 69844, 50506, 720, 605, 11562, 20879, 40842, 1482, 12426, 5591, 4655, 8379, 15752, 11001, 114, 40590, 90457, 21708, 38098, 79370, 57186, 13, 35889, 1506, 68214, 7486, 77495, 25756, 3114, 64569, 19479, 3865, 56449, 13999, 62731, 720, 8164, 2233, 16742, 7094, 73281, 19175, 69844, 50506, 220, 966, 1034, 69471, 5591, 38657... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:30 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '155', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998943', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_4a796a075ede2797231c8232447a2991', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15264aaec9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4a796a075ede2797231c8232447a2991", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000024007674B80>, 'json_data': {'input': [[1114, 13, 24, 59842, 4898, 3114, 17766, 29619, 1506, 5927, 7952, 3865, 12426, 33742, 63233, 76401, 86610, 18999, 10693, 93129, 73181, 12561, 19479, 16494, 18482, 220, 15, 11, 1721, 12, 15, 11, 2437, 5927, 18868, 9239, 17766, 3865, 26539, 13337, 13433, 46177, 198, 1830, 11001, 123, 1506, 13, 1301, 249, 13337, 15088, 56449, 5372, 48835, 8341, 4929, 55617, 78746, 19479, 3865, 19175, 69844, 50506, 220, 1049, 11562, 6578, 7740, 73642, 39127, 77495, 25756, 3114, 64569, 19479, 3865, 19175, 69844, 50506, 220, 966, 11562, 6578, 627, 1114, 13, 605, 23784, 1482, 92093, 76401, 86610, 18999, 10693, 58317, 64292, 63233, 7740, 21923, 14476, 35034, 5372, 44786, 11122, 7094, 14332, 12415, 11, 5927, 38153, 63233, 57925, 44155, 6578, 8131, 2233, 28089, 1506, 70129, 21204, 198, 5591, 49899, 5927, 9706, 4655, 5524, 5927, 9706, 9... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:31", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '117', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998373', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_17894e8aac46729c42b3900a0518de40', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea1526b4fd39185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_17894e8aac46729c42b3900a0518de40", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-11-29, 11:45:32. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 446.1325800.2019 \\n \\n64 \\n2000 \u043c \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u0438\u0434\u0440\u043e\u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0438 \u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 (\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u2013 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u0438\u043b\u0438 \u043f\u0440\u0438 \\n\u043f\u0440\u043e\u0442\u044f\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d\u0438\u043a\u0430 \u0434\u043e 1 \u043a\u043c, \u0430 \u043c... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:32", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:35 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2980', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793100', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '517ms', 'x-request-id': 'req_8dc0272b5c3edb2d32fe714b80ff716e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea152721aaec02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8dc0272b5c3edb2d32fe714b80ff716e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8755641739891747, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u043a\u0430\u043a\u043e\u0432\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u043a\u043e\u043f\u0430\u0442\u044c \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0443\u044e \u0442\u0440\u0443\u0431\u0443\\n\\nLLM Response: \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. **\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f**: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. **\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430*... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Fri, 29 Nov 2024 08:45:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1405', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799460', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '40ms', 'x-request-id': 'req_d1ee3db9e8f797164dc52881d1f4f20c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ea15287c931c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d1ee3db9e8f797164dc52881d1f4f20c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043b\u0443\u0431\u0438\u043d\u0443 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430 \u0432 \u0432\u0430\u0448\u0435\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435.', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u0440\u043c\u044b \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431.', '\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0443\u043a\u043b\u043e\u043d \u0434\u043b\u044f \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0442\u0440\u0443\u0431.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u043a\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0442\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. <b>\u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f</b>: \u0422\u0440\u0443\u0431\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0443\u043b\u043e\u0436\u0435\u043d\u044b \u043d\u0438\u0436\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043d\u0442\u0430, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u0445 \u0437\u0430\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u0435. \u0413\u043b\u0443\u0431\u0438\u043d\u0430 \u043f\u0440\u043e\u043c\u0435\u0440\u0437\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0440\u0435\u0433\u0438\u043e\u043d\u0430.\\n\\n2. <b>\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430</b>: \u0412 \u0441\u0440\u0435\u0434\u043d\u0435\u043c, \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 0.7-1 \u043c\u0435\u0442\u0440\u0430. \u041e\u0434\u043d\u0430\u043a\u043e \u0432 \u0445\u043e\u043b\u043e\u0434\u043d\u044b\u0445 \u043a\u043b\u0438\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445 \u044d\u0442\u0430 \u0433\u043b\u0443\u0431\u0438\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0430.\\n\\n3. <b>\u0423\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431</b>: \u0414\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0441\u0430\u043c\u043e\u0442\u0435\u0447\u043d\u043e\u0433\u043e \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u0442\u043e\u0447\u043d\u044b\u0445 \u0432\u043e\u0434 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u044b\u0439 \u0443\u043a\u043b\u043e\u043d \u0442\u0440\u0443\u0431, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043e\u043a\u043e\u043b\u043e 2-3 \u0441\u043c \u043d\u0430 \u043c\u0435\u0442\u0440 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0443\u0431\u044b.\\n\\n\u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0433\u043b\u0443\u0431\u0438\u043d\u044b \u0443\u043a\u043b\u0430\u0434\u043a\u0438 \u0432 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0440\u0435\u0433\u0438\u043e\u043d\u0435 \u043b\u0443\u0447\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043c\u0435\u0441\u0442\u043d\u044b\u043c \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u043c \u0438 \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u0430\u043c\u0438.\\n\\n------------------\\nReferences:\\n\u0418\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u043e \u0433\u0435\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0438\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f_\u0421\u041f 446.1325800.2019 .pdf, pages: 69, 71\\n\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439 \u0432\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434 \u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='868e127e-d243-48b8-9b18-6906eb84ed14'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "handlers", "levelname": "INFO", "message": "Prepared file download buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:37", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:38", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:45:38", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-11-29 11:46:39", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-11-29 11:46:40", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:46:41", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-11-29 11:46:41", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
