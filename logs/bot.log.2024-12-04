{"asctime": "2024-12-04 01:03:50", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 72, in map_httpcore_exceptions\n    yield\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 377, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 216, in handle_async_request\n    raise exc from None\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 196, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\connection.py\", line 101, in handle_async_request\n    return await self._connection.handle_async_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\http11.py\", line 143, in handle_async_request\n    raise exc\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\http11.py\", line 113, in handle_async_request\n    ) = await self._receive_response_headers(**kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\http11.py\", line 186, in _receive_response_headers\n    event = await self._receive_event(timeout=timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\http11.py\", line 238, in _receive_event\n    raise RemoteProtocolError(msg)\nhttpcore.RemoteProtocolError: Server disconnected without sending a response.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_httpxrequest.py\", line 293, in do_request\n    res = await self._client.request(\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1585, in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1674, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1702, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1739, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1776, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 376, in handle_async_request\n    with map_httpcore_exceptions():\n  File \"C:\\Users\\Andrey\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\contextlib.py\", line 155, in __exit__\n    self.gen.throw(value)\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 89, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.RemoteProtocolError: Server disconnected without sending a response.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 334, in _request_wrapper\n    code, payload = await self.do_request(\n                    ^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_httpxrequest.py\", line 317, in do_request\n    raise NetworkError(f\"httpx.{err.__class__.__name__}: {err}\") from err\ntelegram.error.NetworkError: httpx.RemoteProtocolError: Server disconnected without sending a response.", "taskName": "Task-2334"}
{"asctime": "2024-12-04 04:10:52", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-4559"}
{"asctime": "2024-12-04 05:26:12", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: English", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:12", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:12", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 26, 11, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3121, supergroup_chat_created=False, text='/start'), update_id=881194006), <telegram.ext._callbackcontext.CallbackContext object at 0x0000015EAE679010>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:12", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x0000015E4AA37740>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:12", "name": "handlers", "levelname": "DEBUG", "message": "User ID: 244732168, User Name: Andrey, Language Code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:12", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:26:12", "last_active": "2024-12-04, 05:26:12", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:26:12", "name": "handlers", "levelname": "INFO", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:13", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:13", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:18", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:26:18", "last_active": "2024-12-04, 05:26:18", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:26:18", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:18", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:18", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: English", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:18", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/language'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:18", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: language with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 26, 17, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=9, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3123, supergroup_chat_created=False, text='/language'), update_id=881194007), <telegram.ext._callbackcontext.CallbackContext object at 0x0000015EAB041780>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:18", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: language with result: <coroutine object BotHandlers.language at 0x0000015E4B05E350>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:19", "name": "handlers", "levelname": "INFO", "message": "Prompted language selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:19", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:21", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:26:21", "last_active": "2024-12-04, 05:26:21", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:26:21", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:21", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:21", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: English", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:21", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_language:Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:21", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_language with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_language:Russian', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659981032622', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 26, 18, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3124, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_language:English', text='English'),), (InlineKeyboardButton(callback_data='set_language:Russian', text='\u0420\u0443\u0441\u0441\u043a\u0438\u0439'),), (InlineKeyboardButton(callback_data='set_language:Indonesian', text='Indones... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:21", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_language with result: <coroutine object BotHandlers.set_language at 0x0000015E4A85B940>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:21", "name": "handlers", "levelname": "DEBUG", "message": "Updated language to 'Russian' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:22", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 set language to 'Russian'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:22", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:34", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:26:34", "last_active": "2024-12-04, 05:26:34", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:26:34", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:34", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:34", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:34", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:34", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 26, 33, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3126, supergroup_chat_created=False, text='/knowledge_base'), update_id=881194009), <telegram.ext._callbackcontext.CallbackContext object at 0x0000015EAE67A6D0>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:34", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x0000015E4AF5B520>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:35", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:35", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:36", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:26:36", "last_active": "2024-12-04, 05:26:36", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:26:36", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116662076327963', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 26, 34, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3127, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000015E4A9AE6C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "handlers", "levelname": "DEBUG", "message": "Found 29 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x0000015E4AA82630>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x0000015E4AA82630>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:26:37", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:13", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:27:13", "last_active": "2024-12-04, 05:27:13", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:27:13", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:13", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:13", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:13", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 50\u0445200 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:13", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 27, 12, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3129, supergroup_chat_created=False, text='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 50\u0445200 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'), update_id=881194011), <telegram.ext._callbackcontext.CallbackContext object at 0x0000015E4AF76510>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:13", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000015E4AFAA110>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:13", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='f6f81d21-cefb-4e0b-a194-66ee69946155' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='f6f81d21-cefb-4e0b-a194-66ee69946155'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000015E4AA82630>, '\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 50\u0445200 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'), kwargs: {'chat_history': [HumanMessage(content='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 50\u0445200 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 50\u0445200 \u0434\u043b\u0438\u043d\u043e\u0439 1.5 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 \u0441\u0435\u0447\u0435\u043d\u0438\u0435\u043c 50\u0445200 \u043c\u043c \u0438 \u0434\u043b\u0438\u043d\u043e\u0439 1,5 \u043c\u0435\u0442\u0440\u0430, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0440\u0430\u0441\u0447\u0435\u0442 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431. \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c, \u0447\u0442\u043e \u0434\u043e\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0442\u0430 \u043d\u0430 \u043a\u043e\u043d\u0446\u0430\u0445 \u0438 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0440\u0438\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0435.\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f</b> \\\\( W \\\\):\\n\\\\[\\nW = \\\\frac{b \\\\cdot h^2}{6}\\n\\\\]\\n\u0433\u0434\u0435 \\\\( b = 0.05 \\\\) \u043c, \\\\( h = 0.2 \\\\) \u043c.\\n\\n\\\\[\\nW = \\\\frac{0.05 \\\\cdot (0.2)^2}{6} = 0.000333 \\\\, \\\\text{\u043c}^3\\n\\\\]\\n\\n2. <b>\u0420\u0430\u0441\u0447\u0435\u0442 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0433\u043e \u0438\u0437\u0433\u0438\u0431\u0430\u044e\u0449\u0435\u0433\u043e \u043c\u043e\u043c\u0435\u043d\u0442\u0430</b> \\\\( M \\\\), \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD2020>, 'json_data': {'input': [[66144, 54570, 7820, 15752, 21477, 7094, 58669, 9542, 7952, 23630, 13433, 220, 1135, 10693, 1049, 7952, 11320, 39988, 220, 18, 11562, 11, 45658, 5591, 16742, 39988, 91146, 9706, 4655]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:27:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '82', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999971', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_9a10ccb80d8e42cba08fa49c4e4ebbc8', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=oIUQ31yE4MQOMxsajFqpY6I92H1.JrWUuI7g49FpyXA-1733279234-1.0.1.1-T9wzIXPmjnL6hXWEO.fL99JUg37xy2IBlHI3qlthD75.M.SkgDe9M2t0sIbFZPOCr_nlSbDaB.Dhq... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9a10ccb80d8e42cba08fa49c4e4ebbc8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1EE0>, 'json_data': {'input': [[66144, 54570, 7820, 15752, 21477, 7094, 58669, 9542, 7952, 23630, 13433, 220, 1135, 10693, 1049, 7952, 11320, 39988, 220, 18, 11562, 11, 45658, 5591, 16742, 39988, 91146, 9706, 4655]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:27:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '77', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999971', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_094a6bd5f77e534c50191e9a445a029b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85b2d996f9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_094a6bd5f77e534c50191e9a445a029b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1EE0>, 'json_data': {'input': [[3076, 33006, 16604, 48262, 13373, 20346, 17394, 39988, 21923, 67222, 6856, 17165, 46177, 720, 13337, 59030, 17165, 720, 39091, 19479, 92091, 44858, 720, 7094, 11320, 14525, 25756, 5591, 35387, 4329, 46177, 720, 66144, 51973, 11, 11562, 6578, 720, 39091, 19479, 92091, 48150, 720, 4898, 99714, 720, 15752, 5591, 35387, 21708, 46177, 69471, 14082, 11, 720, 12426, 1830, 13, 720, 39091, 94178, 92091, 48150, 720, 2233, 18437, 6735, 61390, 23446, 1532, 11562, 50436, 7094, 3865, 720, 15752, 5591, 35387, 4329, 64880, 46177, 720, 66144, 14082, 4898, 50807, 11, 11562, 6578, 720, 74339, 67222, 6856, 13433, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 50807, 720, 1840, 11320, 5173, 3114, 9542, 12648, 64880, 96573, 7753, 1840, 16331, 50807, 720, 14525, 81376, 47805, 1532, 7952, 2233, 33742, 23297, 1840, 12648, 720, 1135, 7... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:27:15 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '98', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998763', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_f0bdbf0f25ff8ee90851495491ff1137', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85b315c7c9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f0bdbf0f25ff8ee90851495491ff1137", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1EE0>, 'json_data': {'input': [[20976, 8164, 9239, 4655, 23934, 18868, 5591, 9239, 1506, 26539, 19479, 47273, 37405, 7952, 11320, 79862, 12561, 7975, 8341, 1506, 11, 11562, 25, 2355, 33006, 7094, 1482, 220, 1049, 720, 1041, 11562, 6578, 720, 1041, 11562, 6578, 720, 2297, 5591, 13, 220, 1049, 720, 1049, 11562, 6578, 720, 1049, 11562, 6578, 720, 35095, 28086, 7753, 57319, 20879, 25756, 9239, 41873, 97341, 39127, 39988, 81376, 1840, 720, 16, 14, 1135, 7952, 11320, 12648, 720, 1830, 28086, 7753, 57319, 720, 16, 14, 1041, 7952, 11320, 12648, 11047, 28086, 7753, 57319, 720, 35095, 28086, 7753, 57319, 20879, 13999, 2297, 56008, 13999, 26539, 19479, 47273, 11, 28114, 8164, 5372, 7094, 1840, 36352, 14009, 2233, 39988, 81376, 1840, 23784, 65014, 320, 7094, 14009, 720, 95570, 3114, 6856, 16742, 46339, 9239, 4655, 20879, 13999, 2297, 56008, 13999, 143... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:16", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:27:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '151', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999275', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_bb0dc14aa296af65ab3d20ec693b1d55', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85b380a809185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bb0dc14aa296af65ab3d20ec693b1d55", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1EE0>, 'json_data': {'input': [[2421, 33006, 16604, 48262, 720, 63873, 33742, 23297, 198, 1840, 12648, 720, 19871, 1482, 198, 2233, 1830, 720, 140, 101, 1840, 31203, 198, 14525, 720, 15752, 67024, 1482, 198, 5591, 16742, 720, 8164, 39865, 14476, 1506, 198, 7094, 1840, 11, 11562, 720, 39091, 94178, 92091, 34613, 12561, 7975, 8341, 11, 11562, 720, 34604, 19188, 64134, 5524, 56857, 18999, 12561, 14837, 17766, 6856, 11, 11562, 6578, 720, 18, 78086, 112, 7, 1987, 78086, 112, 198, 10336, 8, 720, 19, 78086, 112, 7, 1987, 78086, 112, 198, 10336, 8, 720, 20, 78086, 112, 7, 1987, 78086, 112, 198, 10336, 8, 720, 18, 78086, 112, 7, 1987, 78086, 112, 198, 12422, 8, 720, 19, 78086, 112, 720, 7, 1987, 78086, 112, 17, 198, 1758, 8, 720, 20, 78086, 112, 720, 7, 1987, 87, 17, 198, 1758, 8, 720, 18, 78086, 112, 7, 1987, 78086, 112, 198, 17361, 8, 720, 19, 78... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:27:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '83', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998336', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_dd0978af1b99e63007febb3656555845', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85b3e9fbf9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dd0978af1b99e63007febb3656555845", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD2020>, 'json_data': {'input': [[27435, 37255, 34604, 35095, 37255, 220, 18, 13, 49520, 37255, 140, 247, 20976, 20807, 31274, 34604, 20976, 16604, 37255, 20807, 31274, 56191, 51418, 56191, 34604, 34604, 31274, 35095, 20976, 34604, 31274, 31274, 720, 34604, 20976, 19871, 19871, 31274, 140, 247, 19871, 27435, 20976, 140, 247, 67891, 56191, 25079, 56191, 34604, 37255, 93899, 31274, 31274, 198, 8164, 1482, 11047, 7975, 14476, 19479, 1532, 18868, 5372, 17165, 25756, 7975, 7975, 13404, 1506]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:18", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:27:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '61', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999930', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_e9140fd017d716f6e5872ea67bf0e1c2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85b410a1a9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e9140fd017d716f6e5872ea67bf0e1c2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 05:27:19. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n69 \\n \\n\u0412\u0438\u0434 \u043d\u0430\u0440\u0443\u0436\u043d\u043e\u0439 \u043e\u0431\u043b\u0438\u0446\u043e\u0432\u043a\u0438 \u0438\u043b\u0438 \\n\u043e\u0442\u0434\u0435\u043b\u043a\u0438 \\n\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \\n\u0434\u043b\u0438\u043d\u0430 \u0433\u0432\u043e\u0437\u0434\u044f \u0438\u043b\u0438 \\n\u0441\u043a\u043e\u0431\u044b, \u043c\u043c \\n\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \\n\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \\n\u0433\u0432\u043e\u0437\u0434\u0435\u0439 \u0438\u043b\u0438 \u0441\u043a\u043e\u0431, \\n\u0448\u0442. \\n\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \\n\u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \\n\u0433\u0432\u043e\u0437\u0434\u044f\u043c\u0438 \u0438\u043b\u0438 \\n\u0441\u043a\u043e\u0431\u043a\u0430\u043c\u0438, \u043c\u043c \\n\u041e\u0431\u043b\u0438\u0446\u043e\u0432... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:27:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6681', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794580', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '406ms', 'x-request-id': 'req_be531a223bf2ffa9339ac7293d8d2bad', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=gaIVtgKVX4C9Hf4fIFCnVfStth4dJp4SmZZ12UfyL_8-1733279246-1.0.1.1-Y7eXS6jS_nLOzlk_UE9SgQzVP2a2GW3IU3YmB7Pqm7VFhMJbuNCOJq63Ne8VzY1hWKqZ4SIJiNVPCO5uQPf9fA; path=/; expires=Wed, 04-Dec-24 02:57:26 GMT; domain=.api.o... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_be531a223bf2ffa9339ac7293d8d2bad", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8501294585505679, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: 'b \\\\cdot h^2'", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 288, in generate_suggestions\n    ).format(n=n)\n      ^^^^^^^^^^^\nKeyError: 'b \\\\cdot h^2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 \u0441\u0435\u0447\u0435\u043d\u0438\u0435\u043c 50\u0445200 \u043c\u043c \u0438 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c\u0435\u0442\u0440\u0430, \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0440\u0430\u0441\u0447\u0435\u0442 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0444\u043e\u0440\u043c\u0443\u043b\u044b \u0434\u043b\u044f \u0431\u0430\u043b\u043a\u0438, \u043e\u043f\u0435\u0440\u0442\u043e\u0439 \u043d\u0430 \u043a\u043e\u043d\u0446\u0430\u0445 \u0441 \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439 \u0432 \u0446\u0435\u043d\u0442\u0440\u0435.\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f</b> \\\\( W \\\\):\\n\\n\\\\[\\nW = \\\\frac{b \\\\cdot h^2}{6}\\n\\\\]\\n\\n\u0433\u0434\u0435 \\\\( b = 0.05 \\\\) \u043c, \\\\( h = 0.2 \\\\) \u043c.\\n\\n\\\\[\\nW = \\\\frac{0.05 \\\\cdot (0.2)^2}{6} = 0.000333 \\\\, \\\\text{\u043c}^3\\n\\\\]\\n\\n2. <b>\u0420\u0430\u0441\u0447\u0435\u0442 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0433\u043e \u0438\u0437\u0433\u0438\u0431\u0430\u044e\u0449\u0435\u0433\u043e \u043c\u043e\u043c\u0435\u043d\u0442\u0430</b> \\\\( M \\\\), \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \\\\(\\\\sigma\\\\) \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \\\\(\\\\sigma\\\\) \u043e\u043a\u043e\u043b\u043e 10 \u041c\u041f\u0430 (10,000,000 \u041d/\u043c\u00b2):\\n\\n\\\\[\\nM = \\\\sigma \\\\cdot W = 10,000,000 \\\\cdot 0.000333 = 3,330 \\\\, \\\\text{\u041d\u043c}\\n\\\\]\\n\\n3. <b>\u0420\u0430\u0441\u0447\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \\\\( F \\\\) \u0432 \u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0435 \u043f\u0440\u043e\u043b\u0435\u0442\u0430</b>:\\n\\n\\\\[\\nM = \\\\frac{F \\\\cdot L}{4}\\n\\\\]\\n\\n\u041f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u044f \\\\( M = 3,330 \\\\, \\\\text{\u041d\u043c} \\\\) \u0438 \\\\( L = 3 \\\\, \\\\text{\u043c} \\\\):\\n\\n\\\\[\\n3,330 = \\\\frac{F \\... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:26", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='f6f81d21-cefb-4e0b-a194-66ee69946155'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:27", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:27:27", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:29:01", "last_active": "2024-12-04, 05:29:01", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:29:01", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 29, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3131, supergroup_chat_created=False, text='\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435'), update_id=881194012), <telegram.ext._callbackcontext.CallbackContext object at 0x0000015E4AF76C10>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000015EA8AE0F40>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='aee4bb72-0b17-4913-b19c-8b67fc0617c4' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='aee4bb72-0b17-4913-b19c-8b67fc0617c4'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000015E4AA82630>, '\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435'), kwargs: {'chat_history': [HumanMessage(content='\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 50\u0445200 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 \u0441\u0435\u0447\u0435\u043d\u0438\u0435\u043c 50\u0445200 \u043c\u043c \u0438 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c\u0435\u0442\u0440\u0430, \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0440\u0430\u0441\u0447\u0435\u0442 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0444\u043e\u0440\u043c\u0443\u043b\u044b \u0434\u043b\u044f \u0431\u0430\u043b\u043a\u0438, \u043e\u043f\u0435\u0440\u0442\u043e\u0439 \u043d\u0430 \u043a\u043e\u043d\u0446\u0430\u0445 \u0441 \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439 \u0432 \u0446\u0435\u043d\u0442\u0440\u0435.\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f</b> \\\\( W \\\\):\\n\\n\\\\[\\nW = \\\\frac{b \\\\cdot h^2}{6}\\n\\\\]\\n\\n\u0433\u0434\u0435 \\\\( b = 0.05 \\\\) \u043c, \\\\( h = 0.2 \\\\) \u043c.\\n\\n\\\\[\\nW = \\\\frac{0.05 \\\\cdot (0.2)^2}{6} = 0.000333 \\\\, \\\\text{\u043c}^3\\n\\\\]\\n\\n2. <b>\u0420\u0430\u0441\u0447\u0435\u0442 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0433\u043e \u0438\u0437\u0433\u0438\u0431\u0430\u044e\u0449\u0435\u0433\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AF274C0>, 'json_data': {'input': [[7094, 29256, 61613, 16494, 44867, 91105, 2233, 4329, 17394, 17618, 13373, 23934, 15752, 1840, 10124, 20440, 45658, 5591, 16742, 44786, 91146, 9706, 23934, 52770, 22885, 18868, 76559, 17721, 44613, 5927, 9136, 4329, 25657, 68979, 66459]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:01", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:29:02 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '58', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999965', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_a627a485d6c973b4a9e9f4e42a4f5666', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85dc85a322df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a627a485d6c973b4a9e9f4e42a4f5666", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:03", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EA8AD9F80>, 'json_data': {'input': [[7094, 29256, 61613, 16494, 44867, 91105, 2233, 4329, 17394, 17618, 13373, 23934, 15752, 1840, 10124, 20440, 45658, 5591, 16742, 44786, 91146, 9706, 23934, 52770, 22885, 18868, 76559, 17721, 44613, 5927, 9136, 4329, 25657, 68979, 66459]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:03", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:29:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '75', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999965', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_da30bba14d02c3e62f0e97f7d03d6a23', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85dd358e92df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_da30bba14d02c3e62f0e97f7d03d6a23", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EA8AD9F80>, 'json_data': {'input': [[7094, 77628, 40231, 7820, 17461, 10589, 33742, 63233, 7740, 89715, 17461, 44786, 91105, 2233, 4329, 17394, 62491, 13, 36479, 17461, 10589, 33742, 51736, 91105, 2233, 4329, 17394, 18999, 93129, 73181, 14257, 91353, 35667, 18482, 20879, 5927, 35387, 77628, 40231, 198, 5591, 2156, 38521, 2233, 5372, 2156, 47295, 7952, 18226, 62776, 46177, 5927, 16248, 3865, 40211, 1506, 11, 5927, 2156, 47067, 2156, 21708, 6850, 34493, 67024, 17165, 20879, 11122, 18437, 4655, 8164, 17165, 7740, 11047, 35682, 33793, 9239, 1830, 44786, 5524, 44075, 20812, 7740, 7952, 1532, 57719, 54686, 78085, 3865, 22911, 198, 8164, 29256, 7753, 56857, 39900, 5524, 56857, 18999, 5927, 11122, 17766, 1532, 14257, 6735, 49907, 1506, 627, 54745, 9706, 17461, 44065, 91105, 2233, 4329, 17394, 18999, 93129, 73181, 14257, 91353, 35667, 18482, 20879, 5927... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:04", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:29:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '102', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998367', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '19ms', 'x-request-id': 'req_dfd1df0bd53bd2b30876b139e5a5445b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85dd9bd192df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dfd1df0bd53bd2b30876b139e5a5445b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EA8AD9F80>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 1591, 33006, 720, 19, 13, 24, 23227, 44075, 5591, 17721, 56008, 48150, 91105, 2233, 4329, 17394, 17618, 38098, 79370, 15458, 12415, 33006, 19, 13, 24, 13, 16, 28599, 1830, 39127, 44065, 7820, 7486, 8131, 4655, 11, 12561, 16494, 5372, 90875, 51736, 5927, 7820, 50223, 35034, 1532, 91105, 2233, 4329, 15752, 1506, 90457, 67745, 46088, 6856, 11, 720, 7094, 48181, 12648, 62731, 78757, 23934, 15752, 13337, 6856, 3114, 9882, 10298, 46088, 6856, 21477, 1830, 4329, 2156, 38521, 4655, 14257, 2297, 1840, 11320, 10298, 11, 25190, 110, 12648, 6578, 220, 15, 11, 21, 39479, 7058, 2233, 35667, 39900, 14257, 2297, 1840, 11320, 4329, 7820, 7486, 43203, 5927, 39233, 12394, 12507, 11, 68214, 7486, 39900, 5927, 34943, 13337, 48074, 20812, 72119, 10298, 18868, 76559, 17721,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:29:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '90', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999289', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_4a177f90608d8d03a85ade1039baee44', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85de04a0f2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_4a177f90608d8d03a85ade1039baee44", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EA8AD9F80>, 'json_data': {'input': [[25079, 29256, 61613, 16494, 35723, 720, 68506, 4898, 5591, 28089, 16331, 19190, 34613, 720, 3865, 24803, 52429, 55617, 40211, 1506, 11, 720, 7094, 61432, 37255, 2355, 25079, 29256, 61613, 16494, 36497, 69471, 9239, 97747, 74254, 1840, 17394, 18999, 5927, 9706, 4655, 11, 11562, 14, 2297, 11, 5927, 11047, 20346, 10124, 29256, 24803, 87878, 10693, 37405, 720, 2297, 40211, 6578, 1532, 88515, 68506, 19916, 19916, 1840, 15458, 19190, 6856, 11562, 37277, 44786, 5524, 29256, 2233, 13337, 28089, 3114, 62491, 14257, 9136, 31443, 720, 13337, 29256, 56008, 39900, 37405, 10124, 9239, 1506, 46177, 11047, 20346, 10124, 29256, 24803, 9706, 39900, 14257, 9136, 31443, 5524, 21022, 2233, 6578, 8131, 56515, 16742, 11, 720, 8164, 2233, 28089, 13404, 5372, 44786, 7820, 69471, 9239, 85864, 11047, 67124, 39865, 13999, 2297, 9542, 4... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:29:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '168', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999171', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_a6674178017e35ebc045c6a134a9bba1', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85de6ee5a2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a6674178017e35ebc045c6a134a9bba1", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EA8AD9F80>, 'json_data': {'input': [[19871, 17279, 220, 1227, 13, 9423, 966, 13, 679, 22, 198, 34604, 13810, 35297, 15088, 43896, 65014, 482, 220, 28599, 10693, 10298, 1506, 78876, 8164, 92582, 18999, 91105, 2233, 4329, 17394, 62491, 8379, 3865, 5927, 37405, 29256, 9239, 39988, 11122, 17766, 1532, 14391, 16331, 17165, 198, 31274, 13, 20, 23784, 11047, 12507, 90226, 1506, 1532, 11, 7820, 14837, 40590, 97991, 6856, 50306, 320, 31274, 13, 220, 16, 8, 19175, 72060, 7975, 40251, 50819, 11, 19175, 89159, 1506, 14257, 68462, 13433, 720, 5591, 4898, 3114, 1532, 5372, 44786, 46177, 5927, 5591, 19479, 6148, 5372, 44786, 18868, 58669, 2156, 21708, 40842, 14257, 15752, 3114, 12507, 320, 18, 284, 220, 1272, 11877, 482, 220, 220, 1774, 11877, 7820, 5927, 7975, 15088, 2156, 24697, 7952, 2233, 33742, 23297, 1840, 12648, 13, 720, 16604, 61642, 6148, 19479, 3865... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:29:07 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '93', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999625', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_94493556e974b325c1466618295ea611', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85debfa7e2df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_94493556e974b325c1466618295ea611", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 05:29:08. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043a\u043e\u043b\u044c\u0446\u0435\u0432\u044b\u0445 \u0438 \u043f\u0440\u043e\u0434\u043e\u043b\u044c\u043d\u044b\u0445 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0439. \u041a\u043e\u043b\u044c\u0446\u0435\u0432\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043e\u0442 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\\n\u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u0433\u043e \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u0432\u0430\u043a\u0443\u0443\u043c\u0430, \u0432\u043d\u0435\u0448\u043d\u0435\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043e\u0442 \u0437\u0430\u0441\u044b\u043f\u043a\u0438 \u0438 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0438 \u0434\u0435\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043a\u043e\u043d\u0442\u0443\u0440\u0430\\n\u043f\u043e\u043f\u0435\u0440\u0435\u0447\u043d... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:29:11 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2807', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794093', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '443ms', 'x-request-id': 'req_a29bf25f63cf7a94607dc7239fc7a908', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85df21ea42df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a29bf25f63cf7a94607dc7239fc7a908", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:12", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8575847269680666, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:12", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:12", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as \\'learn more about ...\\', \\'how to determine ...\\', \\'how to calculate ...\\', etc., that the user can use to gather more information. If no additional prompts are needed, respond with \\'No suggestions needed\\'.\\n\\nUser Prompt: \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\\n\\nLLM Response: \u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u044f \u043d\u0435 \u043c\u043e\u0433\u0443 \u0442\u043e\u0447\u043d\u043e \u0441\u043a\u0430\u0437\u0430\u0442\u044c, \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0433\u043e \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u041e\u0431\u044b\u0447\u043d\u043e \u0442\u0430\u043a\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u041f (\u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b. \u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:12", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:29:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2047', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799605', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '29ms', 'x-request-id': 'req_8bcca0aa429b4d14edeebd4a175e295e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85e0adf192df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8bcca0aa429b4d14edeebd4a175e295e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:14", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430\u0445, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u041f 64.13330.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u0413\u041e\u0421\u0422\u0430\u043c\u0438?', '\u0413\u0434\u0435 \u043d\u0430\u0439\u0442\u0438 \u0438 \u043a\u0430\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0421\u041f 64.13330 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f\u0445?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u044f \u043d\u0435 \u043c\u043e\u0433\u0443 \u0442\u043e\u0447\u043d\u043e \u0441\u043a\u0430\u0437\u0430\u0442\u044c, \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0433\u043e \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u041e\u0431\u044b\u0447\u043d\u043e \u0442\u0430\u043a\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u041f (\u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b. \u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u043c\u0443 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u043e\u043c\u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0443, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043a \u0421\u041f 64.13330 \"\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438\", \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.\\n\\n------------------\\nReferences (/references):\\n\u0412\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435. \u041d\u0430\u0440\u0443\u0436\u043d\u044b\u0435 \u0441\u0435\u0442\u0438_\u0421\u041f 31.13330.2021.pdf, pages: 95\\n\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf, pages: 36\\n\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044f \u0438 \u043a\u043e\u043d\u0434\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430_\u0421\u041f 60.13330.2020.pdf, pages: 105\\n\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf, pages: 90\\n', {'\u041e\u0442\u043e\u043f\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044f \u0438 \u043a\u043e\u043d\u0434\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430_\u0421\u041f 60.13330.2020.pdf', '\u0412\u043e\u0434\u043e\u0441\u043d\u0430\u0431\u0436\u0435\u043d\u0438\u0435. \u041d\u0430\u0440\u0443\u0436\u043d\u044b\u0435 \u0441\u0435\u0442\u0438_\u0421\u041f 31.13330.2021.pdf', '\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf'... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:14", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:14", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='aee4bb72-0b17-4913-b19c-8b67fc0617c4'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:14", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:15", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:29:15", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:30:05", "last_active": "2024-12-04, 05:30:05", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:30:05", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u043d\u0430\u0439\u0434\u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 30, 4, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3133, supergroup_chat_created=False, text='\u043d\u0430\u0439\u0434\u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434'), update_id=881194013), <telegram.ext._callbackcontext.CallbackContext object at 0x0000015E4AF76D60>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000015EA8AE07C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='adf960be-4874-4270-8d0c-df78bb6575a1' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='adf960be-4874-4270-8d0c-df78bb6575a1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000015E4AA82630>, '\u043d\u0430\u0439\u0434\u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434'), kwargs: {'chat_history': [HumanMessage(content='\u043d\u0430\u0439\u0434\u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u044f \u043d\u0435 \u043c\u043e\u0433\u0443 \u0442\u043e\u0447\u043d\u043e \u0441\u043a\u0430\u0437\u0430\u0442\u044c, \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 \u0432\u0437\u044f\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0433\u043e \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u041e\u0431\u044b\u0447\u043d\u043e \u0442\u0430\u043a\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u041f (\u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b. \u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u043c\u0443 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u043e\u043c\u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0443, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043a \u0421\u041f 64.13330 \"\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438\", \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.\\n\\n------------------\\nReferences (/r... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EAB047E20>, 'json_data': {'input': [[2156, 70968, 1840, 7952, 29256, 61613, 16494, 44867, 91105, 2233, 4329, 17394, 17618, 13373, 23934, 15752, 1840, 10124, 20440, 81842, 67745, 7952, 2233, 33742, 23297, 44786, 91146, 9706]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:05 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '63', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999972', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_16502c3773e0ec4aac19032ddb7778fb', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85f575ff09185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_16502c3773e0ec4aac19032ddb7778fb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:06", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EAB047E20>, 'json_data': {'input': [[2156, 70968, 1840, 7952, 29256, 61613, 16494, 44867, 91105, 2233, 4329, 17394, 17618, 13373, 23934, 15752, 1840, 10124, 20440, 81842, 67745, 7952, 2233, 33742, 23297, 44786, 91146, 9706]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:06", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:06 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '357', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999972', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_5bb7f8a390ad8f0ac1f0f1aef226d7c3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85f5d9ce49185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5bb7f8a390ad8f0ac1f0f1aef226d7c3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EAB047E20>, 'json_data': {'input': [[19871, 17279, 220, 1227, 13, 9423, 966, 13, 679, 22, 198, 34604, 13810, 35297, 15088, 43896, 65014, 482, 220, 28599, 10693, 10298, 1506, 78876, 8164, 92582, 18999, 91105, 2233, 4329, 17394, 62491, 8379, 3865, 5927, 37405, 29256, 9239, 39988, 11122, 17766, 1532, 14391, 16331, 17165, 198, 31274, 13, 20, 23784, 11047, 12507, 90226, 1506, 1532, 11, 7820, 14837, 40590, 97991, 6856, 50306, 320, 31274, 13, 220, 16, 8, 19175, 72060, 7975, 40251, 50819, 11, 19175, 89159, 1506, 14257, 68462, 13433, 720, 5591, 4898, 3114, 1532, 5372, 44786, 46177, 5927, 5591, 19479, 6148, 5372, 44786, 18868, 58669, 2156, 21708, 40842, 14257, 15752, 3114, 12507, 320, 18, 284, 220, 1272, 11877, 482, 220, 220, 1774, 11877, 7820, 5927, 7975, 15088, 2156, 24697, 7952, 2233, 33742, 23297, 1840, 12648, 13, 720, 16604, 61642, 6148, 19479, 3865... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:07", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:07 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '62', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999625', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_240f87c46cea5e919c9d54d62a9fbf2d', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85f63c9ae9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_240f87c46cea5e919c9d54d62a9fbf2d", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EAB047E20>, 'json_data': {'input': [[36352, 6735, 17721, 70959, 6856, 4655, 64880, 91146, 9706, 50807, 13, 33006, 21, 13, 21, 13, 16, 13, 19, 28599, 17394, 70397, 27717, 5524, 29471, 4929, 33742, 7740, 81842, 67745, 91146, 64569, 38438, 44786, 8379, 6735, 8131, 90877, 93129, 73181, 41291, 41873, 49899, 18264, 5927, 39479, 2233, 47067, 5372, 34613, 20440, 49103, 22885, 720, 8164, 7753, 1840, 9706, 65811, 9882, 13, 33006, 21, 13, 21, 13, 16, 13, 20, 39903, 2233, 33742, 23297, 69775, 11, 8379, 68374, 61498, 44858, 5927, 55617, 1830, 38722, 44100, 10693, 13373, 86995, 29500, 1532, 23784, 65014, 13373, 5173, 21956, 17721, 1482, 29256, 18437, 34613, 28114, 1840, 9706, 11, 21022, 50945, 59138, 8379, 68374, 30480, 1532, 21204, 720, 14525, 49103, 13337, 28114, 1840, 9706, 330, 5591, 16331, 4655, 1, 91146, 64569, 38438, 44786, 8379, 6735, 8131, 90877, 56... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:08", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:08 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '86', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998446', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_e46dbf0ede67be6231c6941043d9d194', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85f6a9e699185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e46dbf0ede67be6231c6941043d9d194", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EAB047E20>, 'json_data': {'input': [[74598, 96256, 1506, 220, 1958, 23934, 220, 14815, 33006, 720, 12, 20440, 25756, 28086, 44938, 44786, 25756, 20346, 2156, 1830, 6856, 87172, 497, 720, 15, 11, 20, 26, 720, 12, 5173, 23297, 6148, 7486, 1482, 12, 15752, 28086, 44938, 44786, 87172, 4095, 720, 15, 11, 22, 26, 720, 12, 5173, 23297, 90877, 7820, 20346, 8164, 44786, 7740, 5524, 44075, 2156, 21708, 7820, 20346, 8164, 68742, 82472, 4095, 497, 720, 16, 11, 15, 26, 720, 12, 14391, 7975, 50506, 11562, 12394, 17165, 10693, 5173, 23297, 90877, 87172, 29249, 720, 16, 11, 20, 13, 33006, 41682, 52674, 28241, 1532, 88612, 11562, 14837, 38521, 62731, 96034, 4655, 12426, 79686, 18154, 97991, 6856, 40231, 6578, 92457, 29256, 18437, 39900, 41291, 41873, 49899, 94071, 54204, 13, 720, 17279, 31203, 14257, 77911, 20812, 1532, 13373, 57319, 8164, 21708, 13373, 11047, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:09", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '100', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998998', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_b767863df88058b3404bf2f086318fb6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85f713ba09185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b767863df88058b3404bf2f086318fb6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015EAB047E20>, 'json_data': {'input': [[11001, 109, 38438, 16494, 90211, 1830, 50436, 24697, 18154, 11562, 97341, 38657, 12648, 6578, 79327, 24697, 46177, 18154, 7820, 2233, 28089, 4655, 6578, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 11047, 10298, 8164, 7753, 8131, 56515, 16742, 62315, 87878, 46177, 7820, 7486, 43203, 720, 5591, 1482, 92878, 11562, 97341, 38657, 1506, 13, 23227, 31203, 49103, 12507, 18034, 16248, 23311, 6148, 23297, 13433, 4329, 30392, 12394, 1506, 62315, 23297, 1506, 62315, 87878, 46177, 7820, 7486, 43203, 19175, 56449, 14525, 20879, 91216, 98781, 20879, 720, 8164, 2233, 1482, 30656, 39988, 5927, 61642, 6148, 1840, 12648, 14391, 7975, 50506, 17756, 10298, 13373, 20903, 20, 4, 37405, 97991, 6856, 47273, 5524, 14082, 37906, 7094, 18999, 86995, 50693, 3865, 10298, 63233, 25756, 38722, 17721, 9542, 6856, 57297, 11122, 10298, 11... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:09 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '194', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998105', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '22ms', 'x-request-id': 'req_98e9ad924a779dd0ee4601105176588b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85f73bd399185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_98e9ad924a779dd0ee4601105176588b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 05:30:10. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 64.13330.2017\\n\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u0418\u041b -  \u0421\u0445\u0435\u043c\u0430 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0439 \u043e\u0443 \u0432 \u043f\u0440\u0438\u043e\u043f\u043e\u0440\u043d\u043e\u0439 \u0437\u043e\u043d\u0435 \u0431\u0430\u043b\u043a\u0438\\n\u0418.5 \u0412 \u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u043a\u043e\u0433\u0434\u0430 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 (\u0418. 1) \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \\n\u0432\u043a\u043b\u0435\u0435\u043d\u043d\u044b\u0445 \u0438\u043b\u0438 \u0432\u0432\u0438\u043d\u0447\u0435\u043d\u043d\u044b\u0445 \u0441\u0442\u0435\u0440\u0436\u043d\u0435\u0439 \u043f\u043e\u0434 \u0443\u0433\u043b\u043e\u043c (... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:10", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:13 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2374', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '792985', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '526ms', 'x-request-id': 'req_73c17721ed0405fe393e061394be6313', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85f76ac772dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_73c17721ed0405fe393e061394be6313", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:14", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8445955810717126, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:14", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:14", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as \\'learn more about ...\\', \\'how to determine ...\\', \\'how to calculate ...\\', etc., that the user can use to gather more information. If no additional prompts are needed, respond with \\'No suggestions needed\\'.\\n\\nUser Prompt: \u043d\u0430\u0439\u0434\u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434\\n\\nLLM Response: \u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u044f \u043d\u0435 \u0438\u043c\u0435\u044e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0439 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u042d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b (\u0421\u041f) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439. \\n\\n\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u044b \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:14", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1081', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799615', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '28ms', 'x-request-id': 'req_e68d901a31c755da520d25902227985a', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec85f8cb98c2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:15", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_e68d901a31c755da520d25902227985a", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:15", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0430\u043a \u043d\u0430\u0439\u0442\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445 \u0434\u043b\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b.', '\u0413\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0421\u041f 64.13330 \u0438\u043b\u0438 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u043c \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:15", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u044f \u043d\u0435 \u0438\u043c\u0435\u044e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0439 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u042d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b (\u0421\u041f) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439.\\n\\n\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u044b \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c, \u0442\u0430\u043a\u0438\u043c \u043a\u0430\u043a \u0421\u041f 64.13330 \"\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438\", \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b.\\n\\n------------------\\nReferences (/references):\\n\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf, pages: 90\\n\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430_\u0421\u041f 76.13330.2016.pdf, pages: 42, 49\\n\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf, pages: 33\\n', {'\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430_\u0421\u041f 76.13330.2016.pdf', '\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf', '\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf'}, ['\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0430\u043a \u043d\u0430\u0439\u0442\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445 \u0434\u043b\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:15", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:15", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='adf960be-4874-4270-8d0c-df78bb6575a1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:15", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:16", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:16", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:39", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:30:39", "last_active": "2024-12-04, 05:30:39", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:30:39", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:39", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660417542289', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 30, 15, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=490, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3134, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='suggestion:suggestion_0', text='\u0423\u0437\u043d\u0430\u0442\u044c, \u043a\u0430\u043a \u043d\u0430\u0439\u0442\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445 \u0434\u043b\u044f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x0000015E4AA30170>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b.'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='e20533c2-d273-47b9-bdbb-18a987ad4df0' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='e20533c2-d273-47b9-bdbb-18a987ad4df0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000015E4AA82630>, '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b.'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b.', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u043d\u0430\u0439\u0434\u0438 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u044f \u043d\u0435 \u0438\u043c\u0435\u044e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0439 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434. \u042d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043d\u043e\u0440\u043c\u0430\u0445 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u0445, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b (\u0421\u041f) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b, \u043a\u0430\u0441\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0434\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439.\\n\\n\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u044b \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c, \u0442\u0430\u043a\u0438\u043c \u043a\u0430\u043a \u0421\u041f 64.13330 \"\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438\", \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b.\\n\\n------------------\\nRefe... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AF274C0>, 'json_data': {'input': [[27435, 16248, 46339, 92582, 18264, 7952, 29256, 61613, 16494, 51736, 91105, 2233, 4329, 17394, 18999, 13373, 23934, 15752, 1840, 10124, 20440, 38098, 4898, 2233, 8341, 39988, 7952, 2233, 33742, 23297, 39988, 91146, 9706, 4655, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:40", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:40 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '70', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999965', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_16d8b4b077c5d71889e5d6788fa1f6e7', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86034bd862dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_16d8b4b077c5d71889e5d6788fa1f6e7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:41", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AF274C0>, 'json_data': {'input': [[27435, 16248, 46339, 92582, 18264, 7952, 29256, 61613, 16494, 51736, 91105, 2233, 4329, 17394, 18999, 13373, 23934, 15752, 1840, 10124, 20440, 38098, 4898, 2233, 8341, 39988, 7952, 2233, 33742, 23297, 39988, 91146, 9706, 4655, 13]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:41 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '91', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999965', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_95327bd11f0d855e8c4ec1501aacff05', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec8603a18a62dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_95327bd11f0d855e8c4ec1501aacff05", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AF274C0>, 'json_data': {'input': [[19871, 17279, 220, 1227, 13, 9423, 966, 13, 679, 22, 198, 54745, 38438, 61379, 7952, 2233, 33742, 23297, 1840, 12648, 34943, 13337, 48074, 20812, 72119, 67745, 5524, 9239, 1830, 6856, 46177, 60748, 6856, 12561, 38438, 68742, 56449, 14525, 62731, 720, 79862, 6850, 1840, 59138, 6850, 32330, 8131, 28089, 44786, 5524, 29256, 2233, 13337, 28089, 3114, 62491, 11, 12561, 28089, 13404, 5372, 44786, 5927, 37405, 82941, 84198, 23784, 627, 20, 13, 18, 23784, 93323, 13810, 16494, 85864, 20879, 11047, 10298, 8164, 7753, 8131, 56515, 13999, 12, 5591, 3114, 38657, 13999, 6735, 44786, 97991, 6856, 44938, 81757, 33793, 3114, 3865, 8131, 54686, 320, 4898, 3114, 29500, 6856, 720, 3865, 41036, 6856, 44938, 81757, 33793, 3114, 3865, 8131, 54686, 8, 93129, 73181, 57925, 34694, 4329, 5591, 14009, 29893, 86995, 50693, 6856, 39280, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:42 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '109', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998654', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '16ms', 'x-request-id': 'req_de7b2e5929a4df4fcba8bc48673d3f8e', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec8603ebb342dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_de7b2e5929a4df4fcba8bc48673d3f8e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AF274C0>, 'json_data': {'input': [[74598, 96256, 1506, 220, 10562, 23934, 220, 14815, 33006, 7094, 29256, 47680, 56008, 13999, 93129, 73181, 81376, 86630, 14009, 29893, 42078, 6735, 20346, 93608, 39127, 44065, 11122, 24697, 7753, 4655, 5927, 39233, 44100, 10693, 14257, 25657, 6148, 2156, 18999, 25190, 112, 1840, 44155, 1506, 11122, 1482, 12648, 720, 89554, 20346, 12426, 18999, 18868, 64478, 89348, 39103, 25756, 20346, 2156, 44613, 20879, 53419, 1840, 13999, 6148, 39900, 11122, 17721, 4329, 40590, 7740, 25190, 110, 2156, 50619, 68742, 12561, 23630, 23680, 17165, 51337, 1506, 37405, 720, 5591, 9136, 2233, 35667, 1532, 5524, 6578, 50436, 44786, 11122, 17721, 98073, 6856, 13, 720, 38214, 13, 868, 35448, 8164, 4655, 1830, 48150, 5927, 1840, 10124, 2233, 1482, 49907, 3114, 13337, 2156, 17618, 5927, 9706, 74828, 57319, 14476, 5372, 44786, 5173, 2329... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:43", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:43 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '230', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999327', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_fba7241634b43a3f2cc97ba063a9ae67', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec860438de52dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fba7241634b43a3f2cc97ba063a9ae67", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AF274C0>, 'json_data': {'input': [[36352, 6735, 17721, 70959, 6856, 4655, 64880, 91146, 9706, 50807, 13, 33006, 21, 13, 21, 13, 16, 13, 19, 28599, 17394, 70397, 27717, 5524, 29471, 4929, 33742, 7740, 81842, 67745, 91146, 64569, 38438, 44786, 8379, 6735, 8131, 90877, 93129, 73181, 41291, 41873, 49899, 18264, 5927, 39479, 2233, 47067, 5372, 34613, 20440, 49103, 22885, 720, 8164, 7753, 1840, 9706, 65811, 9882, 13, 33006, 21, 13, 21, 13, 16, 13, 20, 39903, 2233, 33742, 23297, 69775, 11, 8379, 68374, 61498, 44858, 5927, 55617, 1830, 38722, 44100, 10693, 13373, 86995, 29500, 1532, 23784, 65014, 13373, 5173, 21956, 17721, 1482, 29256, 18437, 34613, 28114, 1840, 9706, 11, 21022, 50945, 59138, 8379, 68374, 30480, 1532, 21204, 720, 14525, 49103, 13337, 28114, 1840, 9706, 330, 5591, 16331, 4655, 1, 91146, 64569, 38438, 44786, 8379, 6735, 8131, 90877, 56... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:44", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:44 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '134', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998446', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '18ms', 'x-request-id': 'req_d4758d0d67c228cd1adba0c25f2aface', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86049f9ef2dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d4758d0d67c228cd1adba0c25f2aface", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AF274C0>, 'json_data': {'input': [[74598, 96256, 1506, 220, 1958, 23934, 220, 14815, 33006, 720, 12, 20440, 25756, 28086, 44938, 44786, 25756, 20346, 2156, 1830, 6856, 87172, 497, 720, 15, 11, 20, 26, 720, 12, 5173, 23297, 6148, 7486, 1482, 12, 15752, 28086, 44938, 44786, 87172, 4095, 720, 15, 11, 22, 26, 720, 12, 5173, 23297, 90877, 7820, 20346, 8164, 44786, 7740, 5524, 44075, 2156, 21708, 7820, 20346, 8164, 68742, 82472, 4095, 497, 720, 16, 11, 15, 26, 720, 12, 14391, 7975, 50506, 11562, 12394, 17165, 10693, 5173, 23297, 90877, 87172, 29249, 720, 16, 11, 20, 13, 33006, 41682, 52674, 28241, 1532, 88612, 11562, 14837, 38521, 62731, 96034, 4655, 12426, 79686, 18154, 97991, 6856, 40231, 6578, 92457, 29256, 18437, 39900, 41291, 41873, 49899, 94071, 54204, 13, 720, 17279, 31203, 14257, 77911, 20812, 1532, 13373, 57319, 8164, 21708, 13373, 11047, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:45", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:45 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '116', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998998', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '12ms', 'x-request-id': 'req_8ca748388d5af3904d14e634eb9a48f0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec860500db82dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8ca748388d5af3904d14e634eb9a48f0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 05:30:46. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u0421\u041f 64.13330.2017\\n\u041f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0441\u043e\u0440\u0442\u043e\u0432 \u0438\u043b\u0438 \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \\n\u043d\u0435 \u043d\u0438\u0436\u0435 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0439, \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0412.\\n5.3 \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u043e-\u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:46", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:49 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '3885', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '793640', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '477ms', 'x-request-id': 'req_6e4186926472fb8e3855d26d1c689694', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec8605679792dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6e4186926472fb8e3855d26d1c689694", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:50", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8479885457804466, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:50", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:50", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as \\'learn more about ...\\', \\'how to determine ...\\', \\'how to calculate ...\\', etc., that the user can use to gather more information. If no additional prompts are needed, respond with \\'No suggestions needed\\'.\\n\\nUser Prompt: \u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b.\\n\\nLLM Response: \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043e\u0432 \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b (\u0421\u041f) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0435. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044e \u044d\u0442\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439:\\n\\n1. **\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:50", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:30:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '3492', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799221', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '58ms', 'x-request-id': 'req_533846a35bb7bc8a392f855b895f7b87', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec860717a812dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_533846a35bb7bc8a392f855b895f7b87", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:54", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u0442\u043e\u043c, \u043a\u0430\u043a \u043d\u0430\u0439\u0442\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0421\u041f \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b, \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043c\u0435\u0445\u0430\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0441\u0432\u043e\u0439\u0441\u0442\u0432 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043b\u0430\u0441\u0441 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b \u0438 \u043a\u0430\u043a \u044d\u0442\u0438 \u043a\u043b\u0430\u0441\u0441\u044b \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431?', '\u0418\u0437\u0443\u0447\u0438\u0442\u0435, \u043a\u0430\u043a \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438 (\u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c, \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430) \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b \u0438 \u043a\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u0444\u0430\u043a\u0442\u043e\u0440\u044b \u043f\u0440\u0438 \u0440\u0430\u0441\u0447\u0451\u0442\u0430\u0445.']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:54", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043e\u0432 \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b (\u0421\u041f) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0435. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044e \u044d\u0442\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439:\\n\\n1. <b>\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043a \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c</b>: \u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442 \u0438\u043b\u0438 \u0441\u0432\u043e\u0434 \u043f\u0440\u0430\u0432\u0438\u043b, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043c\u0435\u0445\u0430\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u0420\u043e\u0441\u0441\u0438\u0438 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0421\u041f 64.13330 \"\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438\".\\n\\n2. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043a\u043b\u0430\u0441\u0441\u0430 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b</b>: \u0412 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u043a\u043b\u0430\u0441\u0441\u044b \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u043f\u043e\u0440\u043e\u0434\u044b \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b \u0438 \u0435\u0451 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f (\u0441\u0443\u0445\u0430\u044f, \u0432\u043b\u0430\u0436\u043d\u0430\u044f \u0438 \u0442.\u0434.).\\n\\n3. <b>\u041d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f</b>: \u0412 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u043e\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435 \u043d\u0430\u0439\u0434\u0438\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u0438\u043b\u0438 \u0440\u0430\u0437\u0434\u0435\u043b, \u0433\u0434\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0439 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438.\\n\\n4. <b>\u0423\u0447\u0435\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438</b>: \u041f\u0440\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:54", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:54", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='e20533c2-d273-47b9-bdbb-18a987ad4df0'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:54", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:55", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:30:55", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:19", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:31:19", "last_active": "2024-12-04, 05:31:19", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:31:19", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:19", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:19", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:19", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/references'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:19", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: references_command with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 31, 18, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=11, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3136, supergroup_chat_created=False, text='/references'), update_id=881194015), <telegram.ext._callbackcontext.CallbackContext object at 0x0000015E4AA88B40>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:19", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: references_command with result: <coroutine object BotHandlers.references_command at 0x0000015E4A876A40>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:20", "name": "handlers", "levelname": "INFO", "message": "Sent reference buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:20", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:24", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:31:24", "last_active": "2024-12-04, 05:31:24", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:31:24", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:24", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:24", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:24", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='get_file:file_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:24", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: send_file with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='get_file:file_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116657982669564', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 31, 19, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3137, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='get_file:file_0', text='\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430_\u0421\u041f 76.13330.2016.pdf'),), (InlineKeyboardButton(callback_data='get_file:file_1', text='\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf'),), (InlineKeyboard... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:24", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: send_file with result: <coroutine object BotHandlers.send_file at 0x0000015E4A9AE6C0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:25", "name": "handlers", "levelname": "INFO", "message": "Download access denied for file 'E:\\knowledge_base\\russian_regulations\\\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf' to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:31:25", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:55", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:34:55", "last_active": "2024-12-04, 05:34:55", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:34:55", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:55", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:56", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:56", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='get_file:file_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:56", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: send_file with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='get_file:file_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660105002186', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 31, 19, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3137, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='get_file:file_0', text='\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430_\u0421\u041f 76.13330.2016.pdf'),), (InlineKeyboardButton(callback_data='get_file:file_1', text='\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf'),), (InlineKeyboard... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:56", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: send_file with result: <coroutine object BotHandlers.send_file at 0x0000015E4A9AE560>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:56", "name": "handlers", "levelname": "DEBUG", "message": "Initiated async task to send file '\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf' to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:56", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:34:59", "name": "handlers", "levelname": "INFO", "message": "File '\u0414\u0435\u0440\u0435\u0432\u044f\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f 64.13330.2017.pdf' sent successfully to user_id=244732168.", "taskName": "Task-5568"}
{"asctime": "2024-12-04 05:40:20", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:40:20", "last_active": "2024-12-04, 05:40:20", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:40:20", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000015E2538B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 40, 19, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3140, supergroup_chat_created=False, text='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'), update_id=881194018), <telegram.ext._callbackcontext.CallbackContext object at 0x0000015E4AF76430>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x0000015EA8AE2B60>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='03473ee6-d742-4512-8796-ad5a91b19a81' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='03473ee6-d742-4512-8796-ad5a91b19a81'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x0000015E4AA82630>, '\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b'), kwargs: {'chat_history': [HumanMessage(content='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b.', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b.\\n-----------\\n\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u0438\u0437\u0433\u0438\u0431 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0434\u0440\u0435\u0432\u0435\u0441\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043e\u0432 \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0421\u0432\u043e\u0434\u044b \u041f\u0440\u0430\u0432\u0438\u043b (\u0421\u041f) \u0438\u043b\u0438 \u0413\u041e\u0421\u0422\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0435. \u0412\u043e\u0442 \u043e\u0431\u0449\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044e \u044d\u0442\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439:\\n\\n1. <b>\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043a \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u043c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c</b>: \u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442 \u0438\u043b\u0438 \u0441\u0432\u043e\u0434 \u043f\u0440\u0430\u0432\u0438\u043b, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD28E0>, 'json_data': {'input': [[66144, 54570, 7820, 15752, 21477, 7094, 58669, 9542, 7952, 23630, 13433, 293, 284, 220, 1049, 3906, 11, 305, 284, 220, 1135, 3906, 11, 7952, 11320, 39988, 220, 18, 11562, 11, 45658, 5591, 16742, 39988, 91146, 9706, 4655]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:40:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '44', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999962', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_40235cf77967855ffce52580e9e86e44', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86e609851e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_40235cf77967855ffce52580e9e86e44", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1B20>, 'json_data': {'input': [[66144, 54570, 7820, 15752, 21477, 7094, 58669, 9542, 7952, 23630, 13433, 293, 284, 220, 1049, 3906, 11, 305, 284, 220, 1135, 3906, 11, 7952, 11320, 39988, 220, 18, 11562, 11, 45658, 5591, 16742, 39988, 91146, 9706, 4655]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:40:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '42', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999962', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_da164d8265d7011deb36e00e323bd107', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86e65ec34e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_da164d8265d7011deb36e00e323bd107", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1B20>, 'json_data': {'input': [[20976, 8164, 9239, 4655, 23934, 18868, 5591, 9239, 1506, 26539, 19479, 47273, 37405, 7952, 11320, 79862, 12561, 7975, 8341, 1506, 11, 11562, 25, 2355, 33006, 7094, 1482, 220, 1049, 720, 1041, 11562, 6578, 720, 1041, 11562, 6578, 720, 2297, 5591, 13, 220, 1049, 720, 1049, 11562, 6578, 720, 1049, 11562, 6578, 720, 35095, 28086, 7753, 57319, 20879, 25756, 9239, 41873, 97341, 39127, 39988, 81376, 1840, 720, 16, 14, 1135, 7952, 11320, 12648, 720, 1830, 28086, 7753, 57319, 720, 16, 14, 1041, 7952, 11320, 12648, 11047, 28086, 7753, 57319, 720, 35095, 28086, 7753, 57319, 20879, 13999, 2297, 56008, 13999, 26539, 19479, 47273, 11, 28114, 8164, 5372, 7094, 1840, 36352, 14009, 2233, 39988, 81376, 1840, 23784, 65014, 320, 7094, 14009, 720, 95570, 3114, 6856, 16742, 46339, 9239, 4655, 20879, 13999, 2297, 56008, 13999, 143... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:40:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '108', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999275', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_cf69cd1ca3082c6d4e91baf3e93baf23', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86e6819a4e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cf69cd1ca3082c6d4e91baf3e93baf23", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1B20>, 'json_data': {'input': [[3076, 33006, 16604, 48262, 13373, 20346, 17394, 39988, 21923, 67222, 6856, 17165, 46177, 720, 13337, 59030, 17165, 720, 39091, 19479, 92091, 44858, 720, 7094, 11320, 14525, 25756, 5591, 35387, 4329, 46177, 720, 66144, 51973, 11, 11562, 6578, 720, 39091, 19479, 92091, 48150, 720, 4898, 99714, 720, 15752, 5591, 35387, 21708, 46177, 69471, 14082, 11, 720, 12426, 1830, 13, 720, 39091, 94178, 92091, 48150, 720, 2233, 18437, 6735, 61390, 23446, 1532, 11562, 50436, 7094, 3865, 720, 15752, 5591, 35387, 4329, 64880, 46177, 720, 66144, 14082, 4898, 50807, 11, 11562, 6578, 720, 74339, 67222, 6856, 13433, 5173, 64292, 12507, 8131, 7753, 1840, 16331, 50807, 720, 1840, 11320, 5173, 3114, 9542, 12648, 64880, 96573, 7753, 1840, 16331, 50807, 720, 14525, 81376, 47805, 1532, 7952, 2233, 33742, 23297, 1840, 12648, 720, 1135, 7... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:40:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '129', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998763', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '14ms', 'x-request-id': 'req_d3c3b310124fcd8211180f5ebd122218', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86e6a6e94e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d3c3b310124fcd8211180f5ebd122218", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1B20>, 'json_data': {'input': [[4218, 33006, 16604, 48262, 720, 63873, 33742, 23297, 1840, 12648, 28599, 9239, 1830, 720, 34604, 19188, 64134, 720, 8164, 29256, 7753, 56857, 39900, 720, 2297, 56857, 18999, 720, 10124, 16331, 17165, 11, 11562, 6578, 720, 39091, 94178, 92091, 34613, 12561, 7975, 8341, 11, 11562, 720, 8164, 31203, 13373, 91216, 47273, 720, 15752, 9239, 41873, 97341, 39127, 44786, 720, 2297, 5591, 64084, 21708, 14257, 46339, 9239, 720, 8164, 31203, 13373, 91216, 47273, 720, 8164, 7753, 15298, 2233, 37277, 44786, 720, 49284, 23311, 13433, 29118, 44786, 720, 2297, 5591, 64084, 21708, 720, 8164, 31203, 13373, 91216, 47273, 720, 15752, 9239, 41873, 97341, 39127, 44786, 720, 2297, 5591, 64084, 21708, 14257, 46339, 9239, 7740, 720, 8164, 7753, 15298, 2233, 37277, 44786, 720, 49284, 23311, 13433, 29118, 44786, 720, 2297, 5591, 64084,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:40:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '63', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998892', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_91cdbd93d410bb2b31c6f103fb30c916', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86e6d2c60e77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_91cdbd93d410bb2b31c6f103fb30c916", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000015E4AAD1B20>, 'json_data': {'input': [[10124, 8, 59346, 58317, 1532, 11, 39479, 39988, 11047, 7975, 14476, 1840, 12648, 7740, 720, 30480, 31203, 12648, 720, 18, 2355, 720, 19871, 5591, 17721, 44065, 18868, 4655, 90877, 51736, 34943, 13404, 19479, 18999, 25, 33006, 720, 11320, 6735, 6856, 22885, 720, 68506, 39244, 1506, 720, 14525, 720, 8164, 9706, 4898, 80230, 94962, 720, 11320, 6735, 1532, 720, 7, 2156, 34493, 67024, 13433, 720, 8164, 7753, 8164, 5372, 7094, 1840, 36352, 14009, 2233, 14525, 720, 4898, 720, 2297, 5591, 17721, 2156, 72952, 720, 12426, 5591, 3865, 8, 720, 19, 2355, 720, 1830, 20346, 10124, 13373, 40842, 4898, 80230, 94962, 7820, 17461, 10589, 1532, 720, 19, 2355, 720, 8164, 2233, 15088, 8131, 44786, 41291, 19916, 64292, 21708, 5927, 18868, 4655, 4898, 720, 19, 2355, 33006, 19871, 5591, 17721, 44065, 5524, 56857, 18999, 74254, 38521... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:40:23 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '170', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999690', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_9b92d1bcb9e618c92f289d455cbdb5a6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86e6f79aae77c-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9b92d1bcb9e618c92f289d455cbdb5a6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 05:40:24. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retrieved context to answer the question.\\n\\n\u041e\u043f\u043e\u0440\u044b \u0438\u0437 \u0441\u0442\u0432\u043e\u0440\u0430 \u043b\u0438\u043d\u0438\u0438 \u043f\u0440\u0438 \u0434\u043b\u0438\u043d\u0435 \u043f\u0440\u043e\u043b\u0435\u0442\u0430, \u043c:  \\n \\n \\n\u0434\u043e 200 \\n100 \u043c\u043c \\n100 \u043c\u043c \\n\u0441\u0432. 200 \\n200 \u043c\u043c \\n200 \u043c\u043c \\n\u0422\u0440\u0430\u0432\u0435\u0440\u0441\u044b \u043e\u0442 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u043e\u0441\u0438 \\n1/50 \u0434\u043b\u0438\u043d\u044b \\n\u0442\u0440\u0430\u0432\u0435\u0440\u0441\u044b \\n1/100 \u0434\u043b\u0438\u043d\u044b \u0442\u0440\u0430\u0432\u0435\u0440\u0441\u044b \\n\u0422\u0440\u0430\u0432\u0435\u0440\u0441\u044b \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043b\u0438\u043d\u0438\u0438,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 02:40:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '6008', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '794977', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '376ms', 'x-request-id': 'req_8e63def15e86efd018a6b9757ce5bbb2', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec86e72882b6d0a-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8e63def15e86efd018a6b9757ce5bbb2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8530898775431425, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: 'b \\\\cdot h^2'", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 288, in generate_suggestions\n    ).format(n=n)\n      ^^^^^^^^^^^\nKeyError: 'b \\\\cdot h^2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 \u0441\u0435\u0447\u0435\u043d\u0438\u0435\u043c 200 \u043c\u043c \u0445 50 \u043c\u043c \u0438 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c\u0435\u0442\u0440\u0430, \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0440\u0430\u0441\u0447\u0435\u0442 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0444\u043e\u0440\u043c\u0443\u043b\u0430 \u0434\u043b\u044f \u0431\u0430\u043b\u043a\u0438 \u0441 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439.\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f</b> \\\\( W \\\\):\\n\\n\\\\[\\nW = \\\\frac{b \\\\cdot h^2}{6}\\n\\\\]\\n\\n\u0433\u0434\u0435 \\\\( b = 0.2 \\\\) \u043c, \\\\( h = 0.05 \\\\) \u043c.\\n\\n\\\\[\\nW = \\\\frac{0.2 \\\\cdot (0.05)^2}{6} = 0.0000833 \\\\, \\\\text{\u043c}^3\\n\\\\]\\n\\n2. <b>\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431</b> \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u043a\u043e\u043b\u043e 10 \u041c\u041f\u0430 (10,000,000 \u041d/\u043c\u00b2), \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \u0434\u0440\u0435\u0432\u0435\u0441\u0438\u043d\u044b \u0438 \u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043e\u0432.\\n\\n3. <b>\u0420\u0430\u0441\u0447\u0435\u0442 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0433\u043e \u0438\u0437\u0433\u0438\u0431\u0430\u044e\u0449\u0435\u0433\u043e \u043c\u043e\u043c\u0435\u043d\u0442\u0430</b> \\\\( M \\\\):\\n\\n\\\\[\\nM = \\\\sigma \\\\cdot W = 10,000,000 \\\\cdot 0.0000833 = 833 \\\\, \\\\text{\u041d\u043c}\\n\\\\]\\n\\n4. <b>\u0420\u0430\u0441\u0447\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \\\\( F \\\\) \u0432 \u0441\u0435\u0440\u0435\u0434\u0438\u043d\u0435 \u043f\u0440\u043e\u043b\u0435\u0442\u0430</b>:\\n\\n\\\\[\\nM = \\\\frac{F \\\\cdot L}{4}\\n\\\\]\\n\\n\u041f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u044f \\\\( M = 833 \\\\, \\\\text{\u041d\u043c} \\\\) \u0438 \\\\( L = 3 \\\\, \\\\text{\u043c} \\\\):\\n\\n\\\\[\\n833 = \\\\... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:30", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='03473ee6-d742-4512-8796-ad5a91b19a81'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:31", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:40:31", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:06", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-12-04 05:55:06", "name": "__main__", "levelname": "INFO", "message": "Logging is set up.", "taskName": null}
{"asctime": "2024-12-04 05:55:07", "name": "__main__", "levelname": "INFO", "message": "Application built with provided token.", "taskName": null}
{"asctime": "2024-12-04 05:55:07", "name": "__main__", "levelname": "INFO", "message": "DatabaseService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-04 05:55:08", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": null}
{"asctime": "2024-12-04 05:55:08", "name": "__main__", "levelname": "INFO", "message": "LLMService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-04 05:55:08", "name": "__main__", "levelname": "INFO", "message": "Handlers added to the application.", "taskName": null}
{"asctime": "2024-12-04 05:55:08", "name": "__main__", "levelname": "INFO", "message": "Bot is starting...", "taskName": null}
{"asctime": "2024-12-04 05:55:09", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-12-04 05:55:09", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-12-04 05:55:09", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-12-04 05:55:19", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:19", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:55:19", "last_active": "2024-12-04, 05:55:19", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:55:19", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:19", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001F5DE21B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 55, 18, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3142, supergroup_chat_created=False, text='/knowledge_base'), update_id=881194019), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F5839F8360>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:20", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001F58380FD00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:21", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:21", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:22", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 05:55:22", "last_active": "2024-12-04, 05:55:22", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 05:55:22", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001F5DE21B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661561124774', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 2, 55, 20, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3143, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),)... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001F583613B60>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "handlers", "levelname": "DEBUG", "message": "Found 29 valid files in folder_path='E:\\knowledge_base\\russian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001F5839F2E40>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001F5839F2E40>, 'E:\\\\knowledge_base\\\\russian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\russian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\russian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "handlers", "levelname": "INFO", "message": "Knowledge base '\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 05:55:23", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 07:55:58", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 07:55:58", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 07:55:58", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000001F5DE21B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 4, 55, 57, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3145, supergroup_chat_created=False, text='/start'), update_id=881194021), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F58392B310>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 07:55:58", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x000001F5839A4CC0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 07:55:58", "name": "handlers", "levelname": "DEBUG", "message": "User ID: 244732168, User Name: Andrey, Language Code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 07:55:58", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 07:55:58", "last_active": "2024-12-04, 07:55:58", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 07:55:58", "name": "handlers", "levelname": "INFO", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 07:55:59", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 07:55:59", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:06:17", "last_active": "2024-12-04, 08:06:17", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:06:17", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3\u043c'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x000001F5DE21B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 6, 16, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3147, supergroup_chat_created=False, text='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3\u043c'), update_id=881194022), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F583F53380>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000001F583EC3880>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='fc95df33-2508-4860-a861-c7a81e89f89b' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='fc95df33-2508-4860-a861-c7a81e89f89b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001F5839F2E40>, '\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3\u043c'), kwargs: {'chat_history': [HumanMessage(content='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3\u043c', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0433 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 b = 200mm, h = 50mm, \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c, \u0445\u0432\u043e\u0439\u043d\u043e\u0439 \u043f\u043e\u0440\u043e\u0434\u044b', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u0434\u043e\u0441\u043a\u0430 \u0441\u0435\u0447\u0435\u043d\u0438\u0435\u043c 200 \u043c\u043c \u0445 50 \u043c\u043c \u0438 \u0434\u043b\u0438\u043d\u043e\u0439 3 \u043c\u0435\u0442\u0440\u0430, \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0440\u0430\u0441\u0447\u0435\u0442 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0444\u043e\u0440\u043c\u0443\u043b\u0430 \u0434\u043b\u044f \u0431\u0430\u043b\u043a\u0438 \u0441 \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439.\\n\\n1. <b>\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0441\u043e\u043f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u044f</b> \\\\( W \\\\):\\n\\n\\\\[\\nW = \\\\frac{b \\\\cdot h^2}{6}\\n\\\\]\\n\\n\u0433\u0434\u0435 \\\\( b = 0.2 \\\\) \u043c, \\\\( h = 0.05 \\\\) \u043c.\\n\\n\\\\[\\nW = \\\\frac{0.2 \\\\cdot (0.05)^2}{6} = 0.0000833 \\\\, \\\\text{\u043c}^3\\n\\\\]\\n\\n2. <b>\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0437\u0433\u0438\u0431</b> \u0434\u043b\u044f \u0445\u0432\u043e\u0439\u043d\u044b\u0445 \u043f\u043e\u0440\u043e\u0434 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u043a\u043e\u043b\u043e 10 \u041c\u041f\u0430 (10,000,000 \u041d/\u043c\u00b2), \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F583F2C040>, 'json_data': {'input': [[19871, 4898, 54570, 21477, 7094, 58669, 9542, 41291, 19916, 11320, 6735, 35889, 2075, 37405, 12561, 7975, 8341, 1532, 220, 18, 6578]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Wed, 04 Dec 2024 05:06:18 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '74'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999979'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_f5dfcff7564a05f3c8c98813b23c38da'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=OTqgci7LklISD.Z0mgHz_zOn1ZGz9eq7KcCUO_jJoyM-1733288778-1.0.1.1-retjn7QJ.K2KnTzB8x3iLTdbc2mM5Ir__xn0bm... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f5dfcff7564a05f3c8c98813b23c38da", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:19", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225ACA0>, 'json_data': {'input': [[19871, 4898, 54570, 21477, 7094, 58669, 9542, 41291, 19916, 11320, 6735, 35889, 2075, 37405, 12561, 7975, 8341, 1532, 220, 18, 6578]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:06:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '63', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999979', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_cd340cb65fcc642351b41f7b6e677833', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec94430babb2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_cd340cb65fcc642351b41f7b6e677833", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225ACA0>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 1484, 33006, 262, 15179, 220, 220, 845, 220, 15179, 220, 220, 914, 720, 605, 220, 49520, 18437, 6735, 61390, 23446, 1532, 11562, 50436, 7094, 3865, 8379, 21204, 64880, 64362, 10693, 23446, 10693, 720, 8164, 61390, 2297, 6856, 18034, 7753, 6578, 7740, 14391, 16331, 15088, 5927, 66386, 13404, 19479, 1532, 41291, 7058, 3114, 8341, 1506, 33006, 720, 1399, 33006, 12, 1054, 482, 720, 806, 13, 35448, 1830, 4898, 3114, 17766, 17618, 20879, 64362, 23311, 13433, 11320, 64362, 10693, 1506, 720, 8164, 3114, 23630, 4898, 25262, 21708, 25, 720, 256, 5173, 7486, 12394, 21708, 19175, 2297, 43293, 67745, 18868, 5372, 7740, 48440, 10298, 44786, 720, 10124, 3114, 15088, 6856, 720, 256, 7820, 20346, 8164, 44786, 91394, 15088, 6856, 19175, 2297, 43293, 67745, 18868, 5372,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:06:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '99', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999415', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '7ms', 'x-request-id': 'req_a1128f6dc7846b5764f36df2a336b307', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec944376f072df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a1128f6dc7846b5764f36df2a336b307", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225ACA0>, 'json_data': {'input': [[74598, 96256, 1506, 220, 11247, 23934, 220, 14815, 33006, 17394, 48262, 4898, 85864, 720, 51627, 6148, 17618, 220, 18, 5524, 38521, 14257, 24803, 52429, 720, 17394, 48262, 4898, 85864, 5927, 6850, 21708, 19175, 720, 41873, 38972, 97334, 14391, 7975, 50506, 17756, 10298, 13373, 220, 18, 720, 6578, 6578, 720, 2297, 18600, 78927, 22911, 15458, 21708, 99300, 6856, 720, 41873, 64134, 62491, 5927, 58317, 56515, 14525, 3114, 1532, 720, 5591, 8, 7952, 18226, 56892, 37405, 720, 13810, 8164, 4655, 1830, 14332, 1840, 13373, 720, 15752, 7753, 6578, 8341, 34082, 61379, 5524, 17394, 8131, 4655, 6578, 720, 5591, 35387, 3865, 10693, 12507, 61813, 1532, 11562, 97341, 38657, 1506, 720, 9136, 24697, 9239, 38657, 28089, 1506, 90457, 21708, 720, 2297, 85496, 4655, 5927, 39233, 12394, 12507, 720, 19871, 85496, 1506, 5524, 91353, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:06:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '122', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999325', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '8ms', 'x-request-id': 'req_846e17054a5402acdd8b1ff45994324c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec9443deb7c2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_846e17054a5402acdd8b1ff45994324c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225ACA0>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 4364, 33006, 720, 100046, 90457, 67745, 1389, 220, 1758, 12, 1272, 2275, 94, 11, 20440, 20879, 49284, 17394, 40590, 90457, 67745, 21204, 1389, 868, 12, 508, 37386, 19871, 13, 720, 21, 13, 605, 13, 508, 220, 35889, 7486, 23297, 5372, 34613, 35875, 16742, 11562, 1506, 55523, 17165, 56449, 5372, 30889, 7975, 40251, 29893, 92457, 5173, 61613, 13337, 45093, 14257, 35592, 1532, 720, 6735, 4655, 13433, 57297, 14257, 8164, 65489, 16742, 12561, 15088, 80230, 17165, 11, 19175, 48835, 8341, 4929, 39479, 2233, 35667, 6856, 11, 91105, 3114, 35667, 6856, 13, 720, 35095, 7975, 14476, 69775, 6850, 7486, 23297, 5372, 39900, 35875, 61390, 11562, 1506, 55523, 17165, 56449, 14525, 34943, 13337, 48074, 20812, 6856, 18482, 14257, 68462, 61498, 39988, 720, 8164, 2233, 1482,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:06:21 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '88', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999150', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_79bf9543f9c97ca851a9316bf7f7fa9f', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec944414d4f2df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_79bf9543f9c97ca851a9316bf7f7fa9f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225ACA0>, 'json_data': {'input': [[19871, 17279, 220, 15633, 13, 9413, 18216, 15, 13, 2366, 17, 33006, 5958, 720, 35095, 21022, 14391, 26539, 7740, 39233, 21022, 256, 60376, 13, 18, 1389, 45458, 19479, 92091, 48150, 78876, 6735, 61390, 23446, 1532, 5927, 45916, 8341, 3865, 11562, 50436, 7094, 3865, 720, 1830, 20346, 10124, 29256, 24803, 9706, 50807, 720, 1840, 720, 51745, 1482, 56008, 12648, 64880, 720, 4898, 17766, 79370, 71829, 64880, 720, 85587, 16494, 5372, 6856, 27717, 720, 34604, 18437, 6735, 61390, 23446, 1532, 5927, 720, 2297, 48074, 3865, 11, 11562, 6578, 11, 19175, 720, 38972, 50506, 720, 60627, 21477, 6735, 49907, 1506, 90457, 67745, 17756, 84350, 21708, 21022, 2233, 6578, 8131, 3865, 39103, 46177, 21923, 9239, 37013, 6856, 39280, 320, 2297, 14257, 64322, 12507, 720, 1830, 67124, 39865, 41873, 96485, 15458, 17766, 39988, 38098, 793... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:22", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:06:22 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '69', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999500', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_bd4116d3fc379556db69cf44d8472895', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec94443aed42df8-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_bd4116d3fc379556db69cf44d8472895", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 08:06:23. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retriev... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:23", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Wed, 04 Dec 2024 05:06:27 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '4224'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '795330'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '350ms'), ('x-request-id', 'req_ca56682c65b71edd70d754f133b41fbc'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=qcVVDSxCVvB7rG.EBhH_.9cCiHzsPRomGstbMt3G3rM-1733288787-1.0.1.1-mPsequNbBChzKY3iRLv_QtELLbEijjkALoEKTPn5kItoxJQwxCVLmqb9WVLjRDZu4udEMR2pt1pDH90CTGPoWg; path=/; expires=Wed, 04... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ca56682c65b71edd70d754f133b41fbc", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:28", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8070922137613518, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:28", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:28", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3\u043c\\n\\nLLM Response: \u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3 \u043c\u0435\u0442\u0440\u0430, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u043d\u0430\u0442\u044c:\\n\\n1. **\u0422\u043e\u043b\u0449\u0438\u043d\u0443 \u043c\u0435\u0442\u0430\u043b\u043b\u0430**, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442.\\n2. **\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438**: \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u0430\u044f, \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u0430\u044f \u0438 \u0442.\u0434.\\n3. **\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b** \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 (\u043e\u0431\u044b\u0447\u043d\u043e \u044d\u0442\u043e \u0441\u0442\u0430\u043b\u044c \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u043c\u0438 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438).\\n\\n\u041f\u0440... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:06:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '915', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799347', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '48ms', 'x-request-id': 'req_ea883d27141ff2aa3d493677df902312', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec944696ea6be80-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ea883d27141ff2aa3d493677df902312", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:29", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0442\u043e\u043b\u0449\u0438\u043d\u0443 \u043c\u0435\u0442\u0430\u043b\u043b\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75.', '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438?', '\u0413\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:29", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3 \u043c\u0435\u0442\u0440\u0430, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u043d\u0430\u0442\u044c:\\n\\n1. <b>\u0422\u043e\u043b\u0449\u0438\u043d\u0443 \u043c\u0435\u0442\u0430\u043b\u043b\u0430</b>, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442.\\n2. <b>\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438</b>: \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u0430\u044f, \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u0430\u044f \u0438 \u0442.\u0434.\\n3. <b>\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b</b> \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 (\u043e\u0431\u044b\u0447\u043d\u043e \u044d\u0442\u043e \u0441\u0442\u0430\u043b\u044c \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u043c\u0438 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438).\\n\\n\u041f\u0440\u043e\u0444\u043d\u0430\u0441\u0442\u0438\u043b \u041d75 \u2014 \u044d\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043b\u0438\u0441\u0442, \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0435 \u0434\u043b\u044f \u043a\u0440\u043e\u0432\u043b\u0438 \u0438 \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u0439. \u041e\u043d \u0438\u043c\u0435\u0435\u0442 \u0432\u044b\u0441\u043e\u0442\u0443 \u043f\u0440\u043e\u0444\u0438\u043b\u044f 75 \u043c\u043c, \u0447\u0442\u043e \u043f\u0440\u0438\u0434\u0430\u0435\u0442 \u0435\u043c\u0443 \u0432\u044b\u0441\u043e\u043a\u0443\u044e \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c.\\n\\n\u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u044b\u0445 \u0440\u0430\u0441\u0447\u0435\u0442\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043d\u043e \u0431\u0435\u0437 \u0442\u043e\u0447\u043d\u044b\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u043e\u043b\u0449\u0438\u043d\u044b \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430) \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0442\u043e\u0447\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438. \u0422\u0435\u043c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435, \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u0442\u043e\u043b\u0449\u0438\u043d\u043e\u0439 \u043e\u043a\u043e\u043b\u043e 0.8 \u043c\u043c \u043e\u0431\u044b\u0447\u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u043e\u0440\u044f\u0434\u043a\u0430 300-400 \u043a\u0433/\u043c\u00b2 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3 \u043c\u0435\u0442\u0440\u0430, \u043d\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438 \u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.\\n\\n\u0414\u043b\u044f \u0442\u043e\u0447\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:29", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:29", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='fc95df33-2508-4860-a861-c7a81e89f89b'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:29", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:30", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:06:30", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:15", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:07:15", "last_active": "2024-12-04, 08:07:15", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:07:15", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:15", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:16", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:16", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_2'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:16", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001F5DE21B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_2', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116660924945990', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 6, 29, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=105, type=<MessageEntityType.BOLD>), MessageEntity(length=16, offset=158, type=<MessageEntityType.BOLD>), MessageEntity(length=8, offset=229, type=<MessageEntityType.BOLD>), MessageEntity(length=11, offset=1095, type=<MessageEntityType.BOT_COMMAND>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=Fals... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:16", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001F5839A3350>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:16", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u0413\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:16", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='08dc3c57-8c25-4a59-874f-4d0c8f940ce5' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:16", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='08dc3c57-8c25-4a59-874f-4d0c8f940ce5'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001F5839F2E40>, '\u0413\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75?'), kwargs: {'chat_history': [HumanMessage(content='\u0413\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3\u043c', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0427\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u041d75 \u043f\u0440\u0438 \u043f\u0440\u043e\u043b\u0435\u0442\u0435 3 \u043c\u0435\u0442\u0440\u0430, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u043d\u0430\u0442\u044c:\\n\\n1. <b>\u0422\u043e\u043b\u0449\u0438\u043d\u0443 \u043c\u0435\u0442\u0430\u043b\u043b\u0430</b>, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442.\\n2. <b>\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438</b>: \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u0430\u044f, \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u0430\u044f \u0438 \u0442.\u0434.\\n3. <b>\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b</b> \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 (\u043e\u0431\u044b\u0447\u043d\u043e \u044d\u0442\u043e \u0441\u0442\u0430\u043b\u044c \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u043c\u0438 \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u0438).\\n\\n\u041f\u0440\u043e\u0444\u043d\u0430\u0441\u0442\u0438\u043b \u041d75 \u2014 \u044d\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043b\u0438\u0441\u0442, \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0432 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0435 \u0434\u043b\u044f \u043a\u0440\u043e\u0432\u043b\u0438 \u0438 \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u0439. \u041e\u043d \u0438\u043c\u0435\u0435\u0442 \u0432\u044b\u0441\u043e\u0442\u0443 \u043f\u0440\u043e\u0444\u0438\u043b\u044f 75 \u043c\u043c, \u0447\u0442\u043e \u043f\u0440\u0438\u0434\u0430\u0435\u0442 \u0435\u043c\u0443 \u0432\u044b\u0441\u043e\u043a\u0443\u044e \u043f\u0440\u043e\u0447\u043d\u043e\u0441\u0442\u044c.\\n\\n\u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u044b\u0445 \u0440\u0430\u0441\u0447\u0435\u0442\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F583F2CF40>, 'json_data': {'input': [[38214, 100046, 91398, 6850, 19039, 23311, 11047, 98285, 23446, 6148, 23297, 4898, 34148, 7952, 92533, 30436, 12182, 20440, 41291, 19916, 11320, 6735, 1506, 35889, 2075, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:16 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '48', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_f32c075ef28428764dd7e2b2eef5bd7c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec9459a3e33e783-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_f32c075ef28428764dd7e2b2eef5bd7c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225AC00>, 'json_data': {'input': [[38214, 100046, 91398, 6850, 19039, 23311, 11047, 98285, 23446, 6148, 23297, 4898, 34148, 7952, 92533, 30436, 12182, 20440, 41291, 19916, 11320, 6735, 1506, 35889, 2075, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:17 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '111', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_65206b912b2c3746f9ed56db315d5838', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec9459c6b4ae783-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_65206b912b2c3746f9ed56db315d5838", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225AC00>, 'json_data': {'input': [[35095, 98285, 23446, 6148, 23297, 17165, 12415, 18600, 83586, 37773, 23784, 13, 20807, 13, 23227, 20346, 2297, 16248, 6856, 1506, 720, 27435, 9239, 2233, 30656, 9239, 1301, 249, 13, 28599, 13, 1301, 100, 7753, 13999, 44155, 6856, 1506, 720, 27435, 12507, 8164, 89052, 58060, 44858, 64362, 6735, 13433, 1301, 249, 13, 37255, 13, 36479, 65489, 6856, 16742, 198, 19871, 7094, 7486, 1482, 5927, 6850, 38722, 9239, 220, 717, 13, 2839, 13, 679, 23, 13, 720, 17279, 9706, 30765, 7486, 1482, 5927, 5173, 56857, 18482, 220, 868, 13, 2839, 13, 679, 23, 13, 720, 55258, 32330, 8131, 220, 1399, 1822, 25496, 14, 23, 13, 720, 38214, 17721, 2156, 9542, 3865, 22911, 57855, 31203, 16331, 13, 720, 41682, 12394, 13, 5173, 56857, 13, 26539, 13, 220, 23, 11, 5833, 489, 5927, 4898, 8164, 13, 220, 22, 11, 5925, 13, 720, 35095, 1840, 1100... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:17", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:18 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '84', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999747', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_6e233505777bbc694decf62a39e20b92', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec9459fdb4fe783-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6e233505777bbc694decf62a39e20b92", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225AC00>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 17, 33006, 720, 16, 13, 17, 59842, 52674, 28241, 1532, 5927, 220, 16, 13, 16, 95967, 6850, 23680, 3114, 50436, 9542, 72060, 7975, 40251, 29893, 5927, 34943, 13337, 48074, 20812, 47273, 5524, 41291, 30656, 12507, 720, 8164, 2233, 1482, 41873, 49899, 94071, 54204, 320, 17279, 17279, 34604, 705, 21022, 50945, 59138, 5524, 14082, 37906, 7094, 18482, 86995, 50693, 6856, 39280, 34943, 13337, 48074, 20812, 72119, 67745, 18868, 7486, 7058, 7094, 60488, 6856, 11, 45916, 9706, 6856, 73226, 64292, 18154, 8379, 93822, 14332, 9136, 54686, 30392, 1482, 56008, 39900, 41291, 41873, 49899, 94071, 7740, 11047, 98285, 23446, 53671, 720, 10124, 32985, 29256, 18437, 68742, 5927, 30392, 1482, 56008, 20812, 1532, 11, 73226, 64292, 5173, 21956, 17721, 39988, 92457, 29256, 18... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:19", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '140', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999228', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '9ms', 'x-request-id': 'req_8c8d51fdaa8fac446e387f69f686aee6', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec945a9c97ae783-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_8c8d51fdaa8fac446e387f69f686aee6", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225AC00>, 'json_data': {'input': [[1, 19871, 17279, 220, 1774, 13, 9423, 966, 13, 679, 22, 13, 28599, 49899, 73226, 64292, 13, 53677, 10298, 14009, 44065, 34943, 9239, 56999, 18999, 11, 81376, 47805, 39280, 7740, 720, 19916, 35297, 7094, 24697, 19190, 4655, 13, 57855, 4898, 89348, 72331, 59921, 7486, 44858, 18600, 83586, 71829, 28599, 20807, 1840, 17279, 220, 18, 13, 2437, 13, 1721, 12, 4044, 53670, 720, 25079, 92533, 57925, 25262, 18226, 61498, 36479, 17766, 2297, 66005, 7486, 1830, 17279, 37906, 2297, 720, 97641, 93781, 18999, 25, 220, 1032, 13, 2589, 13, 2366, 17, 33006, 2355, 720, 27435, 17766, 2297, 66005, 7486, 1830, 17279, 37906, 2297, 720, 2156, 23680, 50436, 44858, 73226, 6856, 36497, 40842, 7094, 58669, 13433, 720, 2185, 64301, 495, 519, 24497, 720, 74598, 96256, 1506, 220, 14590, 23934, 220, 14815, 33006, 33006, 33006, 720, 17279, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '153', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999118', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '10ms', 'x-request-id': 'req_499955a7f9fd59fca131c87387ff43fb', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec945adb9dee783-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_499955a7f9fd59fca131c87387ff43fb", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F58225AC00>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 12425, 33006, 54745, 9706, 48181, 17618, 37405, 82941, 18999, 60376, 33006, 16, 12, 4329, 62580, 1506, 33006, 19871, 30765, 15088, 11122, 5591, 52429, 33742, 63233, 320, 6578, 97341, 38657, 70959, 6856, 705, 11122, 7486, 90297, 63233, 14257, 68462, 4898, 16742, 14391, 7975, 1830, 6856, 720, 1840, 59195, 10589, 11, 93747, 20812, 5372, 44786, 44946, 99396, 17618, 54204, 7740, 5927, 13404, 17618, 58317, 56515, 14525, 31443, 33006, 55258, 50807, 11320, 4329, 11, 720, 16494, 4329, 11, 20879, 6148, 52744, 720, 54745, 13810, 5591, 1482, 7058, 5372, 34613, 720, 89554, 2233, 98073, 720, 54745, 13810, 5591, 1482, 5372, 34613, 720, 2156, 50619, 46177, 11122, 2156, 16248, 720, 7, 4898, 3114, 21708, 6578, 1482, 8, 720, 27435, 5591, 48355, 19916, 75281, 15458, 1776... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:20", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:20 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '90', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999841', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '1ms', 'x-request-id': 'req_6fedbc547aa720e3523af37774603431', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec945b15a70e783-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_6fedbc547aa720e3523af37774603431", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 08:07:21. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retri... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:21", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '2569', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '795312', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '351ms', 'x-request-id': 'req_fdf2d7c6ae69ab47f735436bef2fa80c', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec945b54bb19185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fdf2d7c6ae69ab47f735436bef2fa80c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8331776929951324, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as \\'learn more about ...\\', \\'how to determine ...\\', \\'how to calculate ...\\', etc., that the user can use to gather more information. If no additional prompts are needed, respond with \\'No suggestions needed\\'.\\n\\nUser Prompt: \u0413\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75?\\n\\nLLM Response: \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043d\u0438\u0436\u0435:\\n\\n<a href=\"http://www.gostinfo.ru\">www.gostinfo.ru</a> \\n\\n\u041d\u0430 \u044d\u0442\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75. \u041e\u0431\u044b\u0447\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438, \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u043c\u043e\u043d\u0442\u0430\u0436\u0443.\\n\\nSuggestions:', 'role': 'user'}]... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:24 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '181', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799714', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '21ms', 'x-request-id': 'req_ecfd74e607c9c4262c2a07fa48e9801e', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec945cbee759185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ecfd74e607c9c4262c2a07fa48e9801e", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "llm_service", "levelname": "DEBUG", "message": "LLM determined that no suggestions are needed.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043d\u0438\u0436\u0435:\\n\\n<a href=\"http://www.gostinfo.ru\">www.gostinfo.ru</a>\\n\\n\u041d\u0430 \u044d\u0442\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75. \u041e\u0431\u044b\u0447\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438, \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u043c\u043e\u043d\u0442\u0430\u0436\u0443.\\n\\n------------------\\nReferences (/references):\\n\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0421\u041f 20.13330.2016.pdf, pages: 77\\n\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf, pages: 10, 229\\n\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf, pages: 236\\n', {'\u0424\u0443\u043d\u0434\u0430\u043c\u0435\u043d\u0442\u044b_\u0421\u041f 45.13330.2017.pdf', '\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330_2012.pdf', '\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0421\u041f 20.13330.2016.pdf'}, None)", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:25", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='08dc3c57-8c25-4a59-874f-4d0c8f940ce5'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:26", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:26", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:51", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:07:51", "last_active": "2024-12-04, 08:07:51", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:07:51", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:51", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:51", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:51", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='suggestion:suggestion_1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:51", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_inline_buttons with args: (<handlers.BotHandlers object at 0x000001F5DE21B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='suggestion:suggestion_1', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661530144027', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 6, 29, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=105, type=<MessageEntityType.BOLD>), MessageEntity(length=16, offset=158, type=<MessageEntityType.BOLD>), MessageEntity(length=8, offset=229, type=<MessageEntityType.BOLD>), MessageEntity(length=11, offset=1095, type=<MessageEntityType.BOT_COMMAND>)), from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=Fals... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:51", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_inline_buttons with result: <coroutine object BotHandlers.handle_inline_buttons at 0x000001F5839A30F0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:52", "name": "handlers", "levelname": "INFO", "message": "User_id=244732168 clicked on suggestion '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:52", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='0a53cb82-e8e8-4d81-bf95-4a68e3ced2fb' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:52", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='0a53cb82-e8e8-4d81-bf95-4a68e3ced2fb'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:52", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:52", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000001F5839F2E40>, '\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438?'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u0413\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0413\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75?\\n-----------\\n\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043b\u0435\u0434\u0443\u0439\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043d\u0438\u0436\u0435:\\n\\n<a href=\"http://www.gostinfo.ru\">www.gostinfo.ru</a>\\n\\n\u041d\u0430 \u044d\u0442\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0439\u0442\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75. \u041e\u0431\u044b\u0447\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438, \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043f\u043e \u043c\u043e\u043d\u0442\u0430\u0436\u0443.\\n\\n------------------\\nReferences (/references):\\n\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438 \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f_\u0421\u041f 20.13330.2016.pdf, pages: 77\\n\u041d\u0435\u0441\u0443\u0449\u0438\u0435_\u0438_\u043e\u0433\u0440\u0430\u0436\u0434\u0430\u044e\u0449\u0438\u0435_\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438_\u0421\u041f_70_13330... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F583F2E3E0>, 'json_data': {'input': [[27435, 16248, 18600, 29500, 91353, 18482, 6850, 34493, 67024, 36352, 13373, 41291, 19916, 11320, 6735, 5927, 93323, 13810, 16494, 85864, 20879, 97991, 6856, 44938, 81757, 33793, 3114, 3865, 8131, 54686, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:52", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '44', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999968', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_9ed33b6e2f58d5440344647a3f360be2', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec946758cfe9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9ed33b6e2f58d5440344647a3f360be2", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:53", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F6231F4900>, 'json_data': {'input': [[27435, 16248, 18600, 29500, 91353, 18482, 6850, 34493, 67024, 36352, 13373, 41291, 19916, 11320, 6735, 5927, 93323, 13810, 16494, 85864, 20879, 97991, 6856, 44938, 81757, 33793, 3114, 3865, 8131, 54686, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:53", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:53 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '165', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999968', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_03783246babe1d8ab3e04357de02b5ea', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec9467ba9c59185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_03783246babe1d8ab3e04357de02b5ea", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F6231F4900>, 'json_data': {'input': [[10693, 1506, 11001, 118, 58060, 44786, 20440, 6850, 67745, 7820, 2233, 9542, 81301, 17165, 10693, 82702, 15298, 90189, 6578, 8131, 81301, 17165, 10693, 5927, 35387, 77628, 44938, 4390, 17279, 31203, 5173, 3114, 14332, 24803, 14332, 1840, 94508, 4655, 18600, 15298, 12507, 5372, 7094, 3865, 50819, 5524, 29256, 25262, 18226, 14009, 29893, 7740, 67969, 2233, 15298, 67589, 18482, 25756, 2233, 14332, 6148, 44065, 198, 3865, 41036, 6856, 40231, 11, 7740, 10693, 91667, 6856, 60990, 61379, 7740, 17756, 84350, 13337, 3865, 96034, 37773, 90875, 85864, 71239, 61642, 20346, 10298, 63233, 90189, 6578, 8131, 81301, 17165, 10693, 198, 19916, 16248, 37773, 6856, 81757, 33793, 3114, 3865, 8131, 54686, 5524, 14257, 64322, 12507, 53376, 8379, 18034, 16248, 23311, 6148, 23297, 17165, 10693, 11562, 8341, 1532, 17766, 38722, 37906... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:54", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:54 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '113', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4998914', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '13ms', 'x-request-id': 'req_0f4b76d6445dd519d841e040b7d3f28c', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec946820ed09185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0f4b76d6445dd519d841e040b7d3f28c", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F6231F4900>, 'json_data': {'input': [[16604, 48262, 6850, 34493, 67024, 17165, 2355, 17279, 61390, 2297, 11, 7820, 38153, 72952, 720, 8164, 31203, 82941, 51412, 6850, 34493, 67024, 13433, 720, 27435, 1482, 68506, 19916, 19916, 1840, 15458, 19190, 720, 8164, 31203, 20879, 2297, 38521, 20812, 47273, 59313, 2233, 67124, 3114, 62491, 720, 2297, 17394, 8131, 22885, 18154, 4329, 2297, 1506, 7740, 37405, 88612, 10693, 33006, 5996, 5996, 19, 198, 1591, 2355, 1591, 31658, 1041, 2355, 19871, 23630, 44075, 13337, 38438, 5372, 44858, 720, 14525, 38098, 10589, 1532, 38098, 2297, 7975, 1840, 2355, 34604, 84350, 4329, 2156, 38521, 35723, 2355, 720, 19871, 17394, 8131, 35723, 2355, 33006, 33006, 33006, 34604, 18226, 2156, 50619, 13999, 720, 2233, 18437, 8164, 92582, 5372, 44858, 2355, 34604, 84350, 4329, 2156, 38521, 35723, 2355, 720, 54745, 16494, 56857, 27717... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '139', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999644', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_70eae1c101400cf3316a6acdf32227b3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec946876a929185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_70eae1c101400cf3316a6acdf32227b3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F6231F4900>, 'json_data': {'input': [[19871, 17279, 220, 2031, 13, 9423, 966, 13, 679, 17, 720, 14087, 33006, 16, 25, 605, 8, 18154, 4329, 2297, 50807, 5524, 78876, 6735, 61390, 23446, 10298, 11562, 50436, 7094, 3865, 14257, 9136, 3114, 50807, 30392, 29256, 6856, 17165, 14391, 7975, 50506, 220, 15, 11, 20, 12561, 7975, 8341, 1506, 46177, 30392, 1482, 7058, 8164, 6856, 17165, 44946, 11047, 31203, 14257, 9136, 31443, 93129, 73181, 69556, 94975, 18154, 54261, 3865, 3114, 1532, 720, 4898, 2233, 198, 2156, 198, 8164, 2233, 198, 60474, 198, 34604, 198, 34604, 198, 78086, 111, 198, 12216, 320, 65014, 13, 1691, 8, 33006, 15752, 100046, 49520, 4898, 2233, 1389, 7820, 2233, 9542, 81301, 13433, 4329, 6850, 34493, 67024, 13433, 20440, 5524, 17394, 8131, 22885, 13373, 53419, 39988, 29619, 6856, 19479, 1532, 18034, 7753, 6578, 4655, 14257, 6148, 84350, 13433,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:55", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:55 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '66', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999058', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '11ms', 'x-request-id': 'req_dafb5fd921a4919b63b7800c89b6d9b8', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec9468d3eef9185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_dafb5fd921a4919b63b7800c89b6d9b8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000001F6231F4900>, 'json_data': {'input': [[1506, 8, 482, 37405, 37405, 82941, 84198, 5524, 23630, 44075, 13337, 38438, 5372, 39988, 6850, 34493, 67024, 17165, 7820, 5524, 17394, 8131, 72952, 18154, 4329, 2297, 3865, 26, 14391, 8, 482, 59346, 58317, 1532, 11, 7820, 18600, 84350, 4329, 2156, 38521, 72952, 18154, 4329, 2297, 3865, 33006, 34604, 13810, 35297, 15088, 220, 23, 482, 28599, 10693, 10298, 1506, 14257, 6148, 84350, 13433, 14391, 16331, 17165, 11, 14257, 4898, 2233, 67124, 61498, 39988, 5173, 29256, 7753, 56857, 12648, 64880, 18600, 50693, 38808, 1840, 58317, 37277, 4898, 85864, 2355, 23, 13, 20, 13, 19, 39903, 14009, 14391, 16331, 15088, 18154, 220, 23, 13, 20, 13, 18, 37405, 720, 28, 15, 88515, 68506, 19916, 19916, 1840, 15458, 19190, 720, 5591, 54261, 3865, 3114, 1532, 320, 5932, 8, 93129, 73181, 46339, 44075, 44100, 29893, 18154, 720, 1830,... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:56", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:07:56 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '85', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999552', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_9528e92479b63e56aed46bac7c94e1ec', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec9468f78b19185-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_9528e92479b63e56aed46bac7c94e1ec", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': 'You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don\\'t know the answer, say that you don\\'t know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 08:07:57. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retri... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:07:57", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:08:04 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '7856', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '795050', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '371ms', 'x-request-id': 'req_89782e90002ea8352547e887f2ace64f', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec946943c532dee-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_89782e90002ea8352547e887f2ace64f", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.830384759080178, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "llm_service", "levelname": "ERROR", "message": "Error generating suggestions: '8 \\\\cdot M'", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\llm_service.py\", line 289, in generate_suggestions\n    ).format(n=n)\n      ^^^^^^^^^^^\nKeyError: '8 \\\\cdot M'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0427\u0442\u043e\u0431\u044b \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. <b>\u0422\u0438\u043f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430</b>: \u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0442\u043e\u0447\u043d\u044b\u0435 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0432\u044b\u0441\u043e\u0442\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f, \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u043c\u0435\u0442\u0430\u043b\u043b\u0430 \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75 \u0432\u044b\u0441\u043e\u0442\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 75 \u043c\u043c.\\n\\n2. <b>\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438</b>: \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435, \u043a\u0430\u043a \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u043d\u0435\u0433 \u0438\u043b\u0438 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b) \u0438\u043b\u0438 \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u043e\u0447\u0435\u0447\u043d\u043e\u0435 \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435).\\n\\n3. <b>\u041f\u0440\u043e\u043b\u0435\u0442 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430</b>: \u0423\u0447\u0438\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u0434\u043b\u0438\u043d\u0443 \u043f\u0440\u043e\u043b\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u044c \u0431\u0435\u0437 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043e\u043f\u043e\u0440. \u041e\u0431\u044b\u0447\u043d\u043e \u0447\u0435\u043c \u0434\u043b\u0438\u043d\u043d\u0435\u0435 \u043f\u0440\u043e\u043b\u0435\u0442, \u0442\u0435\u043c \u043c\u0435\u043d\u044c\u0448\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442.\\n\\n4. <b>\u041a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u044b \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438</b>: \u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0432 \u0440\u0430\u0441\u0447\u0435\u0442\u044b \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0432\u0435\u0442\u0435\u0440 \u0438\u043b\u0438 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438.\\n\\n\u041f\u0440\u0438\u043c\u0435\u0440\u043d\u044b\u0439 \u0440\u0430\u0441\u0447\u0435\u0442 \u0434\u043b\u044f \u0440\u0430\u0432\u043d\u043e\u043c\u0435\u0440\u043d\u043e \u0440\u0430\u0441\u043f... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:05", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='0a53cb82-e8e8-4d81-bf95-4a68e3ced2fb'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:06", "name": "handlers", "levelname": "INFO", "message": "Sent response to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:08:06", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:10", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:48:10", "last_active": "2024-12-04, 08:48:10", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:48:10", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:11", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:11", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:11", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:11", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x000001F5DE21B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 48, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3151, supergroup_chat_created=False, text='/knowledge_base'), update_id=881194025), <telegram.ext._callbackcontext.CallbackContext object at 0x000001F6229DCD70>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:11", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000001F5E0F18EE0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:11", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:11", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:13", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:48:13", "last_active": "2024-12-04, 08:48:13", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:48:13", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:13", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:13", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:13", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:Indonesian Regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:13", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x000001F5DE21B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:Indonesian Regulations', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116661115071054', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 48, 10, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3152, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations')... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:13", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x000001F58392D380>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\indonesian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "handlers", "levelname": "DEBUG", "message": "Found 23 valid files in folder_path='E:\\knowledge_base\\indonesian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000001F5839F2E40>, 'E:\\\\knowledge_base\\\\indonesian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\indonesian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000001F5839F2E40>, 'E:\\\\knowledge_base\\\\indonesian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\indonesian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\indonesian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "handlers", "levelname": "INFO", "message": "Knowledge base 'Indonesian Regulations' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:48:14", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:00", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-12-04 08:51:00", "name": "__main__", "levelname": "INFO", "message": "Logging is set up.", "taskName": null}
{"asctime": "2024-12-04 08:51:00", "name": "__main__", "levelname": "INFO", "message": "Application built with provided token.", "taskName": null}
{"asctime": "2024-12-04 08:51:00", "name": "__main__", "levelname": "INFO", "message": "DatabaseService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-04 08:51:01", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": null}
{"asctime": "2024-12-04 08:51:01", "name": "__main__", "levelname": "INFO", "message": "LLMService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-04 08:51:01", "name": "__main__", "levelname": "INFO", "message": "Handlers added to the application.", "taskName": null}
{"asctime": "2024-12-04 08:51:01", "name": "__main__", "levelname": "INFO", "message": "Bot is starting...", "taskName": null}
{"asctime": "2024-12-04 08:51:02", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-12-04 08:51:02", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-12-04 08:51:02", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-12-04 08:51:07", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:08", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:51:07", "last_active": "2024-12-04, 08:51:07", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:51:08", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:08", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Andrey", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: en", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/knowledge_base'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: knowledge_base with args: (<handlers.BotHandlers object at 0x0000027805A9B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 51, 6, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=15, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3154, supergroup_chat_created=False, text='/knowledge_base'), update_id=881194027), <telegram.ext._callbackcontext.CallbackContext object at 0x000002782B1DC280>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:09", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: knowledge_base with result: <coroutine object BotHandlers.knowledge_base at 0x000002782B190820>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:10", "name": "handlers", "levelname": "INFO", "message": "Prompted knowledge base selection for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:10", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:11", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:51:11", "last_active": "2024-12-04, 08:51:11", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:51:11", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:11", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "INFO", "message": "Event 'inline_button' triggered by user_id=244732168, message='set_knowledge:Indonesian Regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: set_knowledge_base with args: (<handlers.BotHandlers object at 0x0000027805A9B9E0>, Update(callback_query=CallbackQuery(chat_instance='-7472414466751896971', data='set_knowledge:Indonesian Regulations', from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), id='1051116659365781138', message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 51, 9, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Pdflyx', id=7836895356, is_bot=True, username='Pdflyx_bot'), group_chat_created=False, message_id=3155, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_knowledge:\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b', text='\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u044b'),), (InlineKeyboardButton(callback_data='set_knowledge:Indonesian Regulations', text='Indonesian Regulations'),... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: set_knowledge_base with result: <coroutine object BotHandlers.set_knowledge_base at 0x0000027829E13A00>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "handlers", "levelname": "DEBUG", "message": "Set folder_path='E:\\knowledge_base\\indonesian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "handlers", "levelname": "DEBUG", "message": "Found 23 valid files in folder_path='E:\\knowledge_base\\indonesian_regulations' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_and_index_documents with args: (<llm_service.LLMService object at 0x000002782B1D9580>, 'E:\\\\knowledge_base\\\\indonesian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "llm_service", "levelname": "DEBUG", "message": "Starting load_and_index_documents for folder_path='E:\\knowledge_base\\indonesian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: load_vector_store with args: (<llm_service.LLMService object at 0x000002782B1D9580>, 'E:\\\\knowledge_base\\\\indonesian_regulations'), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "faiss.loader", "levelname": "DEBUG", "message": "Environment variable FAISS_OPT_LEVEL is not set, so let's pick the instruction set according to the current CPU", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "faiss.loader", "levelname": "INFO", "message": "Loading faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "faiss.loader", "levelname": "INFO", "message": "Successfully loaded faiss with AVX2 support.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "llm_service", "levelname": "INFO", "message": "Loaded vector store from E:\\knowledge_base\\indonesian_regulations\\vector_store", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_vector_store with result: True", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "llm_service", "levelname": "INFO", "message": "Vector store loaded from existing files in 'E:\\knowledge_base\\indonesian_regulations'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: load_and_index_documents with result: (True, 'Vector store loaded from existing files.')", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "handlers", "levelname": "INFO", "message": "Knowledge base 'Indonesian Regulations' set successfully for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:12", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=inline_button", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:32", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:51:32", "last_active": "2024-12-04, 08:51:32", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:51:32", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:32", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:32", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:32", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=244732168, message='/status'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:32", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: status with args: (<handlers.BotHandlers object at 0x0000027805A9B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 51, 31, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=7, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3157, supergroup_chat_created=False, text='/status'), update_id=881194029), <telegram.ext._callbackcontext.CallbackContext object at 0x000002782B0F3380>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:32", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: status with result: <coroutine object BotHandlers.status at 0x000002782AFC7220>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:33", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 164 of document 'GUBERNUR BALI PERATURAN DAERAH PROVINSI BALI.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:35", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 406 of document 'Peraturan Pemerintah Nomor 16 Tahun 2O2I Tentang Bangunan Gedung.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:35", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 1 of document 'Persyaratan Umum Instalasi Listrik 2000 - SNI 04-0225-2000.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:40", "name": "llm_service", "levelname": "INFO", "message": "Empty content on page 1 of document 'SNI-03-7065-2005-plambing.pdf'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:48", "name": "handlers", "levelname": "INFO", "message": "Provided status to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:51:48", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:52:24", "last_active": "2024-12-04, 08:52:24", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:52:24", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='\u041a\u0430\u043a\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0443\u0436\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000027805A9B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 52, 23, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3159, supergroup_chat_created=False, text='\u041a\u0430\u043a\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0443\u0436\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438'), update_id=881194030), <telegram.ext._callbackcontext.CallbackContext object at 0x000002782B6E7A10>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000002782B7AD300>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='608cb0bb-cf11-49df-9ff5-70c28ac91eb1' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='608cb0bb-cf11-49df-9ff5-70c28ac91eb1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000002782B1D9580>, '\u041a\u0430\u043a\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0443\u0436\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438'), kwargs: {'chat_history': [HumanMessage(content='\u041a\u0430\u043a\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0443\u0436\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438?', additional_kwargs={}, response_metadata={}), AIMessage(content='\u041a\u0430\u043a \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438?\\n-----------\\n\u0427\u0442\u043e\u0431\u044b \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0430\u043a\u0442\u043e\u0440\u043e\u0432:\\n\\n1. <b>\u0422\u0438\u043f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430</b>: \u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0442\u043e\u0447\u043d\u044b\u0435 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0432\u044b\u0441\u043e\u0442\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f, \u0442\u043e\u043b\u0449\u0438\u043d\u0430 \u043c\u0435\u0442\u0430\u043b\u043b\u0430 \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442\u0430 \u041d75 \u0432\u044b\u0441\u043e\u0442\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 75 \u043c\u043c.\\n\\n2. <b>\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438</b>: \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435, \u043a\u0430\u043a \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u043d\u0430 \u043f\u0440\u043e\u0444\u043b\u0438\u0441\u0442. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x000002782B6E8680>, 'json_data': {'input': [[27435, 16248, 50306, 39479, 2233, 47067, 56008, 44065, 7952, 92533, 4655, 77083, 12648, 20440, 18154, 77911, 17165, 7952, 12507, 1506, 13373, 64571, 48355]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers([('date', 'Wed, 04 Dec 2024 05:52:24 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-ada-002'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '140'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '4999976'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_608c242aeaa17cffc5719a67d9f95dc0'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=epDPh7QEvxGu9kMUhjMDpquKp36Yv0I50VpYB_R7Omk-1733291544-1.0.1.1-zhvHpJOmfh6COoMekau4AUdX4ZE8ZEa.x2Dew... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_608c242aeaa17cffc5719a67d9f95dc0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:25", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1ACA0>, 'json_data': {'input': [[27435, 16248, 50306, 39479, 2233, 47067, 56008, 44065, 7952, 92533, 4655, 77083, 12648, 20440, 18154, 77911, 17165, 7952, 12507, 1506, 13373, 64571, 48355]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:52:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '43', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999976', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_80106e578a4864668bb2892f1702e9ea', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec987baeab5e780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_80106e578a4864668bb2892f1702e9ea", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1ACA0>, 'json_data': {'input': [[20, 720, 47, 41996, 1609, 9258, 276, 51291, 6181, 17343, 65734, 65577, 2234, 26, 2355, 33006, 914, 13, 3700, 2693, 276, 720, 44, 1992, 72, 720, 47, 52316, 5697, 276, 720, 45767, 372, 720, 37412, 269, 720, 1114, 16744, 5463, 10482, 14, 679, 15, 720, 73468, 526, 720, 36294, 7053, 720, 56815, 26209, 720, 47, 408, 460, 276, 17343, 65734, 65577, 2234, 26, 33006, 720, 1627, 13, 3700, 2693, 276, 386, 1992, 72, 423, 17243, 452, 1916, 72, 38000, 269, 220, 843, 350, 30827, 720, 679, 15, 93164, 19878, 7053, 393, 1402, 1122, 48923, 258, 46211, 404, 23014, 720, 63919, 65734, 320, 39379, 6388, 24952, 5169, 350, 30827, 220, 679, 15, 38000, 269, 220, 16660, 1237, 2355, 720, 1544, 13, 3700, 2693, 276, 386, 1992, 72, 423, 17243, 452, 1916, 72, 38000, 269, 220, 4331, 350, 30827, 720, 679, 16, 93164, 69383, 306, 28824, 84700, 4... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:26", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:52:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '110', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999599', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_49bdd377602f025bea2390faa76297dc', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec987c269e5e780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_49bdd377602f025bea2390faa76297dc", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1ACA0>, 'json_data': {'input': [[47, 7157, 3110, 965, 198, 75736, 14451, 29661, 19877, 61389, 5987, 198, 12, 220, 17, 83, 2983, 18722, 42, 295, 306, 10602, 67950, 28999, 13597, 88, 301, 833, 70, 5169, 276, 2394, 68038, 3444, 17343, 65734, 65577, 2234, 198, 51, 786, 30768, 657, 13, 1313, 13, 68184, 306, 10602, 30892, 30280, 3178, 26045, 67950, 28999, 198, 40, 831, 198, 42, 302, 33166, 10602, 67950, 372, 263, 198, 42, 54411, 198, 35, 1955, 24218, 372, 198, 16, 198, 38991, 10426, 735, 4334, 33954, 964, 1950, 627, 17, 198, 38991, 10426, 66269, 42, 5736, 18, 198, 23912, 266, 3700, 23685, 82991, 281, 16357, 3716, 16623, 14531, 1494, 3276, 5169, 55284, 97259, 14531, 1494, 9279, 393, 336, 97259, 198, 3617, 68038, 3444, 198, 35, 17243, 15104, 55284, 97259, 14531, 1494, 1048, 8826, 55284, 97259, 198, 652, 68038, 3444, 198, 19, 198, 42, 295, 306, 1060... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:52:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '126', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999689', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '3ms', 'x-request-id': 'req_3bccde6f87a5a5c55cc087abc5a37117', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec987c5f860e780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3bccde6f87a5a5c55cc087abc5a37117", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1ACA0>, 'json_data': {'input': [[47, 7157, 926, 965, 198, 75736, 14451, 29661, 2006, 46, 61389, 5987, 198, 12, 220, 17, 83, 2031, 18722, 27899, 16623, 512, 14960, 1680, 24082, 324, 12825, 86982, 1672, 375, 32160, 10587, 19371, 51095, 423, 20718, 56534, 26209, 10418, 35989, 847, 278, 2876, 78450, 25177, 393, 336, 99692, 627, 4163, 16, 1680, 67950, 28999, 81126, 285, 19371, 833, 74, 2113, 52416, 55284, 99692, 21045, 20309, 1609, 32973, 68184, 306, 10602, 42161, 28999, 61154, 82424, 11, 13862, 716, 10036, 300, 11, 61154, 324, 79428, 11, 11824, 14, 1688, 2933, 198, 27814, 675, 266, 17343, 65734, 65577, 2234, 198, 4163, 17, 1680, 393, 41996, 1609, 9258, 276, 84077, 288, 4381, 1122, 42161, 28999, 312, 1031, 3444, 802, 9703, 5964, 324, 11, 610, 86056, 11, 757, 8826, 88560, 63888, 376, 88560, 627, 14960, 18, 1680, 32034, 38, 42168, 1247, 28824, 120... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:52:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '127', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999598', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_b487a6247f0b6a59d2a6eb429be74209', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec987c9b81ce780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_b487a6247f0b6a59d2a6eb429be74209", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1ACA0>, 'json_data': {'input': [[47, 7157, 926, 965, 198, 75736, 14451, 29661, 19877, 61389, 5987, 198, 12, 220, 17, 81, 21, 83, 18722, 18, 198, 23912, 266, 48923, 258, 3700, 3935, 28824, 52150, 62375, 276, 25566, 1494, 198, 68750, 47, 2898, 340, 33, 10746, 834, 88, 47957, 8826, 198, 19, 198, 35, 564, 28999, 38172, 74, 52288, 15907, 85795, 824, 2693, 276, 198, 716, 1263, 19148, 320, 58805, 8927, 11, 6560, 19046, 52, 2989, 4911, 198, 33, 10746, 42168, 332, 12825, 8826, 198, 20, 198, 50, 531, 49772, 266, 5034, 1609, 435, 2234, 6455, 198, 35, 17243, 15104, 198, 82, 664, 1494, 72236, 198, 21, 198, 47, 38862, 834, 531, 2192, 21045, 1048, 5964, 72, 23542, 277, 312, 1356, 53913, 198, 10835, 370, 10746, 50896, 198, 10759, 66123, 32034, 38, 198, 1542, 79344, 23741, 198, 1061, 56534, 26209, 25, 1676, 3306, 668, 5964, 324, 198, 22, 198, 78566, 29136, ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:52:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '117', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999659', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_0ab1f8dde36966e1faab064ee16e083b', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec987cdb83ae780-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_0ab1f8dde36966e1faab064ee16e083b", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 08:52:29. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retriev... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers([('date', 'Wed, 04 Dec 2024 05:52:41 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'nuanu-wimbwa'), ('openai-processing-ms', '12270'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '5000'), ('x-ratelimit-limit-tokens', '800000'), ('x-ratelimit-remaining-requests', '4999'), ('x-ratelimit-remaining-tokens', '796391'), ('x-ratelimit-reset-requests', '12ms'), ('x-ratelimit-reset-tokens', '270ms'), ('x-request-id', 'req_5c68ee39d75f1efef1b7a2dace00e387'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=AOC4xlS9rzudXDr.wUJq45hcsWCB8Qv6XaFY14tZaGk-1733291561-1.0.1.1-6xtZ1AWTpJrv7lnUWGGVI.ALlDQiSA5BJtNs9wgiZ3Pto9NhO.54jGSiO6kWUhPGF7DbpBZ.rS2QGhcPV8dtkQ; path=/; expires=Wed, 0... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:41", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_5c68ee39d75f1efef1b7a2dace00e387", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:41", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.7661506155306231, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:41", "name": "llm_service", "levelname": "DEBUG", "message": "Similarity threshold not met. Returning answer without references.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:41", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: \u041a\u0430\u043a\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0443\u0436\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438\\n\\nLLM Response: \u0414\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438 \u0432\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u044f\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:\\n\\n1. **\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435**: \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044f\u044e\u0449\u0438\u0435 \u043b\u0438\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a KTP (\u0434\u043b\u044f \u0433\u0440\u0430\u0436\u0434\u0430\u043d \u0418\u043d\u0434\u043e\u043d\u0435\u0437\u0438\u0438) \u0438\u043b\u0438 KITAS (\u0434\u043b\u044f \u0438\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0445 \u0433\u0440\u0430\u0436\u0434\u0430\u043d).\\n\\n2. **\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0435\u043c\u0435\u043b\u044c\u043d\u043e\u043c \u0443\u0447\u0430\u0441\u0442\u043a\u0435**:\\n   - \u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0435\u043c\u043b... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:42", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:52:46 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '5122', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799158', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '63ms', 'x-request-id': 'req_51ee2874f7886a9a2571ab28bfc01518', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec988221f3f355b-CGK', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:47", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_51ee2874f7886a9a2571ab28bfc01518", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:47", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['\u0423\u0437\u043d\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e (PBG) \u043d\u0430 \u0411\u0430\u043b\u0438 \u0438 \u043a\u0430\u043a\u0438\u0435 \u0448\u0430\u0433\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u044f\u0442\u044c.', '\u041a\u0430\u043a \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0430\u043a\u0438\u0435 \u044d\u043a\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a AMDAL \u0438\u043b\u0438 UKL/UPL, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043a\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438?', '\u041a\u0430\u043a \u043f\u0440\u043e\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u043c\u0435\u0441\u0442\u043d\u044b\u043c\u0438 \u043e\u0440\u0433\u0430\u043d\u0430\u043c\u0438 \u0432\u043b\u0430\u0441\u0442\u0438 \u0438\u043b\u0438 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u043d\u0442\u0430\u043c\u0438 \u043d\u0430 \u0411\u0430\u043b\u0438 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043f\u043e \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0443?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:47", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('\u0414\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438 \u0432\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u044f\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:\\n\\n1. <b>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435</b>: \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044f\u044e\u0449\u0438\u0435 \u043b\u0438\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a KTP (\u0434\u043b\u044f \u0433\u0440\u0430\u0436\u0434\u0430\u043d \u0418\u043d\u0434\u043e\u043d\u0435\u0437\u0438\u0438) \u0438\u043b\u0438 KITAS (\u0434\u043b\u044f \u0438\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0445 \u0433\u0440\u0430\u0436\u0434\u0430\u043d).\\n\\n2. <b>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0435\u043c\u0435\u043b\u044c\u043d\u043e\u043c \u0443\u0447\u0430\u0441\u0442\u043a\u0435</b>:\\n\u2022 \u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0435\u043c\u043b\u0438 (KRK).\\n\u2022 \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0435\u043c\u043b\u0438 (SIPPT), \u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f.\\n\\n3. <b>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0430 \u0437\u0435\u043c\u043b\u044e</b>: \u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0435\u043c\u043b\u0438, \u0435\u0441\u043b\u0438 \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u0437\u0435\u043c\u043b\u0438 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u0431\u0443\u0434\u0443\u0449\u0435\u0433\u043e \u0441\u0442\u0440\u043e\u0435\u043d\u0438\u044f.\\n\\n4. <b>\u042d\u043a\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b</b>: \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u044e\u0449\u0438\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u044d\u043a\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u043d\u043e\u0440\u043c\u0430\u043c, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a AMDAL, UKL/UPL \u0438\u043b\u0438 SPPL, \u0435\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e.\\n\\n5. <b>\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e (PBG)</b>: \u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0438 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f \u043a\u0432\u0438\u0442\u0430\u043d\u0446\u0438\u0435\u0439 \u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u0435 \u0432\u0441\u0435\u0445 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0445 \u0441\u0431\u043e\u0440\u043e\u0432.\\n\\n6. <b>\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0435 \u0438 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b</b>:\\n\u2022 \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438.\\n\u2022 \u0427\u0435\u0440\u0442\u0435\u0436\u0438 \u0443\u0447\u0430\u0441\u0442\u043a\u0430, \u043f\u043b\u0430\u043d\u044b, \u0440\u0430\u0437\u0440\u0435\u0437\u044b, \u0444\u0430\u0441\u0430\u0434\u044b \u0438... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:47", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:47", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='608cb0bb-cf11-49df-9ff5-70c28ac91eb1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:47", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:48", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:52:48", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 244732168, "user_name": "Andrey", "language_code": "en", "current_language": "English", "date_joined": "2024-12-04, 08:54:24", "last_active": "2024-12-04, 08:54:24", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 08:54:24", "name": "decorators", "levelname": "DEBUG", "message": "User info saved for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Updated last_active for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Fetched current_language for user_id=244732168: Russian", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "decorators", "levelname": "INFO", "message": "Event 'ai_conversation' triggered by user_id=244732168, message='Dokumen perizinan apa yang diperlukan untuk membangun rumah di Bali?'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: handle_message with args: (<handlers.BotHandlers object at 0x0000027805A9B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Andrey', id=244732168, type=<ChatType.PRIVATE>, username='Akumsk'), date=datetime.datetime(2024, 12, 4, 5, 54, 23, tzinfo=datetime.timezone.utc), delete_chat_photo=False, from_user=User(first_name='Andrey', id=244732168, is_bot=False, is_premium=True, language_code='en', username='Akumsk'), group_chat_created=False, message_id=3161, supergroup_chat_created=False, text='Dokumen perizinan apa yang diperlukan untuk membangun rumah di Bali?'), update_id=881194031), <telegram.ext._callbackcontext.CallbackContext object at 0x000002782B6E7620>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: handle_message with result: <coroutine object BotHandlers.handle_message at 0x000002782B7948B0>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "handlers", "levelname": "DEBUG", "message": "Generated conversation_id='7b4c4f43-da43-4ced-886f-39cd59acf2f1' for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "handlers", "levelname": "DEBUG", "message": "Saved user message for conversation_id='7b4c4f43-da43-4ced-886f-39cd59acf2f1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "handlers", "levelname": "DEBUG", "message": "Retrieved chat history for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: generate_response with args: (<llm_service.LLMService object at 0x000002782B1D9580>, 'Dokumen perizinan apa yang diperlukan untuk membangun rumah di Bali?'), kwargs: {'chat_history': [HumanMessage(content='Dokumen perizinan apa yang diperlukan untuk membangun rumah di Bali?', additional_kwargs={}, response_metadata={}), HumanMessage(content='\u041a\u0430\u043a\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0443\u0436\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438', additional_kwargs={}, response_metadata={}), AIMessage(content='\u0414\u043b\u044f \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u043c\u0430 \u043d\u0430 \u0411\u0430\u043b\u0438 \u0432\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u044f\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:\\n\\n1. <b>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435</b>: \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044f\u044e\u0449\u0438\u0435 \u043b\u0438\u0447\u043d\u043e\u0441\u0442\u044c, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a KTP (\u0434\u043b\u044f \u0433\u0440\u0430\u0436\u0434\u0430\u043d \u0418\u043d\u0434\u043e\u043d\u0435\u0437\u0438\u0438) \u0438\u043b\u0438 KITAS (\u0434\u043b\u044f \u0438\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0445 \u0433\u0440\u0430\u0436\u0434\u0430\u043d).\\n\\n2. <b>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0435\u043c\u0435\u043b\u044c\u043d\u043e\u043c \u0443\u0447\u0430\u0441\u0442\u043a\u0435</b>:\\n\u2022 \u0421\u043f\u0440\u0430\u0432\u043a\u0430 \u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0437\u0435\u043c\u043b\u0438 (KRK).\\n\u2022 \u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0435\u043c\u043b\u0438 (SIPPT), \u0435\u0441\u043b\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f.\\n\\n3. <b>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043d\u0430 \u0437\u0435\u043c\u043b\u044e</b>: \u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0435\u043c\u043b\u0438, \u0435\u0441\u043b\u0438 \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u0437\u0435\u043c\u043b\u0438 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u0431\u0443\u0434\u0443\u0449\u0435\u0433\u043e \u0441\u0442... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x00000278299FA520>, 'json_data': {'input': [[35, 564, 28999, 824, 450, 74276, 61693, 10587, 294, 13154, 75, 28824, 20166, 1871, 28273, 359, 14322, 1494, 1891, 64328, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:24", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:54:25 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '40', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999979', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_39b5e2eb08cd5cc7e00be13b8b314084', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec98aa49d7fc02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_39b5e2eb08cd5cc7e00be13b8b314084", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:25", "name": "llm_service", "levelname": "DEBUG", "message": "Retrieved documents with similarity scores.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1A5C0>, 'json_data': {'input': [[35, 564, 28999, 824, 450, 74276, 61693, 10587, 294, 13154, 75, 28824, 20166, 1871, 28273, 359, 14322, 1494, 1891, 64328, 30]], 'model': 'text-embedding-ada-002', 'encoding_format': 'base64'}}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:25", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:54:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '61', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999979', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_d911c4f4edd9f8ebd0bf7e75e1b1b495', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec98aaaa9bec02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_d911c4f4edd9f8ebd0bf7e75e1b1b495", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1A5C0>, 'json_data': {'input': [[16074, 2360, 220, 24996, 24394, 362, 720, 47, 7157, 358, 67286, 720, 75736, 14451, 29661, 19877, 61389, 5987, 720, 12, 220, 2618, 482, 720, 7, 18, 8, 720, 3976, 526, 34855, 3067, 97308, 10587, 55525, 301, 833, 12440, 19818, 4433, 41312, 720, 716, 450, 74276, 1891, 43327, 34855, 2605, 32384, 296, 804, 4590, 8826, 44172, 56587, 69443, 720, 79, 6260, 39406, 266, 220, 17, 320, 1072, 64, 8, 70796, 34801, 5697, 513, 63502, 14175, 99692, 276, 720, 67, 2058, 7675, 9279, 294, 6577, 460, 8826, 48894, 39934, 13, 720, 13229, 1122, 6706, 3342, 266, 720, 39, 587, 9279, 735, 365, 1662, 34879, 393, 336, 97259, 44172, 56587, 720, 72011, 278, 220, 2166, 720, 39, 587, 55284, 97259, 44172, 56587, 10804, 575, 32973, 25, 720, 64, 13, 720, 5794, 337, 587, 720, 3935, 3178, 720, 5794, 438, 266, 526, 5676, 720, 67, 564, 28999, 720, 2... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:54:26 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '112', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999531', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_ec5da040f0ba25c0962c405d41b24e66', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec98ab19e45c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ec5da040f0ba25c0962c405d41b24e66", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1A5C0>, 'json_data': {'input': [[845, 33006, 13229, 1122, 735, 291, 4381, 720, 59742, 53857, 16623, 33951, 50848, 720, 4368, 12944, 69, 220, 16, 720, 2583, 735, 752, 336, 321, 23014, 72398, 2468, 300, 25566, 1494, 720, 72011, 278, 220, 717, 33006, 7, 16, 8, 720, 1681, 68821, 26518, 65734, 53293, 2234, 59597, 1550, 404, 23014, 1891, 88518, 14531, 1494, 7625, 1609, 720, 6820, 21336, 39472, 7625, 1609, 281, 7141, 587, 51476, 10587, 2704, 14531, 1494, 23741, 503, 40843, 9279, 720, 325, 78071, 55284, 97259, 14531, 1494, 13, 2355, 7, 17, 8, 720, 2583, 14531, 1494, 513, 21946, 2706, 3444, 5213, 10011, 664, 32911, 19432, 266, 320, 16, 8, 1891, 86, 9832, 664, 8826, 720, 67, 17243, 30280, 3178, 42161, 28999, 274, 531, 49772, 266, 98759, 88518, 14531, 1494, 39472, 30280, 3178, 720, 67, 564, 28999, 597, 54411, 2704, 14531, 1494, 51476, 23741, 10587, 82... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:27", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:54:27 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '73', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999545', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '5ms', 'x-request-id': 'req_ff59f3d3cecc535c9b4a7c733aa3ed48', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec98ab66989c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_ff59f3d3cecc535c9b4a7c733aa3ed48", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1A5C0>, 'json_data': {'input': [[20, 720, 47, 41996, 1609, 9258, 276, 51291, 6181, 17343, 65734, 65577, 2234, 26, 2355, 33006, 914, 13, 3700, 2693, 276, 720, 44, 1992, 72, 720, 47, 52316, 5697, 276, 720, 45767, 372, 720, 37412, 269, 720, 1114, 16744, 5463, 10482, 14, 679, 15, 720, 73468, 526, 720, 36294, 7053, 720, 56815, 26209, 720, 47, 408, 460, 276, 17343, 65734, 65577, 2234, 26, 33006, 720, 1627, 13, 3700, 2693, 276, 386, 1992, 72, 423, 17243, 452, 1916, 72, 38000, 269, 220, 843, 350, 30827, 720, 679, 15, 93164, 19878, 7053, 393, 1402, 1122, 48923, 258, 46211, 404, 23014, 720, 63919, 65734, 320, 39379, 6388, 24952, 5169, 350, 30827, 220, 679, 15, 38000, 269, 220, 16660, 1237, 2355, 720, 1544, 13, 3700, 2693, 276, 386, 1992, 72, 423, 17243, 452, 1916, 72, 38000, 269, 220, 4331, 350, 30827, 720, 679, 16, 93164, 69383, 306, 28824, 84700, 4... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:28", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:54:28 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '86', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999599', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_3e2b63fda5bc28dc0a6c0da75debf7f0', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec98abc2e03c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_3e2b63fda5bc28dc0a6c0da75debf7f0", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x0000027829A1A5C0>, 'json_data': {'input': [[47, 7157, 259, 92610, 198, 75736, 14451, 29661, 19877, 61389, 5987, 198, 2442, 4767, 7058, 13229, 1122, 84077, 752, 360, 12825, 198, 42, 295, 306, 10602, 67950, 28999, 198, 4368, 12944, 69, 220, 16, 198, 45767, 372, 198, 72011, 278, 220, 9714, 198, 7, 16, 8, 2638, 68821, 91193, 391, 13597, 88, 301, 833, 70, 5169, 276, 17343, 65734, 65577, 2234, 198, 76, 833, 34056, 8826, 42161, 28999, 10587, 78083, 76143, 198, 375, 76018, 276, 94033, 4596, 503, 15790, 11, 10804, 575, 32973, 512, 64, 13, 42161, 28999, 91193, 391, 824, 967, 3444, 276, 81126, 285, 280, 65, 13, 42161, 28999, 91193, 391, 12077, 10011, 3444, 276, 16947, 496, 84, 32160, 280, 66, 13, 720, 67, 564, 28999, 91193, 391, 281, 16357, 3716, 16623, 26, 9279, 198, 67, 13, 42161, 28999, 91193, 391, 69383, 647, 74, 22026, 627, 7, 1691, 423, 17243, 15104, 44111... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:29", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/embeddings", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/embeddings \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:54:29 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-ada-002', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '96', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '4999641', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '4ms', 'x-request-id': 'req_fe3542d734edeee2387d271943cf46bf', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec98ac1e9e7c02e-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_fe3542d734edeee2387d271943cf46bf", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"You are a project assistant from the consultant side on design and construction projects. If the user requests a calculation, try to execute it. If there is not enough initial data, use general values that apply in most cases. If it is not possible to use general values, request from the user the conditions needed to provide the calculation. If you don't know the answer, say that you don't know. Do not include references to the source documents in your answer. If you need to use the current date, today is 2024-12-04, 08:54:30. If the prompt includes a request to provide a link to documents in context, respond with: Please follow the link below: Format your response using Telegram-compatible HTML. Use only supported tags (<b>, <strong>, <i>, <em>, <a>, <u>, <s>, <code>, <pre>, <tg-spoiler>) and use \\\\n for line breaks instead of <br>. Use the following pieces of retriev... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:30", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:54:34 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '4664', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '796100', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '292ms', 'x-request-id': 'req_df51206396bc09761936d5e9357b99c3', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec98ac69e822df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_df51206396bc09761936d5e9357b99c3", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:35", "name": "llm_service", "levelname": "DEBUG", "message": "Maximum similarity: 0.8526134175956197, RELEVANCE_THRESHOLD_PROMPT: 0.8", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:35", "name": "llm_service", "levelname": "DEBUG", "message": "References appended to the answer. RELEVANCE_THRESHOLD_DOCS: 0.7", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:35", "name": "llm_service", "levelname": "DEBUG", "message": "Generating suggestions based on user prompt and LLM response.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': \"Given the following user prompt and LLM response, determine if additional information is needed to help the user fulfill their request and continue the conversation effectively. If yes, provide up to 3 additional prompts based on key concepts in the response, such as 'learn more about ...', 'how to determine ...', 'how to calculate ...', etc., that the user can use to gather more information. If no additional prompts are needed, respond with 'No suggestions needed'.\\n\\nUser Prompt: Dokumen perizinan apa yang diperlukan untuk membangun rumah di Bali?\\n\\nLLM Response: Untuk membangun rumah di Bali, Anda memerlukan beberapa dokumen perizinan sebagai berikut:\\n\\n1. **Sertifikat Hak Atas Tanah**: Dokumen yang membuktikan kepemilikan tanah atau izin penggunaan tanah dari pemilik.\\n\\n2. **Izin Mendirikan Bangunan (IMB)**: Diperlukan untuk memastikan bahwa rencana pembangunan ... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:35", "name": "openai._base_client", "levelname": "DEBUG", "message": "Sending HTTP Request: POST https://api.openai.com/v1/chat/completions", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "HTTP Response: POST https://api.openai.com/v1/chat/completions \"200 OK\" Headers({'date': 'Wed, 04 Dec 2024 05:54:36 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'nuanu-wimbwa', 'openai-processing-ms': '1454', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '800000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '799477', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '39ms', 'x-request-id': 'req_a0e33511b90b327d29552477b69e3131', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8ec98ae5fdd12df9-DPS', 'content-encoding': 'gzip', 'alt-svc': 'h3=\":443\"; ma=86400'})", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "openai._base_client", "levelname": "DEBUG", "message": "request_id: req_a0e33511b90b327d29552477b69e3131", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "llm_service", "levelname": "DEBUG", "message": "Generated suggestions: ['Bagaimana cara mendapatkan Sertifikat Hak Atas Tanah di Bali?', 'Apa langkah-langkah untuk mengajukan Izin Mendirikan Bangunan (IMB) atau Persetujuan Bangunan Gedung (PBG) di Bali?', 'Bagaimana cara menentukan apakah Anda memerlukan dokumen AMDAL atau UKL/UPL untuk proyek pembangunan rumah Anda?']", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: generate_response with result: ('Untuk membangun rumah di Bali, Anda memerlukan beberapa dokumen perizinan sebagai berikut:\\n\\n1. <b>Sertifikat Hak Atas Tanah</b>: Dokumen yang membuktikan kepemilikan tanah atau izin penggunaan tanah dari pemilik.\\n\\n2. <b>Izin Mendirikan Bangunan (IMB)</b>: Diperlukan untuk memastikan bahwa rencana pembangunan sesuai dengan peraturan daerah setempat. IMB kini dikenal sebagai Persetujuan Bangunan Gedung (PBG).\\n\\n3. <b>Dokumen AMDAL atau UKL/UPL</b>: Dokumen Analisis Mengenai Dampak Lingkungan (AMDAL) atau Upaya Pengelolaan Lingkungan/Upaya Pemantauan Lingkungan (UKL/UPL), tergantung pada skala dan dampak lingkungan dari proyek pembangunan Anda.\\n\\n4. <b>Surat Keterangan Rencana Kota (KRK)</b>: Dokumen ini memberikan informasi mengenai rencana tata ruang dan peruntukan tanah.\\n\\n5. <b>Surat Persetujuan dari Tetangga</b>: Tergantung pada lokasi, Anda mungkin memerlukan persetujuan dari tetangga sekitar.\\n\\n6. <b>Rencana Teknis Bangunan... [TRUNCATED]", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "handlers", "levelname": "INFO", "message": "Generated response for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "handlers", "levelname": "DEBUG", "message": "Saved bot message for conversation_id='7b4c4f43-da43-4ced-886f-39cd59acf2f1'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "handlers", "levelname": "INFO", "message": "Prepared suggestion buttons for user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "handlers", "levelname": "INFO", "message": "Sent response with inline buttons to user_id=244732168", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 08:54:37", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=244732168, event_type=ai_conversation", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 09:12:39", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-273"}
{"asctime": "2024-12-04 09:12:48", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-277"}
{"asctime": "2024-12-04 09:13:01", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-281"}
{"asctime": "2024-12-04 09:13:20", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-285"}
{"asctime": "2024-12-04 09:13:49", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-289"}
{"asctime": "2024-12-04 09:14:20", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-293"}
{"asctime": "2024-12-04 09:14:50", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 387, in _request_wrapper\n    raise NetworkError(description or \"Bad Gateway\")\ntelegram.error.NetworkError: Bad Gateway", "taskName": "Task-297"}
{"asctime": "2024-12-04 09:15:30", "name": "root", "levelname": "DEBUG", "message": "Logging has been configured successfully.", "taskName": null}
{"asctime": "2024-12-04 09:15:30", "name": "__main__", "levelname": "INFO", "message": "Logging is set up.", "taskName": null}
{"asctime": "2024-12-04 09:15:31", "name": "__main__", "levelname": "INFO", "message": "Application built with provided token.", "taskName": null}
{"asctime": "2024-12-04 09:15:31", "name": "__main__", "levelname": "INFO", "message": "DatabaseService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-04 09:15:32", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": null}
{"asctime": "2024-12-04 09:15:32", "name": "__main__", "levelname": "INFO", "message": "LLMService initialized and stored in bot_data.", "taskName": null}
{"asctime": "2024-12-04 09:15:32", "name": "__main__", "levelname": "INFO", "message": "Handlers added to the application.", "taskName": null}
{"asctime": "2024-12-04 09:15:32", "name": "__main__", "levelname": "INFO", "message": "Bot is starting...", "taskName": null}
{"asctime": "2024-12-04 09:15:33", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: English (en)", "taskName": "Task-5"}
{"asctime": "2024-12-04 09:15:33", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Russian (ru)", "taskName": "Task-5"}
{"asctime": "2024-12-04 09:15:33", "name": "handlers", "levelname": "INFO", "message": "Commands set for language: Indonesian (id)", "taskName": "Task-5"}
{"asctime": "2024-12-04 09:25:47", "name": "handlers", "levelname": "ERROR", "message": "Exception while handling an update:", "exc_info": "Traceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 72, in map_httpcore_exceptions\n    yield\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 377, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 216, in handle_async_request\n    raise exc from None\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 196, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\connection.py\", line 101, in handle_async_request\n    return await self._connection.handle_async_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\http11.py\", line 143, in handle_async_request\n    raise exc\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\http11.py\", line 113, in handle_async_request\n    ) = await self._receive_response_headers(**kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\http11.py\", line 186, in _receive_response_headers\n    event = await self._receive_event(timeout=timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpcore\\_async\\http11.py\", line 238, in _receive_event\n    raise RemoteProtocolError(msg)\nhttpcore.RemoteProtocolError: Server disconnected without sending a response.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_httpxrequest.py\", line 293, in do_request\n    res = await self._client.request(\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1585, in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1674, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1702, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1739, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_client.py\", line 1776, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 376, in handle_async_request\n    with map_httpcore_exceptions():\n  File \"C:\\Users\\Andrey\\AppData\\Local\\Programs\\Python\\Python312\\Lib\\contextlib.py\", line 155, in __exit__\n    self.gen.throw(value)\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 89, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.RemoteProtocolError: Server disconnected without sending a response.\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 743, in _network_loop_retry\n    if not await do_action():\n           ^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 737, in do_action\n    return action_cb_task.result()\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_updater.py\", line 367, in polling_action_cb\n    updates = await self.bot.get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 650, in get_updates\n    updates = await super().get_updates(\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4480, in get_updates\n    await self._post(\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 619, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 354, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\_bot.py\", line 648, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 202, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 334, in _request_wrapper\n    code, payload = await self.do_request(\n                    ^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\Python_Projects\\pdflyx\\venv\\Lib\\site-packages\\telegram\\request\\_httpxrequest.py\", line 317, in do_request\n    raise NetworkError(f\"httpx.{err.__class__.__name__}: {err}\") from err\ntelegram.error.NetworkError: httpx.RemoteProtocolError: Server disconnected without sending a response.", "taskName": "Task-135"}
{"asctime": "2024-12-04 19:35:46", "name": "decorators", "levelname": "DEBUG", "message": "Initialized DatabaseService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "llm_service", "levelname": "INFO", "message": "LLMService initialized with model 'gpt-4o'.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "decorators", "levelname": "DEBUG", "message": "Initialized LLMService.", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "decorators", "levelname": "DEBUG", "message": "Set user_id: 7745097193", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "decorators", "levelname": "DEBUG", "message": "Set user_name: Klentri", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "decorators", "levelname": "DEBUG", "message": "Set language_code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "decorators", "levelname": "DEBUG", "message": "Initialized language for user_id=7745097193: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "decorators", "levelname": "INFO", "message": "Event 'command' triggered by user_id=7745097193, message='/start'", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "decorators", "levelname": "DEBUG", "message": "Entering function: start with args: (<handlers.BotHandlers object at 0x000002812611B9E0>, Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Klentri', id=7745097193, type=<ChatType.PRIVATE>, username='vidron'), date=datetime.datetime(2024, 12, 4, 16, 35, 45, tzinfo=datetime.timezone.utc), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Klentri', id=7745097193, is_bot=False, language_code='ru', username='vidron'), group_chat_created=False, message_id=3163, supergroup_chat_created=False, text='/start'), update_id=881194032), <telegram.ext._callbackcontext.CallbackContext object at 0x000002814BA9BA10>), kwargs: {}", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "decorators", "levelname": "DEBUG", "message": "Exiting function: start with result: <coroutine object BotHandlers.start at 0x000002814B7D4180>", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "handlers", "levelname": "DEBUG", "message": "User ID: 7745097193, User Name: Klentri, Language Code: ru", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:47", "name": "db_service", "levelname": "INFO", "message": "User info saved/updated successfully.", "taskName": "Application:7836895356:update_fetcher", "user_id": 7745097193, "user_name": "Klentri", "language_code": "ru", "current_language": "Russian", "date_joined": "2024-12-04, 19:35:47", "last_active": "2024-12-04, 19:35:47", "is_active": true, "access": true, "role": "user"}
{"asctime": "2024-12-04 19:35:47", "name": "handlers", "levelname": "INFO", "message": "User info saved for user_id=7745097193", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:48", "name": "handlers", "levelname": "INFO", "message": "Sent welcome message to user_id=7745097193", "taskName": "Application:7836895356:update_fetcher"}
{"asctime": "2024-12-04 19:35:48", "name": "decorators", "levelname": "DEBUG", "message": "Event log saved for user_id=7745097193, event_type=command", "taskName": "Application:7836895356:update_fetcher"}
